/* Everlast Roleplay 2014 - 2015 */
/*Sky RolePlay 2017*/
//----------- Includes ----------------//
#include <a_samp>
#include <utils>
#include <sscanf2>
#include <foreach>
#include <streamer>
#include <a_mysql>
#include <seifader>
#include <Anims>
#include <Objetos>
#include <progress2>
#include <mSelection>
#include <rz_messages>
#include <pause>

//Colorlist
#define COLOR_GREY 0x808080FF
#define COLOR_WHITE 0xFFFFFFFF
#define COLOR_YELLOW 0xFFFF00FF
#define COLOR_GREEN 0x088A08FF

//----------- AntiDeAmx ----------------//
AntiDeAMX()
{
    new a[][] =
    {
        "Unarmed (Fist)",
        "Brass K"
    };
    #pragma unused a
}
#define PLATEDISTANCE 20.0
//----------- MYSQL ----------------//
#define SQL_HOST "localhost"
#define SQL_USER "root"
#define SQL_PASS ""
#define SQL_DB "everlast"
//----------- COLORES ----------------//
#define COLOR_ROJO_NORMAL_HTML                  "{E95500}"
#define COLOR_BLANCO_HTML           			"{FFFFFF}"
#define COLOR_ROJO_HTML             			"{FF0000}"
#define CINFO               "{72B1FF}"
#define CBLANCO  	    	"{FFFFFF}"
#define CROJO               "{FF0000}"
#define	CHAMBRE    	    	"{FF7D00}"
#define	CCANSANCIO		    "{00AAFF}"
#define CNARANJA 		    "{E68C0E}"
#define CGRIS   		    "{7D8584}"
#define CPUERTA             "{5421FB}"
#define CVERDE 		    	"{6FA828}"
#define RojoIntenso         0xe70000FF
#define Rojo                0xa80707FF
#define RojoOscuro          0x5b0000FF
#define Azul                0x1229FAFF
#define Amarillo            0xfce80cFF
#define AmarilloClaro       0xfdfe8bFF
#define Ocre                0xa8961FFA
#define Verde               0x1eb032FF
#define VerdeClaro          0x88dd88FF
#define VerdeOscuro         0x036611FF
#define Naranja             0xff9c00FF
#define NaranjaOscuro       0xb57c01FF
#define Morado              0xC2A2DAFF
#define Fucsia              0xE800E877
#define Violeta             0x694cabFF
#define Gris                0xb0b0b0FF
#define GrisOscuro          0x666666FF
#define Blanco              0xFFFFFFFF
#define Blanco2             0xFFFFFF00
#define Negro               0x000000FF
#define Marron              0x562C2CD2
#define AzulOscuro          0x004d9bFF
#define AzulClaro           0x77c7ffFF
#define Rosa                0xfcc1fdFF
#define COLOR_OOCA          0x7bb7b7FF
#define COLOR_OOCB          0x4c9e9eFF
#define COLOR_OOCC          0x2e8787FF
#define COLOR_OOCD          0x187373FF
#define COLOR_OOCE          0x0a5555FF
#define Chat1               0xE6E6E6E6
#define Chat2               0xC8C8C8C8
#define Chat3               0xAAAAAAFF
#define Chat4               0x8C8C8C8C
#define Chat5               0x6E6E6E6E
#define Celeste             0x33CCAAFF
#define Aguamarina          0x00fcffFF
#define AguamarinaOscuro    0x02b1afFF
#define TEAM_MED_COLOR 		0xFF828200
#define TEAM_BLUE_COLOR 	0x3399FF00
//----------- Dialogos ----------------//
#define DialogLogueo 0 /* Dialogo Logeo */
#define Ascensor 1 /* Dialogo Ascensor LSPD */
#define Inventario 2 /* Dialogo Inventario */
#define Vestuario 3 /* Taquillas LSPD */
#define Armeria 4 /* Armería LSPD */
#define Cinturon 5 /* Cinturón LSPD */
#define Maletero 6 /* Maleteros Vehículos */
#define AutoescuelaCondIntro 7 /* Introducción Autoescuela Conducción */
#define AutoescuelaCondTema1 8 /* Tema Autoescuela Conducción */
#define AutoescuelaCondTema2 9 /* Tema Autoescuela Conducción */
#define AutoescuelaCondTema3 10 /* Tema Autoescuela Conducción */
#define AutoescuelaCondTema4 11 /* Tema Autoescuela Conducción */
#define AutoescuelaCondTema5 12 /* Tema Autoescuela Conducción */
#define AutoescuelaCondTema6 13 /* Tema Autoescuela Conducción */
#define AutoescuelaCondFinTema 14 /* Final Temas Autoescuela Conducción */
#define AutoescuelaCondPregunta1 15 /* Pregunta Autoescuela Conducción */
#define AutoescuelaCondPregunta2 16 /* Pregunta Autoescuela Conducción */
#define AutoescuelaCondPregunta3 17 /* Pregunta Autoescuela Conducción */
#define AutoescuelaCondPregunta4 18 /* Pregunta Autoescuela Conducción */
#define AutoescuelaCondPregunta5 19 /* Pregunta Autoescuela Conducción */
#define Armario 20 /* Armarios Casas */
#define Almacen 21 /* Almacén Negocios */
#define Agenda 22 /* Agenda Móvil */
#define ContactoArmas 23 /* Dialogo Contacto Armas */
#define ATMMenu 24 /* Menú principal del Cajero */
#define ATMRetirar 25 /* Retirar Dinero */
#define ATMIngresar 26 /* Ingresar Dinero */
#define ATMTransferirID 27 /* Transferir Dinero */
#define ATMTransferirCantidad 28 /* Transferir Dinero */
#define ATMBalanced 29 /* Balance */
#define VestuarioPrision 31 /* Taquillas Prisión */
#define ArmeriaPrision 32 /* Armería Prisión */
#define InformesLSED 33 /* Informes LSMD */
#define NuevaArmeriaLSPD1 34 /* Armería LSPD Lista 1 */
#define NuevaArmeriaLSPD2 35 /* Armería LSPD Lista 2 */
#define EDAD 36 /* Dialogo Edad */
#define DSEXO 37 /* Dialogo Sexo */
#define DEMAIL 38 /* Dialogo Hotmail */
#define DAYUDA 39 /* Dialogo Ayuda */
#define dGPS 40 /* Dialogo Menú GPS */
#define dGPSTRABAJOS 41 /* Dialogo GPS Trabajos */
#define dGPSINTERES  43 /* Dialogo GPS Interés*/
#define UniformeLSMD  44 /* Dialogo Uniforme LSMD */
#define UniformeWCST  45 /* Dialogo Uniforme Mecánicos */
#define dGPSHOTELES   46 /* Dialogo GPS Hoteles*/
#define dGPSROPA  51/* Dialogo GPS Hoteles*/
#define UniformeCNN   47 /* Dialogo Uniforme CNN */
#define dGPSCONCESIONARIOS 48 /* Dialogo GPS Concesionarios */
#define dVehRenta 49 /* Dialogo Vehículos de Renta */
#define dAyuda2   50 /* Responder Ayuda 2 */
//----------- Configuración ----------------//
#if !defined isnull
	#define isnull(%1) \
		((%1[0] == 0) || (%1[0] == 1 && %1[1] == 0))
#endif
#define AddToBuffer(%1) strcat(dialog, %1); strcat(dialog, "\n")

#pragma unused Seifader_OnExit
#define RandomEx(%0,%1) floatround(random((%1) - (%0)) + (%0))
//----------- Defines Generales ----------------//
#define NOEXISTE (-1) //NOEXISTE

#define ADMIN_SPEC_TYPE_NONE	0 /* Sistema Rcon */
#define ADMIN_SPEC_TYPE_PLAYER 	1 /* Sistema Rcon */
#define ADMIN_SPEC_TYPE_VEHICLE 2 /* Sistema Rcon */

#define MAX_LSEDINFORMES 200 /* Máximo informes LSMD */
#define MAX_DROP_ITEM 1000 /* Máximo objetos caídos en el suelo */
#define MAX_CAR_DATA 83 /* Máximo de coches concesionarios */
#define MAX_COPOBJS 300 /* Máximo objetos de trafico */
#define MAX_HOUSES 1000 /* Máximo de casas */
#define MAX_NEGS 200 /* Máximo de negocios */
#define MIN_CAR_HEALTH 350 /* Máximo daño soportado vehículos */

#define MIN_HAMBRE 20 /* Hambre Mínima */
#define MIN_SED 15 /* Sed Mínima */
#define MAX_HAMBRE 240 /* Hambre Máxima */
#define MAX_SED 180 /* Sed Máxima */
#define MAX_TURFS 80 /* Máximos Turfs */
#define MAX_FACCS 30 /* Máximas Facciones */
#define MAX_PLANTACIONES 400 /* Máximas Plantaciones */
#define MAX_LUGARESPINTAR 29 /* Misión Pintar */
#define MAX_PING 1000 /* Máximo Ping Permitido */
#define MAX_SALUDOS 7 /* Comando /Saludo */
//----------- Test de ROL ----------------//
#define MENSAJE    3500
#define PREGUNTA1  3501
#define PREGUNTA2  3502
#define PREGUNTA3  3503
#define PREGUNTA4  3504
#define PREGUNTA5  3505
#define PREGUNTA6  3506
#define PREGUNTA7  3507
#define PREGUNTA8  3508
#define PREGUNTA9  3509

new Preguntas[MAX_PLAYERS], Fallo[MAX_PLAYERS];
//PlayerInfo

enum ieInfo /* Informes Médicos */
{
	Float:ieX,
	Float:ieY,
	Float:ieZ,
	ieJugador,
	ieTimer,
	ieEstado /* NOEXISTE - Vacío | 0 - Sin atender | 1 - En camino */
}
new InformeEmergencias[MAX_LSEDINFORMES][ieInfo];

enum saludo /* Comando /Saludo */
{
	animliba[24],
	animnamea[64],
}
new animsaludo[MAX_SALUDOS][saludo]=
{
	{	"GANGS", "prtial_hndshk_biz_01"},
	{	"GANGS", "hndshkcb"},
	{	"GANGS", "hndshkea"},
	{	"GANGS", "hndshkfa"},
	{	"GANGS", "hndshkba"},
	{	"ON_LOOKERS", "wave_loop"},
	{	"PED", "endchat_03"}
}; /* nº animación para saludo coordinado */

new	Float:barbell_pos[][] = /* Sistema de Fuerza */
{
	{ 774.42907715,1.88309872,1000.48834229,0.00000000,270.00000000,87.99966431 }, /* Los Santos Gym's BarBell */
	{ 765.85528564,-48.86857224,1000.64093018,0.00000000,89.49993896,0.00000000 }, /* San Fierro Gym's BarBell */
	{ 765.34039307,-59.18271637,1000.63793945,0.00000000,89.49993896,181.25012207 } /* Las Venturas Gym's BarBell */
};

new Float:PressBancaPlayerPos[][] = /* Sistema de Fuerza */
{
	{ 773.0491,1.4285,1000.7209, 269.2024 }, /* Los Santos Gym's bench */
	{ 766.3170,-47.3574,1000.5859, 179.2983 }, /* San Fierro Gym's bench */
	{ 764.9001,-60.5580,1000.6563, 1.9500 } /* Las Venturas Gym's bench */
};

enum PintarInfo /* Misión Graffiti */
{
	Float:GraffitiX,
	Float:GraffitiY,
	Float:GraffitiZ,
	Float:GraffitiRotZ,
	GraffitiObjeto,
	Texto,
}

new LugaresPintar[MAX_LUGARESPINTAR][PintarInfo] = {
{2452.8999000,-1758.4000000,15.0000000,90.0000000,17969}, // (2)
{2473.1001000,-1902.2800000,14.6000000,270.0000000,17969}, // (3)
{2519.0500000,-1956.7000000,14.8000000,180.0000000,17969}, // (4)
{2238.6001000,-1687.4900000,15.2000000,90.0000000,17969}, // (5)
{2743.6899000,-1947.7800000,14.6000000,270.0000000,17969}, // (6)
{2756.3501000,-2027.5100000,14.6000000,180.0000000,17969}, // (7)
{2688.8000000,-2065.2700000,15.1000000,270.0000000,17969}, // (8)
{2351.0000000,-2024.0900000,14.5000000,180.0000000,17969}, // (9)
{2365.8000000,-1910.0000000,14.5000000,0.0000000,17969}, // (10)
{2101.6001000,-1868.4600000,14.6000000,270.0000000,17969}, // (11)
{1992.8000000,-1568.9900000,14.6000000,315.0000000,17969}, // (12)
{1929.0200000,-2017.7000000,14.5000000,180.0000000,17969}, // (13)
{1860.0000000,-2095.5000000,14.2000000,90.0000000,17969}, // (14)
{2112.7000000,-1942.9698000,13.8500000,90.0000000,17969}, // (15)
{2457.3999000,-2065.2700000,14.6000000,270.0000000,17969}, // (16)
{2812.3999000,-1534.2000000,12.4000000,90.0000000,17969}, // (17)
{2668.1499000,-1586.1899000,16.2000000,180.0000000,17969}, // (18)
{2536.8000000,-1476.8500000,25.2000000,270.0000000,17969}, // (19)
{2397.1001000,-1468.2600000,24.6000000,90.0000000,17969}, // (21)
{2335.0701000,-1319.5900000,25.2000000,180.0000000,17969}, // (22)
{2184.5000000,-1338.1500000,25.0000000,90.0000000,17969}, // (23)
{2019.4800000,-1293.3000000,24.6000000,180.0000000,17969}, // (24)
{2009.7000000,-1089.9100000,25.3000000,70.0000000,17969}, // (25)
{2235.1001000,-1001.9100000,60.4000000,325.0000000,17969}, // (26)
{2684.0000000,-1114.3199000,70.2000000,270.0000000,17969}, // (27)
{2057.6299000,-1770.9000000,14.3000000,0.0000000,17969}, // (28)
{2420.9500000,-1391.0000000,25.2000000,0.0000000,17969}, // (29)
{2458.8899000,-1707.3300000,14.6600000,90.0000000,17969}, // (30)
{1813.5000000,-1425.6000000,14.6000000,0.0000000,17969} // (31)
};

new PreciosContactoArmas[23] =
{
700, /* Katana x3 */
7400, /* M1911 x7 */
1000, /* Cargador M1911 x7 */
1800, /* Balas .45 ACP x4 (400 balas) */
9500, /* D. Eagle x5 */
1400, /* Cargador D. Eagle x5 */
1500, /* Balas .50 AE x2 (200 balas) */
9000, /* Tec-9 x5 */
1300, /* Cargador Tec-9 x5 */
9200, /* UZI x5 */
1300, /* Cargador UZI x5 */
12000, /* MP5 x5 */
1500, /* Cargador MP5 x5 */
1700, /* Balas SMG x3 (300 balas) */
7800, /* Escopeta x3 */
8400, /* Escopeta recortada x4 */
1700, /* Cartuchos 12GA x2 (100 balas) */
16000, /* Ak-47 x3 */
2200, /* Cargador Ak-47 x3 */
2600, /* Balas Ak-47 x2 (140 balas) */
12000, /* Rifle x3 */
1700, /* Cargador rifle x3 */
2500 /* Balas rifle x2 (140 balas) */
};

new Float:PuntosDeposito[] =
{
	1599.5999800, -1843.3000500,
	1659.5000000, -1843.3000500,
	1660.5000000, -1803.0000000,
	1634.6999500, -1803.0000000,
	1595.1999500, -1787.0000000,
	1595.3000500, -1819.9000200,
	1599.5000000, -1819.9000200
};

enum JobInfo
{
	Float:Jx,
	Float:Jy,
	Float:Jz,
	JobNombre[50],
	JobPay,
}

new Jobs[5][JobInfo] = {
{1956.7390,-2183.5740,13.5469, "Piloto", 180},
{-382.5518,-1426.3771,26.2122, "Cosechador", 100},
{1490.2891,1305.7198,1093.2964, "Taxista", 200},
{2123.2236,-1185.7349,24.0278, "Ladrón", 0},
{2956.0686,-1523.8318,2.3078, "Pescador", 140}
};

enum GasInfo
{
	Float:Gx,
	Float:Gy,
	Float:Gz,
}

new Gasolineras[24][GasInfo] = {
{1943.5142,-1778.6586,13.3906},
{1939.7996,-1778.6815,13.3906},
{1939.8942,-1766.9197,13.3828},
{1943.3844,-1767.1453,13.3906},
{998.6356,-939.6005,42.1797},
{997.9169,-936.0325,42.1797},
{1009.0403,-934.1290,42.1797},
{1009.5673,-937.7452,42.1797},
{653.4891,-559.3002,16.3359},
{657.3637,-559.3730,16.3359},
{657.5588,-569.9615,16.3359},
{653.9529,-569.7607,16.3359},
{1384.1082,456.9087,19.9571},
{1385.3381,460.0052,20.0927},
{1380.5359,462.2381,20.0940},
{1378.7128,459.2202,19.9545},
{-83.3342,-1165.4142,2.2170},
{-88.0746,-1176.9706,2.1100},
{-92.1125,-1176.0807,2.2040},
{-87.4660,-1164.8755,2.2813},
{-90.3410,-1162.1790,2.2290},
{-95.5275,-1174.2206,2.3244},
{-98.6937,-1173.3170,2.4057},
{-93.5770,-1161.4047,2.2160}
};

enum Parking{
    Float:parkPosX,
    Float:parkPosY,
    Float:parkPosZ,
    Float:parkPosA,
    parkINTExt,
    parkVWExt,
    Float:parkPosXX,
    Float:parkPosYY,
    Float:parkPosZZ,
    Float:parkPosAA,
    parkINTInt,
};

static ParkInfo[][Parking] = {
    /* EXTERIOR                                - INTERIOR */
    /*  X        Y           Z        A  INT VW  XX        YY        ZZ        A      INT */
    {1768.0229, -2032.0867, 13.6906, 0.0, 0, 0, 614.0005, -74.8299, 997.9922, 270.0, 2}, /* Parking Taller LS 1 */
    {1769.4469, -2049.0681, 13.5616, 0.0, 0, 0, 614.0005, -74.8299, 997.9922, 270.0, 2}, /* Parking Taller LS 2 */
    {1751.6825, -2059.5466, 13.5931, 0.0, 0, 0, 614.0005, -74.8299, 997.9922, 270.0, 2}, /* Parking Taller LS 3 */
    {1769.0739, -2022.8633, 14.1460, 0.0, 0, 0, 614.0005, -74.8299, 997.9922, 270.0, 2}  /* Parking Taller LS 4 */
};

new Float:Mostradores[31][3] = {
{-22.1840,-138.3363,1003.5469},
{-23.4186,-55.2088,1003.5469},
{681.4297,-453.3886,-25.6172},
{-225.2983,1404.2106,27.7734},
{498.3913,-75.4957,998.7578},
{453.4103,-107.5514,999.4292},
{2258.0786,1622.2975,1637.5493},
{450.4141,-84.0793,999.5547},
{447.6464,-62.7804,999.3400},
{-783.9854,500.2360,1371.7422},
{375.7310,-119.3098,1001.4995},
{379.0211,-187.8832,1000.6328},
{378.1023,-67.8428,1001.5151},
{369.6903,-6.6289,1001.8589},
{499.6445,-20.7924,1000.6797},
{1207.3638,-28.6835,1000.9531},
{969.2510,-44.8382,1001.1172},
{1214.2813,-13.1513,1000.9219},
{-2653.5898,1407.5006,906.2734},
{290.1703,-109.3636,1001.5156},
{295.5641,-80.5888,1001.5156},
{-1753.8821,790.4277,167.6844},
{-2326.7366,927.7168,59.7178},
{1005.5494,52.8569,55.3221},
{683.7972,-661.1636,-46.2927},
{206.4069,-100.7421,1005.2578},
{162.8261,-83.6720,1001.8047},
{204.4586,-159.5702,1000.5234},
{206.6214,-8.0639,1001.2109},
{203.9312,-43.5412,1001.8047},
{207.0655,-129.3970,1003.5078}
};

new Float:ChecksCosechador[18][3] = {
{-322.4297,-1475.6787,14.2840},
{-258.2964,-1485.2852,6.5286},
{-234.9556,-1522.3761,8.0218},
{-296.3396,-1543.0264,10.2185},
{-182.4065,-1409.5905,4.0504},
{-185.1138,-1358.1989,5.3088},
{-231.4681,-1332.0410,10.8363},
{-287.8214,-1342.2283,8.4548},
{-292.0815,-1391.9467,12.1514},
{-253.6083,-1375.1813,11.2880},
{-384.9917,-1365.8877,24.4146},
{-452.0677,-1385.6948,25.3850},
{-543.4974,-1409.8652,14.7486},
{-565.0435,-1334.7450,23.2383},
{-492.0044,-1314.4167,30.6119},
{-399.2313,-1296.9722,31.2470},
{-417.7039,-1334.4792,27.0369},
{-481.5393,-1343.8591,28.5447}
};

new Float:ChecksPescador[14][3] = {
{3000.3999000,-1300.5000000,0.0000000},
{2991.3000000,-1215.0000000,0.0000000},
{3085.7000000,-1230.6000000,0.0000000},
{3036.8000000,-1136.5000000,0.0000000},
{3165.3999000,-1130.0000000,0.0000000},
{3228.0000000,-1230.0000000,0.0000000},
{3123.0000000,-1319.8000000,0.0000000},
{3151.0000000,-1231.1000000,0.0000000},
{3103.2000000,-1160.7000000,0.0000000},
{3096.8000000,-1075.4000000,0.0000000},
{3251.8000000,-1126.7000000,0.0000000},
{3314.6001000,-1186.5000000,0.0000000},
{3207.8999000,-1307.8000000,0.0000000},
{3057.7000000,-1358.3000000,0.0000000}
};

new Float:ChecksPracticoCoche[25][3] = {
{2083.8384,-1909.9130,13.0878},
{2064.1917,-1750.0286,13.0916},
{1806.7062,-1730.0574,13.0952},
{1532.0228,-1719.6244,13.0885},
{1469.6788,-1590.0376,13.0883},
{1327.1499,-1570.3623,13.0696},
{1359.5898,-1420.1453,13.0885},
{1275.1090,-1392.8582,12.8965},
{1193.8380,-1452.7954,13.0884},
{1170.4027,-1569.7462,13.0187},
{1147.9176,-1695.4690,13.4866},
{1173.0892,-1829.7229,13.1053},
{1315.5731,-1854.8386,13.0883},
{1500.7313,-1874.6880,13.0884},
{1691.8389,-1833.0457,13.0876},
{1805.4043,-1834.7416,13.0898},
{1824.0209,-1768.3755,13.0875},
{2066.3369,-1754.5487,13.0989},
{2187.1626,-1746.5713,13.0838},
{2213.2336,-1755.7191,13.0602},
{2216.1309,-1877.9962,13.0873},
{2097.3159,-1891.9930,13.0653},
{2070.7659,-1930.3083,13.1709},
{2056.5637,-1912.8885,13.2516},
{2056.5637,-1912.8885,13.2516}
};

new Float:ChecksPracticoAvion[20][3] = {
{1990.5405,-2493.9075,13.9999}, /* Checkpoint Normal */
{1626.7603,-2493.7266,35.0753},
{1382.7904,-2495.9976,70.4945},
{1136.2195,-2250.9355,126.3928},
{1086.2787,-1989.6184,156.3511},
{1081.8361,-1656.4224,141.6575},
{1209.8287,-1189.9451,139.0757},
{1337.7214,-717.1565,167.4657},
{1679.4834,-579.6104,178.6736},
{2135.8313,-698.1968,230.3436},
{2310.5337,-1147.2543,206.4147},
{2081.8853,-1489.0309,162.9519},
{1531.5393,-1678.0157,129.7650},
{890.2695,-1796.2018,128.2029},
{650.6389,-2122.5435,117.1550},
{955.8991,-2429.2781,69.4324},
{1360.0757,-2490.7454,39.1671},
{1896.0840,-2494.7896,14.0299}, /* Checkpoint Normal */
{1991.5916,-2286.5642,14.0084}, /* Checkpoint Normal */
{1991.5916,-2286.5642,14.0084} /* Checkpoint Normal */
};

new Float:ChecksPracticoBarco[22][3] = {
{2955.8306,-1566.0105,0.0000},
{2952.9165,-1731.8145,0.0000},
{2933.9338,-1878.5146,0.0000},
{2967.1619,-1997.9015,0.0000},
{2915.7917,-2200.9465,0.0000},
{2687.1826,-2288.4944,0.0000},
{2589.1243,-2259.1838,0.0000}, /* Inicio Zig Zag */
{2537.5554,-2310.5278,0.0000},
{2432.0896,-2283.2939,0.0000},
{2411.4243,-2407.7388,0.0000},
{2293.3662,-2466.7073,0.0000}, /* Último Zig Zag */
{2334.9001,-2512.5293,0.0000},
{2322.9963,-2728.0398,0.0000},
{2515.9067,-2749.3672,0.0000},
{2793.8657,-2633.9517,0.0000},
{2903.1611,-2467.6028,0.0000},
{2971.9250,-2207.9082,0.0000},
{2974.5806,-1991.9218,0.0000},
{2933.9338,-1878.5146,0.0000},
{2955.8306,-1566.0105,0.0000},
{0.00000,0.0000,0.0000},
{0.00000,0.0000,0.0000}
};

enum AutoInfo
{
	Float:AutoX,
	Float:AutoY,
	Float:AutoZ,
	AutoNombre[50],
}

new AutoEscuelas[3][AutoInfo] = {
{-2032.9701,-117.4753,1035.1719,"Permiso de Conducción"},
{2017.1357,-2274.4543,13.5969,"Permiso de Aviación"},
{2943.1257,-1552.9116,2.0250,"Permiso de Navegación"}
};



new VehicleNames[][] = /* Nombre de Vehículos */
{
    "Landstalker", "Bravura", "Buffalo", "Linerunner", "Perrenial", "Sentinel",
    "Dumper", "Firetruck", "Trashmaster", "Stretch", "Manana", "Infernus",
    "Voodoo", "Pony", "Mule", "Cheetah", "Ambulancia", "Leviathan", "Moonbeam",
    "Esperanto", "Taxi", "Washington", "Bobcat", "Whoopee", "BF Injection",
    "Hunter", "Premier", "Enforcer", "Securicar", "Banshee", "Predator", "Bus",
    "Rhino", "Barracks", "Hotknife", "Trailer", "Previon", "Coach", "Cabbie",
    "Stallion", "Rumpo", "RC Bandit", "Romero", "Packer", "Monster", "Admiral",
    "Squalo", "Seasparrow", "Pizzaboy", "Tram", "Trailer", "Turismo", "Speeder",
    "Reefer", "Tropic", "Flatbed", "Yankee", "Caddy", "Solair", "Berkley's RC Van",
    "Skimmer", "PCJ-600", "Faggio", "Freeway", "RC Baron", "RC Raider", "Glendale",
    "Oceanic","Sanchez", "Sparrow", "Patriot", "Quad", "Coastguard", "Dinghy",
    "Hermes", "Sabre", "Rustler", "ZR-350", "Walton", "Regina", "Comet", "BMX",
    "Burrito", "Camper", "Marquis", "Baggage", "Dozer", "Maverick", "News Chopper",
    "Rancher", "FBI Rancher", "Virgo", "Greenwood", "Jetmax", "Hotring", "Sandking",
    "Blista Compact", "Police Maverick", "Boxville", "Benson", "Mesa", "RC Goblin",
    "Hotring Racer A", "Hotring Racer B", "Bloodring Banger", "Rancher", "Super GT",
    "Elegant", "Journey", "Bike", "Mountain Bike", "Beagle", "Cropduster", "Stunt",
    "Tanker", "Roadtrain", "Nebula", "Majestic", "Buccaneer", "Shamal", "Hydra",
    "FCR-900", "NRG-500", "HPV1000", "Cement Truck", "Tow Truck", "Fortune",
    "Cadrona", "FBI Truck", "Willard", "Forklift", "Tractor", "Combine", "Feltzer",
    "Remington", "Slamvan", "Blade", "Freight", "Streak", "Vortex", "Vincent",
    "Bullet", "Clover", "Sadler", "Firetruck", "Hustler", "Intruder", "Primo",
    "Cargobob", "Tampa", "Sunrise", "Merit", "Utility", "Nevada", "Yosemite",
    "Windsor", "Monster", "Monster", "Uranus", "Jester", "Sultan", "Stratium",
    "Elegy", "Raindance", "RC Tiger", "Flash", "Tahoma", "Savanna", "Bandito",
    "Freight Flat", "Streak Carriage", "Kart", "Mower", "Dune", "Sweeper",
    "Broadway", "Tornado", "AT-400", "DFT-30", "Huntley", "Stafford", "BF-400",
    "News Van", "Tug", "Trailer", "Emperor", "Wayfarer", "Euros", "Hotdog", "Club",
    "Freight Box", "Trailer", "Andromada", "Dodo", "RC Cam", "Launch", "Patrulla LSPD",
    "Patrulla SFPD", "Patrulla LVPD", "Ranger de policía", "Picador", "S.W.A.T", "Alpha",
    "Phoenix", "Glendale", "Sadler", "Luggage", "Luggage", "Stairs", "Boxville",
    "Tiller", "Utility Trailer"
};

new Float:RandLogin[5][9] = /* Vistas en el Login */
{
{1419.3607, -1630.4677, 54.4267, 1491.6999, -1684.9000, 14.1900, 1405.0000, -1621.0000, 49.0000},
{515.0692, -1557.2420, 42.1758, 541.9000, -1468.1999, 14.3999, 511.0000, -1548.0000, 23.0000},
{2107.2641, -1870.8756, 31.2371, 2084.3000, -1813.6999, 13.0000, 2104.0000, -1877.0000, 15.0000},
{1809.6683, -1814.1533, 51.6329, 1827.0000, -1863.8000, 13.0000, 1732.2802,-1879.2351,13.5623},
{133.2111, -1973.0588, 50.5363, 226.8999, -1939.4000, 41.2000, 154.0000, -1952.0000, 11.0000}
};

new GunNames[47][] = /* Nombre de Armas */
{
"Puños",
"Puño americano",
"Palo de golf",
"Porra",
"Cuchillo",
"Bate",
"Pala",
"Palo de billar",
"Katana",
"Motosierra",
"Dildo rosa",
"Dildo blanco",
"Vibrador blanco",
"Vibrador plateado",
"Ramo de flores",
"Bastón",
"Granada",
"Granada de gas",
"Cóctel molotov",
"",
"",
"",
"M1911",
"M1911 silenciada",
"Desert Eagle",
"Escopeta",
"Escopeta recortada",
"Escopeta de combate",
"UZI",
"MP5",
"AK-47",
"M16",
"TEC-9",
"Rifle",
"Rifle francotirador",
"Bazoka",
"Bazoka térmico",
"Lanzallamas",
"Minigun",
"C4",
"Detonador",
"Spray",
"Extintor",
"Cámara",
"Gafas nocturnas",
"Gafas térmicas",
"Paracaidas"
};

enum CajeroInfo /* Puntos de Cajero */
{
	Float:cX,
	Float:cY,
	Float:cZ,
}

new Cajeros[50][CajeroInfo] = {
{1811.1999500,-1873.8000500,13.1000000},
{2723.5000000,-2030.3000500,13.1000000},
{2423.0000000,-1991.3000500,13.1000000},
{2507.3000500,-1919.9000200,13.1000000},
{2156.5000000,-1903.6999500,13.1000000},
{1972.5999800,-1999.5000000,13.1000000},
{1631.9000200,-2237.8999000,13.1000000},
{1583.0999800,-1863.0999800,13.1000000},
{1370.3000500,-1856.6999500,13.1000000},
{1073.5000000,-1861.5000000,13.1000000},
{2502.6999500,-1725.0999800,13.1000000},
{2059.3184000,-1761.4301000,13.1000000},
{1922.0000000,-1765.5000000,13.1000000},
{1363.4000200,-1758.1999500,13.1000000},
{1767.1999500,-1722.9000200,13.1000000},
{1174.1999500,-1702.9000200,13.6000000},
{433.7000100,-1728.8000500,9.1000000},
{2811.6999500,-1648.0000000,10.4000000},
{1674.5000000,-1613.5999800,13.1000000},
{1410.8000500,-1583.0999800,13.1000000},
{1169.0000000,-1581.5000000,13.1000000},
{852.4000200,-1616.0000000,13.1000000},
{606.9000200,-1572.9000200,15.7000000},
{387.2999900,-1864.9000200,7.4000000},
{342.1000100,-1601.5000000,32.8000000},
{2751.5000000,-1465.4000200,30.0000000},
{2652.0000000,-1452.8000500,30.1000000},
{2440.6999500,-1480.9000200,23.6000000},
{2321.8000500,-1375.0999800,23.6000000},
{2669.1999500,-1095.5000000,68.9000000},
{2154.3999000,-1019.5999800,62.3000000},
{2238.3999000,-1150.0000000,25.4000000},
{1970.9000200,-1283.0999800,23.5000000},
{1549.5000000,-1715.3000500,13.1000000},
{1779.3000500,-1190.5999800,23.5000000},
{1805.1999500,-1353.0000000,14.8000000},
{1493.0999800,-1152.0000000,23.6000000},
{1366.9000200,-1307.0000000,13.1000000},
{1573.8000500,-1431.5999800,13.1000000},
{1320.8000500,-898.2000100,39.1000000},
{1103.8000500,-1290.1999500,13.1000000},
{1102.8000500,-1425.5000000,15.4000000},
{1065.8000500,-1026.8000500,31.7000000},
{909.4000200,-1337.8000500,13.1000000},
{777.5999800,-1064.4000200,24.3000000},
{512.7999900,-1468.6999500,14.5000000},
{485.6000100,-1271.6999500,15.3000000},
{833.6003,3.2366,1004.1797},
{830.6824,-0.2687,1004.1797},
{780.9000200,-1423.8000500,13.1000000}
};

enum plantaInfo
{
	plSQLID,
	plTipo,
	Float:plX,
	Float:plY,
	Float:plZ,
	plPlantador[36],
	plEstado,
	Text3D:plPickup,
	plObjeto,
	plVW,
	plInt,
}
new PlantaInfo[MAX_PLANTACIONES][plantaInfo];

enum pInfo /* Información del Jugador */
{
	pContra[128], // Contraseña del Jugador
	pSQLID,// ID Base de Datos del Jugador
	pNombre[41], // Nombre del Jugador
	pAdmin, // Nivel Administrativo
	pBloqueado, // Si el Juegador esta ban
	pPrimerLogueo, // Primera vez que entra
	pEdad, // Edad del jugador IC
	pSexo, // Género del jugador IC
	pNivel, // Nivel del jugador
	pExp, // Experiencia del jugador
	Float:pVida, // Vida del jugador
	Float:pChaleco, // Armadura del jugador
	pTelefono, // Teléfono del jugador
	pTrabajo, // Trabajo del jugador
	Float:pPosX, // Posición X
	Float:pPosY, // Posición Y
	Float:pPosZ, // Posición Z
	pDineroBanco, // Dinero en banco
	pDineroMano, // Dinero en cartera
	pEncarcelado, // Encarcelado
	pTiempoCarcel, // Tiempo de prisión
	pSpecID, // Sistema RECON
	pSpecType, // Sistema RECON
	pSkin, // Skin del jugador
	pFaccion, // Facción del jugador
	pRango, // Rango del jugador de una facción
	pLider, // Liderazgo de una facción
	pPuntosRol, // Puntos de rol
	pHabPistola, // Habilidad M1911
	pHabSD, // Habilidad Silenciada
	pHabDEagle, // Habilidad Desert Eagle
	pHabEscopeta, // Habilidad escopeta
	pHabSawnoff, // Habilidad escopeta recortada
	pHabEscopetaCom, // Habilidad escopeta de combate
	pHabUZI, // Habilidad TEC-9 y UZI
	pHabMP5, // Habilidad MP5
	pHabAK47, // Habilidad AK47
	pHabM4, // Habilidad M4
	pHabFranco, // Habilidad francotirador
	pInterior, // Interior del jugador al desconectarse
	pVirtualWorld, // VW del jugador al desconectarse
	pBol[8], // Slot de cada bolsillo
	pBolCant[8], // Cantidad de cada bolsillo
	pManoIzq, // Objeto en mano izquierda
	pManoIzqCant, // Cantidad objeto mano izquierda
	pManoDer, // Objeto en mano derecha
	pManoDerCant, // Cantidad objeto en mano derecha
	pMuerto, // Sistema de muerte (en crack)
	pEspalda, // Arma en la espalda
	pEspaldaCant, // Munición en la espalda
	pCint[8], // Slot de cada cinturón
	pCintCant[8], // Cantidad de cada cinturón
	pServicioPD, // Servicio LSPD
	pServicioLSMD,// Servicio LSMD
	pServicioWCST,// Servicio Mecánico
	pServicioCNN,// Servicio CNN
	pLlaveCoche[5], // Llaves de vehiculos propios
	pLlaveCochePrestado[5], // Llaves de vehiculos prestados
	pMinPayDay, // Minutos conectados en relacción al payday
	pLicConduccion, // Licencia conducción
	pLicNavegacion, // Licencia navegación
	pLicAviacion, // Licencia aviación
	pLicArmas, // Licencia armas
	pYo,// Comando /estado
	pCasa, // Casa del jugador
	pCasaAlq, // Casa alquilada del jugador
	pNegocio, // Negocio del jugador
	pHabPil,// Habilidad Piloto
	pHabLad, // Habilidad de ladrón
	pTiempoRobo, // Tiempo que tiene que pasar para volver a robar
	pHambre, // Hambre del personaje
	pSed, // Sed del personaje
	pAdiccion[5], // Adiccion a las drogas
	pDrConsumida[5], // Drogas consumidad
	pFuerza, // Fuerza del jugador
	pCansancioEntrenar, // Cansancio despues de entrenar
	pMinutosJugador, // Tiempo total jugado
	pTest,// Test de ROL
	pCorreo[128],// Hotmail del Jugador
	pEstado[128],// Guarda estado del Jugador
	pNivelPiloto,// Trabajo Piloto
	pPremium,// Si el jugador es VIP.
    pPasajeros,// Fin Trabajo Piloto.
    pOnDuty,
};
new PlayerInfo[MAX_PLAYERS][pInfo];

enum cInfo /* Información del Vehículo */
{
	cSQLID, // ID en base de datos
	cID, // ID en SAMP
	cLlave, // Llave del vehículo
	cModelo, // Modelo del vehículo
	Float:cPosX, // Posición X
	Float:cPosY, // Posición Y
	Float:cPosZ, // Posición Z
	Float:cZAngle, // Ángulo
	cColor1, // Color 1
	cColor2, // Color 2
	cComprado, // Si tiene propietario
	cDueno[MAX_PLAYER_NAME], // Nombre del propietario
	cNombreModelo[MAX_PLAYER_NAME], // Nombre del modelo
	cValor, // Coste del vehículo
	cCerrado, // Si está cerrado
	cGas, // Combustible
	cEnDeposito, // Si está en el depósito
	cMaletero[7], // Slot de cada maletero
	cMaleteroCant[7], // Cantidad de cada maletero
	cMaxMaletero, // Número de slots que el maletero podrá tener
	cPanels, // Daño superficies
	cDoors, // Daño puertas
	cLights, // Daño luces
	cTires, // Ruedas pinchadas
	Float:cDamage, // Daño del vehículo
	cVirtualWorld, // VW del vehículo
	cInterior, // Interior del vehículo
};
new CarInfo[MAX_VEHICLES][cInfo];

enum hInfo /* Información de Casas */
{
	hSQLID, // ID en base de datos
	Float:hEntradaX, // Pos x de entrada
	Float:hEntradaY, // Pos y de entrada
	Float:hEntradaZ, // Pos z de entrada
	Float:hSalidaX, // Pos x de salida
	Float:hSalidaY, // Pos y de salida
	Float:hSalidaZ, // Pos z de salida
	hBarrio[90], // Nombre del barrio
	hVirtualWorld, // VW de la casa
	hInterior, // Int de la casa
	hVirtualWorld2, // VW de salida
	hInterior2, // Int de salida
	hValor, // Precio de la casa
	hComprada, // Si está comprada
	hDueno[60], // Nombre del dueño
	hCerrada, // Si está cerrada
	Text3D:hPickup, // 3DTextLabel
	hAlquilable, // Si está alquilable
	hPAlquiler, // Precio de alquiler
	hInquilinos, // Personas residentes en la casa
	hArmario[10], // Slot de cada armario
	hArmarioCant[10], // Cantidad de cada slot
	hDineroGuardado, // Dinero guardado en la casa
};
new HouseInfo[MAX_HOUSES][hInfo];

enum nInfo /* Información de Negocios */
{
	nSQLID, // ID en base de datos
	Float:nEntradaX, // Pos x de entrada
	Float:nEntradaY, // Pos y de entrada
	Float:nEntradaZ, // Pos z de entrada
	Float:nSalidaX, // Pos x de salida
	Float:nSalidaY, // Pos y de salida
	Float:nSalidaZ, // Pos z de salida
	nNombre[120], // Nombre del negocio
	nTipo, // Tipo de negocio
	nVirtualWorld, // VW del negocio
	nInterior, // Int del negocio
	nVirtualWorld2, // VW de salida
	nInterior2, // Int de salida
	nValor, // Precio del negocio
	nComprado, // Si está comprado
	nDueno[60], // Nombre del dueño
	nCerrado, // Si está cerrado
	Text3D:nPickup, // 3DTextLabel
	nDineroGuardado, // Dinero guardado en el negocio
	nProd, // Productos del negocio
	nMaxAlmacen, // Máximo slots de almacén
	nAlmacen[25], // Slot de cada almacén
	nAlmacenCant[25], // Cantidad de cada slot
};
new NegoInfo[MAX_NEGS][nInfo];

enum tInfo /* Sistema de Turfs */
{
    tID,
    tTurf,
    tArea,
    Float:tMinX,
    Float:tMinY,
    Float:tMaxX,
    Float:tMaxY,
    tFaccion,
    tNivel,
    tAtacante,
    Float:tDistrbuirDrogaX,
    Float:tDistrbuirDrogaY,
    Float:tDistrbuirDrogaZ,
    tDrogaVendida[5],
};
new TurfInfo[MAX_TURFS][tInfo];

enum fInfo /* Sistema de Facciones */
{
    fID,
    fNombre[60],
    fRango1[32],
    fRango2[32],
    fRango3[32],
    fRango4[32],
    fRango5[32],
    fRango6[32],
    fRango7[32],
    fRango8[32],
    fRango9[32],
    fRango10[32],
    fRango11[32],
    fRango12[32],
    fRango13[32],
    fRango14[32],
    fRango15[32],
    fRango16[32],
    fLider[32],
    fTipo, //1=LSPD. 2=Otros(Medico/Gobieron/CNN), 3=Pandilla. 4=Mafia
	fColor[9],
	fPuntosExpansion,
	fTiempoArmas,
	fTiempoDrogas
};
new FaccInfo[MAX_FACCS][fInfo];

enum dData /* Sistema Objetos Caídos */
{
    DropID,
    DropCantidad,
    Float:DropPosX,
    Float:DropPosY,
    Float:DropPosZ,
    DropVWorld,
    DropInterior,
};
new DropInfo[MAX_DROP_ITEM][dData];

enum ConceInfo /* Concesionarios */
{
	Float:cX,
	Float:cY,
	Float:cZ,
	Float:ctX,
	Float:ctY,
	Float:ctZ,
	cNombre[128],
}
new Concesionarios[5][ConceInfo] = {
	{2131.4873,-1148.9374,24.3184, 2126.2341,-1132.8004,25.2141, "Rusty Rides"},
	{-77.5412,-1136.4923,1.0781, -73.5055,-1117.1786,1.1894, "Heavy Weight Trucks"},
	{1410.6371,-1703.0380,13.5395, 1419.8628,-1682.4360,13.6594, "Gentlemen Cars"},
	{2329.6626,-2315.8853,13.5469, 2314.8059,-2307.7781,13.6553, "Motorsport"},
	{521.2985,-1293.2179,17.2422, 528.9742,-1286.6652,17.3518, "Luxury Vehicles & Co."}
};

enum datos_del_coche
{
	dcCategoria,
	dcNombre[30],
	dcIDModel,
	dcPrecio,
	dcConcesionario, /* Concesionarios */
	dcNivel,
}
new datacar[MAX_CAR_DATA][datos_del_coche] = {
/*Coche/Moto,Nombre,ModelID,Precio,Conce,NivelPlayer*/
/* TARTANAS GAMA CHUNGA */
{0, "Glendale", 466, 6500, 1,1},
{0, "Oceanic", 467, 7500, 1,1},
{0, "Clover", 542, 7500, 1,1},
{0, "Tampa", 549, 8000, 1,1},
{0, "Walton", 478, 10000, 1,1},
{0, "Sadler", 543, 12000, 1,1},
{0, "Esperanto", 419, 5000, 1,1},
{0, "Buccaneer", 518, 8000, 1,1},
{0, "Blista", 496, 13000, 1,1},
{0, "Perennial", 404, 5000, 1,1},
{0, "Regina", 479, 5000, 1,1},
/* LOWRIDERS / OTROS */
{0, "Voodoo", 412, 20000, 1,3},
{0, "Remington", 534, 18000, 1,3},
{0, "Tahoma", 566, 25000, 1,2},
{0, "Majestic", 517, 28000, 1,2},
{0, "Tornado", 576, 35000, 1,3},
{0, "Broadway", 575, 25000, 1,3},
{0, "Savanna", 567, 50000, 1,3},
{0, "Slamvan", 535, 45000, 1,3},
{0, "Blade", 536, 40000, 1,3},
{0, "Stallion", 439, 60000, 1,2},
{0, "Phoenix", 603, 125000, 1,4},
{0, "Hermes", 474, 15000, 1,4},
{0, "Sabre", 475, 60000, 1,3},
{0, "Hotknife", 434, 160000, 4,8},
/* FRAGONETAS Y CURROS */
{0, "Benson", 499, 25000, 2,1},
{0, "Moonbeam", 418, 18000, 2,1},
{0, "Bobcat", 422, 23000, 2,1},
{0, "Pony", 413, 17000, 2,2},
{0, "Rumpo", 440, 18000, 2,2},
{0, "Picador", 600, 38000, 2,3},
{0, "Burrito", 482, 50000, 2,3},
{0, "Yosemite", 554, 80000, 2,3},
{0, "Camper", 483, 75000, 2,4},
/* 4x4 */
{0, "Rancher", 489, 160000, 2,2},
{0, "Landstalker", 400, 120000, 2,3},
{0, "Huntley", 579, 180000, 2,5},
{0, "Mesa", 500, 60000, 2,3},
/* BERLINAS */
{0, "Virgo", 491, 10000, 3,1},
{0, "Willard", 529, 10000, 3,1},
{0, "Manana", 410, 5000, 3,1},
{0, "Bravura", 401, 15000, 3,1},
{0, "Previon", 436, 8000, 3,1},
{0, "Primo", 547, 8000, 3,1},
{0, "Emperor", 585, 10000, 3,1},
{0, "Nebula", 516, 12000, 3,1},
{0, "Sunrise", 550, 8000, 3,1},
{0, "Intruder", 546, 8000, 3,1},
{0, "Vincent", 540, 15000, 3,1},
{0, "Fortune", 526, 13000, 3,1},
{0, "Cadrona", 527, 13000, 3,1},
{0, "Merit", 551, 10000, 3,1},
{0, "Sentinel", 405, 18000, 3,1},
{0, "Washington", 421, 6000, 3,1},
{0, "Admiral", 445, 13000, 3,1},
/* STREET RACERS */
{0, "Flash", 565, 60000, 4,3},
{0, "Club", 589, 45000, 4,3},
{0, "Stratum", 561, 65000, 4,3},
{0, "Alpha", 602, 80000, 4,3},
{0, "Uranus", 558, 90000, 4,3},
{0, "Euros", 587, 90000, 4,4},
{0, "ZR-350", 477, 115000, 4,5},
{0, "Sultan", 560, 220000, 4,6},
{0, "SuperGT", 506, 160000, 4,8},
/* COSTE ELEVADO */
{0, "Journey", 508, 30000, 5,5},
{0, "Hustler", 545, 92000, 5,5},
{0, "Feltzer", 533, 25000, 5,5},
{0, "Stafford", 580, 90000, 5,8},
{0, "Stretch", 409, 300000, 5,8},
/* MOTOS */
{1, "Freeway", 463, 60000, 5,3},
{1, "Wayfarer", 586, 40000, 5,3},
{1, "BF-400", 581, 75000, 5,5},
{1, "Sanchez", 468, 90000, 5,5},
{1, "NRG-500", 522, 350000, 5,10},
{1, "FCR-900", 521, 150000, 5,5},
/* SUPERCARS */
{0, "Comet", 480, 200000, 5,8},
{0, "Bullet", 541, 450000, 5,8},
{0, "Turismo", 451, 550000, 5,10},
{0, "Infernus", 411, 600000, 5,10},
{0, "Buffalo", 402, 175000, 5,8},
{0, "Banshee", 429, 250000, 5,10},
/*No ontenibles*/
{0, "Maverick", 487, 2000000, 500,10},
{0, "Dodo", 593, 1000000, 500,10}
};


enum TiempoInfo /* Tiempo Aleatorio */
{
	TiempoID
};

new TiempoAleatorioID[][TiempoID] =
{
{0},{1},{2},{3},
{4},{5},{6},{7},
{9},{10},{11},{17},
{18},{12},{13},{14},
{15}
};

enum cpInfo /* Objetos Trafico */
{
	cpType,
	cpCreated,
    Float:cpX,
    Float:cpY,
    Float:cpZ,
    cpObject,
};
new ObjectsInfo[MAX_COPOBJS][cpInfo];

new PlayerBar:XP[MAX_PLAYERS] =  {INVALID_PLAYER_BAR_ID, ...};

//--------- News Generales del Servidor ---------//

new /* MYSQL */ ConectadoBaseDatos, Conecction,
	/* Sistema Logeo */ JugadorLogueado[MAX_PLAYERS], JugadorRegistrado[MAX_PLAYERS],IntentosLogueo[MAX_PLAYERS],  PrimerSpawn[MAX_PLAYERS], // .: Fin Sistema :.
    /* Sistema Chat y Reportar */ ChatNormal = 1, ChatOOC[MAX_PLAYERS], reportar[MAX_PLAYERS], // .: Fin Sistema :.
    /* Sistema Recon(Spec) */ Float:RecPos[MAX_PLAYERS][4],IntRec[MAX_PLAYERS], VwRec[MAX_PLAYERS],// .: Fin Sistema :.
	/* Sistema de Estado(Yo) */ YoTexto[MAX_PLAYERS][60], Text3D:Yo3DText[MAX_PLAYERS],// .: Fin Sistema :.
	/* Puertas de Facciones */ lspdpuerta[8], rusopuerta[4], lcnpuerta[2], peajepuerta[5], gobiernopuerta[3], Celda[4], lspddeposito, puertaprision[3], puertaceldaprision[16], puertapatioprision, LSNpuerta1, LSNpuerta2,cristal[9], mecaDillimore, puertaGN[2],// .: Fin Sistema :.
	/* Comando Reclutar Facciones */ reclutarfaccion[MAX_PLAYERS], reclutarlider[MAX_PLAYERS],// .: Fin Sistema :.
    /* Sonidos */ TimerSonidoDisparo[MAX_PLAYERS], EncendiendoMotor[MAX_PLAYERS],// .: Fin Sistema :.
    /* Comando Nombres/Ahora/Objetos Caídos*/ PlayerNameOff[MAX_PLAYERS], ahora, DropObject[MAX_DROP_ITEM], // .: Fin Sistema :.
	/* Sistema Muerte */ Float:MuertoX[MAX_PLAYERS], Float:MuertoY[MAX_PLAYERS], Float:MuertoZ[MAX_PLAYERS], MuertoInt[MAX_PLAYERS], MuertoVW[MAX_PLAYERS], MuertoTimer[MAX_PLAYERS], MuertoFlashTimer[MAX_PLAYERS], Muerte[MAX_PLAYERS],// .: Fin Sistema :.
	/* Sistema Taser */ Taseado[MAX_PLAYERS], TaserRecarga[MAX_PLAYERS],// .: Fin Sistema :.
	/* Sistema Catalogo Concesionario */ EnCatalogoVeh[MAX_PLAYERS], PConcesionario[MAX_PLAYERS], Text:Modelo[MAX_CAR_DATA], Text:CocheNombre[MAX_CAR_DATA], Text:Costo[MAX_CAR_DATA], Text:Id[MAX_CAR_DATA], Text:fila[5],// .: Fin Sistema :.
	/* Textdraws */ Text:Barra[3], Text:Intro[3],// .: Fin Sistema :.
	/* Códigos Llaves y Llenar Deposito */ CodigoLlave, TotalVeh,LlenandoDeposito[MAX_PLAYERS],// .: Fin Sistema :.
	/* Facción LSPD */ Esposado[MAX_PLAYERS],SolicitaRefuerzos[MAX_PLAYERS],MultaPrecio[MAX_PLAYERS],Multador[MAX_PLAYERS],MascaraGas[MAX_PLAYERS],NoRefAuto[MAX_PLAYERS],AreaDepositoLSPD, AvisoLSPDCompraArmas, AvisoLSPDCompraDrogas,// .: Fin Sistema :.
    /* Timers del Servidor */ CederTiempo[MAX_PLAYERS],RecargarTiempo[MAX_PLAYERS],PagarTimer[MAX_PLAYERS],NewbieTimer[MAX_PLAYERS],// .: Fin Sistema :.
    /* Sistema Vender Vehículo */ VenderVeh[MAX_PLAYERS], VenderVehAPrecio[MAX_PLAYERS], VenderVehAVendedor[MAX_PLAYERS], VenderVehALlave[MAX_PLAYERS],// .: Fin Sistema :.
	/* Descuase y Localizar Vehículo */ VehExplotado[MAX_VEHICLES], LocalizarVeh[MAX_PLAYERS],// .: Fin Sistema :.
    /* Capó/Baul/Ventanilla */ VehCapo[MAX_VEHICLES], VehMaletero[MAX_VEHICLES], VehMaleteroPlayer[MAX_PLAYERS],VehicleWindows[MAX_VEHICLES],// .: Fin Sistema :.
    /* Velocímetro */ Text:box[MAX_PLAYERS], Text:vvel[MAX_PLAYERS], Text:fuel[MAX_PLAYERS], velocidad[MAX_PLAYERS],// .: Fin Sistema :.
	/* Sistema AutoEscuela */ EnAutoEscuela[MAX_PLAYERS], CheckPointAutoEscuela[MAX_PLAYERS], MaxVelAutoEscuela[MAX_PLAYERS], MaxTiempoAutoEscuelaTimer[MAX_PLAYERS],// .: Fin Sistema :.
    /* Facción CNN */ DirectoLSNCoche[MAX_VEHICLES],// .: Fin Sistema :.
	/* Totales del Servidor */ TotalCasas, TotalTurfs, TotalFaccs, TotalNegs,// .: Fin Sistema :.
	/* Funciones de Trabajos */ OfertaTrabajo[MAX_PLAYERS], Trabajando[MAX_PLAYERS], TimerDejarTrabajar[MAX_PLAYERS],// .: Fin Sistema :.
	/* Trabajo Taxista */ Tarifa[MAX_PLAYERS],TaxiConductor[MAX_PLAYERS], TaxiPasajero[MAX_PLAYERS], TaxiCoste[MAX_PLAYERS], SolicitaTaxi[MAX_PLAYERS],// .: Fin Sistema :.
	/* Trabajo Cosechador */ Cosechado[MAX_PLAYERS],// .: Fin Sistema :.
	/* Trabajo pescador */ PescaRecogida[MAX_PLAYERS], DineroPesca[MAX_PLAYERS],// .: Fin Sistema :.
	/* Trabajo Ladrón */ PuertaForzada[MAX_PLAYERS], Robando[MAX_PLAYERS], RoboTimer[MAX_PLAYERS], Puenteando[MAX_PLAYERS], PuenteTimer[MAX_PLAYERS], PuenteHecho[MAX_PLAYERS],// .: Fin Sistema :.
	/* Facción Mecánicos */ SolicitaMeca[MAX_PLAYERS], ReparacionTipo[MAX_PLAYERS], ReparacionMeca[MAX_PLAYERS], ReparacionPrecio[MAX_PLAYERS], RepintadoColor1[MAX_PLAYERS], RepintadoColor2[MAX_PLAYERS], RepintadoMeca[MAX_PLAYERS], RepintadoPrecio[MAX_PLAYERS],// .: Fin Sistema :.
	/* Menú de Tiendas/Locales */ Menu:restaurantes, Menu:bares, Menu:comidasrapidas, Menu:discoteca, Menu:puticlub, Menu:ammunation, Menu:menu247, Menu:tiendadeportes, Menu:ferreteria, Menu:tiendaropa, Menu:electronica, Menu:estanco, Menu:licoreria,// .: Fin Sistema :.
	/* Sistema Teléfono */ EnLlamada[MAX_PLAYERS], ToqueLlamada[MAX_PLAYERS], PersonaEnLlamada[MAX_PLAYERS], ToqueLlamadaTimer[MAX_PLAYERS], CostoLlamadaTimer[MAX_PLAYERS], CosteTotalLlamada[MAX_PLAYERS],// .: Fin Sistema :.
	/* Sistema Hambre/Sed */ Text:hambre[MAX_PLAYERS], Text:sed[MAX_PLAYERS], PlayerBar:hambrebar[MAX_PLAYERS] =  {INVALID_PLAYER_BAR_ID, ...}, PlayerBar:sedbar[MAX_PLAYERS] =  {INVALID_PLAYER_BAR_ID, ...},// .: Fin Sistema :.
	/* Sistema de Agenda */ AgendaNumero[MAX_PLAYERS][16], AgendaContacto[MAX_PLAYERS][16][41], MirandoContactoAgenda[MAX_PLAYERS],// .: Fin Sistema :.
    /* Comando Idiomas/Oldcar/Tiempo Automático/Editar Negocio/Preparar/Selección Skin/Intentar */ Idioma[MAX_PLAYERS], oldcarid[MAX_PLAYERS], DefaultWeather, EditNegoPos[MAX_PLAYERS],PreparandoDroga[MAX_PLAYERS],ropa = mS_INVALID_LISTID,IntentarUsado[MAX_PLAYERS],// .: Fin Sistema :.
	/* Sistema de Plantación */ TotalPlantaciones, CodigoPlantacion,// .: Fin Sistema :.
	/* Sistema de Misiones */ MisionEncargada[MAX_PLAYERS], RealizandoMision[MAX_PLAYERS], MuroAPintar[MAX_PLAYERS],// .: Fin Sistema :.
    /* ATM/Laser/Anuncios/Autoreparar/Cinturon/PrestarLlaves/Sirena/Informes/Timer Renta */ TransferirPlayer[MAX_PLAYERS],LaserON[MAX_PLAYERS], anunciotiempo, SiendoReparado[MAX_PLAYERS], CinturonPuesto[MAX_PLAYERS], PrestadorCoche[MAX_PLAYERS], LlavePrestada[MAX_PLAYERS], AtendiendoInforme[MAX_PLAYERS], SirenaCoche[MAX_VEHICLES],RentTime[MAX_PLAYERS],// .: Fin Sistema :.
	/* Sistema Entrenar */ HaciendoPressBanca[MAX_PLAYERS], RepeticionesPressBanca[MAX_PLAYERS], ProgresoPressBanca[MAX_PLAYERS], PressBancaBarraObjeto[3],// .: Fin Sistema :.
	/* Sistema Matriculas */ MatriculasActivadas[MAX_PLAYERS], PlayerText3D:MatriculasCoches[MAX_PLAYERS][MAX_VEHICLES],// .: Fin Sistema :.
	/* AntiCheat */ DineroAC[MAX_PLAYERS], PingKick[MAX_PLAYERS], ArmaSpawnAC[MAX_PLAYERS], TimerBlockIP[MAX_PLAYERS], ChalecoAC[MAX_PLAYERS], VehicleHack[MAX_PLAYERS],// .: Fin Sistema :.
    /* Sistema AFK */ Text3D:AFK[1000], MAFK[MAX_PLAYERS], SAFK[MAX_PLAYERS], TiempoAFK[MAX_PLAYERS], HAFK[MAX_PLAYERS],// .: Fin Sistema :.
	/* Sistema Averiado */ averiado[MAX_VEHICLES], iVehicle[MAX_PLAYERS],// .: Fin Sistema :.
    /* Trabajo Piloto */ cavion[MAX_PLAYERS], AvionID[MAX_PLAYERS], VarAvion[MAX_PLAYERS], TCV[MAX_PLAYERS], TCV2[MAX_PLAYERS], TrabajoAvion[MAX_PLAYERS],// .: Fin Sistema :.
	/* Textos de Vehículos */ AutosV[27], Text3D: AutosVLabel[MAX_VEHICLES], // .: Fin Sistema :.
    /* Vehículos de Renta */ RentoVehID[MAX_PLAYERS], VehRentado[MAX_VEHICLES],
	VehiculoPublico[31],MAX_VEHPUBLICO;// .: Fin Sistema :.

//--------- Foward/Public/Stock ---------//

new MensajesTimer;
new Mensajes[][] =
{
	{"Información: ¡Recuerda visitar el TS3 de nuestro servidor! IP: 149.56.251.47:10170"},
	{"Información: Invita amigos al servidor y podrás obtener recompensas, contacta un administrador"},
	{"Información: Ante cualquier problema o bug contacte con administración"},
    {"Información: Visite nuestra pagina de Facebook: https://www.facebook.com/Sky-RolePlay-1267628146697201/"},
    {"Información: Para colgar un anuncio en la CNN llame al 444"}
};
forward MensajesAleatorios();
public MensajesAleatorios()
{
	SendClientMessageToAll(AmarilloClaro,Mensajes[random(sizeof(Mensajes))]);
    return 1;
}

forward TAFK(i);
public TAFK(i)
{
    if(!IsPlayerPaused(i)) return KillTimer(TiempoAFK[i]);
    if(SAFK[i] < 59) { SAFK[i]++;}
    else
    {
    SAFK[i] = 0;
    if(MAFK[i] < 59) { MAFK[i]++; }
    else
    {
        MAFK[i] = 0;
		HAFK[i]++;
    }
    }
    new string[256];
    format(string,128,"[AFK]\n%dh %dm %ds",HAFK[i],MAFK[i],SAFK[i]);
    return Update3DTextLabelText(AFK[i], 0xFFFF04FF,string);
}

forward OnPlayerPause(playerid);
public OnPlayerPause(playerid)
{
    Update3DTextLabelText(AFK[playerid], 0xFFFF04FF, "[AFK]");
    Attach3DTextLabelToPlayer(AFK[playerid], playerid, 0.0, 0.0, 0.4);
    TiempoAFK[playerid] = SetTimerEx("TAFK",1000,true,"d",playerid);
	return 1;
}

forward OnPlayerUnpause(playerid);
public OnPlayerUnpause(playerid)
{
    Update3DTextLabelText(AFK[playerid], 0xFFFF04FF, "");
    SAFK[playerid] = 00;
	MAFK[playerid] = 00;
	HAFK[playerid] = 00;
	return 1;
}

forward AvionCargado(playerid);
public AvionCargado(playerid)
{
	new autoid = GetPlayerVehicleID(playerid),string[90];
	if(TrabajoAvion[playerid] == 1) return KillTimer(TCV[playerid]);
	if(IsAvionPiloto(autoid) && GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
	{
		if(VarAvion[playerid] < 10)
		{
			VarAvion[playerid]++;
		}
		else if(VarAvion[playerid] >= 10)
		{
			new cuenta;
			switch(GetVehicleModel(autoid))
			{
				case 519: { cuenta = RandomEx(15,25); }
				case 593: { cuenta = RandomEx(10,15); }
				case 553: { cuenta = RandomEx(16,33); }
			}
			PlayerInfo[playerid][pPasajeros] = cuenta;
			TrabajoAvion[playerid] = 1;
			format(string,90,"Todos los pasajeros han subido al avión, llevas un total de {00FF00}%d{fce80c} pasajeros",cuenta);
			SendClientMessage(playerid,Amarillo,string);
			new via = random(2);
			if(IsPlayerInRangeOfPoint(playerid, 100.0,1568.6259,1462.6353,12.0246))
			{
				switch(via)
				{
					case 0: { SetPlayerCheckpoint(playerid, -1371.7418,-217.5301,15.3426,15.0); }
					case 1: { SetPlayerCheckpoint(playerid, 1853.7726,-2403.0959,14.7489,15.0); }
				}
			}
			else if(IsPlayerInRangeOfPoint(playerid, 100.0,1725.9821,-2419.0105,14.7492))
			{
				switch(via)
				{
					case 0: { SetPlayerCheckpoint(playerid, -1371.7418,-217.5301,15.3426,15.0); }
					case 1: { SetPlayerCheckpoint(playerid, 1576.4979,1352.2899,10.4328,15.0); }
				}
			}
			else if(IsPlayerInRangeOfPoint(playerid, 100.0,-1292.1914,-357.9675,13.7137))
			{
				switch(via)
				{
					case 0: { SetPlayerCheckpoint(playerid, 1853.7726,-2403.0959,14.7489,15.0); }
					case 1: { SetPlayerCheckpoint(playerid, 1576.4979,1352.2899,10.4328,15.0); }
				}
			}
			KillTimer(TCV[playerid]);
			TogglePlayerControllable(playerid,1);
			cavion[playerid] = 0;
		}
	}
	else return KillTimer(TCV[playerid]);
	return 1;
}

forward AvionDescargado(playerid);
public AvionDescargado(playerid)
{
	new autoid = GetPlayerVehicleID(playerid),string[55];
	if(IsAvionPiloto(autoid) && GetPlayerState(playerid) == PLAYER_STATE_DRIVER && TrabajoAvion[playerid] == 1)
	{
	if(VarAvion[playerid] > 0)
	{
	VarAvion[playerid]--;
	}
	else if(VarAvion[playerid] <= 0)
	{
 	    format(string,55,"Has recibido {00FF00}$%d{FFFFFF} por tu trabajo.",PlayerInfo[playerid][pPasajeros]*30);
		SendClientMessage(playerid,Blanco,string);
		GivePlayerMoneyAC(playerid,PlayerInfo[playerid][pPasajeros]*50);
		PlayerInfo[playerid][pPasajeros] = 0;
	  	AvionID[playerid] = INVALID_VEHICLE_ID;
	  	DarXPPiloto(playerid);
	  	KillTimer(TCV2[playerid]);
	    TogglePlayerControllable(playerid,1);
  	 	TrabajoAvion[playerid] = 0;
  	 	VarAvion[playerid] = 10;
	}
	}
	else KillTimer(TCV2[playerid]);
}

forward Clock(playerid);
public Clock(playerid)
{
   new hour, minute, second,string[15];
   gettime(hour,minute,second);
   format(string, sizeof(string), "%d:%dhs", hour, minute);
   TextDrawSetString(Text:Barra[1], string);
}

forward QuitarInforme(id_jugador); /* Informes Médicos */
public QuitarInforme(id_jugador)
{
    for(new i = 0; i < MAX_LSEDINFORMES; i++)
	{
	    if(InformeEmergencias[i][ieEstado] == 0 && InformeEmergencias[i][ieJugador] == id_jugador)
		{
			InformeEmergencias[i][ieEstado] = NOEXISTE;
			for(new j = 0; j < MAX_PLAYERS; j++)
			{
			    if(AtendiendoInforme[j] == id_jugador)
			    {
			        DisablePlayerCheckpoint(j);
			        SendClientMessage(j, Rojo, "* Has tardado mucho en llegar a la emergencia, el sujeto fué trasladado al hospital por otra unidad.");
			    }
			}
			break;
		}
	}
	return 1;
}

/*forward SpawnBug(playerid);
public SpawnBug(playerid)
{
    new Float:pos[3];
	GetPlayerPos(playerid, pos[0], pos[1], pos[2]);
	if(pos[0] >= 1920 && pos[0] <= 1970 && pos[1] >= 1325 && pos[1] <= 1375)
	{
	    PlayerInfo[playerid][pMuerto] = 0;
	    TogglePlayerControllable(playerid, 1);
	    SetPlayerPos(playerid, 1479.6182, -1724.0615, 13.5469);
	    new string[80];
	    format(string, sizeof(string), "'%s' ha spawneado bug y ha sido llevado al ayuntamiento.", GetPlayerNameRP(playerid));
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid, Amarillo, "* Has spawneado bug y has sido llevado al ayuntamiento.");
	}
	return 1;
}*/

forward LoginKick(playerid);
public LoginKick(playerid)
{
	if(JugadorLogueado[playerid] == 0)
	{
		SendClientMessage(playerid, Rojo, "* Has sido kickeado por tardar demasiado en loguear.");
		KickL(playerid);
	}
	return 1;
}

forward AsignarTiempoCompraMafias(faccionid, tipo);
public AsignarTiempoCompraMafias(faccionid, tipo)
{
	if(tipo == 1) /* Armas */
	{
	    FaccInfo[faccionid][fTiempoArmas] = 12;
	    SaveFacc(faccionid);
	}
	if(tipo == 2) /* Drogas */
	{
	    FaccInfo[faccionid][fTiempoDrogas] = 12;
	    SaveFacc(faccionid);
	}
	return 1;
}

forward TimerEntrenar(playerid, entrenamiento);
public TimerEntrenar(playerid, entrenamiento)
{
	if(entrenamiento == 1) /* Pressbanca */
	{
	    if(HaciendoPressBanca[playerid] == 1)
	    {
			new string[256];
			if(RepeticionesPressBanca[playerid]/20 <= 30)
			{
				format(string, sizeof(string), "Has hecho %d repeticiones en press banca.", RepeticionesPressBanca[playerid]/20);
			}
			else{format(string, sizeof(string), "Has hecho 30 repeticiones en press banca."); RepeticionesPressBanca[playerid] = 600;}
			SendClientMessage(playerid, Verde, string);
			TogglePlayerControllable(playerid, 1);
			ApplyAnimation(playerid, "benchpress", "gym_bp_getoff", 1, 0, 0, 0, 0, 0, 1);
			PressBancaBarraObjeto[0] = CreateObject(2913, barbell_pos[ 0 ][ 0 ], barbell_pos[ 0 ][ 1 ], barbell_pos[ 0 ][ 2 ], barbell_pos[ 0 ][ 3 ], barbell_pos[ 0 ][ 4 ], barbell_pos[ 0 ][ 5 ] );
			PressBancaBarraObjeto[1] = CreateObject(2913, barbell_pos[ 1 ][ 0 ], barbell_pos[ 1 ][ 1 ], barbell_pos[ 1 ][ 2 ], barbell_pos[ 1 ][ 3 ], barbell_pos[ 1 ][ 4 ], barbell_pos[ 1 ][ 5 ] );
			PressBancaBarraObjeto[2] = CreateObject(2913, barbell_pos[ 2 ][ 0 ], barbell_pos[ 2 ][ 1 ], barbell_pos[ 2 ][ 2 ], barbell_pos[ 2 ][ 3 ], barbell_pos[ 2 ][ 4 ], barbell_pos[ 2 ][ 5 ] );
			RemovePlayerAttachedObject(playerid, 5);
			new fuerza = RepeticionesPressBanca[playerid]/20/2 + random(6);
			format(string, sizeof(string), "Tu fuerza ha aumentado en %.2f", float(fuerza)/100);
			SendClientMessage(playerid, Verde, string);
			PlayerInfo[playerid][pFuerza] += fuerza;
			RepeticionesPressBanca[playerid] = 0;
			HaciendoPressBanca[playerid] = 0;
			PlayerInfo[playerid][pCansancioEntrenar] += 180;
			return 1;
		}
	}
	return 1;
}

forward PintarGraffiti(playerid);
public PintarGraffiti(playerid)
{
	if(MuroAPintar[playerid] != NOEXISTE)
	{
		new pintarid = MuroAPintar[playerid];
		MuroAPintar[playerid] = NOEXISTE;

		if(IsValidObject(LugaresPintar[pintarid][Texto])) DestroyObject(LugaresPintar[pintarid][Texto]);

		new nombrefacc[64], color[15], string[60];

		LugaresPintar[pintarid][Texto] = CreateObject(19482, LugaresPintar[pintarid][GraffitiX], LugaresPintar[pintarid][GraffitiY], LugaresPintar[pintarid][GraffitiZ], 180.0, 180.0, LugaresPintar[pintarid][GraffitiRotZ]);

	    format(nombrefacc, sizeof(nombrefacc), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fNombre]);
	    format(color, sizeof(color), "0xFF%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fColor]);
		SetObjectMaterialText(LugaresPintar[pintarid][Texto], nombrefacc, 0, OBJECT_MATERIAL_SIZE_256x128, "Kristen ITC", 28, 0, HexToInt(color), 0x00000000, OBJECT_MATERIAL_TEXT_ALIGN_CENTER);

	    TogglePlayerControllable(playerid, 1);

	    format(string, sizeof(string), "* %s ha pintado un graffiti en el muro.", GetPlayerNameRP(playerid));
	    ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);

	    new puntos = 1+random(4);
	    FaccInfo[PlayerInfo[playerid][pFaccion]][fPuntosExpansion] += puntos;
	    format(string, sizeof(string), "Tu facción gana %d puntos de expansión por esta acción.", puntos);
	    SendClientMessage(playerid, Amarillo, string);
    }
    return 1;
}

forward DarMisionPandilla(playerid, tipo);
public DarMisionPandilla(playerid, tipo)
{
	if(tipo == 1) /* Misión Conseguir Droga */
	{
	    SendClientMessage(playerid, Amarillo, "SMS de Nº oculto: Oye tío, necesito que hagas algo por mí.");
	    SendClientMessage(playerid, Naranja, "* Escribe '/Aceptar Mision' para hacer el recado.");
	    MisionEncargada[playerid] = 1;
	}
	if(tipo == 2) /* Misión Conseguir Armas */
	{
	    SendClientMessage(playerid, Amarillo, "SMS de Nº oculto: Hazme un favor, necesito que te lleves lo antes posible una cosa.");
	    SendClientMessage(playerid, Naranja, "* Escribe '/Aceptar Mision' para hacer el recado.");
	    MisionEncargada[playerid] = 2;
	}
	if(tipo == 3) /* Misión Grafity */
	{
	    SendClientMessage(playerid, Amarillo, "SMS de Nº oculto: Eh, es hora de marcar un poco el territorio, ¿te apuntas?");
	    SendClientMessage(playerid, Naranja, "* Escribe '/Aceptar Mision' para hacer el recado.");
	    MisionEncargada[playerid] = 3;
	}
	return 1;
}

forward PrepararDroga(playerid, droga);
public PrepararDroga(playerid, droga)
{
    PreparandoDroga[playerid] = 0;
	new string[256];
	if(droga == 1) /* Marihuana */
	{
	    new gramos = (20 + random(11));
	    if(PlayerInfo[playerid][pManoDer] == 86){PlayerInfo[playerid][pManoDer] = 75; PlayerInfo[playerid][pManoDerCant] = gramos; PonerObjeto(playerid, 1, 75);}
	    else if(PlayerInfo[playerid][pManoIzq] == 86){PlayerInfo[playerid][pManoIzq] = 75; PlayerInfo[playerid][pManoIzqCant] = gramos; PonerObjeto(playerid, 2, 75);}
	    else{SendClientMessage(playerid, Rojo, "* No tienes una planta de marihuana en ninguna mano, así que no has podido preparar marihuana."); return 1;}
		format(string, sizeof(string), "* Has preparado {fce80c}%d gramos de marihuana {FFFFFF}a partir de tu planta.", gramos);
		SendClientMessage(playerid, Blanco, string);
	}
	if(droga == 2) /* Crack */
	{
	    new gramos;
	    new gramosrand = random(6);
	    if(PlayerInfo[playerid][pManoDer] == 81){PlayerInfo[playerid][pManoDer] = 77; gramos = PlayerInfo[playerid][pManoDerCant] = PlayerInfo[playerid][pManoDerCant]*4 + gramosrand; PonerObjeto(playerid, 1, 78);}
	    else if(PlayerInfo[playerid][pManoIzq] == 81){PlayerInfo[playerid][pManoIzq] = 77; gramos = PlayerInfo[playerid][pManoIzqCant] = PlayerInfo[playerid][pManoIzqCant]*4 + gramosrand; PonerObjeto(playerid, 2, 78);}
	    else{SendClientMessage(playerid, Rojo, "* No tienes una bolsita de cocaína en ninguna mano, así que no has podido preparar crack."); return 1;}
		format(string, sizeof(string), "* Has preparado {fce80c}%d gramos de crack.", gramos);
		SendClientMessage(playerid, Blanco, string);
	}
	return 1;
}

forward DarEfectoLSD(playerid);
public DarEfectoLSD(playerid)
{
	SetPlayerTime(playerid, 21, 0);
	new rand = random(3);
	if(rand == 0) /* Efecto 1 */
	{
	    FlashPlayerScreen(playerid, 0xfcc1fdAA, 1, 12);
		SetPlayerWeather(playerid, 23+random(18));
	}
	else if(rand == 1) /* Efecto 2 */
	{
 		FlashPlayerScreen(playerid, 0x1229FAAA, 1, 12);
		SetPlayerWeather(playerid, 23+random(18));
	}
	else if(rand == 2) /* Efecto 3 */
	{
 		FlashPlayerScreen(playerid, 0x036611AA, 1, 12);
		SetPlayerWeather(playerid, 23+random(18));
	}
	return 1;
}

forward TimerPagar(playerid);
public TimerPagar(playerid)
{
    PagarTimer[playerid] = 0;
	return 1;
}

forward AtacarTurf(turfid, tipo);
public AtacarTurf(turfid, tipo)
{
	if(tipo == 1) /* Ataque */
	{
	    if(TurfInfo[turfid][tAtacante] == 0) return 1; /* Turf Siendo Atacado */
	    new atacantes;
        for(new x = 0; x<MAX_PLAYERS; x++)
        {
            if(PlayerInfo[x][pFaccion] == TurfInfo[turfid][tAtacante] && PlayerInfo[x][pMuerto] == 0 && IsPlayerInDynamicArea(x, TurfInfo[turfid][tArea])) atacantes++;
        }

        new defensores;
        for(new x = 0; x<MAX_PLAYERS; x++)
        {
            if(PlayerInfo[x][pFaccion] == TurfInfo[turfid][tFaccion] && PlayerInfo[x][pMuerto] == 0 && IsPlayerInDynamicArea(x, TurfInfo[turfid][tArea])) defensores++;
        }

        if(atacantes < 2) /* Menos de 2 atacantes en el turf */
        {
            SendFaccionMessage(TurfInfo[turfid][tAtacante], Amarillo, "SMS de Nº oculto: Mierda, son demasiado fuertes. Salid de allí rápidamente.");
            SendFaccionMessage(TurfInfo[turfid][tFaccion], Amarillo, "SMS de Nº oculto: Bien hecho chicos, les hemos dado una lección a esos hijos de puta.");
            for(new x=0; x<MAX_PLAYERS; x++)
            {
                if(PlayerInfo[x][pFaccion] == TurfInfo[turfid][tFaccion]) RemovePlayerMapIcon(x, 1);
            }
			TurfInfo[turfid][tAtacante] = 0;
            ActualizarTurf(turfid);
            return 1;
        }
        if(defensores < 2) /* Menos de 2 defensores en el turf */
        {
            SendFaccionMessage(TurfInfo[turfid][tAtacante], Amarillo, "SMS de Nº oculto: Así aprenderán quiénes son los que mandan. Vámonos de aquí.");
			SendFaccionMessage(TurfInfo[turfid][tFaccion], Amarillo, "SMS de Nº oculto: Putos inútiles... Nos han humillado en nuestro territorio. Esto no quedará así.");
            for(new x=0; x<MAX_PLAYERS; x++)
            {
                if(PlayerInfo[x][pFaccion] == TurfInfo[turfid][tFaccion]) RemovePlayerMapIcon(x, 1);
            }
			TurfInfo[turfid][tAtacante] = 0;
            TurfInfo[turfid][tNivel] --;
            ActualizarTurf(turfid);
            return 1;
        }
        if(atacantes >= 2 && defensores >= 2) /* Hay al menos 2 atacantes y 2 defensores en el turf */
        {
            SendFaccionMessage(TurfInfo[turfid][tAtacante], Amarillo, "SMS de Nº oculto: Hay que seguir dándole a estos cabrones, aguanten.");
            SendFaccionMessage(TurfInfo[turfid][tFaccion], Amarillo, "SMS de Nº oculto: Seguí aguantando, hay que echarlos de aquí como sea.");
            SetTimerEx("AtacarTurf", 240000, false, "d, d", turfid, 1);
            return 1;
        }
	}
	if(tipo == 2) /* Conquista */
	{
	    if(TurfInfo[turfid][tAtacante] == 0) return 1; /* Turf siendo atacado */
	    new atacantes;
        for(new x = 0; x<MAX_PLAYERS; x++)
        {
            if(PlayerInfo[x][pFaccion] == TurfInfo[turfid][tAtacante] && PlayerInfo[x][pMuerto] == 0 && IsPlayerInDynamicArea(x, TurfInfo[turfid][tArea])) atacantes++;
        }

        new defensores;
        for(new x = 0; x<MAX_PLAYERS; x++)
        {
            if(PlayerInfo[x][pFaccion] == TurfInfo[turfid][tFaccion] && PlayerInfo[x][pMuerto] == 0 && IsPlayerInDynamicArea(x, TurfInfo[turfid][tArea])) defensores++;
        }

        if(atacantes < 2) /* Menos de 2 atacantes en el turf */
        {
            SendFaccionMessage(TurfInfo[turfid][tAtacante], Amarillo, "SMS de Nº oculto: Mierda, son demasiado fuertes. Salid de allí rápidamente.");
            SendFaccionMessage(TurfInfo[turfid][tFaccion], Amarillo, "SMS de Nº oculto: Bien hecho chavales, les hemos dado una lección a esos hijos de puta.");
            for(new x=0; x<MAX_PLAYERS; x++)
            {
                if(PlayerInfo[x][pFaccion] == TurfInfo[turfid][tFaccion]) RemovePlayerMapIcon(x, 1);
            }
            TurfInfo[turfid][tAtacante] = 0;
            ActualizarTurf(turfid);
            return 1;
        }
        if(defensores < 2) /* Menos de 2 defensores en el turf */
        {
            SendFaccionMessage(TurfInfo[turfid][tAtacante], Amarillo, "SMS de Nº oculto: Así se hace. A partir de ahora esto es nuestro.");
            SendFaccionMessage(TurfInfo[turfid][tFaccion], Amarillo, "SMS de Nº oculto: Hemos perdido el control del territorio...");
            for(new x=0; x<MAX_PLAYERS; x++)
            {
                if(PlayerInfo[x][pFaccion] == TurfInfo[turfid][tFaccion]) RemovePlayerMapIcon(x, 1);
            }
            TurfInfo[turfid][tFaccion] = TurfInfo[turfid][tAtacante];
            TurfInfo[turfid][tAtacante] = 0;
            ActualizarTurf(turfid);
            return 1;
        }
        if(atacantes >= 2 && defensores >= 2) /* Hay al menos 2 atacantes y 2 defensores en el turf */
        {
            SendFaccionMessage(TurfInfo[turfid][tAtacante], Amarillo, "SMS de Nº oculto: Hay que seguir dándole a estos cabrones, aguanten.");
            SendFaccionMessage(TurfInfo[turfid][tFaccion], Amarillo, "SMS de Nº oculto: Seguid aguantando, hay que echarlos de aquí como sea.");
            SetTimerEx("AtacarTurf", 240000, false, "d, d", turfid, 2);
            return 1;
        }
	}
	return 1;
}

forward LlamadaCoste(playerid);
public LlamadaCoste(playerid)
{
    CosteTotalLlamada[playerid] += 1;
	return 1;
}

forward PuentearF(playerid, coche);
public PuentearF(playerid, coche)
{
	new string[256];
	PuenteHecho[playerid] = 5;
	TogglePlayerControllable(playerid, 1);
	new rand;
    rand = random(10);
    if(rand > 2+(PlayerInfo[playerid][pHabLad]/30))
	{
		format(string, sizeof(string), "* %s intenta hacer un puente a un vehículo pero no lo logra.", GetPlayerNameRP(playerid));
    	ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
    	Puenteando[playerid] = 0;
    	return 1;
    }
 	format(string, sizeof(string), "* %s hace un puente a un vehículo.", GetPlayerNameRP(playerid));
    ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
    new engine,lights,alarm,doors,bonnet,boot,objective;
	GetVehicleParamsEx(coche,engine,lights,alarm,doors,bonnet,boot,objective);
	SetVehicleParamsEx(coche,1,lights,alarm,doors,bonnet,boot,objective);
	Puenteando[playerid] = 0;
	return 1;
}

forward RobarF(playerid, tipo);
public RobarF(playerid, tipo)
{
	new string[80];
	TogglePlayerControllable(playerid, 1);
	if(tipo == 1) /* Casa */
	{
		new rand = random(300+PlayerInfo[playerid][pHabLad]*2);
		new dinero = 100+rand;
		GivePlayerMoneyAC(playerid, dinero);
		format(string, sizeof(string), "Has encontrado %d$ en efectivo.", dinero);
		SendClientMessage(playerid, Verde, string);
		Robando[playerid] = 0;
		PlayerInfo[playerid][pTiempoRobo] = 12;
		PlayerInfo[playerid][pHabLad] ++;
	}
	if(tipo == 2) /* Negocio */
	{
	    new rand = random(400+PlayerInfo[playerid][pHabLad]*2);
		new dinero = 250+rand;
		GivePlayerMoneyAC(playerid, dinero);
		format(string, sizeof(string), "Has encontrado %d$ en efectivo.", dinero);
		SendClientMessage(playerid, Verde, string);
		Robando[playerid] = 0;
		PlayerInfo[playerid][pTiempoRobo] = 25;
		PlayerInfo[playerid][pHabLad] ++;
	}
	return 1;
}

forward AlarmaCoche(coche);
public AlarmaCoche(coche)
{
    new engine,lights,alarm,doors,bonnet,boot,objective;
    GetVehicleParamsEx(coche,engine,lights,alarm,doors,bonnet,boot,objective);
    SetVehicleParamsEx(coche,engine,lights,0,doors,bonnet,boot,objective);
}

forward ServerMicrobeat();
public ServerMicrobeat()
{
	new engine,lights,alarm,doors,bonnet,boot,objective;
	new
	Float:health,carid;
	for(new i=0; i<MAX_PLAYERS; i++)
	{
		if(GetPlayerState(i) == PLAYER_STATE_DRIVER)
		{
			carid = GetPlayerVehicleID(i);
			iVehicle[i] = GetPlayerVehicleID(i);
			GetVehicleHealth(iVehicle[i], health);
			if(health < 350.0)
			{
				SetVehicleHealth(iVehicle[i], 350.0);
				GameTextForPlayer(i, "~r~Motor quemado!", 2500, 3);
				SendClientMessage(i, Naranja, "El motor del vehículo esta averiado, usa /llamar 999 (Taller LS).");
				GetVehicleParamsEx(iVehicle[i],engine, lights, alarm, doors, bonnet, boot, objective);
				SetVehicleParamsEx(iVehicle[i], 0, lights, alarm, doors, bonnet, boot, objective);
				averiado[carid] = 1;
				EncendiendoMotor[carid] = 0;
			}
			else if(health > 350.0 && averiado[carid] == 1)
			{
				averiado[carid] = 0;
			}
		}
	}
}

forward DarToqueLlamada(playerid);
public DarToqueLlamada(playerid)
{
	new string[80];
	if(!PlayerTieneObjeto(playerid, 68))
	{
		EnLlamada[PersonaEnLlamada[playerid]] = 0;
		ToqueLlamada[playerid] = 0;
		SendClientMessage(PersonaEnLlamada[playerid], Gris, "No contestan.");
		PersonaEnLlamada[PersonaEnLlamada[playerid]] = NOEXISTE;
		PersonaEnLlamada[playerid] = NOEXISTE;
		KillTimer(ToqueLlamadaTimer[playerid]);
		return 1;
	}
	if(ToqueLlamada[playerid] > 5)
	{
	    EnLlamada[PersonaEnLlamada[playerid]] = 0;
		ToqueLlamada[playerid] = 0;
		format(string, sizeof(string), "Llamada perdida del %d.", PlayerInfo[PersonaEnLlamada[playerid]][pTelefono]);
		SendClientMessage(playerid, Gris, string);
		SendClientMessage(PersonaEnLlamada[playerid], Gris, "No contestan.");
		for(new i=0; i<MAX_PLAYERS; i++)
		{
		    if(PersonaEnLlamada[i] == playerid){PersonaEnLlamada[i] = NOEXISTE; break;}
		}
		PersonaEnLlamada[playerid] = NOEXISTE;
		KillTimer(ToqueLlamadaTimer[playerid]);
		return 1;
	}
	format(string, sizeof(string), "* El teléfono de %s suena.", GetPlayerNameRP(playerid));
    ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
	SendClientMessage(PersonaEnLlamada[playerid], Gris, "Llamando...");
	ToqueLlamada[playerid] ++;
	return 1;
}

stock SetPlayerArmedWeaponEx(playerid, w, f = 0)
{
    SetPlayerArmedWeapon(playerid, w);
    if(f == -3)
    {
        DeletePVar(playerid, "A132AA");
	}
	return 1;
}

stock SPAM(text[])
{
if(strfind(text, "fenixzone", true) != -1 || strfind(text, "s7be1t", true) != -1 || strfind(text, "d   z", true) != -1 || strfind(text, "sobe1t", true) != -1 || strfind(text, "s0be1t", true) != -1 || strfind(text, "optimus", true) != -1 || strfind(text, "d  z", true) != -1 || strfind(text, "servidor", true) != -1 || strfind(text, "fz", true) != -1 || strfind(text, "vortex", true) != -1 || strfind(text, "fzrp", true) != -1) {return 1;}
if(strfind(text, "fenix zone", true) != -1 || strfind(text, "sobei7", true) != -1 || strfind(text, "mod sobeit", true) != -1 || strfind(text, "sobeit", true) != -1 || strfind(text, "miami", true) != -1 || strfind(text, "sacramento", true) != -1 || strfind(text, "miamicity", true) != -1 || strfind(text, "fenixz", true) != -1 || strfind(text, "fenixzone.com", true) != -1 || strfind(text, "fzrp2", true) != -1 || strfind(text, "dz", true) != -1) {return 1;}
if(strfind(text, "fenixzone", true) != -1 || strfind(text, "kanox", true) != -1 || strfind(text, "gm liberada", true) != -1 || strfind(text, "gamemode", true) != -1 || strfind(text, "$obeit", true) != -1 || strfind(text, "d.z", true) != -1 || strfind(text, "dezeta", true) != -1 || strfind(text, "d z", true) != -1 || strfind(text, "s o b e i t", true) != -1 || strfind(text, "s0beit", true) != -1 || strfind(text, "x.x.x.x:xxxx", true) != -1) {return 1;}
if(strfind(text, "servidor de mierda", true) != -1 || strfind(text, "gm descargada", true) != -1 || strfind(text, "usaron base", true) != -1 || strfind(text, "bestzone", true) != -1 || strfind(text, "deluxe", true) != -1 || strfind(text, "nexus", true) != -1 || strfind(text, "nexus roleplay", true) != -1) {return 1;}
return 0;
}

stock PlayAudioEx(playerid, url[], Float:posX = 0.0, Float:posY = 0.0, Float:posZ = 0.0, Float:distance = 50.0, usepos = 0)
{
	if(GetPVarType(playerid, "pAudioStream")) StopAudioStreamForPlayer(playerid);
	else SetPVarInt(playerid, "pAudioStream", 1);
    PlayAudioStreamForPlayer(playerid, url, posX, posY, posZ, distance, usepos);
}

stock StopAudioEx(playerid)
{
	DeletePVar(playerid, "pAudioStream");
    StopAudioStreamForPlayer(playerid);
}

stock DarXPPiloto(playerid)
{
	new Query[200],pName[24],veh = GetPlayerVehicleID(playerid),autoid;
	GetPlayerName(playerid,pName,24);
	if(TrabajoAvion[playerid] != 1) return 1;
	if(IsAvionPiloto(veh) && GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
	{
		switch(PlayerInfo[playerid][pNivelPiloto])
		{
			case 1: { autoid = 593; }
			case 2: { autoid = 519; }
			case 3: { autoid = 553; }
		}
		if(GetVehicleModel(veh) != autoid) return SendClientMessage(playerid,Rojo,"* Necesitas utilizar un avión de tu nivel para ganar puntos de experiencia");
		if(PlayerInfo[playerid][pNivelPiloto] < 3)
		{
			if(PlayerInfo[playerid][pHabPil] < 49)
			{
				SendClientMessage(playerid,Blanco,"Aumentaste {FFFF04}+1{FFFFFF} punto de experiencia en este trabajo");
				PlayerInfo[playerid][pHabPil]++;
				format(Query, 200, "UPDATE `usuarios` SET `ExpPiloto`='%d' WHERE `Username`='%s'",PlayerInfo[playerid][pHabPil],pName);
				mysql_function_query(Conecction, Query, true, "OnQueryFinish", "ii", 0, playerid);
			}
			else if(PlayerInfo[playerid][pHabPil] >= 49)
			{
				SendClientMessage(playerid,Amarillo,"Felicidades, has aumentado tu nivel en este trabajo");
				PlayerInfo[playerid][pHabPil] = 0;
				PlayerInfo[playerid][pNivelPiloto]++;
				format(Query, 200, "UPDATE `usuarios` SET `ExpPiloto`='%d',`NivelPiloto`='%d' WHERE `Username`='%s'",PlayerInfo[playerid][pHabPil],PlayerInfo[playerid][pNivelPiloto],pName);
				mysql_function_query(Conecction, Query, true, "OnQueryFinish", "ii", 0, playerid);
			}
		}
		else if(PlayerInfo[playerid][pNivelPiloto] == 3)
		{
			if(PlayerInfo[playerid][pHabPil] < 49)
			{
				SendClientMessage(playerid,Blanco,"Aumentaste {FFFF04}+1{FFFFFF} punto de experiencia en este trabajo");
				PlayerInfo[playerid][pHabPil]++;
				format(Query, 200, "UPDATE `usuarios` SET `ExpPiloto`='%d' WHERE `Username`='%s'",PlayerInfo[playerid][pHabPil],pName);
				mysql_function_query(Conecction, Query, true, "OnQueryFinish", "ii", 0, playerid);
			}
			else if(PlayerInfo[playerid][pHabPil] >= 49)
			{
				SendClientMessage(playerid,Blanco,"Has alcanzado el nivel máximo actual en este trabajo");
			}
		}
	}
	return 1;
}


stock PlayerIsNearParking(playerid)
{
    for(new i; i != sizeof(ParkInfo); i++)
    {
        if(!IsPlayerInRangeOfPoint(playerid, 5.0, ParkInfo[i][parkPosX], ParkInfo[i][parkPosY], ParkInfo[i][parkPosZ]))
            continue;
        if(GetPlayerVirtualWorld(playerid) != ParkInfo[i][parkVWExt])
            continue;

        if(GetPlayerInterior(playerid) != ParkInfo[i][parkINTExt])
            continue;

        return i;
    }
    return -1;
}

stock PlayerIsNearExitParking(playerid)
{
    for(new i; i != sizeof(ParkInfo); i++)
    {
        if(!IsPlayerInRangeOfPoint(playerid, 5.0, ParkInfo[i][parkPosXX], ParkInfo[i][parkPosYY], ParkInfo[i][parkPosZZ]))
            continue;

        if(GetPlayerVirtualWorld(playerid) != i + 20)
            continue;

        if(GetPlayerInterior(playerid) != ParkInfo[i][parkINTInt])
            continue;

        return i;
    }
    return -1;
}

stock GenerarInforme(playerid, Float:x, Float:y, Float:z) // Informes Médicos
{
	for(new i = 0; i < MAX_LSEDINFORMES; i++)
	{
	    InformeEmergencias[i][ieEstado] = 0; InformeEmergencias[i][ieJugador] = playerid;
		InformeEmergencias[i][ieX] = x; InformeEmergencias[i][ieY] = y; InformeEmergencias[i][ieZ] = z;
		InformeEmergencias[i][ieTimer] = SetTimerEx("QuitarInforme", (5*60000), true, "i", playerid);
		SendRadioMessage(2, Blanco, "{FF0000}[Radio]{FFFFFF} Central: Un nuevo aviso está a la espera de ser atendido. (( Usa {FFFF04}'/informes'{FFFFFF} para más información ))");
		break;
        }
	return 1;
}

stock EspaciosMaletero(i) //TESTEAR
{
    new espacios;
    switch(i)
    {
        case 400: { espacios = 7; }
        case 401: { espacios = 5; }
        case 402: { espacios = 5; }
        case 403: { espacios = 10; }
        case 404: { espacios = 5; }
        case 405: { espacios = 5; }
        case 406: { espacios = 10; }
        case 407: { espacios = 10; }
        case 408: { espacios = 10; }
        case 409: { espacios = 5; }
        case 410: { espacios = 4; }
        case 411: { espacios = 3; }
        case 412: { espacios = 5; }
        case 413: { espacios = 9; }
        case 414: { espacios = 10; }
        case 415: { espacios = 3; }
        case 416: { espacios = 10; }
        case 417: { espacios = 10; }
        case 418: { espacios = 6; }
        case 419: { espacios = 5; }
        case 420: { espacios = 5; }
        case 421: { espacios = 5; }
        case 422: { espacios = 6; }
        case 423: { espacios = 10; }
        case 424: { espacios = 2; }
        case 425: { espacios = 2; }
        case 426: { espacios = 5; }
        case 427: { espacios = 10; }
        case 428: { espacios = 10; }
        case 429: { espacios = 4; }
        case 430: { espacios = 8; }
        case 431: { espacios = 10; }
        case 432: { espacios = 2; }
        case 433: { espacios = 10; }
        case 434: { espacios = 2; }
        case 435: { espacios = 10; }
        case 436: { espacios = 4; }
        case 437: { espacios = 10; }
        case 438: { espacios = 5; }
        case 439: { espacios = 4; }
        case 440: { espacios = 9; }
        case 442: { espacios = 1; }
        case 443: { espacios = 2; }
        case 444: { espacios = 2; }
        case 445: { espacios = 5; }
        case 446: { espacios = 1; }
        case 447: { espacios = 2; }
        case 448: { espacios = 2; }
        case 449: { espacios = 10; }
        case 450: { espacios = 10; }
        case 451: { espacios = 3; }
        case 452: { espacios = 4; }
        case 453: { espacios = 8; }
        case 454: { espacios = 10; }
        case 455: { espacios = 10; }
        case 456: { espacios = 10; }
        case 457: { espacios = 2; }
        case 458: { espacios = 5; }
        case 459: { espacios = 8; }
        case 460: { espacios = 2; }
        case 461: { espacios = 2; }
        case 462: { espacios = 1; }
        case 463: { espacios = 2; }
        case 466: { espacios = 4; }
        case 467: { espacios = 5; }
        case 468: { espacios = 2; }
        case 469: { espacios = 4; }
        case 470: { espacios = 8; }
        case 471: { espacios = 2; }
        case 472: { espacios = 4; }
        case 473: { espacios = 3; }
        case 474: { espacios = 4; }
        case 475: { espacios = 4; }
        case 476: { espacios = 4; }
        case 477: { espacios = 4; }
        case 478: { espacios = 7; }
        case 479: { espacios = 6; }
        case 480: { espacios = 4; }
        case 482: { espacios = 10; }
        case 483: { espacios = 6; }
        case 484: { espacios = 10; }
        case 485: { espacios = 2; }
        case 486: { espacios = 2; }
        case 487: { espacios = 10; }
        case 488: { espacios = 10; }
        case 489: { espacios = 8; }
        case 490: { espacios = 8; }
        case 491: { espacios = 4; }
        case 492: { espacios = 6; }
        case 493: { espacios = 8; }
        case 494: { espacios = 3; }
        case 495: { espacios = 2; }
        case 496: { espacios = 3; }
        case 497: { espacios = 10; }
        case 498: { espacios = 10; }
        case 499: { espacios = 10; }
        case 500: { espacios = 2; }
        case 502: { espacios = 2; }
        case 503: { espacios = 2; }
        case 504: { espacios = 2; }
        case 505: { espacios = 8; }
        case 506: { espacios = 3; }
        case 507: { espacios = 5; }
        case 508: { espacios = 10; }
        case 511: { espacios = 4; }
        case 512: { espacios = 4; }
        case 513: { espacios = 4; }
        case 514: { espacios = 2; }
        case 515: { espacios = 2; }
        case 516: { espacios = 5; }
        case 517: { espacios = 5; }
        case 518: { espacios = 4; }
        case 519: { espacios = 10; }
        case 520: { espacios = 2; }
        case 521: { espacios = 2; }
        case 522: { espacios = 2; }
        case 523: { espacios = 4; }
        case 524: { espacios = 2; }
        case 525: { espacios = 4; }
        case 526: { espacios = 5; }
        case 527: { espacios = 5; }
        case 528: { espacios = 10; }
        case 529: { espacios = 4; }
        case 530: { espacios = 1; }
        case 531: { espacios = 1; }
        case 532: { espacios = 1; }
        case 533: { espacios = 4; }
        case 534: { espacios = 6; }
        case 535: { espacios = 6; }
        case 536: { espacios = 5; }
        case 537: { espacios = 10; }
        case 538: { espacios = 10; }
        case 540: { espacios = 4; }
        case 541: { espacios = 4; }
        case 542: { espacios = 4; }
        case 543: { espacios = 6; }
        case 544: { espacios = 10; }
        case 545: { espacios = 3; }
        case 546: { espacios = 4; }
        case 547: { espacios = 5; }
        case 548: { espacios = 10; }
        case 549: { espacios = 6; }
        case 550: { espacios = 5; }
        case 551: { espacios = 5; }
        case 552: { espacios = 10; }
        case 553: { espacios = 10; }
        case 554: { espacios = 8; }
        case 555: { espacios = 4; }
        case 556: { espacios = 2; }
        case 557: { espacios = 2; }
        case 558: { espacios = 4; }
        case 559: { espacios = 3; }
        case 560: { espacios = 5; }
        case 561: { espacios = 8; }
        case 562: { espacios = 4; }
        case 563: { espacios = 10; }
        case 565: { espacios = 3; }
        case 566: { espacios = 4; }
        case 567: { espacios = 4; }
        case 568: { espacios = 1; }
        case 569: { espacios = 10; }
        case 570: { espacios = 10; }
        case 571: { espacios = 1; }
        case 572: { espacios = 1; }
        case 573: { espacios = 2; }
        case 574: { espacios = 2; }
        case 575: { espacios = 3; }
        case 576: { espacios = 6; }
        case 577: { espacios = 10; }
        case 578: { espacios = 2; }
        case 579: { espacios = 8; }
        case 580: { espacios = 5; }
        case 581: { espacios = 2; }
        case 582: { espacios = 10; }
        case 583: { espacios = 1; }
        case 585: { espacios = 4; }
        case 586: { espacios = 4; }
        case 587: { espacios = 3; }
        case 588: { espacios = 8; }
        case 589: { espacios = 3; }
        case 592: { espacios = 10; }
        case 593: { espacios = 4; }
        case 595: { espacios = 8; }
        case 596: { espacios = 6; }
        case 597: { espacios = 6; }
        case 598: { espacios = 6; }
        case 599: { espacios = 6; }
        case 600: { espacios = 7; }
        case 601: { espacios = 4; }
        case 602: { espacios = 4; }
        case 603: { espacios = 4; }
        case 609: { espacios = 10; }
    }
    return espacios;
}

stock IsPlayerInWater(playerid) // Si está en el agua
{
	new anim = GetPlayerAnimationIndex(playerid);
 	if (((anim >=  1538) && (anim <= 1542)) || (anim == 1544) || (anim == 1250) || (anim == 1062)) return 1;
  	return 0;
}

stock IsPlayerAiming(playerid) // Si está apuntando
{
	new anim = GetPlayerAnimationIndex(playerid);
	if (((anim >= 1160) && (anim <= 1163)) || (anim == 1167) || (anim == 1365) || (anim == 1643) || (anim == 1453) || (anim == 220)) return 1;
 	return 0;
}

stock PonerLaser(playerid) // Lasers en armas
{
    RemovePlayerAttachedObject(playerid, 0);
	if ((IsPlayerInAnyVehicle(playerid)) || (IsPlayerInWater(playerid))) return 1;
	switch (PlayerInfo[playerid][pManoDer])
	{
		case 20:
    	{
			if (IsPlayerAiming(playerid))
	    	{
				if (GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_DUCK)
 				{
					SetPlayerAttachedObject(playerid, 0, 18643, 6, // SP standing aiming
     				0.108249, 0.030232, 0.118051, 1.468254, 350.512573, 364.284240);
      			}
			  	else
			   	{
 					SetPlayerAttachedObject(playerid, 0, 18643, 6, // SP crouched aiming
      				0.108249, 0.030232, 0.118051, 1.468254, 349.862579, 364.784240);
          		}
            }
			else
		 	{
				if (GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_DUCK)
	   			{
 					SetPlayerAttachedObject(playerid, 0, 18643, 6, // SP standing not aiming
      				0.078248, 0.027239, 0.113051, -11.131746, 350.602722, 362.384216);
          		}
				else
			   	{
 					SetPlayerAttachedObject(playerid, 0, 18643, 6, // SP crouched not aiming
 					0.078248, 0.027239, 0.113051, -11.131746, 350.602722, 362.384216);
                }
			}
	  	}
		case 24:
	 	{
			if (IsPlayerAiming(playerid))
			{
				if (GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_DUCK)
	    		{
 					SetPlayerAttachedObject(playerid, 0, 18643, 6, // SPAS standing aiming
      				0.588246, -0.022766, 0.138052, -11.531745, 347.712585, 352.784271);
          		}
			  	else
			   	{
 					SetPlayerAttachedObject(playerid, 0, 18643, 6, // SPAS crouched aiming
      				0.588246, -0.022766, 0.138052, 1.468254, 350.712585, 352.784271);
          		}
   			}
		   	else
		    {
				if (GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_DUCK)
		 		{
					SetPlayerAttachedObject(playerid, 0, 18643, 6, // SPAS standing not aiming
     				0.563249, -0.01976, 0.134051, -11.131746, 351.602722, 351.384216);
         		}
		 		else
			  	{
					SetPlayerAttachedObject(playerid, 0, 18643, 6, // SPAS crouched not aiming
					0.563249, -0.01976, 0.134051, -11.131746, 351.602722, 351.384216);
                }
			}
		}
		case 27:
	 	{
			if (IsPlayerAiming(playerid))
		 	{
				if (GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_DUCK)
		  		{
					SetPlayerAttachedObject(playerid, 0, 18643, 6, // AK standing aiming
     				0.628249, -0.027766, 0.078052, -6.621746, 352.552642, 355.084289);
         		}
			 	else
			  	{
					SetPlayerAttachedObject(playerid, 0, 18643, 6, // AK crouched aiming
     				0.628249, -0.027766, 0.078052, -1.621746, 356.202667, 355.084289);
         		}
           	}
		   	else
	    	{
				if (GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_DUCK)
			 	{
					SetPlayerAttachedObject(playerid, 0, 18643, 6, // AK standing not aiming
     				0.663249, -0.02976, 0.080051, -11.131746, 358.302734, 353.384216);
         		}
			 	else
			  	{
					SetPlayerAttachedObject(playerid, 0, 18643, 6, // AK crouched not aiming
     				0.663249, -0.02976, 0.080051, -11.131746, 358.302734, 353.384216);
                }
			}
		}
		case 28:
	 	{
			if (IsPlayerAiming(playerid))
	  		{
				if (GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_DUCK)
		   		{
 					SetPlayerAttachedObject(playerid, 0, 18643, 6, // M4 standing aiming
      				0.528249, -0.020266, 0.068052, -6.621746, 352.552642, 355.084289);
  				}
			  	else
			   	{
 					SetPlayerAttachedObject(playerid, 0, 18643, 6, // M4 crouched aiming
      				0.528249, -0.020266, 0.068052, -1.621746, 356.202667, 355.084289);
       			}
          	}
	  		else
		   	{
				if (GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_DUCK)
		 		{
					SetPlayerAttachedObject(playerid, 0, 18643, 6, // M4 standing not aiming
     				0.503249, -0.02376, 0.065051, -11.131746, 357.302734, 354.484222);
         		}
		 		else
			  	{
					SetPlayerAttachedObject(playerid, 0, 18643, 6, // M4 crouched not aiming
     				0.503249, -0.02376, 0.065051, -11.131746, 357.302734, 354.484222);
                }
			}
		}
		case 26:
	 	{
			if (IsPlayerAiming(playerid))
	  		{
				if (GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_DUCK)
	    		{
 					SetPlayerAttachedObject(playerid, 0, 18643, 6, // MP5 standing aiming
					0.298249, -0.02776, 0.158052, -11.631746, 359.302673, 357.584259);
  				}
			  	else
			   	{
 					SetPlayerAttachedObject(playerid, 0, 18643, 6, // MP5 crouched aiming
      				0.298249, -0.02776, 0.158052, 8.368253, 358.302673, 352.584259);
          		}
            }
			else
			{
				if (GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_DUCK)
		 		{
					SetPlayerAttachedObject(playerid, 0, 18643, 6, // MP5 standing not aiming
     				0.293249, -0.027759, 0.195051, -12.131746, 354.302734, 352.484222);
         		}
		 		else
			  	{
					SetPlayerAttachedObject(playerid, 0, 18643, 6, // MP5 crouched not aiming
     				0.293249, -0.027759, 0.195051, -12.131746, 354.302734, 352.484222);
                }
			}
		}
	}
	return 1;
}

//-----ANTICHEAT-----//

forward SobeitCheck(playerid);
public SobeitCheck(playerid)
{
	new Float:x, Float:y, Float:z;
    GetPlayerCameraFrontVector(playerid, x, y, z);
    #pragma unused x
    #pragma unused y
    if(z < -0.68)
	{
        new string[90];
        format(string, sizeof(string), "[ANTICHEAT]: EL JUGADOR '%s' SE HA CONECTADO CON SOBEIT Y HA SIDO KICKEADO.", GetPlayerNameRP(playerid));
        SendAdminMessage(Aguamarina, string);
        printf(string);
        SendClientMessage(playerid, Rojo, "* Has sido kickeado porque se ha detectado que usas Cleos o Sobeit.");
        KickL(playerid);
    }
    return 1;
}

stock GivePlayerMoneyAC(playerid, money)
{
    DineroAC[playerid] += money;
	GivePlayerMoney(playerid, money);
}

stock ResetPlayerMoneyAC(playerid)
{
    DineroAC[playerid] = 0;
	ResetPlayerMoney(playerid);
}
//-----FIN ANTICHEAT-----//

stock MostrarATM(playerid, parte)
{
	new string[128], dialog[250];
	if(parte == 1) //Menú principal
	{
	    format(string, sizeof(string), "\n» Retirar");
		strcat(dialog, string);
		format(string, sizeof(string), "\n» Depositar");
		strcat(dialog, string);
		format(string, sizeof(string), "\n» Transferir");
		strcat(dialog, string);
		format(string, sizeof(string), "\n» Balance");
		strcat(dialog, string);
		ShowPlayerDialog(playerid, 24, DIALOG_STYLE_LIST, "{FFFFFF}Menú Cajero", dialog, "Seleccionar", "Salir");
	}
	if(parte == 2) //Retirar dinero
	{
	    format(string, sizeof(string), "Cantidad de dinero en cuenta bancaria: %d$", PlayerInfo[playerid][pDineroBanco]);
	    strcat(dialog, string);
	    format(string, sizeof(string), "\nEscribe la cantidad que deseas retirar.", PlayerInfo[playerid][pDineroBanco]);
	    strcat(dialog, string);
		ShowPlayerDialog(playerid, 25, DIALOG_STYLE_INPUT, "{FFFFFF}Cajero Automático", dialog, "Aceptar", "Salir");
	}
	if(parte == 3) //Ingresar dinero
	{
	    format(string, sizeof(string), "Cantidad de dinero en cuenta bancaria: %d$", PlayerInfo[playerid][pDineroBanco]);
	    strcat(dialog, string);
	    format(string, sizeof(string), "\nEscribe la cantidad que deseas ingresar.", PlayerInfo[playerid][pDineroBanco]);
	    strcat(dialog, string);
		ShowPlayerDialog(playerid, 26, DIALOG_STYLE_INPUT, "{FFFFFF}Cajero Automático", dialog, "Aceptar", "Salir");
	}
	if(parte == 4) //Transferir dinero (ID)
	{
		ShowPlayerDialog(playerid, 27, DIALOG_STYLE_INPUT, "{FFFFFF}Cajero Automático", "Escribe el número de la cuenta bancaria (ID).", "Aceptar", "Salir");
	}
	if(parte == 5) //Transferir dinero (Cantidad)
	{
	    format(string, sizeof(string), "Cantidad de dinero en cuenta bancaria: %d$", PlayerInfo[playerid][pDineroBanco]);
	    strcat(dialog, string);
	    format(string, sizeof(string), "\nEscribe la cantidad que deseas transferir.", PlayerInfo[playerid][pDineroBanco]);
	    strcat(dialog, string);
		ShowPlayerDialog(playerid, 28, DIALOG_STYLE_INPUT, "{FFFFFF}Cajero Automático", dialog, "Aceptar", "Salir");
	}
	if(parte == 6) //Balance
	{
	    format(string, sizeof(string), "Cantidad de dinero en cuenta bancaria: %d$", PlayerInfo[playerid][pDineroBanco]);
		ShowPlayerDialog(playerid, 29, DIALOG_STYLE_MSGBOX, "{FFFFFF}Cajero Automático", string, "Aceptar", "Salir");
	}
	return 1;
}

stock GetPlayerCajaArmamento(playerid, mano)
{
    if(mano == 1) //Mano derecha
	{
		switch(PlayerInfo[playerid][pManoDer])
		{
		    case 102: return 8; //Katana
		    case 103: return 19; //M1911
		    case 104: return 39; //tgador M1911
		    case 105: return 47; //Balas .45 ACP
		    case 106: return 21; //D. Eagle
		    case 107: return 40; //Cargador D. Eagle
		    case 108: return 48; //Balas .50 AE
		    case 109: return 29; //Tec-9
		    case 110: return 43; //Cargador Tec-9
		    case 111: return 25; //UZI
		    case 112: return 41; //Cargador UZI
		    case 113: return 26; //MP5
		    case 114: return 42; //Cargador MP5
		    case 115: return 49; //Balas SMG
		    case 116: return 22; //Escopeta
		    case 117: return 23; //Escopeta recortada
		    case 118: return 50; //Cartuchos 12GA
		    case 119: return 27; //Ak-47
		    case 120: return 44; //Cargador Ak-47
		    case 121: return 51; //Balas Ak-47
		    case 122: return 30; //Rifle
		    case 123: return 46; //Cargador rifle
		    case 124: return 53; //Balas rifle
		}
	}
	if(mano == 2) //Mano izquierda
	{
		switch(PlayerInfo[playerid][pManoIzq])
		{
		    case 102: return 8; //Katana
		    case 103: return 19; //M1911
		    case 104: return 39; //Cargador M1911
		    case 105: return 47; //Balas .45 ACP
		    case 106: return 21; //D. Eagle
		    case 107: return 40; //Cargador D. Eagle
		    case 108: return 48; //Balas .50 AE
		    case 109: return 29; //Tec-9
		    case 110: return 43; //Cargador Tec-9
		    case 111: return 25; //UZI
		    case 112: return 41; //Cargador UZI
		    case 113: return 26; //MP5
		    case 114: return 42; //Cargador MP5
		    case 115: return 49; //Balas SMG
		    case 116: return 22; //Escopeta
		    case 117: return 23; //Escopeta recortada
		    case 118: return 50; //Cartuchos 12GA
		    case 119: return 27; //Ak-47
		    case 120: return 44; //Cargador Ak-47
		    case 121: return 51; //Balas Ak-47
		    case 122: return 30; //Rifle
		    case 123: return 46; //Cargador rifle
		    case 124: return 53; //Balas rifle
		}
	}
	return 0;
}

stock SetVehicleMatricula(carid)
{
	if(!GetVehicleModel(carid)) return 1;
	new matricula[24];
	if(carid <= MAX_VEHPUBLICO) //Vehículo scripteado
	{
	    format(matricula, sizeof(matricula), "LS-%d", carid);
		SetVehicleNumberPlate(carid, matricula);
	}
	else if(carid > MAX_VEHPUBLICO) //Vehículo privado
	{
	    format(matricula, sizeof(matricula), "LS-%d", CarInfo[carid][cLlave]);
		SetVehicleNumberPlate(carid, matricula);
	}
	return 1;
}

stock GetPlayerCargadorCalibre(playerid, mano)
{
	if(mano == 1) //Mano derecha
	{
		if(PlayerInfo[playerid][pManoDer] == 39) return 1; //M1911 (.45 ACP)
		if(PlayerInfo[playerid][pManoDer] == 40) return 2; //D.Eagle (.50 AE)
		if(PlayerInfo[playerid][pManoDer] == 41) return 3; //UZI (9mm)
		if(PlayerInfo[playerid][pManoDer] == 42) return 3; //MP5 (9mm)
		if(PlayerInfo[playerid][pManoDer] == 43) return 3; //Tec9 (9mm)
		if(PlayerInfo[playerid][pManoDer] == 44) return 5; //Ak47
		if(PlayerInfo[playerid][pManoDer] == 45) return 6; //M4
		if(PlayerInfo[playerid][pManoDer] == 46) return 7; //Rifle
	}
	if(mano == 2) //Mano izquierda
	{
		if(PlayerInfo[playerid][pManoIzq] == 39) return 1; //M1911 (.45 ACP)
		if(PlayerInfo[playerid][pManoIzq] == 40) return 2; //D.Eagle (.50 AE)
		if(PlayerInfo[playerid][pManoIzq] == 41) return 3; //UZI (9mm)
		if(PlayerInfo[playerid][pManoIzq] == 42) return 3; //MP5 (9mm)
		if(PlayerInfo[playerid][pManoIzq] == 43) return 3; //Tec9 (9mm)
		if(PlayerInfo[playerid][pManoIzq] == 44) return 5; //Ak47
		if(PlayerInfo[playerid][pManoIzq] == 45) return 6; //M4
		if(PlayerInfo[playerid][pManoIzq] == 46) return 7; //Rifle
	}
	return 0;
}

stock GetPlayerMunicionCalibre(playerid, mano)
{
	if(mano == 1) //Mano derecha
	{
		if(PlayerInfo[playerid][pManoDer] == 47) return 1; //M1911 (.45 ACP)
		if(PlayerInfo[playerid][pManoDer] == 48) return 2; //D.Eagle (.50 AE)
		if(PlayerInfo[playerid][pManoDer] == 49) return 3; //UZI MP5 Tec9 (9mm)
		if(PlayerInfo[playerid][pManoDer] == 50) return 4; //Escopetas (12GA)
		if(PlayerInfo[playerid][pManoDer] == 51) return 5; //Ak47
		if(PlayerInfo[playerid][pManoDer] == 52) return 6; //M4
		if(PlayerInfo[playerid][pManoDer] == 53) return 7; //Rifle
	}
	if(mano == 2) //Mano izquierda
	{
		if(PlayerInfo[playerid][pManoIzq] == 47) return 1; //M1911 (.45 ACP)
		if(PlayerInfo[playerid][pManoIzq] == 48) return 2; //D.Eagle (.50 AE)
		if(PlayerInfo[playerid][pManoIzq] == 49) return 3; //UZI MP5 Tec9 (9mm)
		if(PlayerInfo[playerid][pManoIzq] == 50) return 4; //Escopetas (12GA)
		if(PlayerInfo[playerid][pManoIzq] == 51) return 5; //Ak47
		if(PlayerInfo[playerid][pManoIzq] == 52) return 6; //M4
		if(PlayerInfo[playerid][pManoIzq] == 53) return 7; //Rifle
	}
	return 0;
}

stock GetPlayerReloj(playerid)
{
	switch(PlayerInfo[playerid][pManoDer])
	{
	    case 87: return 87;
	    case 88: return 88;
	    case 89: return 89;
	    case 90: return 90;
	    case 91: return 91;
	    case 92: return 92;
	    case 93: return 93;
	    case 94: return 94;
		case 95: return 95;
	    case 96: return 96;
	    case 97: return 97;
	    case 98: return 98;
	    case 99: return 99;
	    case 100: return 100;
	    case 101: return 101;
	}
	switch(PlayerInfo[playerid][pManoIzq])
	{
	    case 87: return 87;
	    case 88: return 88;
	    case 89: return 89;
	    case 90: return 90;
	    case 91: return 91;
	    case 92: return 92;
	    case 93: return 93;
	    case 94: return 94;
		case 95: return 95;
	    case 96: return 96;
	    case 97: return 97;
	    case 98: return 98;
	    case 99: return 99;
	    case 100: return 100;
	    case 101: return 101;
	}
	for(new x = 0; x<8; x++)
	{
	    switch(PlayerInfo[playerid][pBol][x])
		{
		    case 87: return 87;
		    case 88: return 88;
		    case 89: return 89;
		    case 90: return 90;
		    case 91: return 91;
		    case 92: return 92;
		    case 93: return 93;
		    case 94: return 94;
			case 95: return 95;
		    case 96: return 96;
		    case 97: return 97;
		    case 98: return 98;
		    case 99: return 99;
		    case 100: return 100;
		    case 101: return 101;
		}
	}
	return 0;
}

stock IsValidSkin(SkinID) //Skins públicos (no facciones legales ni pandillas)
{
        if((SkinID >= 1) && (SkinID <= 70) || (SkinID >= 75) && (SkinID <= 85)||(SkinID == 268)||(SkinID == 72)||(SkinID == 73)||(SkinID >= 111 && SkinID <= 113)||(SkinID >= 117 && SkinID <= 148)||(SkinID >= 150 && SkinID <= 172)||(SkinID >= 176 && SkinID <= 264)||(SkinID >= 272 && SkinID <= 273)||(SkinID >= 289 && SkinID <= 299||(SkinID >= 87 && SkinID <= 91)||(SkinID >= 93 && SkinID <= 98)||(SkinID >= 100 && SkinID <= 101))) return true;
        else return false;
}

stock GetPlayerFardoDroga(playerid, mano)
{
	if(mano == 1) //Mano derecha
	{
		if(PlayerInfo[playerid][pManoDer] == 75) return 1;
		if(PlayerInfo[playerid][pManoDer] == 76) return 2;
		if(PlayerInfo[playerid][pManoDer] == 77) return 3;
		if(PlayerInfo[playerid][pManoDer] == 78) return 4;
		if(PlayerInfo[playerid][pManoDer] == 79) return 5;
	}
	if(mano == 2) //Mano izquierda
	{
		if(PlayerInfo[playerid][pManoIzq] == 75) return 1;
		if(PlayerInfo[playerid][pManoIzq] == 76) return 2;
		if(PlayerInfo[playerid][pManoIzq] == 77) return 3;
		if(PlayerInfo[playerid][pManoIzq] == 78) return 4;
		if(PlayerInfo[playerid][pManoIzq] == 79) return 5;
	}
	return 0;
}

stock GetPlayerBolsitaDroga(playerid, mano)
{
	if(mano == 1) //Mano derecha
	{
		if(PlayerInfo[playerid][pManoDer] == 80) return 1;
		if(PlayerInfo[playerid][pManoDer] == 81) return 2;
		if(PlayerInfo[playerid][pManoDer] == 82) return 3;
		if(PlayerInfo[playerid][pManoDer] == 83) return 4;
		if(PlayerInfo[playerid][pManoDer] == 84) return 5;
	}
	if(mano == 2) //Mano izquierda
	{
		if(PlayerInfo[playerid][pManoIzq] == 80) return 1;
		if(PlayerInfo[playerid][pManoIzq] == 81) return 2;
		if(PlayerInfo[playerid][pManoIzq] == 82) return 3;
		if(PlayerInfo[playerid][pManoIzq] == 83) return 4;
		if(PlayerInfo[playerid][pManoIzq] == 84) return 5;
	}
	return 0;
}

stock GetPlayerPlantacion(playerid)
{
	new planta;
	for(new x=0; x<=CodigoPlantacion; x++)
	{
	    if(PlantaInfo[x][plEstado] > 0)
	    {
	        if(IsPlayerInRangeOfPoint(playerid, 2.0, PlantaInfo[x][plX], PlantaInfo[x][plY], PlantaInfo[x][plZ])){planta = x; break;}
	    }
	}
	return planta;
}

stock CrearPlantacion(playerid, Tipo, Float:X, Float:Y, Float:Z, VirtualWorld, Interior)
{
	new planta = CodigoPlantacion;
	if(Tipo == 1) //Marihuana
	{
	    PlantaInfo[planta][plSQLID] = CodigoPlantacion;
		PlantaInfo[planta][plObjeto] = CreateDynamicObject(2195, X, Y, Z - 0.9, 0, 0, 0, VirtualWorld, Interior);
		PlantaInfo[planta][plTipo] = 1;
		PlantaInfo[planta][plEstado] = 1;
		PlantaInfo[planta][plInt] = Interior;
		PlantaInfo[planta][plVW] = VirtualWorld;
		PlantaInfo[planta][plX] = X;
		PlantaInfo[planta][plY] = Y;
		PlantaInfo[planta][plZ] = Z;
		format(PlantaInfo[planta][plPlantador], 36, "%s", GetPlayerNameRP(playerid));

		new query[258];
	    format(query, sizeof(query), "INSERT INTO plantaciones (Plantador) VALUES ('%s')", GetPlayerNameRP(playerid));
		mysql_query(1, query);
		SavePlantacion(planta);
		PlantaInfo[planta][plPickup] = CreateDynamic3DTextLabel("",Verde,X,Y,Z,7.0,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1,VirtualWorld,Interior);
		UpdatePlantacionLabel(planta);
	}
	TotalPlantaciones ++;
	CodigoPlantacion ++;
	return 1;
}

stock EliminarPlantacion(planta)
{
    PlantaInfo[planta][plEstado] = 0;
    DestroyDynamic3DTextLabel(PlantaInfo[planta][plPickup]);
    DestroyDynamicObject(PlantaInfo[planta][plObjeto]);
	SavePlantacion(planta);
	return 1;
}

SavePlantacion(idx)
{
	new query[258];
    format(query, sizeof(query), "UPDATE plantaciones SET Tipo=%d,X=%f,Y=%f,Z=%f,Plantador='%s',Estado=%d,Interior=%d,VirtualWorld=%d WHERE SQLID=%d",
	PlantaInfo[idx][plTipo],
	PlantaInfo[idx][plX],
	PlantaInfo[idx][plY],
	PlantaInfo[idx][plZ],
	PlantaInfo[idx][plPlantador],
	PlantaInfo[idx][plEstado],
	PlantaInfo[idx][plInt],
	PlantaInfo[idx][plVW],
	PlantaInfo[idx][plSQLID]);
	mysql_query(1, query);
}

UpdatePlantacionLabel(x) //Actualiza 3DTextLabels plantaciones
{
	new string[80];
	if(PlantaInfo[x][plTipo] <= 1) //Marihuana
	{
		if(PlantaInfo[x][plEstado] <= 100)
		{
			format(string,sizeof(string),"Plantación marihuana\nEstado: %d%%",PlantaInfo[x][plEstado]);
		}
		else if(PlantaInfo[x][plEstado] > 100)
		{
			format(string,sizeof(string),"Plantación marihuana\nEstado: 100%%");
		}
	}
	UpdateDynamic3DTextLabelText(PlantaInfo[x][plPickup],Verde,string);
}

LoadPlantacion()
{
    new Query[180], content[60];
	new ccount;
	new sql[80], row[512];
 	format(sql, sizeof(sql), "SELECT SQLID FROM plantaciones ORDER BY SQLID DESC");
	mysql_query(1, sql);
	mysql_store_result();
	mysql_fetch_row(row);
	ccount = strval(row);

	for(new x=0; x<=ccount; x++)
	{
	    mysql_format(1, Query, sizeof(Query), "SELECT * FROM `plantaciones` WHERE `SQLID` = %d", x);
		mysql_query(1, Query);
		mysql_store_result();
		if(cache_get_field_content_int(0, "Estado") != 0)
		{
			PlantaInfo[x][plSQLID] = cache_get_field_content_int(0, "SQLID");
			PlantaInfo[x][plTipo] = cache_get_field_content_int(0, "Tipo");
			PlantaInfo[x][plX] = cache_get_field_content_float(0, "X");
			PlantaInfo[x][plY] = cache_get_field_content_float(0, "Y");
			PlantaInfo[x][plZ] = cache_get_field_content_float(0, "Z");
			PlantaInfo[x][plEstado] = cache_get_field_content_int(0, "Estado");
			PlantaInfo[x][plInt] = cache_get_field_content_int(0, "Interior");
			PlantaInfo[x][plVW]  = cache_get_field_content_int(0, "VirtualWorld");
		 	cache_get_field_content(0, "Plantador", content);
		    format(PlantaInfo[x][plPlantador], 60, "%s", content);

		    PlantaInfo[x][plObjeto] = CreateDynamicObject(2195, PlantaInfo[x][plX], PlantaInfo[x][plY], PlantaInfo[x][plZ] - 0.9, 0, 0, 0, PlantaInfo[x][plInt], PlantaInfo[x][plVW]);

			PlantaInfo[x][plPickup] = CreateDynamic3DTextLabel("",Verde,PlantaInfo[x][plX], PlantaInfo[x][plY], PlantaInfo[x][plZ],7.0,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1,PlantaInfo[x][plVW],PlantaInfo[x][plInt]);
			UpdatePlantacionLabel(x);

            TotalPlantaciones++;
		}
		if(ccount >= CodigoPlantacion){CodigoPlantacion = ccount+1;}
	}
	mysql_free_result();
	printf("*- Plantaciones Cargadas: %d Código Plantación: %d", TotalPlantaciones, CodigoPlantacion);
	return 1;
}

stock DarSobredosis(playerid)
{
	new drogasunidad, hora, minuto;
	drogasunidad += (PlayerInfo[playerid][pDrConsumida][0]/19); //Marihuana
	drogasunidad += (PlayerInfo[playerid][pDrConsumida][1]/30); //Cocaína
	drogasunidad += (PlayerInfo[playerid][pDrConsumida][2]/20); //Crack
	drogasunidad += (PlayerInfo[playerid][pDrConsumida][3]/40); //Heroína
	drogasunidad += (PlayerInfo[playerid][pDrConsumida][4]/25); //LSD
	if(drogasunidad >= 6)
	{
		SendClientMessage(playerid, NaranjaOscuro, "* Has sufrido una sobredosis por consumir demasiada droga en tan poco tiempo.");
		SetPlayerHealth(playerid,0.0);
		RemovePlayerColorFade(playerid);
		SetPlayerWeather(playerid, DefaultWeather);
		gettime(hora, minuto);
		SetPlayerTime(playerid, hora, minuto);
		return 1;
	}
	if(drogasunidad >= 4)
	{
		new rand = random(2);
		if(rand == 0)
		{
			SendClientMessage(playerid, NaranjaOscuro, "* Ten cuidao, espera a que se pasen los efectos antes de volver a consumir drogas o sufrirás una sobredosis.");
			return 1;
		}
		else
		{
			SendClientMessage(playerid, NaranjaOscuro, "* Has sufrido una sobredosis por consumir demasiada droga en tan poco tiempo.");
			SetPlayerHealth(playerid,0.0);
			RemovePlayerColorFade(playerid);
			SetPlayerWeather(playerid, DefaultWeather);
			gettime(hora, minuto);
			SetPlayerTime(playerid, hora, minuto);
			return 1;
		}
	}
	if(drogasunidad == 2 || drogasunidad == 3)
	{
		SendClientMessage(playerid, NaranjaOscuro, "* Ten cuidao, espera a que se pasen los efectos antes de volver a consumir drogas o sufrirás una sobredosis.");
		return 1;
	}
	return 1;
}

stock GivePlayerDrunkLevel(playerid, cantidad)
{
	SetPlayerDrunkLevel(playerid, GetPlayerDrunkLevel(playerid)+cantidad);
	return 1;
}

stock valorabsoluto(int) //Retorna valor absoluto
{
    if (int < 0)
        return -int;
    else
        return int;
}

stock HexToInt(string[]) // By DracoBlue
{
    if (string[0]==0) return 0;
    new i;
    new cur=1;
    new res=0;
    for (i=strlen(string);i>0;i--) {
        if (string[i-1]<58) res=res+cur*(string[i-1]-48); else res=res+cur*(string[i-1]-65+10);
        cur=cur*16;
    }
    return res;
}

stock ActualizarTurf(turfid)
{
    for(new i; i < MAX_PLAYERS; i++)
	{
	    if(FaccInfo[PlayerInfo[i][pFaccion]][fTipo] == 1 || FaccInfo[PlayerInfo[i][pFaccion]][fTipo] == 3) //Forma parte de LSPD o una banda/pandilla
	    {
	        if(TurfInfo[turfid][tAtacante] == 0) //No está siendo atacado ni conquistado
	        {
		        new color[14], alpha[3];
		        switch(TurfInfo[turfid][tNivel])
		        {
		            case 1: format(alpha,sizeof(alpha),"55");
		            case 2: format(alpha,sizeof(alpha),"88");
		            case 3: format(alpha,sizeof(alpha),"BB");
		            case 4: format(alpha,sizeof(alpha),"EE");
		            default: format(alpha,sizeof(alpha),"55");
		        }
		        format(color,sizeof(color),"0x%s%s",FaccInfo[TurfInfo[turfid][tFaccion]][fColor], alpha);
		        GangZoneShowForPlayer(i, TurfInfo[turfid][tTurf], HexToInt(color));
	        }
	    }
	    if(FaccInfo[PlayerInfo[i][pFaccion]][fTipo] == 3) //Forma parte solo de una banda/pandilla
	    {
	        if(TurfInfo[turfid][tAtacante] != 0) //Está siendo atacado o conquistado
			{
			    new color2[14], alpha2[3];
		        switch(TurfInfo[turfid][tNivel])
		        {
		            case 1: format(alpha2,sizeof(alpha2),"55");
		            case 2: format(alpha2,sizeof(alpha2),"88");
		            case 3: format(alpha2,sizeof(alpha2),"BB");
		            case 4: format(alpha2,sizeof(alpha2),"EE");
		            default: format(alpha2,sizeof(alpha2),"55");
		        }
		        format(color2,sizeof(color2),"0x%s%s",FaccInfo[TurfInfo[turfid][tAtacante]][fColor], alpha2);
		        GangZoneFlashForPlayer(i, TurfInfo[turfid][tTurf], HexToInt(color2));
			}
	    }
	}
	return 1;
}

stock GetPlayerTurf(playerid) //Retorna la ID del turf en la que se encuentra el jugador
{
	new turfid;
    for(new i; i <= TotalTurfs; i++)
	{
		if(IsPlayerInDynamicArea(playerid, TurfInfo[i][tArea])){turfid = i; break;}
	}
	return turfid;
}

stock MostrarTurfs(playerid) //Mostrar turfs a un jugador
{
    new Faccion = PlayerInfo[playerid][pFaccion];
    if(FaccInfo[Faccion][fTipo] == 1 || FaccInfo[Faccion][fTipo] == 3) //Forma parte de LSPD o una banda/pandilla
    {
        new color[14], alpha[3];
	    for(new x=1; x<=TotalTurfs; x++)
	    {
	        switch(TurfInfo[x][tNivel])
	        {
	            case 1: format(alpha,sizeof(alpha),"55");
	            case 2: format(alpha,sizeof(alpha),"88");
	            case 3: format(alpha,sizeof(alpha),"BB");
	            case 4: format(alpha,sizeof(alpha),"EE");
	            default: format(alpha,sizeof(alpha),"55");
	        }
	        format(color,sizeof(color),"0x%s%s",FaccInfo[TurfInfo[x][tFaccion]][fColor], alpha);
	        GangZoneShowForPlayer(playerid, TurfInfo[x][tTurf], HexToInt(color));
	    }
    }
    return 1;
}

LoadTurfs()
{
	for(new i; i < MAX_TURFS; i++)
	{
		TurfInfo[i][tTurf] = NOEXISTE;
	}

	new Query[180];
	new ccount;
	new sql[80], row[512];
	format(sql, sizeof(sql), "SELECT ID FROM turfs ORDER BY ID DESC");
	mysql_query(1, sql);
	mysql_store_result();
	mysql_fetch_row(row);
	ccount = strval(row);

	for(new x=1; x<=ccount; x++)
	{
	    mysql_format(1, Query, sizeof(Query), "SELECT * FROM `turfs` WHERE `ID` = %d", x);
		mysql_query(1, Query);
		mysql_store_result();
		if(cache_get_field_content_float(0, "MinX") != 0)
		{
			TurfInfo[x][tID] = cache_get_field_content_int(0, "ID");
		 	TurfInfo[x][tMinX] = cache_get_field_content_float(0, "MinX");
		 	TurfInfo[x][tMinY] = cache_get_field_content_float(0, "MinY");
		 	TurfInfo[x][tMaxX] = cache_get_field_content_float(0, "MaxX");
		 	TurfInfo[x][tMaxY] = cache_get_field_content_float(0, "MaxY");
			TurfInfo[x][tFaccion] = cache_get_field_content_int(0, "Faccion");
			TurfInfo[x][tNivel] = cache_get_field_content_int(0, "Nivel");
			TurfInfo[x][tDistrbuirDrogaX] = cache_get_field_content_float(0, "DistrbuirDrogaX");
		 	TurfInfo[x][tDistrbuirDrogaY] = cache_get_field_content_float(0, "DistrbuirDrogaY");
		 	TurfInfo[x][tDistrbuirDrogaZ] = cache_get_field_content_float(0, "DistrbuirDrogaZ");
		 	TurfInfo[x][tDrogaVendida][0] = cache_get_field_content_int(0, "DrogaVendida1");
		 	TurfInfo[x][tDrogaVendida][1] = cache_get_field_content_int(0, "DrogaVendida2");
		 	TurfInfo[x][tDrogaVendida][2] = cache_get_field_content_int(0, "DrogaVendida3");
		 	TurfInfo[x][tDrogaVendida][3] = cache_get_field_content_int(0, "DrogaVendida4");
		 	TurfInfo[x][tDrogaVendida][4] = cache_get_field_content_int(0, "DrogaVendida5");
		 	TurfInfo[x][tTurf] = GangZoneCreate(TurfInfo[x][tMinX], TurfInfo[x][tMinY], TurfInfo[x][tMaxX], TurfInfo[x][tMaxY]);
		 	TurfInfo[x][tArea] = CreateDynamicRectangle(TurfInfo[x][tMinX], TurfInfo[x][tMinY], TurfInfo[x][tMaxX], TurfInfo[x][tMaxY]);
		 	if(TurfInfo[x][tFaccion] == 0) TurfInfo[x][tNivel] = 1;
		 	if(TurfInfo[x][tNivel] < 1) TurfInfo[x][tNivel] = 1;
		 	if(TurfInfo[x][tNivel] > 4) TurfInfo[x][tNivel] = 4;
		 	if(TotalTurfs < x) TotalTurfs = x;
		 	mysql_free_result();
	 	}
	}
	printf("*- Territorios Cargados: %d (Máximo: %d)", TotalTurfs, MAX_TURFS);
}

SaveTurf(TurfID)
{
	new Query[300];
	format(Query, sizeof(Query), "UPDATE turfs SET Faccion=%d,Nivel=%d WHERE ID=%d",
	TurfInfo[TurfID][tFaccion],
	TurfInfo[TurfID][tNivel],
	TurfInfo[TurfID][tID]);
	mysql_query(1, Query);

	for(new x = 0; x<5; x++)
	{
		format(Query, sizeof(Query), "UPDATE turfs SET DrogaVendida%d=%d WHERE ID=%d",
		x+1, TurfInfo[TurfID][tDrogaVendida][x],
		TurfInfo[TurfID][tID]);
		mysql_query(1, Query);
	}
	return 1;
}

LoadFaccs()
{
	new Query[180], content[60];
	new ccount;
	new sql[80], row[512];
	format(sql, sizeof(sql), "SELECT ID FROM facciones ORDER BY ID DESC");
	mysql_query(1, sql);
	mysql_store_result();
	mysql_fetch_row(row);
	ccount = strval(row);

	for(new x=0; x<=ccount; x++)
	{
	    mysql_format(1, Query, sizeof(Query), "SELECT * FROM `facciones` WHERE `ID` = %d", x);
		mysql_query(1, Query);
		mysql_store_result();
		FaccInfo[x][fID] = cache_get_field_content_int(0, "ID");

	 	cache_get_field_content(0, "Nombre", content);
		format(FaccInfo[x][fNombre], 60, "%s", content);

		cache_get_field_content(0, "Rango1", content);
		format(FaccInfo[x][fRango1], 32, "%s", content);
		cache_get_field_content(0, "Rango2", content);
		format(FaccInfo[x][fRango2], 32, "%s", content);
		cache_get_field_content(0, "Rango3", content);
		format(FaccInfo[x][fRango3], 32, "%s", content);
		cache_get_field_content(0, "Rango4", content);
		format(FaccInfo[x][fRango4], 32, "%s", content);
		cache_get_field_content(0, "Rango5", content);
		format(FaccInfo[x][fRango5], 32, "%s", content);
		cache_get_field_content(0, "Rango6", content);
		format(FaccInfo[x][fRango6], 32, "%s", content);
		cache_get_field_content(0, "Rango7", content);
		format(FaccInfo[x][fRango7], 32, "%s", content);
		cache_get_field_content(0, "Rango8", content);
		format(FaccInfo[x][fRango8], 32, "%s", content);
		cache_get_field_content(0, "Rango9", content);
		format(FaccInfo[x][fRango9], 32, "%s", content);
		cache_get_field_content(0, "Rango10", content);
		format(FaccInfo[x][fRango10], 32, "%s", content);
		cache_get_field_content(0, "Rango11", content);
		format(FaccInfo[x][fRango11], 32, "%s", content);
		cache_get_field_content(0, "Rango12", content);
		format(FaccInfo[x][fRango12], 32, "%s", content);
		cache_get_field_content(0, "Rango13", content);
		format(FaccInfo[x][fRango13], 32, "%s", content);
		cache_get_field_content(0, "Rango14", content);
		format(FaccInfo[x][fRango14], 32, "%s", content);
		cache_get_field_content(0, "Rango15", content);
		format(FaccInfo[x][fRango15], 32, "%s", content);
		cache_get_field_content(0, "Rango16", content);
		format(FaccInfo[x][fRango16], 32, "%s", content);

		cache_get_field_content(0, "Lider", content);
		format(FaccInfo[x][fLider], 32, "%s", content);

		FaccInfo[x][fTipo] = cache_get_field_content_int(0, "Tipo");

		cache_get_field_content(0, "Color", content);
		format(FaccInfo[x][fColor], 9, "%s", content);

		FaccInfo[x][fPuntosExpansion] = cache_get_field_content_int(0, "PuntosExpansion");

		FaccInfo[x][fTiempoArmas] = cache_get_field_content_int(0, "TiempoArmas");

		FaccInfo[x][fTiempoDrogas] = cache_get_field_content_int(0, "TiempoDrogas");

	 	if(TotalFaccs < x) TotalFaccs = x;
	 	mysql_free_result();
	}
	printf("*- Facciones Cargadas: %d (Máximo: %d)", TotalFaccs, MAX_FACCS);
}

SaveFacc(FaccID)
{
	new Query[300];
	format(Query, sizeof(Query), "UPDATE facciones SET Rango1='%s', Rango2='%s', Rango3='%s', Rango4='%s', Rango5='%s', Rango6='%s', Rango7='%s', Rango8='%s' ,Rango9='%s', Rango10='%s', Rango11='%s', Rango12='%s', Rango13='%s', Rango14='%s', Rango15='%s', Rango16='%s', WHERE ID = %d",
	FaccInfo[FaccID][fRango1],
	FaccInfo[FaccID][fRango2],
	FaccInfo[FaccID][fRango3],
	FaccInfo[FaccID][fRango4],
	FaccInfo[FaccID][fRango5],
	FaccInfo[FaccID][fRango6],
	FaccInfo[FaccID][fRango7],
	FaccInfo[FaccID][fRango8],
	FaccInfo[FaccID][fRango9],
	FaccInfo[FaccID][fRango10],
	FaccInfo[FaccID][fRango11],
	FaccInfo[FaccID][fRango12],
	FaccInfo[FaccID][fRango13],
	FaccInfo[FaccID][fRango14],
	FaccInfo[FaccID][fRango15],
	FaccInfo[FaccID][fRango16],
	FaccInfo[FaccID][fID]);
	mysql_query(1, Query);

	format(Query, sizeof(Query), "UPDATE facciones SET Nombre='%s', Lider='%s', Tipo=%d, Color='%s', PuntosExpansion=%d, TiempoArmas=%d, TiempoDrogas=%d WHERE ID = %d",
	FaccInfo[FaccID][fNombre],
	FaccInfo[FaccID][fLider],
	FaccInfo[FaccID][fTipo],
	FaccInfo[FaccID][fColor],
	FaccInfo[FaccID][fPuntosExpansion],
	FaccInfo[FaccID][fTiempoArmas],
	FaccInfo[FaccID][fTiempoDrogas],
	FaccInfo[FaccID][fID]);
	mysql_query(1, Query);
	return 1;
}

stock CargarAgenda(playerid)
{
    new string[256];
    format(string, sizeof(string), "SELECT Nombre FROM agendas WHERE Nombre = '%s'", PlayerInfo[playerid][pNombre]);
    mysql_query(1, string);
	mysql_store_result();
	new existe;
	existe = mysql_num_rows();
	mysql_free_result();
	if(existe != 0)
	{
	    new Query[180], NombreUsuario[MAX_PLAYER_NAME], content[60];
		GetPlayerName(playerid, NombreUsuario, sizeof(NombreUsuario));
		mysql_format(1, Query, sizeof(Query), "SELECT * FROM `agendas` WHERE `Nombre` = '%s'", NombreUsuario);
		mysql_query(1, Query);
		mysql_store_result();

        AgendaNumero[playerid][0] = cache_get_field_content_int(0, "AgendaNumero0");
        cache_get_field_content(0, "AgendaContacto0", content);
		format(AgendaContacto[playerid][0], sizeof(content), "%s", content);
		AgendaNumero[playerid][1] = cache_get_field_content_int(0, "AgendaNumero1");
        cache_get_field_content(0, "AgendaContacto1", content);
		format(AgendaContacto[playerid][1], sizeof(content), "%s", content);
		AgendaNumero[playerid][2] = cache_get_field_content_int(0, "AgendaNumero2");
        cache_get_field_content(0, "AgendaContacto2", content);
		format(AgendaContacto[playerid][2], sizeof(content), "%s", content);
        AgendaNumero[playerid][3] = cache_get_field_content_int(0, "AgendaNumero3");
        cache_get_field_content(0, "AgendaContacto3", content);
		format(AgendaContacto[playerid][3], sizeof(content), "%s", content);
		AgendaNumero[playerid][4] = cache_get_field_content_int(0, "AgendaNumero4");
        cache_get_field_content(0, "AgendaContacto4", content);
		format(AgendaContacto[playerid][4], sizeof(content), "%s", content);
		AgendaNumero[playerid][5] = cache_get_field_content_int(0, "AgendaNumero5");
        cache_get_field_content(0, "AgendaContacto5", content);
		format(AgendaContacto[playerid][5], sizeof(content), "%s", content);
		AgendaNumero[playerid][6] = cache_get_field_content_int(0, "AgendaNumero6");
        cache_get_field_content(0, "AgendaContacto6", content);
		format(AgendaContacto[playerid][6], sizeof(content), "%s", content);
		AgendaNumero[playerid][7] = cache_get_field_content_int(0, "AgendaNumero7");
        cache_get_field_content(0, "AgendaContacto7", content);
		format(AgendaContacto[playerid][7], sizeof(content), "%s", content);
		AgendaNumero[playerid][8] = cache_get_field_content_int(0, "AgendaNumero8");
        cache_get_field_content(0, "AgendaContacto8", content);
		format(AgendaContacto[playerid][8], sizeof(content), "%s", content);
		AgendaNumero[playerid][9] = cache_get_field_content_int(0, "AgendaNumero9");
        cache_get_field_content(0, "AgendaContacto9", content);
		format(AgendaContacto[playerid][9], sizeof(content), "%s", content);
		AgendaNumero[playerid][10] = cache_get_field_content_int(0, "AgendaNumero10");
        cache_get_field_content(0, "AgendaContacto10", content);
		format(AgendaContacto[playerid][10], sizeof(content), "%s", content);
		AgendaNumero[playerid][11] = cache_get_field_content_int(0, "AgendaNumero11");
        cache_get_field_content(0, "AgendaContacto11", content);
		format(AgendaContacto[playerid][11], sizeof(content), "%s", content);
		AgendaNumero[playerid][12] = cache_get_field_content_int(0, "AgendaNumero12");
        cache_get_field_content(0, "AgendaContacto12", content);
		format(AgendaContacto[playerid][12], sizeof(content), "%s", content);
		AgendaNumero[playerid][13] = cache_get_field_content_int(0, "AgendaNumero13");
        cache_get_field_content(0, "AgendaContacto13", content);
		format(AgendaContacto[playerid][13], sizeof(content), "%s", content);
		AgendaNumero[playerid][14] = cache_get_field_content_int(0, "AgendaNumero14");
        cache_get_field_content(0, "AgendaContacto14", content);
		format(AgendaContacto[playerid][14], sizeof(content), "%s", content);
		AgendaNumero[playerid][15] = cache_get_field_content_int(0, "AgendaNumero15");
        cache_get_field_content(0, "AgendaContacto15", content);
		format(AgendaContacto[playerid][15], sizeof(content), "%s", content);
	    mysql_free_result();
	    return 1;
	}
	return 1;
}

stock GuardarAgenda(playerid)
{
    new string[256];
    format(string, sizeof(string), "SELECT Nombre FROM agendas WHERE Nombre = '%s'", PlayerInfo[playerid][pNombre]);
    mysql_query(1, string);
	mysql_store_result();
	new existe;
	existe = mysql_num_rows();
	mysql_free_result();
	if(existe != 0)
	{
	    new Query[180];

	    for(new x=0; x<16; x++)
	    {
            mysql_format(1, Query, sizeof(Query), "UPDATE agendas SET AgendaNumero%d = %d, AgendaContacto%d = '%s' WHERE Nombre = '%s'",
			x, AgendaNumero[playerid][x], x, AgendaContacto[playerid][x],
			PlayerInfo[playerid][pNombre]);
			mysql_query(1, Query);
	    }
	}
	return 1;
}

stock ActualizarHambre(playerid)
{
    if(PlayerInfo[playerid][pHambre] < MIN_HAMBRE){PlayerInfo[playerid][pHambre] = MIN_HAMBRE;}
    SetPlayerProgressBarValue(playerid, hambrebar[playerid], PlayerInfo[playerid][pHambre]);
    UpdatePlayerProgressBar(playerid, hambrebar[playerid]);
	SetPlayerProgressBarColor(playerid, hambrebar[playerid], Naranja);
	if(PlayerInfo[playerid][pHambre] == MIN_HAMBRE*2){SendClientMessage(playerid, NaranjaOscuro, "Empiezas a tener mucha hambre. Deberías comer algo.");}
	if(PlayerInfo[playerid][pHambre] <= MIN_HAMBRE*2)
	{
	    new mareo = (5000*MIN_HAMBRE)/PlayerInfo[playerid][pHambre];
        SetPlayerDrunkLevel(playerid, mareo);
        SetPlayerProgressBarColor(playerid, hambrebar[playerid], RojoIntenso);
	}
	if(PlayerInfo[playerid][pHambre] <= MIN_HAMBRE)
	{
	    SetPlayerProgressBarColor(playerid, hambrebar[playerid], RojoOscuro);
	}
	return 1;
}

stock ActualizarSed(playerid)
{
    if(PlayerInfo[playerid][pSed] < MIN_SED){PlayerInfo[playerid][pSed] = MIN_SED;}
    SetPlayerProgressBarValue(playerid, sedbar[playerid], PlayerInfo[playerid][pSed]);
	UpdatePlayerProgressBar(playerid, sedbar[playerid]);
	SetPlayerProgressBarColor(playerid, sedbar[playerid], AguamarinaOscuro);
	if(PlayerInfo[playerid][pSed] == MIN_SED*2){SendClientMessage(playerid, NaranjaOscuro, "Empiezas a tener mucha sed. Deberías beber algo.");}
	if(PlayerInfo[playerid][pSed] <= MIN_SED*2)
	{
	    new mareo = (5000*MIN_SED)/PlayerInfo[playerid][pSed];
        SetPlayerDrunkLevel(playerid, mareo);
        SetPlayerProgressBarColor(playerid, sedbar[playerid], RojoIntenso);
	}
	if(PlayerInfo[playerid][pSed] <= MIN_SED)
	{
	    SetPlayerProgressBarColor(playerid, sedbar[playerid], RojoOscuro);
	}
	return 1;
}

stock LlamarTelefono(playerid, numero)
{
    if(numero == PlayerInfo[playerid][pTelefono]){SendClientMessage(playerid, Rojo, "* No te puedes llamar a tí mismo."); return 1;}
	new string[256];
	if(numero == 444) //Auncio
    {
        if(PlayerInfo[playerid][pNivel] < 2){SendClientMessage(playerid, Rojo, "* Necesitas ser como mínimo nivel 2.");return 1;}
        if(anunciotiempo > 0)
        {
            format(string, sizeof(string), "* Debes esperar %d segundos para enviar otro anuncio.", anunciotiempo);
			SendClientMessage(playerid, Rojo, string);
			return 1;
        }
        new hayadmins;
        for(new x=0; x<MAX_PLAYERS; x++)
        {
            if(PlayerInfo[x][pAdmin] > 0){hayadmins = 1; break;}
        }
        if(hayadmins == 0){SendClientMessage(playerid, Rojo, "* No se pueden enviar anuncios en este momento."); return 1;}
        SendClientMessage(playerid, Amarillo, "Anuncios: Buenos días, díganos que anuncio quiere publicar.");
        EnLlamada[playerid] = 444;
        return 1;
    }
    if(numero == 666) //Easter egg
    {
        SendClientMessage(playerid, RojoIntenso, "Lucifer: En estos momentos la agencia del infierno está saturada.");
        SendClientMessage(playerid, RojoIntenso, "Lucifer: Trate de vendernos su alma más tarde.");
		return 1;
    }
    if(numero == 777) //Taxis
    {
        if(PlayerInfo[playerid][pTrabajo] == 3 && Trabajando[playerid] > 0){SendClientMessage(playerid, Rojo, "* No puedes llamar a un taxi siendo taxista y estando trabajando."); return 1;}
        SendClientMessage(playerid, Amarillo, "Taxista: Gracias por elerginos como su medio de transporte.");
        new taxista;
		for(new i=0;i<MAX_PLAYERS;i++)
		{
			if(PlayerInfo[i][pTrabajo] == 3 && Trabajando[i] > 0)
			{
			    format(string, sizeof(string), "Taxista: Un cliente solicita transporte. '/LlevarTaxi' para aceptar el pedido.", GetPlayerNameRP(playerid));
			    SendClientMessage(i, Amarillo, string);
				SendClientMessage(playerid, Amarillo, "Taxista: Hemos llamado a nuestros taxistas. Espere un momento, no se mueva de allí.");
				SolicitaTaxi[playerid] = 1;
				taxista++;
			}
		}
		if(taxista < 1){SendClientMessage(playerid, Amarillo, "Taxista: En estos momentos no hay taxistas disponibles. Llame en otro momento.");}
        return 1;
    }
    if(numero == 999) //Taller LS.
    {
/*        new Float:vida, autoid = GetPlayerVehicleID(playerid);
        GetVehicleHealth(autoid, vida);
        if(IsPlayerInAnyVehicle(playerid) && GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
        {
        if(vida > 350.0) return SendClientMessage(playerid,Rojo,"* El motor de tu vehículo esta en buen estado.");*/
        new taller;
		for(new i=0;i<MAX_PLAYERS;i++)
		{
			if(PlayerInfo[i][pFaccion] == 5 && PlayerInfo[i][pServicioWCST] > 0)
			{
			    format(string, sizeof(string), "Importante: Han solicitado un mecánico, Use (/Llamadas). Número:  %d", PlayerInfo[playerid][pTelefono]);
			    SendClientMessage(i, Aguamarina, string);
				SendClientMessage(playerid, Amarillo, "Taller LS: Los mecánicos del taller en Los Santos vendrán atenderle lo más prontó posible, espere en esta posición.");
				SolicitaMeca[playerid] = 1;
				taller++;
			}
		}
		if(taller < 1){SendClientMessage(playerid, Naranja, "Taller LS: En estos momentos no hay mecánicos disponibles. Llame en otro momento");}
        return 1;
    }
 //   }
    if(numero == 911) //Llama a LSPD
    {
        if(PlayerInfo[playerid][pFaccion] == 1 && PlayerInfo[playerid][pServicioPD] > 0){SendClientMessage(playerid, Rojo, "* No puedes llamar a la policía siendo policía y estando de servicio."); return 1;}
        SendClientMessage(playerid, AzulClaro, "LSPD: Espere mientras le pasamos al departamento policial...");
		EnLlamada[playerid] = 911;
		new Cops;
		for(new i=0;i<MAX_PLAYERS;i++)
		{
			if(PlayerInfo[i][pFaccion] == 1 && PlayerInfo[i][pServicioPD] > 0)
			{
				SendClientMessage(i, AzulClaro, "LSPD: Una llamada esta siendo transferida al departamento de policía. (( /contestar para coger el teléfono ))");
				Cops++;
			}
		}
		if(Cops < 1){SendClientMessage(playerid, AzulClaro, "LSPD: En estos momentos nuestras líneas están saturadas. Llame en otro momento."); EnLlamada[playerid] = 0;}
		return 1;
    }
    new tlfencontrado;
    for(new x=0; x<MAX_PLAYERS; x++)
    {
        if(IsPlayerConnected(x) && x != INVALID_PLAYER_ID)
        {
            if(PlayerInfo[x][pTelefono] == numero && PlayerTieneObjeto(x, 68))
            {
                if(EnLlamada[x] != 0 || PersonaEnLlamada[x] != NOEXISTE){tlfencontrado = -1; break;}
                tlfencontrado = 1;
                format(string, sizeof(string), "* El teléfono de %s empieza a sonar.", GetPlayerNameRP(x));
    			ProxDetector(15.0, x, string, Morado,Morado,Morado,Morado,Morado);
    			format(string, sizeof(string), "* Llamada entrante del %d.", PlayerInfo[playerid][pTelefono]);
    			SendClientMessage(x, Naranja, string);
    			SendClientMessage(x, Naranja, "* Utiliza '/Contestar' para responder al teléfono.");

    			format(string, sizeof(string), "Llamando al %d.", numero);
    			SendClientMessage(playerid, Gris, string);
				ToqueLlamada[x] = 0;
				PersonaEnLlamada[playerid] = x;
				PersonaEnLlamada[x] = playerid;
				EnLlamada[playerid] = 1;
				ToqueLlamadaTimer[x] = SetTimerEx("DarToqueLlamada", 5000, true, "i", x);
                break;
            }
        }
    }
    if(tlfencontrado == -1){SendClientMessage(playerid, Gris, "El número que ha marcado ya está en una llamada."); return 1;}
    if(tlfencontrado == 0){SendClientMessage(playerid, Gris, "El número que ha marcado no existe o no está disponible."); return 1;}
    return 1;
}

stock ColgarTelefono(playerid)
{
	new string[256];
	new oyente = PersonaEnLlamada[playerid];
    if(EnLlamada[playerid] == 1) //Está llamando a alguien
	{
	    EnLlamada[playerid] = 0;
	    SendClientMessage(playerid, Gris, "Has colgado");
	    format(string, sizeof(string), "Tienes una llamada perdida del %d.", PlayerInfo[playerid][pTelefono]);
		SendClientMessage(oyente, Gris, string);
		KillTimer(ToqueLlamadaTimer[oyente]);
		ToqueLlamada[oyente] = 0;
		PersonaEnLlamada[oyente] = NOEXISTE;
	    PersonaEnLlamada[playerid] = NOEXISTE;
	    return 1;
	}
	if(EnLlamada[playerid] == 2 || EnLlamada[playerid] == 3) //Llamada normal
	{
	    SendClientMessage(playerid, Gris, "Has colgado");
		SendClientMessage(oyente, Gris, "Han colgado.");
	    if(EnLlamada[playerid] == 3)
		{
			KillTimer(CostoLlamadaTimer[playerid]);
			format(string, sizeof(string), "Coste de la llamada: %d$", CosteTotalLlamada[playerid]);
			SendClientMessage(playerid, RojoIntenso, string);
			PlayerInfo[playerid][pDineroBanco] -= CosteTotalLlamada[playerid];
			CosteTotalLlamada[oyente] = 0;
		}
	    if(EnLlamada[oyente] == 3)
		{
			KillTimer(CostoLlamadaTimer[oyente]);
			format(string, sizeof(string), "Coste de la llamada: %d$", CosteTotalLlamada[oyente]);
			SendClientMessage(oyente, RojoIntenso, string);
			PlayerInfo[oyente][pDineroBanco] -= CosteTotalLlamada[oyente];
			CosteTotalLlamada[oyente] = 0;
		}
		EnLlamada[playerid] = 0;
	    EnLlamada[oyente] = 0;
	    PersonaEnLlamada[oyente] = NOEXISTE;
	    PersonaEnLlamada[playerid] = NOEXISTE;
		return 1;
	}
	if(EnLlamada[playerid] == 444) //Anuncios
	{
	    EnLlamada[playerid] = 0;
		SendClientMessage(playerid, Gris, "Has colgado");
	}
	if(EnLlamada[playerid] == 911) //Llamando a emergencias
	{
		EnLlamada[playerid] = 0;
		SendClientMessage(playerid, Gris, "Has colgado");
	}
	if(EnLlamada[playerid] == 912) //Llamada de emergencias
	{
	    SendClientMessage(playerid, Gris, "Has colgado");
		SendClientMessage(oyente, Gris, "Han colgado.");
		EnLlamada[playerid] = 0;
	    EnLlamada[oyente] = 0;
	    PersonaEnLlamada[oyente] = NOEXISTE;
	    PersonaEnLlamada[playerid] = NOEXISTE;
	}
	return 1;
}

stock EstaEnMostrador(playerid)
{
	new mostrador;
	for(new x=0; x<sizeof(Mostradores); x++)
	{
		if(IsPlayerInRangeOfPoint(playerid, 2.0, Mostradores[x][0], Mostradores[x][1], Mostradores[x][2])){mostrador = x; break;}
	}
	return mostrador;
}

stock PlayerTieneObjeto(playerid, objetoid)
{
	for(new x=0; x<8; x++)
	{
	    if(PlayerInfo[playerid][pBol][x] == objetoid){return x+1;}
	}
	if(PlayerInfo[playerid][pManoDer] == objetoid){return 9;}
	if(PlayerInfo[playerid][pManoIzq] == objetoid){return 10;}
	return 0;
}

stock LinkVehicleToInteriorEx(vehicleid, interior)
{
    LinkVehicleToInterior(vehicleid, interior);
    CarInfo[vehicleid][cInterior] = interior;
    return 1;
}

stock EncenderMotorF(playerid, car)
{
    new engine,lights,alarm,doors,bonnet,boot,objective,vehicleid = GetPlayerVehicleID(playerid),string[128];
    GetVehicleParamsEx(car,engine,lights,alarm,doors,bonnet,boot,objective);
    if(engine == 1) //Si está encendido apagar
	{
 		format(string, sizeof(string), "* %s apaga el motor de su vehículo.", GetPlayerNameRP(playerid));
   		ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
   		SetVehicleParamsEx(car,0,lights,alarm,doors,bonnet,boot,objective);
   		return 1;
    }
    else //Si está apagado encender
	{
		if(averiado[vehicleid] != 0) return SendClientMessage(playerid,Rojo," * El motor está roto, tienes que llamar a un mecánico.");
		if(EncendiendoMotor[playerid] == 0)
		{
	        if(car <= MAX_VEHPUBLICO)
		    {
		    	if(!PlayerEsFaccionVeh(playerid, car)){return 1;}
		    	format(string, sizeof(string), "* %s mete la llave en el contacto y lo gira.", GetPlayerNameRP(playerid));
   				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
		        SetTimerEx("EncenderMotor", 2000, false, "i", playerid);
		        EncendiendoMotor[playerid] = 1;
	        }
	        else if(car > MAX_VEHPUBLICO)
	        {
	            if(!PlayerTieneLlaveVeh(playerid, car)){SendClientMessage(playerid, Rojo, "* No tienes las llaves de este vehículo."); return 1;}
	            if(CarInfo[car][cGas] <= 0){SendClientMessage(playerid, Rojo, "* No queda combustible."); return 1;}
				format(string, sizeof(string), "* %s mete la llave en el contacto y lo gira.", GetPlayerNameRP(playerid));
   				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
		        SetTimerEx("EncenderMotor", 2000, false, "i", playerid);
		        EncendiendoMotor[playerid] = 1;
	        }
	    }
	}
	return 1;
}

forward RepintarMeca(playerid, color1, color2, coche); //Repintar
public RepintarMeca(playerid, color1, color2, coche)
{
    TogglePlayerControllable(playerid, 1);
	ChangeVehicleColor(coche, color1, color2);
	CarInfo[coche][cColor1] = color1;
	CarInfo[coche][cColor2] = color2;
	GameTextForPlayer(playerid, "~g~Vehiculo repintado", 3000, 3);
	return 1;
}

forward RepararMeca(playerid, tipo, coche); //Reparar
public RepararMeca(playerid, tipo, coche)
{
    TogglePlayerControllable(playerid, 1);
	if(tipo == 1) //Motor
	{
	    SiendoReparado[playerid] = 0;
		SetVehicleHealth(coche, 1000);
		GameTextForPlayer(playerid, "~g~Motor reparado", 3000, 3);
		return 1;
	}
	if(tipo == 2) //Carrocería
	{
	    SiendoReparado[playerid] = 0;
	    new Float:cvida;
	    GetVehicleHealth(coche, cvida);
	    new panels,doors,lights,tires,tires2;
		GetVehicleDamageStatus(coche,panels,doors,lights,tires);
		RepairVehicle(coche);
		SetVehicleHealth(coche, cvida);
		GetVehicleDamageStatus(coche,panels,doors,lights,tires2);
		if(tires != 0)
		{
			tires = encode_tires(1, 1, 1, 1);
		  	UpdateVehicleDamageStatus(coche, panels, doors, lights, tires);
		}
		GameTextForPlayer(playerid, "~g~Carroceria reparada", 3000, 3);
		return 1;
	}
	if(tipo == 3) //Ruedas
	{
	    SiendoReparado[playerid] = 0;
	    new panels,doors,lights,tires;
		GetVehicleDamageStatus(coche,panels,doors,lights,tires);
		tires = encode_tires(0, 0, 0, 0);
	  	UpdateVehicleDamageStatus(coche, panels, doors, lights, tires);
		GameTextForPlayer(playerid, "~g~Ruedas reparadas", 3000, 3);
	}
	if(tipo == 4) //Todo
	{
		SiendoReparado[playerid] = 0;
	    RepairVehicle(coche);
	    GameTextForPlayer(playerid, "~g~Vehiculo reparado", 3000, 3);
	    GivePlayerMoney(playerid, -400);
	}
	return 1;
}

stock GetPlayerTaller(playerid)
{
    return IsPlayerInRangeOfPoint(playerid, 30.0, 1794.7306,-2037.6821,13.5245)|| IsPlayerInRangeOfPoint(playerid, 30.0, 1751.9133,-2021.4797,20.6677)
	|| IsPlayerInRangeOfPoint(playerid, 30.0, 816.115112 , -572.825439 , 16.321636)|| IsPlayerInRangeOfPoint(playerid, 30.0, 807.242431 , -572.772155 , 16.321636);
}

forward Pescar(playerid); //Job pescador
public Pescar(playerid)
{
    new string[80];
	TogglePlayerControllable(playerid, 1);
	if(Trabajando[playerid] == 1 && PlayerInfo[playerid][pTrabajo] == 5)
	{
	    if(PescaRecogida[playerid] < 11)
	  	{
 	    	new pescarand = random(80);
 	    	new valorpesca = pescarand+20;
 	    	format(string, sizeof(string), "Has pescado una red valorada en %d$.", valorpesca);
 	    	SendClientMessage(playerid, Verde, string);
 	    	DineroPesca[playerid] += valorpesca;
 	    	new rand = random(sizeof(ChecksPescador));
 	    	SetPlayerCheckpoint(playerid, ChecksPescador[rand][0], ChecksPescador[rand][1], ChecksPescador[rand][2], 5.0);
 	    	PescaRecogida[playerid] ++;
 	    	return 1;
 	    }
 	    if(PescaRecogida[playerid] == 11)
 	    {
 	        new pescarand = random(80);
 	    	new valorpesca = pescarand+20;
 	    	format(string, sizeof(string), "Has pescado una red valorada en %d$.", valorpesca);
 	    	SendClientMessage(playerid, Verde, string);
 	    	DineroPesca[playerid] += valorpesca;
 	    	SendClientMessage(playerid, Verde, "Ya has pescado suficiente. Vuelve al puerto para recibir tu paga.");
 	        SetPlayerCheckpoint(playerid, 2983.2764,-1526.3475,0.0000, 5.0);
 	        PescaRecogida[playerid] ++;
 	        SetPlayerSkin(playerid, PlayerInfo[playerid][pSkin]);
 	        return 1;
 	    }
	}
	return 1;
}

forward TimerDejarTrabajarF(playerid);
public TimerDejarTrabajarF(playerid)
{
	if(Trabajando[playerid] == 1) //Trabajando
	{
	    if(PlayerInfo[playerid][pTrabajo] == 2) //Cosechador
	    {
	        Trabajando[playerid] = 0;
	        Cosechado[playerid] = 0;
	        SetPlayerSkin(playerid, PlayerInfo[playerid][pSkin]);
	        DisablePlayerCheckpoint(playerid);
	        SendClientMessage(playerid, Rojo, "* Has dejado de cosechar.");
	    }
	    if(PlayerInfo[playerid][pTrabajo] == 5) //Pescador
	    {
	        Trabajando[playerid] = 0;
	        PescaRecogida[playerid] = 0;
	        DisablePlayerCheckpoint(playerid);
	        SendClientMessage(playerid, Rojo, "* Has dejado de pescar.");
	    }
	}
	return 1;
}

stock GetPlayerDentroNego(playerid) //Consigue la ID del negocio en el que está el jugador
{
	new casa, Float:Sx, Float:Sy, Float:Sz, Int=GetPlayerInterior(playerid), VW=GetPlayerVirtualWorld(playerid);
    for(new x=1; x <= TotalNegs; x++)
	{
	    Sx = NegoInfo[x][nSalidaX], Sy = NegoInfo[x][nSalidaY], Sz = NegoInfo[x][nSalidaZ];
	    if(IsPlayerInRangeOfPoint(playerid, 50.0, Sx, Sy, Sz) && (Int == NegoInfo[x][nInterior]) && (VW == NegoInfo[x][nVirtualWorld]))
	    {
	        casa = x; break;
	    }
	}
	return casa;
}

stock GetPlayerDentroPuertaNego(playerid) //Consigue la ID del negocio en el que está el jugador puerta
{
	new casa, Float:Sx, Float:Sy, Float:Sz, Int=GetPlayerInterior(playerid), VW=GetPlayerVirtualWorld(playerid);
    for(new x=1; x <= TotalNegs; x++)
	{
	    Sx = NegoInfo[x][nSalidaX], Sy = NegoInfo[x][nSalidaY], Sz = NegoInfo[x][nSalidaZ];
	    if(IsPlayerInRangeOfPoint(playerid, 2.5, Sx, Sy, Sz) && (Int == NegoInfo[x][nInterior]) && (VW == NegoInfo[x][nVirtualWorld]))
	    {
	        casa = x; break;
	    }
	}
	return casa;
}

stock GetPlayerFueraPuertaNego(playerid) //Consigue la ID del negocio más cercano al jugador
{
	new casa, Float:Ex, Float:Ey, Float:Ez;
    for(new x=1; x <= TotalNegs; x++)
	{
	    Ex = NegoInfo[x][nEntradaX], Ey = NegoInfo[x][nEntradaY], Ez = NegoInfo[x][nEntradaZ];
	    if(IsPlayerInRangeOfPoint(playerid, 1.0, Ex, Ey, Ez))
	    {
	        casa = x; break;
	    }
	}
	return casa;
}

UpdateNegocioLabel(n) //Actualiza 3DTextLabels negocios
{
    new string[158];
	if(NegoInfo[n][nComprado] == 0) //negocio libre
	{
		format(string,sizeof(string),"{ffffff}%s\n\n¡Negocio en Venta!\nPrecio: {05BE24}%d$\n{fce80c}Presione [F]\n\n{FFFFFF}Usa {FFFF04}/comprar negocio{FFFFFF} para comprarlo",NegoInfo[n][nNombre],NegoInfo[n][nValor]);
	}
	else if(NegoInfo[n][nComprado] == 1) //negocio comprado
	{
		format(string,sizeof(string),"{ffffff}%s\n\nDueño: {FFFF04}%s\n{fce80c}Presione [F]",NegoInfo[n][nNombre],NegoInfo[n][nDueno]);
	}
	if(NegoInfo[n][nCerrado] == 0)UpdateDynamic3DTextLabelText(NegoInfo[n][nPickup],Aguamarina,string);
	else UpdateDynamic3DTextLabelText(NegoInfo[n][nPickup],AguamarinaOscuro,string);
}

stock GetPlayerDentroCasa(playerid) //Consigue la ID de la casa en la que está el jugador
{
	new casa, Float:Sx, Float:Sy, Float:Sz, Int=GetPlayerInterior(playerid), VW=GetPlayerVirtualWorld(playerid);
    for(new x=1; x <= TotalCasas; x++)
	{
	    Sx = HouseInfo[x][hSalidaX], Sy = HouseInfo[x][hSalidaY], Sz = HouseInfo[x][hSalidaZ];
	    if(IsPlayerInRangeOfPoint(playerid, 50.0, Sx, Sy, Sz) && (Int == HouseInfo[x][hInterior]) && (VW == HouseInfo[x][hVirtualWorld]))
	    {
	        casa = x; break;
	    }
	}
	return casa;
}

stock GetPlayerDentroPuertaCasa(playerid) //Consigue la ID de la casa en la que está el jugador puerta
{
	new casa, Float:Sx, Float:Sy, Float:Sz, Int=GetPlayerInterior(playerid), VW=GetPlayerVirtualWorld(playerid);
    for(new x=1; x <= TotalCasas; x++)
	{
	    Sx = HouseInfo[x][hSalidaX], Sy = HouseInfo[x][hSalidaY], Sz = HouseInfo[x][hSalidaZ];
	    if(IsPlayerInRangeOfPoint(playerid, 2.0, Sx, Sy, Sz) && (Int == HouseInfo[x][hInterior]) && (VW == HouseInfo[x][hVirtualWorld]))
	    {
	        casa = x; break;
	    }
	}
	return casa;
}

stock GetPlayerFueraPuertaCasa(playerid) //Consigue la ID de la casa más cercana al jugador
{
	new casa, Float:Ex, Float:Ey, Float:Ez;
    for(new x=1; x <= TotalCasas; x++)
	{
	    Ex = HouseInfo[x][hEntradaX], Ey = HouseInfo[x][hEntradaY], Ez = HouseInfo[x][hEntradaZ];
	    if(IsPlayerInRangeOfPoint(playerid, 1.0, Ex, Ey, Ez))
	    {
	        casa = x; break;
	    }
	}
	return casa;
}

UpdateHouseLabel(h) //Actualiza 3DTextLabels casas
{
	new string[250];
	if(HouseInfo[h][hComprada] == -1) //hotel
	{
        CreateDynamicPickup(19524, 1, HouseInfo[h][hEntradaX],HouseInfo[h][hEntradaY],HouseInfo[h][hEntradaZ],-1, 15,-1,10.0);
        CreateDynamicPickup(19524, 1, HouseInfo[h][hEntradaX],HouseInfo[h][hEntradaY],HouseInfo[h][hEntradaZ],-1, 18,-1,10.0);
		format(string,sizeof(string),"{ffffff}%s\n\nAlquiler: {05BE24}%d$",HouseInfo[h][hBarrio],HouseInfo[h][hPAlquiler]);
		if(HouseInfo[h][hInquilinos] >0) strcat(string,"\n{FFFFFF}Estado:{FFFF04} Ocupada");
		else strcat(string,"\n{FFFFFF}Estado:{FFFF04} Libre");
	}
	else if(HouseInfo[h][hComprada] == 0) //casa libre
	{
		AddStaticPickup(1273,1,HouseInfo[h][hEntradaX],HouseInfo[h][hEntradaY],HouseInfo[h][hEntradaZ]);
		format(string,sizeof(string),"{ffffff}¡Casa en Venta!\n\nDirección: {FFFF04}%s\n{FFFFFF}Precio: {05BE24}%d$\n{fce80c}Presione [F]\n\n{FFFFFF}Usa {FFFF04}/comprar casa{FFFFFF} para comprarla",HouseInfo[h][hBarrio],HouseInfo[h][hValor]);
	}
	else if(HouseInfo[h][hComprada] == 1 && HouseInfo[h][hAlquilable] == 0) //casa comprada y no alquilable
	{
		format(string,sizeof(string),"{FFFFFF}Dueño: {10E4FF}%s\n{FFFFFF}Dirección: {FFFF04}%s\n\n{fce80c}Presione [F]",HouseInfo[h][hDueno],HouseInfo[h][hBarrio]);
	}
	else if(HouseInfo[h][hComprada] == 1 && HouseInfo[h][hAlquilable] == 1) //casa comprada y alquilable
	{
		format(string,sizeof(string),"{FFFFFF}Dueño: {10E4FF}%s\n{FFFFFF}Dirección: {FFFF04}%s\n{FFFFFF}Inquilinos: {FFFF04}%d\n{FFFFFF}Precio de alquiler: {05BE24}%d$\n\n{fce80c}Presione [F]",HouseInfo[h][hDueno],HouseInfo[h][hBarrio],HouseInfo[h][hInquilinos],HouseInfo[h][hPAlquiler]);
	}
	if(HouseInfo[h][hCerrada] == 0)UpdateDynamic3DTextLabelText(HouseInfo[h][hPickup],VerdeClaro,string);
	else UpdateDynamic3DTextLabelText(HouseInfo[h][hPickup],Verde,string);
}

LoadCasas() //Cargar casas
{
    new Query[180], content[60], armario[10], armariocant[20];
	new ccount;
	new sql[80], row[512];
	format(sql, sizeof(sql), "SELECT ID FROM casas ORDER BY ID DESC");
	mysql_query(1, sql);
	mysql_store_result();
	mysql_fetch_row(row);
	ccount = strval(row);

	for(new x=1; x<=ccount; x++)
	{
	    mysql_format(1, Query, sizeof(Query), "SELECT * FROM `casas` WHERE `ID` = %d", x);
		mysql_query(1, Query);
		mysql_store_result();
		if(cache_get_field_content_float(0, "EntradaX") != 0.0)
		{
			HouseInfo[x][hSQLID] = cache_get_field_content_int(0, "ID");
		 	HouseInfo[x][hEntradaX] = cache_get_field_content_float(0, "EntradaX");
		 	HouseInfo[x][hEntradaY] = cache_get_field_content_float(0, "EntradaY");
		 	HouseInfo[x][hEntradaZ] = cache_get_field_content_float(0, "EntradaZ");
		 	HouseInfo[x][hSalidaX] = cache_get_field_content_float(0, "SalidaX");
		 	HouseInfo[x][hSalidaY] = cache_get_field_content_float(0, "SalidaY");
		 	HouseInfo[x][hSalidaZ] = cache_get_field_content_float(0, "SalidaZ");

		 	cache_get_field_content(0, "Barrio", content);
		    format(HouseInfo[x][hBarrio], 60, "%s", content);

		    HouseInfo[x][hVirtualWorld] = cache_get_field_content_int(0, "VirtualWorld");
		    HouseInfo[x][hInterior] = cache_get_field_content_int(0, "Interior");
		    HouseInfo[x][hVirtualWorld2] = cache_get_field_content_int(0, "VirtualWorld2");
		    HouseInfo[x][hInterior2] = cache_get_field_content_int(0, "Interior2");
		    HouseInfo[x][hValor] = cache_get_field_content_int(0, "Valor");
		    HouseInfo[x][hComprada] = cache_get_field_content_int(0, "Comprada");

		    cache_get_field_content(0, "Dueno", content);
		    format(HouseInfo[x][hDueno], 60, "%s", content);

		    HouseInfo[x][hCerrada] = cache_get_field_content_int(0, "Cerrada");
		    HouseInfo[x][hAlquilable] = cache_get_field_content_int(0, "Alquilable");
		    HouseInfo[x][hPAlquiler] = cache_get_field_content_int(0, "PAlquiler");
		    HouseInfo[x][hInquilinos] = cache_get_field_content_int(0, "Inquilinos");
		    for(new a=0; a<10; a++)
		    {
		        format(armario, sizeof(armario), "Armario%d", a+1);
		        format(armariocant, sizeof(armariocant), "ArmarioCant%d", a+1);
		        HouseInfo[x][hArmario][a] = cache_get_field_content_int(0, armario);
		    	HouseInfo[x][hArmarioCant][a] = cache_get_field_content_int(0, armariocant);
		    }
		    HouseInfo[x][hDineroGuardado] = cache_get_field_content_int(0, "DineroGuardado");
			if(TotalCasas < x) TotalCasas = x;
        }
	}

    printf("*- Casas Cargadas: %d (MAX: %d)",TotalCasas,MAX_HOUSES);
	return 1;
}

SaveCasa(idx) //Guardar casas
{
	if(strlen(HouseInfo[idx][hBarrio]))
	{
	    new sql[1024];
	    format(sql, sizeof(sql), "UPDATE casas SET EntradaX=%f,EntradaY=%f,EntradaZ=%f,SalidaX=%f,SalidaY=%f,SalidaZ=%f,Barrio='%s',VirtualWorld=%d,Interior=%d,VirtualWorld2=%d,Interior2=%d,Valor=%d,Comprada=%d,Dueno='%s',Alquilable=%d,PAlquiler=%d,Inquilinos=%d WHERE ID=%d",
		HouseInfo[idx][hEntradaX], //Pos x de entrada
		HouseInfo[idx][hEntradaY], //Pos y de entrada
		HouseInfo[idx][hEntradaZ], //Pos z de entrada
		HouseInfo[idx][hSalidaX], //Pos x de salida
		HouseInfo[idx][hSalidaY], //Pos y de salida
		HouseInfo[idx][hSalidaZ], //Pos z de salida
		HouseInfo[idx][hBarrio], //Nombre del barrio
		HouseInfo[idx][hVirtualWorld], //VW de la casa
		HouseInfo[idx][hInterior], //Int de la casa
		HouseInfo[idx][hVirtualWorld2], //VW de salida
		HouseInfo[idx][hInterior2], //Int de salida
		HouseInfo[idx][hValor], //Precio de la casa
		HouseInfo[idx][hComprada], //Si está comprada
		HouseInfo[idx][hDueno], //Nombre del dueño
		HouseInfo[idx][hAlquilable], //Si está alquilable
		HouseInfo[idx][hPAlquiler], //Precio de alquiler
		HouseInfo[idx][hInquilinos], //Personas residentes en la casa
		HouseInfo[idx][hSQLID]); //ID en base de datos
		mysql_query(1, sql);

		for(new x=0; x<10; x++)
		{
		    format(sql, sizeof(sql), "UPDATE casas SET Armario%d=%d,ArmarioCant%d=%d WHERE ID=%d",
		    x+1, HouseInfo[idx][hArmario][x], x+1, HouseInfo[idx][hArmarioCant][x],
			HouseInfo[idx][hSQLID]);
			mysql_query(1, sql);
		}

		format(sql, sizeof(sql), "UPDATE casas SET DineroGuardado=%d WHERE ID=%d",
		HouseInfo[idx][hDineroGuardado], HouseInfo[idx][hSQLID]);
		mysql_query(1, sql);
	}
	return 1;
}

LoadNegocios() //Cargar negocios
{
    new Query[180], content[60], almacen[10], almacencant[20];
	new ccount;
	new sql[80], row[512];
	format(sql, sizeof(sql), "SELECT ID FROM negocios ORDER BY ID DESC");
	mysql_query(1, sql);
	mysql_store_result();
	mysql_fetch_row(row);
	ccount = strval(row);

	for(new x=1; x<=ccount; x++)
	{
	    mysql_format(1, Query, sizeof(Query), "SELECT * FROM `negocios` WHERE `ID` = %d", x);
		mysql_query(1, Query);
		mysql_store_result();
		if(cache_get_field_content_float(0, "EntradaX") != 0.0)
		{
			NegoInfo[x][nSQLID] = cache_get_field_content_int(0, "ID");
		 	NegoInfo[x][nEntradaX] = cache_get_field_content_float(0, "EntradaX");
		 	NegoInfo[x][nEntradaY] = cache_get_field_content_float(0, "EntradaY");
		 	NegoInfo[x][nEntradaZ] = cache_get_field_content_float(0, "EntradaZ");
		 	NegoInfo[x][nSalidaX] = cache_get_field_content_float(0, "SalidaX");
		 	NegoInfo[x][nSalidaY] = cache_get_field_content_float(0, "SalidaY");
		 	NegoInfo[x][nSalidaZ] = cache_get_field_content_float(0, "SalidaZ");
			AddStaticPickup(1272,1,NegoInfo[x][nEntradaX],NegoInfo[x][nEntradaY],NegoInfo[x][nEntradaZ]);
		 	cache_get_field_content(0, "Nombre", content);
		    format(NegoInfo[x][nNombre], 60, "%s", content);

            NegoInfo[x][nTipo] = cache_get_field_content_int(0, "Tipo");
		    NegoInfo[x][nVirtualWorld] = cache_get_field_content_int(0, "VirtualWorld");
		    NegoInfo[x][nInterior] = cache_get_field_content_int(0, "Interior");
		    NegoInfo[x][nVirtualWorld2] = cache_get_field_content_int(0, "VirtualWorld2");
		    NegoInfo[x][nInterior2] = cache_get_field_content_int(0, "Interior2");
		    NegoInfo[x][nValor] = cache_get_field_content_int(0, "Valor");
		    NegoInfo[x][nComprado] = cache_get_field_content_int(0, "Comprado");

		    cache_get_field_content(0, "Dueno", content);
		    format(HouseInfo[x][hDueno], 60, "%s", content);

		    NegoInfo[x][nCerrado] = cache_get_field_content_int(0, "Cerrado");
		    NegoInfo[x][nDineroGuardado] = cache_get_field_content_int(0, "DineroGuardado");
		    NegoInfo[x][nProd] = cache_get_field_content_int(0, "Prod");
		    NegoInfo[x][nMaxAlmacen] = cache_get_field_content_int(0, "MaxAlmacen");

		    for(new a=0; a<NegoInfo[x][nMaxAlmacen]; a++)
		    {
		        format(almacen, sizeof(almacen), "Almacen%d", a+1);
		        format(almacencant, sizeof(almacencant), "AlmacenCant%d", a+1);
		        NegoInfo[x][nAlmacen][a] = cache_get_field_content_int(0, almacen);
		    	NegoInfo[x][nAlmacenCant][a] = cache_get_field_content_int(0, almacencant);
		    }
			if(TotalNegs < x) TotalNegs = x;
        }
	}

    printf("*- Negocios Cargados: %d (Máximo: %d)",TotalNegs,MAX_NEGS);
	return 1;
}

SaveNegocios(idx) //Guardar negocios
{
	if(strlen(NegoInfo[idx][nNombre]))
	{
	    new sql[1024];
	    format(sql, sizeof(sql), "UPDATE negocios SET EntradaX=%f,EntradaY=%f,EntradaZ=%f,SalidaX=%f,SalidaY=%f,SalidaZ=%f,Nombre='%s',Tipo=%d WHERE ID=%d",
		NegoInfo[idx][nEntradaX], //Pos x de entrada
		NegoInfo[idx][nEntradaY], //Pos y de entrada
		NegoInfo[idx][nEntradaZ], //Pos z de entrada
		NegoInfo[idx][nSalidaX], //Pos x de salida
		NegoInfo[idx][nSalidaY], //Pos y de salida
		NegoInfo[idx][nSalidaZ], //Pos z de salida
		NegoInfo[idx][nNombre], //Nombre del negocio
		NegoInfo[idx][nTipo], //Tipo de negocio
		NegoInfo[idx][nSQLID]); //ID en base de datos
		mysql_query(1, sql);

		format(sql, sizeof(sql), "UPDATE negocios SET VirtualWorld=%d,Interior=%d,VirtualWorld2=%d,Interior2=%d,Valor=%d,Comprado=%d,Dueno='%s',Cerrado=%d,DineroGuardado=%d,Prod=%d,MaxAlmacen=%d WHERE ID=%d",
		NegoInfo[idx][nVirtualWorld], //VW de la casa
		NegoInfo[idx][nInterior], //Int de la casa
		NegoInfo[idx][nVirtualWorld2], //VW de salida
		NegoInfo[idx][nInterior2], //Int de salida
		NegoInfo[idx][nValor], //Precio de la casa
		NegoInfo[idx][nComprado], //Si está comprada
		NegoInfo[idx][nDueno], //Nombre del dueño
		NegoInfo[idx][nCerrado], //Si está cerrado
		NegoInfo[idx][nDineroGuardado], //Dinero guardado
		NegoInfo[idx][nProd], //Productos del negocio
		NegoInfo[idx][nMaxAlmacen], //Max slots almacén
		NegoInfo[idx][nSQLID]); //ID en base de datos
		mysql_query(1, sql);

		for(new x=0; x<NegoInfo[idx][nMaxAlmacen]; x++)
		{
		    format(sql, sizeof(sql), "UPDATE negocios SET Almacen%d=%d,AlmacenCant%d=%d WHERE ID=%d",
		    x+1, NegoInfo[idx][nAlmacen][x], x+1, NegoInfo[idx][nAlmacenCant][x],
			NegoInfo[idx][nSQLID]);
			mysql_query(1, sql);
		}
		mysql_query(1, sql);
	}
	return 1;
}

forward NoticiasLSN(color, string[]);
public NoticiasLSN(color, string[])
{
	for(new i = 0; i < MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
			SendMessage(i, color, string);
		}
	}
}


forward QuitarReporte(playerid);
public QuitarReporte(playerid)
{
	if(reportar[playerid] != INVALID_PLAYER_ID)
	{
	    reportar[playerid] = INVALID_PLAYER_ID;
	}
}

forward MaxTiempoAutoEscuela(playerid);
public MaxTiempoAutoEscuela(playerid)
{
	new AE = EnAutoEscuela[playerid];
	if(AE == 1)
	{
		SendClientMessage(playerid, Rojo, "* Has tardado demasiado tiempo en realizar el recorrido.");
		SetPlayerPos(playerid, 2045.6418,-1908.1290,13.5469);
		EnAutoEscuela[playerid] = 0;
		CheckPointAutoEscuela[playerid] = 0;
		DisablePlayerCheckpoint(playerid);
		MaxTiempoAutoEscuelaTimer[playerid] = NOEXISTE;
	}
	if(AE == 2)
	{
		SendClientMessage(playerid, Rojo, "* Has tardado demasiado tiempo en completar el recorrido.");
		SetPlayerPos(playerid, AutoEscuelas[AE-1][AutoX], AutoEscuelas[AE-1][AutoY], AutoEscuelas[AE-1][AutoZ]);
		EnAutoEscuela[playerid] = 0;
		CheckPointAutoEscuela[playerid] = 0;
		DisablePlayerCheckpoint(playerid);
		DisablePlayerRaceCheckpoint(playerid);
		MaxTiempoAutoEscuelaTimer[playerid] = NOEXISTE;
		SetVehicleToRespawn(58); //CocheAutoescuelaAvion
	}
	if(AE == 3)
	{
		SendClientMessage(playerid, Rojo, "* Has tardado demasiado tiempo en completar el recorrido.");
		SetPlayerPos(playerid, AutoEscuelas[AE-1][AutoX], AutoEscuelas[AE-1][AutoY], AutoEscuelas[AE-1][AutoZ]);
		EnAutoEscuela[playerid] = 0;
		CheckPointAutoEscuela[playerid] = 0;
		DisablePlayerRaceCheckpoint(playerid);
		MaxTiempoAutoEscuelaTimer[playerid] = NOEXISTE;
		SetVehicleToRespawn(59); //CocheAutoescuelaBarco
	}
	return 1;
}

SetCheckPointAutoescuela(playerid)
{
	if(EnAutoEscuela[playerid] == 1) //Coches
	{
	    new CP = CheckPointAutoEscuela[playerid];
	    SetPlayerCheckpoint(playerid, ChecksPracticoCoche[CP][0], ChecksPracticoCoche[CP][1], ChecksPracticoCoche[CP][2], 5.0);
	    CheckPointAutoEscuela[playerid] ++;
	}
	if(EnAutoEscuela[playerid] == 2) //Aviones
	{
	    new CP = CheckPointAutoEscuela[playerid];
	    if(CP == 0){DisablePlayerCheckpoint(playerid);}
	    if(CP == 17){DisablePlayerRaceCheckpoint(playerid);}
	    if(CP >= 17){SetPlayerCheckpoint(playerid, ChecksPracticoAvion[CP][0], ChecksPracticoAvion[CP][1], ChecksPracticoAvion[CP][2], 5.0);}
	    else{SetPlayerRaceCheckpoint(playerid,3,ChecksPracticoAvion[CP][0],ChecksPracticoAvion[CP][1],ChecksPracticoAvion[CP][2],ChecksPracticoAvion[CP+1][0],ChecksPracticoAvion[CP+1][1],ChecksPracticoAvion[CP+1][2],8.0);}
	    CheckPointAutoEscuela[playerid] ++;
	}
	if(EnAutoEscuela[playerid] == 3) //Barcos
	{
	    new CP = CheckPointAutoEscuela[playerid];
	    SetPlayerRaceCheckpoint(playerid, 0, ChecksPracticoBarco[CP][0], ChecksPracticoBarco[CP][1], ChecksPracticoBarco[CP][2], ChecksPracticoBarco[CP+1][0], ChecksPracticoBarco[CP+1][1], ChecksPracticoBarco[CP+1][2], 5.0);
	    CheckPointAutoEscuela[playerid] ++;
	}
}

forward TimerAutoescuela(playerid);
public TimerAutoescuela(playerid)
{
	if(EnAutoEscuela[playerid] == 1 && !CocheAutoescuelaCond(GetPlayerVehicleID(playerid))){SendClientMessage(playerid, Rojo, "* Has tardado demasiado en subir a un vehículo de la autoescuela."); KillTimer(MaxTiempoAutoEscuelaTimer[playerid]); EnAutoEscuela[playerid] = 0; CheckPointAutoEscuela[playerid] = 0; DisablePlayerCheckpoint(playerid); return 1;}
	if(EnAutoEscuela[playerid] == 2 && !CocheAutoescuelaAvion(GetPlayerVehicleID(playerid))){SendClientMessage(playerid, Rojo, "* Has tardado demasiado en subir a la avioneta."); KillTimer(MaxTiempoAutoEscuelaTimer[playerid]); EnAutoEscuela[playerid] = 0; CheckPointAutoEscuela[playerid] = 0; DisablePlayerCheckpoint(playerid); SetVehicleToRespawn(GetPlayerVehicleID(playerid)); DisablePlayerRaceCheckpoint(playerid); return 1;}
	if(EnAutoEscuela[playerid] == 3 && !CocheAutoescuelaBarco(GetPlayerVehicleID(playerid))){SendClientMessage(playerid, Rojo, "* Has tardado demasiado en subir a la lancha."); KillTimer(MaxTiempoAutoEscuelaTimer[playerid]); EnAutoEscuela[playerid] = 0; CheckPointAutoEscuela[playerid] = 0; DisablePlayerRaceCheckpoint(playerid); return 1;}
	return 1;
}

TemaAutoescuelaCond(playerid, tema)
{
	if(tema == 0)
	{
	    new Autoescuela[800];
		strcat(Autoescuela,"Bienvenido a la autoescuela. Aquí aprenderás cómo conducir sin poner en peligro tu vida o la de los que te rodean.\n");
		strcat(Autoescuela,"Este examen se compone de dos partes, una teórica y otra práctica. Para aprobarlo deberás superar las dos partes.\n");
		strcat(Autoescuela,"En caso de no poder superar alguna parte, se te descontará 100$ por la plaza. Si apruebas el examen deberás pagar 700$\n");
		strcat(Autoescuela,"para recibir tu carnet de conducir.\n");
		strcat(Autoescuela,"\n");
		strcat(Autoescuela,"Ahora recibirás una clase acerca de cómo conducir correctamente y qué hacer en casos de emergencia. Presta atención.\n");
		ShowPlayerDialog(playerid,7,DIALOG_STYLE_MSGBOX,"Examen de conducción",Autoescuela,"Siguiente","Salir");
	}
	if(tema == 1)
	{
	    new Autoescuela[800];
	 	strcat(Autoescuela,"A la hora de conducir, siempre hay que llevar el coche por el carril derecho. Conducir por el carril izquierdo sería\n");
		strcat(Autoescuela,"ir en contrasentido, una falta muy grave ya que puede provocar muchos accidentes. Existen carriles múltiples, significa\n");
		strcat(Autoescuela,"que dos o más carriles van en la misma dirección, uno al lado del otro.\n");
		ShowPlayerDialog(playerid,8,DIALOG_STYLE_MSGBOX,"Examen de conducción - Carriles",Autoescuela,"Siguiente","Anterior");
	}
	if(tema == 2)
	{
	    new Autoescuela[800];
	    strcat(Autoescuela,"Conducir bajo los efectos del alcohol u otras drogas es muy peligroso. Alquien que ha tomado drogas no es capaz de\n");
	    strcat(Autoescuela,"controlar su cuerpo completamente, por lo que su capacidad de reacción disminuye. Si has consumido drogas y tienes que\n");
	    strcat(Autoescuela,"desplazarte se aconseja llamar a un amigo o un taxi, o ir caminando.\n");
	    ShowPlayerDialog(playerid,9,DIALOG_STYLE_MSGBOX,"Examen de conducción - Drogas al volante",Autoescuela,"Siguiente","Anterior");
	}
	if(tema == 3)
	{
	    new Autoescuela[800];
		strcat(Autoescuela,"Las distracciones al volante son muy comunes. Cosas que te distraigan como hablar por móvil, mirar el GPS, o estar\n");
	    strcat(Autoescuela,"fumándose un cigarrillo puede provocar un accidente. Hablar por movil cuando se conduce es una falta grave.\n");
	    strcat(Autoescuela,"Para estar alerta de los peligros que puedan aparecer en la carretera hay que estar bien despierto y mirando siempre al\n");
	    strcat(Autoescuela,"frente. Beber refrescos con cafeina te ayudan a distraerte menos a la hora de conducir.\n");
	    ShowPlayerDialog(playerid,10,DIALOG_STYLE_MSGBOX,"Examen de conducción - Distracciones",Autoescuela,"Siguiente","Anterior");
	}
	if(tema == 4)
	{
	    new Autoescuela[800];
		strcat(Autoescuela,"A veces cuando conducimos podemos encontrarnos con accidentes que han ocurrido. Si vemos un accidente en el cual\n");
		strcat(Autoescuela,"no hay nadie socorriendo a las víctimas, es una obligación llamar a los servicios de emergencia o pedir ayuda.\n");
		strcat(Autoescuela,"Debemos comprobar sí está consciente o inconsciente. Si está inconsciente debemos quedarnos con él hasta que lleguen\n");
		strcat(Autoescuela,"los servicios de emergencia. Recuerda que no debes intentar socorrerle tú mismo, podrías herirle aun más o incluso\n");
		strcat(Autoescuela,"provocarle la muerte.\n");
		ShowPlayerDialog(playerid,11,DIALOG_STYLE_MSGBOX,"Examen de conducción - Emergencias",Autoescuela,"Siguiente","Anterior");
	}
	if(tema == 5)
	{
	    new Autoescuela[800];
		strcat(Autoescuela,"A la hora de estacionar nuestro vehículo debemos ser consciente de dónde aparcamos, ya que puede ser una zona\n");
		strcat(Autoescuela,"que dificulte el paso de otros vehículos o que no está hecha para esa acción, lo cual te puede costar una multa.\n");
		strcat(Autoescuela,"Para aparcar correctamente debemos fijarnos en que la zona está creada con ese fin, o que sea una zona donde\n");
		strcat(Autoescuela,"no moleste el paso de peatones o de otros vehículos. Podemos aparcar correctamente dejando el vehículo en un\n");
		strcat(Autoescuela,"parking, zona azul, o dejando una mitad del coche en la acera y la otra en la carretera siempre y cuando no\n");
		strcat(Autoescuela,"dificulte el paso de otros vehículos o peatones.\n");
		ShowPlayerDialog(playerid,12,DIALOG_STYLE_MSGBOX,"Examen de conducción - Aparcar correctamente",Autoescuela,"Siguiente","Anterior");
	}
	if(tema == 6)
	{
	    new Autoescuela[800];
		strcat(Autoescuela,"Para conducir en la ciudad, el máximo de velocidad permitido es de 70Km/h. Aunque lo aconsejable es ir a 50Km/h.\n");
		strcat(Autoescuela,"En carreteras el límite permitido es de 100Km/, y en autopistas 120Km/h, pero recuerda que a más velocidad se\n");
	    strcat(Autoescuela,"reduce el tiempo de reacción y aumenta la probabilidad de accidentes de conducción.\n");
	    strcat(Autoescuela,"Por último; cuando escuchemos sirenas de un vehículo de emergencias o lleve las luces de emergencia encendidas\n");
	    strcat(Autoescuela,"debemos cederle el paso, ya que posiblemente estén atentiendo a una llamada grave.\n");
		ShowPlayerDialog(playerid,13,DIALOG_STYLE_MSGBOX,"Examen de conducción - Velocidades y señales de emergencia",Autoescuela,"Siguiente","Anterior");
	}
	if(tema == 7)
	{
	    new Autoescuela[800];
		strcat(Autoescuela,"Hasta aquí la clase teórica, ahora se te harán diversas preguntas para comprobar que sabes lo necesario para\n");
		strcat(Autoescuela,"conducir correctamente. Piensa bien antes de responder, si fallas alguna pregunta perderás 100$ por la plaza.\n");
		strcat(Autoescuela," \n");
		strcat(Autoescuela,"Buena suerte.\n");
		ShowPlayerDialog(playerid,14,DIALOG_STYLE_MSGBOX,"Examen de conducción - Final",Autoescuela,"Comenzar","Anterior");
	}
}

PreguntaAutoescuelaCond(playerid, pregunta)
{
	if(pregunta == 0)
	{
	    new Autoescuela[800];
		strcat(Autoescuela,"Debemos dejar paso a un coche de emergencias si...\n");
		strcat(Autoescuela," \n");
		strcat(Autoescuela,"1: ...nos pita.\n");
		strcat(Autoescuela,"2: ...nos grita que nos apartemos.\n");
		strcat(Autoescuela,"3: Siempre.\n");
		strcat(Autoescuela,"4: ...lleva las sirenas encendidas.\n");
		ShowPlayerDialog(playerid, 15, DIALOG_STYLE_INPUT, "Pregunta 1", Autoescuela, "Aceptar", "Salir");
	}
	if(pregunta == 1)
	{
	    new Autoescuela[800];
		strcat(Autoescuela,"¿Cuál es la máxima velocidad permitida en ciudad?\n");
		strcat(Autoescuela," \n");
		strcat(Autoescuela,"1: 80Km/h\n");
		strcat(Autoescuela,"2: 70Km/h\n");
		strcat(Autoescuela,"3: 60Km/h\n");
		strcat(Autoescuela,"4: 65Km/h\n");
		ShowPlayerDialog(playerid, 16, DIALOG_STYLE_INPUT, "Pregunta 2", Autoescuela, "Aceptar", "Salir");
	}
	if(pregunta == 2)
	{
	    new Autoescuela[800];
		strcat(Autoescuela,"Si vemos que se produce un accidente ¿qué debemos hacer?\n");
		strcat(Autoescuela," \n");
		strcat(Autoescuela,"1: Tumbar a los heridos en el suelo y pedir ayuda.\n");
		strcat(Autoescuela,"2: Llamar a emergencias o pedir ayuda.\n");
		strcat(Autoescuela,"3: Llevar a los héridos al hospital.\n");
		strcat(Autoescuela,"4: Nada, Los servicios de emergencias ya están en camino.\n");
		ShowPlayerDialog(playerid, 17, DIALOG_STYLE_INPUT, "Pregunta 3", Autoescuela, "Aceptar", "Salir");
	}
	if(pregunta == 3)
	{
	    new Autoescuela[800];
		strcat(Autoescuela,"¿Cuál de estas acciones no está prohibida hacer mientras se conduce?\n");
		strcat(Autoescuela," \n");
		strcat(Autoescuela,"1: Utilizar cascos o auriculares.\n");
		strcat(Autoescuela,"2: Hablar por el móvil.\n");
		strcat(Autoescuela,"3: Escuchar la radio.\n");
		strcat(Autoescuela,"4: Las tres anteriores están prohibidas.\n");
		ShowPlayerDialog(playerid, 18, DIALOG_STYLE_INPUT, "Pregunta 4", Autoescuela, "Aceptar", "Salir");
	}
	if(pregunta == 4)
	{
	    new Autoescuela[800];
		strcat(Autoescuela,"¿Cómo debe estacionarse un vehículo?\n");
		strcat(Autoescuela," \n");
		strcat(Autoescuela,"1: En zonas hechas para eso.\n");
		strcat(Autoescuela,"2: En zonas hechas para eso y si quiero en un lado del asfalto.\n");
		strcat(Autoescuela,"3: En zonas hechas para eso o dejando una mitad del vehículo en el asfalto y la otra en la acera.\n");
		strcat(Autoescuela,"4: Todas son correctas.\n");
		ShowPlayerDialog(playerid, 19, DIALOG_STYLE_INPUT, "Pregunta 5", Autoescuela, "Aceptar", "Salir");
	}
}

stock PlayerTieneLlaveVeh(playerid, vehicleid)
{
	if(vehicleid <= MAX_VEHPUBLICO){return 0;}
    new TieneLlave;
    for(new x = 0; x < 5; x++)
    {
		if(PlayerInfo[playerid][pLlaveCoche][x] == CarInfo[vehicleid][cLlave] || PlayerInfo[playerid][pLlaveCochePrestado][x] == CarInfo[vehicleid][cLlave]){
		TieneLlave = 1; break;}
	}
	if(TieneLlave != 0){return 1;}
	return 0;
}

stock PlayerEsFaccionVeh(playerid, vehicleid)
{
	if(vehicleid > MAX_VEHPUBLICO){return 0;}
	if(CocheLSPD(vehicleid) && PlayerInfo[playerid][pFaccion] == 1){return 1;}
	if(CocheGOB(vehicleid) && (PlayerInfo[playerid][pFaccion] == 3 || PlayerInfo[playerid][pFaccion] == 1)){return 1;}
	if(CocheLSN(vehicleid) && PlayerInfo[playerid][pFaccion] == 4){return 1;}
	if(IsACocheLSMD(vehicleid) && PlayerInfo[playerid][pFaccion] == 2){return 1;}
	if(IsACocheTaller(vehicleid) && PlayerInfo[playerid][pFaccion] == 5){return 1;}
	if(CocheAutoescuelaCond(vehicleid) && EnAutoEscuela[playerid] == 1){return 1;}
	if(CocheAutoescuelaAvion(vehicleid) && EnAutoEscuela[playerid] == 2){return 1;}
	if(CocheAutoescuelaBarco(vehicleid) && EnAutoEscuela[playerid] == 3){return 1;}
	if(IsACombine(vehicleid) && PlayerInfo[playerid][pTrabajo] == 2){return 1;}
	if(IsATaxi(vehicleid) && PlayerInfo[playerid][pTrabajo] == 3){return 1;}
	if(IsABarcoPesca(vehicleid) && PlayerInfo[playerid][pTrabajo] == 5){return 1;}
	if(IsAvionPiloto(vehicleid) && PlayerInfo[playerid][pTrabajo] == 1){return 1;}
	if(IsAutoPiloto(vehicleid) && PlayerInfo[playerid][pTrabajo] == 1){return 1;}
	if(IsAutoRenta(vehicleid)){return 1;}
	if(IsACocheRuso(vehicleid) && PlayerInfo[playerid][pFaccion] == 11){return 1;}
	if(IsACocheLCN(vehicleid) && PlayerInfo[playerid][pFaccion] == 7){return 1;}
	if(IsACocheYKZ(vehicleid) && PlayerInfo[playerid][pFaccion] == 10){return 1;}
	return 0;
}

forward RestartServidor();
public RestartServidor()
{
    SendRconCommand("gmx");
}

stock ResetPlayerVars(playerid) //Resetea todas las variables del jugador
{
	SAFK[playerid] = 00;
	MAFK[playerid] = 00;
	HAFK[playerid] = 00;
	PlayerInfo[playerid][pPasajeros] = 0;
	TrabajoAvion[playerid] = 0;
	AvionID[playerid] = INVALID_VEHICLE_ID;
	TrabajoAvion[playerid] = 0;
	VarAvion[playerid] = 0;
	reportar[playerid] = INVALID_PLAYER_ID;
	JugadorRegistrado[playerid] = 0;
    JugadorLogueado[playerid] = 0;  //Sistema de logueo
    IntentosLogueo[playerid] = 0;
    PrimerSpawn[playerid] = 0; //Sistema de spawn
    ChatOOC[playerid] = 0; //Chat OOC /b
	reclutarfaccion[playerid] = 0; //Comando /reclutar
    reclutarlider[playerid] = 0;
    TimerSonidoDisparo[playerid] = 0; //Sonido de disparos
	MuertoTimer[playerid] = 0; //Sistema de muerte
	MuertoFlashTimer[playerid] = 0;
    Muerte[playerid] = 0;
    Taseado[playerid] = 0; //Sistema de táser
    EnCatalogoVeh[playerid] = NOEXISTE; //Catalogo
    Esposado[playerid] = 0; //Sistema de esposas
    SolicitaRefuerzos[playerid] = 0; //Sistema de refuerzos LSPD
    CederTiempo[playerid] = 0; //Timer para ceder objetos
    RecargarTiempo[playerid] = 0; //Timer para recargar
    MultaPrecio[playerid] = 0; //Sistema de multas
    Multador[playerid] = NOEXISTE;
    LlenandoDeposito[playerid] = 0;
    VenderVeh[playerid] = 0; //Sistema de desguace
    VenderVehAPrecio[playerid] = 0; //Sistema venta de vehículos a otras personas
	VenderVehAVendedor[playerid] = NOEXISTE;
	VenderVehALlave[playerid] = 0;
	VehMaleteroPlayer[playerid] = 0; //Maletero
	EnAutoEscuela[playerid] = 0; //Autoescuela
	CheckPointAutoEscuela[playerid] = 0;
	MaxTiempoAutoEscuelaTimer[playerid] = NOEXISTE;
	MascaraGas[playerid] = 0; //Comando /mascara
	Trabajando[playerid] = 0; //Trabajo
	OfertaTrabajo[playerid] = NOEXISTE;
	Tarifa[playerid] = 0; //Trabajo
	Cosechado[playerid] = 0; //Job cosechador
	TimerDejarTrabajar[playerid] = NOEXISTE;
	TaxiConductor[playerid] = NOEXISTE; //Job taxista
	TaxiPasajero[playerid] = NOEXISTE;
	TaxiCoste[playerid] = 0;
	SolicitaTaxi[playerid] = 0;
	SolicitaMeca[playerid] = 0;
	ReparacionTipo[playerid] = 0; //Job mecánico
	ReparacionMeca[playerid] = NOEXISTE;
	ReparacionPrecio[playerid] = 0;
	RepintadoColor1[playerid] = 0;
	RepintadoColor2[playerid] = 0;
	RepintadoMeca[playerid] = NOEXISTE;
	RepintadoPrecio[playerid] = 0;
	PuertaForzada[playerid] = 0; //Job ladrón
	Robando[playerid] = 0;
	Puenteando[playerid] = 0;
	PescaRecogida[playerid] = 0; //Job pescador
	DineroPesca[playerid] = 0;
	PuenteHecho[playerid] = 0;
    EnLlamada[playerid] = 0; //Sistema teléfono
    ToqueLlamada[playerid] = 0;
    PersonaEnLlamada[playerid] = NOEXISTE;
    CosteTotalLlamada[playerid] = 0;
    for(new x=0; x<16; x++) //Agenda
    {
        AgendaNumero[playerid][x] = 0;
    }
    LocalizarVeh[playerid] = 0; //Comando /Localizarveh
    MirandoContactoAgenda[playerid] = 0;
    Idioma[playerid] = 0; //Sistema idiomas
    oldcarid[playerid] = 0; //Comando /oldcar
    PagarTimer[playerid] = 0; //Comando /pagar
    EditNegoPos[playerid] = 0; //Comando /editnego
    PreparandoDroga[playerid] = 0; //Comando /preparar
    IntentarUsado[playerid] = 0; //Comando /intentar
    MisionEncargada[playerid] = 0; //Sistema de misiones de pandillas
	RealizandoMision[playerid] = 0;
	MuroAPintar[playerid] = NOEXISTE;
	TransferirPlayer[playerid] = NOEXISTE; //ATM Transferir
	HaciendoPressBanca[playerid] = 0; //Comando /Entrenar
	RepeticionesPressBanca[playerid] = 0;
	MatriculasActivadas[playerid] = 0; //Sistema matrículas
	//SISTEMA ANTICHEAT
	DineroAC[playerid] = 0;
	PingKick[playerid] = 0;
    ArmaSpawnAC[playerid] = 0;
    TimerBlockIP[playerid] = NOEXISTE;
    ChalecoAC[playerid] = 0;
    VehicleHack[playerid] = 0;
    //FIN SISTEMA ANTICHEAT
    LaserON[playerid] = 0; //Lasers en armas
    SiendoReparado[playerid] = 0; //Autoreparar
    CinturonPuesto[playerid] = 0; //Cinturón
    PrestadorCoche[playerid] = NOEXISTE; // /PrestarLlave
    LlavePrestada[playerid] = NOEXISTE;
	AtendiendoInforme[playerid] = NOEXISTE; //Informes LSED
	PlayerInfo[playerid][pSQLID] = 0; //Reinicia todas los valores de PlayerInfo
	PlayerInfo[playerid][pAdmin] = 0;
	PlayerInfo[playerid][pBloqueado] = 0;
    PlayerInfo[playerid][pPrimerLogueo] = 0;
    PlayerInfo[playerid][pEdad] = 0;
    PlayerInfo[playerid][pSexo] = 0;
    PlayerInfo[playerid][pNivel] = 0;
    PlayerInfo[playerid][pExp] = 0;
    PlayerInfo[playerid][pVida] = 100.0;
    PlayerInfo[playerid][pChaleco] = 0;
    PlayerInfo[playerid][pTelefono] = 0;
    PlayerInfo[playerid][pTrabajo] = 0;
    PlayerInfo[playerid][pPosX] = 0;
    PlayerInfo[playerid][pPosY] = 0;
    PlayerInfo[playerid][pPosZ] = 0;
    PlayerInfo[playerid][pDineroBanco] = 0;
    PlayerInfo[playerid][pDineroMano] = 0;
    PlayerInfo[playerid][pEncarcelado] = 0;
    PlayerInfo[playerid][pTiempoCarcel] = 0;
    PlayerInfo[playerid][pSpecID] = INVALID_PLAYER_ID;
    PlayerInfo[playerid][pSkin] = 0;
    PlayerInfo[playerid][pFaccion] = 0;
    PlayerInfo[playerid][pRango] = 0;
    PlayerInfo[playerid][pLider] = 0;
    PlayerInfo[playerid][pPuntosRol] = 0;
    PlayerInfo[playerid][pHabPistola] = 0;
	PlayerInfo[playerid][pHabSD] = 0;
	PlayerInfo[playerid][pHabDEagle] = 0;
	PlayerInfo[playerid][pHabEscopeta] = 0;
	PlayerInfo[playerid][pHabSawnoff] = 0;
	PlayerInfo[playerid][pHabEscopetaCom] = 0;
	PlayerInfo[playerid][pHabUZI] = 0;
	PlayerInfo[playerid][pHabMP5] = 0;
	PlayerInfo[playerid][pHabAK47] = 0;
	PlayerInfo[playerid][pHabM4] = 0;
	PlayerInfo[playerid][pHabFranco] = 0;
	PlayerInfo[playerid][pInterior] = 0;
	PlayerInfo[playerid][pVirtualWorld] = 0;
    for(new x = 0; x < 8; x++)
	{
	    PlayerInfo[playerid][pBol][x] = 0;
	    PlayerInfo[playerid][pBolCant][x] = 0;
	}
	PlayerInfo[playerid][pManoIzq] = 0;
	PlayerInfo[playerid][pManoIzqCant] = 0;
	PlayerInfo[playerid][pManoDer] = 0;
	PlayerInfo[playerid][pManoDerCant] = 0;
	PlayerInfo[playerid][pMuerto] = 0;
	PlayerInfo[playerid][pEspalda] = 0;
	PlayerInfo[playerid][pEspaldaCant] = 0;
	for(new x = 0; x < 8; x++)
	{
	    PlayerInfo[playerid][pCint][x] = 0;
	    PlayerInfo[playerid][pCintCant][x] = 0;
	}
	PlayerInfo[playerid][pServicioPD] = 0;
	PlayerInfo[playerid][pServicioLSMD] = 0;
	PlayerInfo[playerid][pServicioWCST] = 0;
	PlayerInfo[playerid][pServicioCNN] = 0;
	for(new x = 0; x < 5; x++)
	{
	    PlayerInfo[playerid][pLlaveCoche][x] = 0;
	}
	for(new x = 0; x < 5; x++)
	{
	    PlayerInfo[playerid][pLlaveCochePrestado][x] = 0;
	}
	PlayerInfo[playerid][pMinPayDay] = 0;
	PlayerInfo[playerid][pLicConduccion] = 0;
	PlayerInfo[playerid][pLicNavegacion] = 0;
	PlayerInfo[playerid][pLicAviacion] = 0;
	PlayerInfo[playerid][pLicArmas] = 0;
	PlayerInfo[playerid][pYo] = 0;
	PlayerInfo[playerid][pCasa] = 0;
	PlayerInfo[playerid][pCasaAlq] = 0;
	PlayerInfo[playerid][pNegocio] = 0;
	PlayerInfo[playerid][pHabPil] = 0;
	PlayerInfo[playerid][pNivelPiloto] = 0;
	PlayerInfo[playerid][pHabLad] = 0;
	PlayerInfo[playerid][pTiempoRobo] = 0;
	PlayerInfo[playerid][pHambre] = 0;
	PlayerInfo[playerid][pSed] = 0;
	for(new x=0; x<5; x++)
	{
	    PlayerInfo[playerid][pAdiccion][x] = 0;
	}
	for(new x=0; x<5; x++)
	{
	    PlayerInfo[playerid][pDrConsumida][x] = 0;
	}
	PlayerInfo[playerid][pFuerza] = 0;
	PlayerInfo[playerid][pCansancioEntrenar] = 0;
	PlayerInfo[playerid][pTest] = 0;
	PlayerInfo[playerid][pPremium] = 0;
	NewbieTimer[playerid] = 0;
    return 1;
}

stock GetVehicleName(vehicleid) //Retorna nombre de modelo de un vehículo
{
	new String[20];
    format(String,sizeof(String),"%s",VehicleNames[GetVehicleModel(vehicleid) - 400]);
    return String;
}

stock CreateCopObject(tipo, Float:x,Float:y,Float:z,Float:Angle) //Crear objetos de trafico
{
	switch(tipo)
	{
		case 1:
		{
			for(new i = 0; i < sizeof(ObjectsInfo); i++)
			{
				if(ObjectsInfo[i][cpCreated] == 0)
				{
					ObjectsInfo[i][cpType]=tipo;
					ObjectsInfo[i][cpCreated]=1;
					ObjectsInfo[i][cpX]=x;
					ObjectsInfo[i][cpY]=y;
					ObjectsInfo[i][cpZ]=z-0.7;
					ObjectsInfo[i][cpObject] = CreateDynamicObject(2899, x, y, z-0.9, 0, 0, Angle-90);
					return 1;
				}
			}
		}
		case 2:
		{
			for(new i = 0; i < sizeof(ObjectsInfo); i++)
			{
				if(ObjectsInfo[i][cpCreated] == 0)
				{
					ObjectsInfo[i][cpType]=tipo;
					ObjectsInfo[i][cpCreated]=1;
					ObjectsInfo[i][cpX]=x;
					ObjectsInfo[i][cpY]=y;
					ObjectsInfo[i][cpZ]=z-0.5;
					ObjectsInfo[i][cpObject] = CreateDynamicObject(1238, x, y, z-0.5, 0, 0, Angle-90);
					return 1;
				}
			}
		}
		case 3:
		{
			for(new i = 0; i < sizeof(ObjectsInfo); i++)
			{
				if(ObjectsInfo[i][cpCreated] == 0)
				{
					ObjectsInfo[i][cpType]=tipo;
					ObjectsInfo[i][cpCreated]=1;
					ObjectsInfo[i][cpX]=x;
					ObjectsInfo[i][cpY]=y;
					ObjectsInfo[i][cpZ]=z-0.3;
					ObjectsInfo[i][cpObject] = CreateDynamicObject(1423, x, y, z-0.3, 0, 0, Angle);
					return 1;
				}
			}
		}
		case 4:
		{
			for(new i = 0; i < sizeof(ObjectsInfo); i++)
			{
				if(ObjectsInfo[i][cpCreated] == 0)
				{
					ObjectsInfo[i][cpType]=tipo;
					ObjectsInfo[i][cpCreated]=1;
					ObjectsInfo[i][cpX]=x;
					ObjectsInfo[i][cpY]=y;
					ObjectsInfo[i][cpZ]=z-0.5;
					ObjectsInfo[i][cpObject] = CreateDynamicObject(1422, x, y, z-0.5, 0, 0, Angle);
					return 1;
				}
			}
		}
	}
  	return 0;
}

stock DeleteAllObjects() //Quitar todos objetos de trafico
{
    for(new i = 0; i < sizeof(ObjectsInfo); i++)
  	{
  	    if(ObjectsInfo[i][cpCreated] == 1)
  	    {
			ObjectsInfo[i][cpType]=0;
  	        ObjectsInfo[i][cpCreated]=0;
            ObjectsInfo[i][cpX]=0.0;
            ObjectsInfo[i][cpY]=0.0;
            ObjectsInfo[i][cpZ]=0.0;
            DestroyDynamicObject(ObjectsInfo[i][cpObject]);
  	    }
	}
    return 0;
}

stock DeleteClosestObject(playerid) //Quitar objetos de trafico
{
    for(new i = 0; i < sizeof(ObjectsInfo); i++)
  	{
  	    if(IsPlayerInRangeOfPoint(playerid, 2.0, ObjectsInfo[i][cpX], ObjectsInfo[i][cpY], ObjectsInfo[i][cpZ]))
        {
  	        if(ObjectsInfo[i][cpCreated] == 1)
            {
				ObjectsInfo[i][cpType]=0;
                ObjectsInfo[i][cpCreated]=0;
                ObjectsInfo[i][cpX]=0.0;
                ObjectsInfo[i][cpY]=0.0;
                ObjectsInfo[i][cpZ]=0.0;
                DestroyDynamicObject(ObjectsInfo[i][cpObject]);
                return 1;
  	        }
  	    }
  	}
    return 0;
}

encode_tires(tires1, tires2, tires3, tires4) //Pinchar ruedas
{
	return tires1 | (tires2 << 1) | (tires3 << 2) | (tires4 << 3);
}

forward NoRefAutoF(playerid);
public NoRefAutoF(playerid) //Deja de solicitar refuerzos
{
	if(SolicitaRefuerzos[playerid] == 0){return 1;}
	new string[256];
	SolicitaRefuerzos[playerid] = 0;
	format(string, sizeof(string), "[Radio] -{FFFFFF} Central: El agente {FFFF04}%s {FFFFFF}ya no solicita refuerzos.", GetPlayerNameRP(playerid));
	for(new i = 0; i < MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
			if(PlayerInfo[i][pFaccion] == 1 && PlayerInfo[i][pServicioPD] > 0)
			{
				SetPlayerMarkerForPlayer(i, playerid, Blanco2);
				SendClientMessage(i, TEAM_BLUE_COLOR, string);
			}
		}
	}
	SendClientMessage(playerid, AmarilloClaro, "Solicitud de refuerzos cancelada automáticamente.");
	return 1;
}

forward LoadCar(); //Cargar coches
public LoadCar()
{
    new Query[180], content[60], maletero[10], maleterocant[20];
	new ccount, conteo;
	new car = MAX_VEHPUBLICO+1;
	new sql[80], row[512];
 	format(sql, sizeof(sql), "SELECT * FROM vehiculos");
	mysql_query(1, sql);
	mysql_store_result();
	new y,z;
 	cache_get_data(y, z);
 	new SQLID[1000];
 	for(new x; x<y; x++){
 	    SQLID[x]=cache_get_row_int(x, 0);
 	}
	for(new x; x<y; x++)
	{
		mysql_format(1, Query, sizeof(Query), "SELECT * FROM `vehiculos` WHERE `SQLID` = %d", SQLID[x]);
		mysql_query(1, Query);
		mysql_store_result();
	    
		if(cache_get_field_content_int(0, "Llave") != 0 && cache_get_field_content_int(0, "Modelo") != 0)
		{
			CarInfo[car][cSQLID] = cache_get_field_content_int(0, "SQLID");
		 	CarInfo[car][cLlave] = cache_get_field_content_int(0, "Llave");
		 	CarInfo[car][cModelo] = cache_get_field_content_int(0, "Modelo");
		 	CarInfo[car][cPosX] = cache_get_field_content_float(0, "PosX");
		 	CarInfo[car][cPosY] = cache_get_field_content_float(0, "PosY");
		 	CarInfo[car][cPosZ] = cache_get_field_content_float(0, "PosZ");
		 	CarInfo[car][cZAngle] = cache_get_field_content_float(0, "ZAngle");
		 	CarInfo[car][cColor1] = cache_get_field_content_int(0, "Color1");
		 	CarInfo[car][cColor2] = cache_get_field_content_int(0, "Color2");
		 	CarInfo[car][cComprado] = cache_get_field_content_int(0, "Comprado");
		 	cache_get_field_content(0, "Dueno", content);
		    format(CarInfo[car][cDueno], 60, "%s", content);
            cache_get_field_content(0, "NombreModelo", content);
		    format(CarInfo[car][cNombreModelo], 60, "%s", content);
		    CarInfo[car][cValor] = cache_get_field_content_int(0, "Valor");
		    CarInfo[car][cCerrado] = cache_get_field_content_int(0, "Cerrado");
			CarInfo[car][cGas] = cache_get_field_content_int(0, "Gas");
			CarInfo[car][cEnDeposito] = cache_get_field_content_int(0, "EnDeposito");
			CarInfo[car][cMaxMaletero] = cache_get_field_content_int(0, "MaxMaletero");
			//printf("Vehiculo ID: %i , clave ID: %i , Modelo: %s",CarInfo[car][cID],CarInfo[car][cLlave],CarInfo[car][cNombreModelo]);
			for(new a=0; a<CarInfo[car][cMaxMaletero]; a++)
		    {
		        format(maletero, sizeof(maletero), "Maletero%d", a+1);
		        format(maleterocant, sizeof(maleterocant), "MaleteroCant%d", a+1);
		        CarInfo[car][cMaletero][a] = cache_get_field_content_int(0, maletero);
		    	CarInfo[car][cMaleteroCant][a] = cache_get_field_content_int(0, maleterocant);
		    }
			CarInfo[car][cPanels] = cache_get_field_content_int(0, "Panels");
			CarInfo[car][cDoors] = cache_get_field_content_int(0, "Doors");
			CarInfo[car][cLights] = cache_get_field_content_int(0, "Lights");
			CarInfo[car][cTires] = cache_get_field_content_int(0, "Tires");
			CarInfo[car][cDamage] = cache_get_field_content_float(0, "Damage");
			CarInfo[car][cVirtualWorld] = cache_get_field_content_int(0, "VirtualWorld");
			CarInfo[car][cInterior] = cache_get_field_content_int(0, "Interior");
			if(CarInfo[car][cDamage] < 250){CarInfo[car][cDamage] = 250;}
			else if(CarInfo[car][cDamage] > 1000){CarInfo[car][cDamage] = 1000;}
			CarInfo[car][cID] = CreateVehicle(CarInfo[car][cModelo],CarInfo[car][cPosX],CarInfo[car][cPosY],CarInfo[car][cPosZ],CarInfo[car][cZAngle],CarInfo[car][cColor1],CarInfo[car][cColor2],600000);
			if(CarInfo[car][cEnDeposito] == 1) //Desgüace
			{
			    if(IsABoat(car)){SetVehiclePos(car, 2294.3999,-2447.8000,0.0000);}
		     	if(!IsABoat(car)){SetVehiclePos(car, 2274.1028,-2345.5371,13.5469);}
		    }

		    UpdateVehicleDamageStatus(car, CarInfo[car][cPanels], CarInfo[car][cDoors], CarInfo[car][cLights], CarInfo[car][cTires]);
		    SetVehicleHealth(car, CarInfo[car][cDamage]);
		    SetVehicleVirtualWorld(car, CarInfo[car][cVirtualWorld]);
		    LinkVehicleToInteriorEx(car, CarInfo[car][cInterior]);
			if(CarInfo[car][cLlave] >= CodigoLlave){CodigoLlave = CarInfo[car][cLlave]+1;}
			conteo++;
			car ++;
		}
	}
	mysql_free_result();
	if(CodigoLlave < 998){CodigoLlave = 998;}
	printf("*- Vehículos Cargados: %d", conteo);
	return 1;
}

forward SaveCar(idx); //Guardar coches -IMPORTANTE NO BORRAR NI UN SOLO VEHÍCULO DE LA DB-
public SaveCar(idx)
{
    if(CarInfo[idx][cLlave] != 0 && CarInfo[idx][cModelo] != 0)
    {
	    GetVehiclePos(idx, CarInfo[idx][cPosX], CarInfo[idx][cPosY], CarInfo[idx][cPosZ]);
	    GetVehicleZAngle(idx, CarInfo[idx][cZAngle]);
	    GetVehicleDamageStatus(idx, CarInfo[idx][cPanels], CarInfo[idx][cDoors], CarInfo[idx][cLights], CarInfo[idx][cTires]);
	    GetVehicleHealth(idx, CarInfo[idx][cDamage]);
	    CarInfo[idx][cVirtualWorld] = GetVehicleVirtualWorld(idx);
	    new sql[1024];
	    format(sql, 1024, "UPDATE vehiculos SET ID=%d,Llave=%d,Modelo=%d,PosX=%f,PosY=%f,PosZ=%f,ZAngle=%f,Color1=%d,Color2=%d,Comprado=%d,Dueno='%s',NombreModelo='%s',Valor=%d,Cerrado=%d,Gas=%d,EnDeposito=%d,MaxMaletero=%d WHERE SQLID=%d",
		CarInfo[idx][cID], //ID en SAMP
		CarInfo[idx][cLlave], //Llave del vehículo
		CarInfo[idx][cModelo], //Modelo del vehículo
		CarInfo[idx][cPosX], //Posición X
		CarInfo[idx][cPosY], //Posición Y
		CarInfo[idx][cPosZ], //Posición Z
		CarInfo[idx][cZAngle], //Ángulo
		CarInfo[idx][cColor1], //Color 1
		CarInfo[idx][cColor2], //Color 2
		CarInfo[idx][cComprado], //Si tiene propietario
		CarInfo[idx][cDueno], //Nombre del propietario
		CarInfo[idx][cNombreModelo], //Nombre del modelo
		CarInfo[idx][cValor], //Coste del vehículo
		CarInfo[idx][cCerrado], //Si está cerrado
		CarInfo[idx][cGas], //Combustible
		CarInfo[idx][cEnDeposito], //Si está en el depósito
		CarInfo[idx][cMaxMaletero], //Número de slots que el maletero podrá tener
		CarInfo[idx][cSQLID]); //ID en DB
		mysql_query(1, sql);

		for(new x=0; x<CarInfo[idx][cMaxMaletero]; x++)
		{
		    format(sql, 1024, "UPDATE vehiculos SET Maletero%d=%d,MaleteroCant%d=%d WHERE SQLID=%d",
		    x+1, CarInfo[idx][cMaletero][x], x+1, CarInfo[idx][cMaleteroCant][x],
			CarInfo[idx][cSQLID]);
			mysql_query(1, sql);
		}

		format(sql, 1024, "UPDATE vehiculos SET Panels=%d,Doors=%d,Lights=%d,Tires=%d,Damage=%f,VirtualWorld=%d,Interior=%d WHERE SQLID=%d",
		CarInfo[idx][cPanels], //Daño superficies
		CarInfo[idx][cDoors], //Daño puertas
		CarInfo[idx][cLights], //Daño luces
		CarInfo[idx][cTires], //Ruedas pinchadas
		CarInfo[idx][cDamage], //Daño del vehículo
		CarInfo[idx][cVirtualWorld],
		CarInfo[idx][cInterior],
		CarInfo[idx][cSQLID]);
		mysql_query(1, sql);
	} else if(CarInfo[idx][cComprado]==0){ // El vehículo ha sido vendido
	      new sql[1024];
	      format(sql, 1024, "DELETE FROM vehiculos WHERE SQLID=%d",
	      CarInfo[idx][cSQLID]);
	      mysql_query(1, sql);
	}
	return 1;
}

stock CocheLSPD(carid) //Comprueba si el coche pertenece a LSPD
{
	if(carid >= 1 && carid <= VehiculoPublico[0]) return 1;
	return 0;
}

stock CocheGOB(carid) //Comprueba si el coche pertenece al gobierno
{
	if(VehiculoPublico[0] > 51 && carid <= VehiculoPublico[1]) return 1;
	return 0;
}

stock CocheLSN(carid) //Comprueba si el coche pertenece a LSN
{
	if(carid > VehiculoPublico[1] && carid <= VehiculoPublico[2]) return 1;
	return 0;
}

stock CocheAutoescuelaCond(carid) //Comprueba si el coche pertenece a la autoescuela de conducción
{
	if(carid > VehiculoPublico[2] && carid <= VehiculoPublico[3]) return 1;
	return 0;
}

stock CocheAutoescuelaAvion(carid) //Comprueba si el coche pertenece a la autoescuela de aviación
{
	if(carid == VehiculoPublico[4]) return 1;
	return 0;
}

stock CocheAutoescuelaBarco(carid) //Comprueba si el coche pertenece a la autoescuela de navegación
{
	if(carid == VehiculoPublico[5]) return 1;
	return 0;
}

stock IsAPizzaBike(carid) //Comprueba si es una moto de repartir pizza
{
	new M;
	M = GetVehicleModel(carid);
	if(M == 448)
	    return 1;
	return 0;
}

stock IsACocheLSMD(carid) //Coche LSMD
{
	new M;
	M = GetVehicleModel(carid);
	if(M == 416)
	    return 1;
	return 0;
}


stock IsACocheTaller(carid) //Coche Taller
{
	new M;
	M = GetVehicleModel(carid);
	if(M == 525)
	    return 1;
	return 0;
}

stock IsACombine(carid) //Comprueba si es una cosechadora
{
	new M;
	M = GetVehicleModel(carid);
	if(M == 532)
	    return 1;
	return 0;
}

stock IsATaxi(carid) //Comprueba si es un taxi
{
	new M;
	M = GetVehicleModel(carid);
	if(M == 420 || M == 438)
	    return 1;
	return 0;
}

stock IsABarcoPesca(carid) //Comprueba si es un barco de pesca
{
	if(carid > VehiculoPublico[7] && carid <= VehiculoPublico[8])
	    return 1;
	return 0;
}

stock IsACocheRuso(carid)
{
	if(carid > VehiculoPublico[14] && carid <= VehiculoPublico[15])
	    return 1;
	return 0;
}

stock IsACocheLCN(carid)
{
	if(carid > VehiculoPublico[15] && carid <= VehiculoPublico[16])
	    return 1;
	return 0;
}

stock IsACocheYKZ(carid)
{
	if(carid > VehiculoPublico[16] && carid <= VehiculoPublico[17])
	    return 1;
	return 0;
}

stock IsAutoRenta(carid) //Comprueba si auto de pesca
{
	if(carid > VehiculoPublico[13] && carid <= VehiculoPublico[14])
	    return 1;
	return 0;
}


//TODO comprobar
stock IsAvionPiloto(carid) //Comprueba si es un avión
{
	if(carid > VehiculoPublico[11] && carid <= VehiculoPublico[12])
	    return 1;
	return 0;
}

stock IsAutoPiloto(carid) //Comprueba si auto de pesca
{
	if((carid > VehiculoPublico[10] && carid <= VehiculoPublico[11])||(carid > VehiculoPublico[12] && carid <= VehiculoPublico[13]))
	    return 1;
	return 0;
}

stock IsABike(carid) //Comprueba si es una bici
{
	new M;
	M = GetVehicleModel(carid);
	if(M == 510 || M == 481 || M == 509)
	    return 1;
	return 0;
}

stock IsAMBike(carid) //Comprueba si es una moto
{
	new M;
	M = GetVehicleModel(carid);
	if(M == 462 || M == 581 || M == 522 || M == 461 || M == 521 || M == 523 || M == 463 || M == 586 || M == 468 || M == 471)
	    return 1;
	return 0;
}

stock IsABoat(carid) //Comprueba si es un barco
{
	new M = GetVehicleModel(carid);
	if(M == 472 || M == 473 || M == 493 || M == 595 || M == 484 || M == 430 || M == 453 || M == 452 || M == 446 || M == 454){return 1;}
	return 0;
}

stock IsAPlane(carid) //Comprueba si es un avión o helicóptero
{
	new M =GetVehicleModel(carid);
	if(M == 592 || M == 577 || M == 511 || M == 548 || M == 512 || M == 593 || M == 425 || M == 417 || M == 487 || M == 553){return 1;}
	if(M == 488 || M == 497 || M == 563 || M == 476 || M == 447 || M == 519 || M == 460 || M == 469 || M == 513 || M == 520){return 1;}
	return 0;
}

stock LimpiarChat(playerid, lines) //Limpiar Chat
{
	if(IsPlayerConnected(playerid))
	{
		for(new i=0; i<lines; i++)
		{
			SendClientMessage(playerid, Gris, " ");
		}
	}
	return 1;
}

stock BanL(playerid) //Timer ban
{
    PlayerInfo[playerid][pBloqueado] = 1; PlayerSave(playerid);
    SetTimerEx("BanI", 200, false, "i", playerid);
}

stock KickL(playerid) //Timer kick
{
    SetTimerEx("KickI", 200, false, "i", playerid);
    return 1;
}

forward BanI(playerid); //Banea con timer
public BanI(playerid)
{
    Ban(playerid);
}

forward KickI(playerid); //Kickea con timer
public KickI(playerid)
{
    Kick(playerid);
}

stock ini_GetKey( line[] ) //Comprueba contraseña
{
	new keyRes[128];
	keyRes[0] = 0;
    if( strfind( line , "=" , true ) == -1 ) return keyRes;
    strmid( keyRes , line , 0 , strfind( line , "=" , true ) , sizeof( keyRes) );
    return keyRes;
}

stock ini_GetValue( line[] ) //Comprueba valores
{
	new valRes[128];
	valRes[0] = 0;
	if( strfind( line , "=" , true ) == -1 ) return valRes;
	strmid( valRes , line , strfind( line , "=" , true )+1 , strlen( line ) , sizeof( valRes ) );
	return valRes;
}

stock splitex(const strsrc[], strdest[][], delimiter) //Ni puta idea
{
	new i, li;
	new aNum;
	new len;
	while(i <= strlen(strsrc)){
	    if(strsrc[i]==delimiter || i==strlen(strsrc)){
	        len = strmid(strdest[aNum], strsrc, li, i, 128);
	        strdest[aNum][len] = 0;
	        li = i+1;
	        aNum++;
		}
		i++;
	}
	return 1;
}

strtok(const string[], &index) //Ni puta idea
{
	new length = strlen(string);
	while ((index < length) && (string[index] <= ' '))
	{
		index++;
	}

	new offset = index;
	new result[20];
	while ((index < length) && (string[index] > ' ') && ((index - offset) < (sizeof(result) - 1)))
	{
		result[index - offset] = string[index];
		index++;
	}
	result[index - offset] = EOS;
	return result;
}

forward RandomWeather();
public RandomWeather()
{
	new rand = random(sizeof(TiempoAleatorioID));
	SetWeather(TiempoAleatorioID[rand][TiempoID]);
	DefaultWeather = TiempoAleatorioID[rand][TiempoID];
}

forward OnPlayerLogin(playerid,password[]); //Loguear
public OnPlayerLogin(playerid,password[])
{
    new EscapedText[60], Query[180], NombreUsuario[MAX_PLAYER_NAME];
    GetPlayerName(playerid, NombreUsuario, sizeof(NombreUsuario));
    mysql_real_escape_string(password, EscapedText);
    format(Query,sizeof(Query),"SELECT * FROM usuarios WHERE Nombre = '%s' AND Contra = '%s'",NombreUsuario,EscapedText);
    mysql_query(1, Query);
    mysql_store_result();
    if(cache_get_row_count() == 0)
    {
        new loginstring[128];
        format(loginstring,sizeof(loginstring),"Contraseña incorrecta, inténtalo de nuevo. \nRecuerda que serás baneado si la escribes mal 4 veces.");
        ShowPlayerDialog(playerid,0,DIALOG_STYLE_PASSWORD,"Sky RolePlay",loginstring,"Entrar","Salir");
        return 1;
    }
    mysql_free_result();

    PlayerLoad(playerid); //Carga variables

    if(PlayerInfo[playerid][pBloqueado] == 1) //BAN
    {
        SendClientMessage(playerid, Amarillo, "Esta cuenta está baneada. Puedes pedir su desbloqueo en el foro.");
        KickL(playerid);
    }
    if(PlayerInfo[playerid][pBloqueado] == 2) //CK
    {
        SendClientMessage(playerid, Amarillo, "Esta cuenta está bloqueada por CK. Puedes pedir su desbloqueo en el foro.");
        KickL(playerid);
    }

    if(PlayerInfo[playerid][pAdmin] > 0)
    {
	    format(Query, sizeof(Query), "Tienes nivel %d de admin.",PlayerInfo[playerid][pAdmin]);
    	SendClientMessage(playerid, Rojo,Query);
    }

    printf("%s ha logueado. (ID: %d)",NombreUsuario, playerid);
   	new plrIP[16];
    GetPlayerIp(playerid, plrIP, sizeof(plrIP));
    format(Query, sizeof(Query), "Usuario logueado: %s (ID: %d)", NombreUsuario, playerid);
    SendAdminMessage(AguamarinaOscuro, Query);
    JugadorLogueado[playerid] = 1;
	new dinero = PlayerInfo[playerid][pDineroMano];
    GivePlayerMoneyAC(playerid, dinero);
	SpawnPlayer(playerid); //OnPlayerSpawn
	format(Query, sizeof(Query), "Sky RolePlay{FFFFFF} - Bienvenido al servidor, %s", GetPlayerNameRP(playerid));
	SendClientMessage(playerid, Amarillo, Query);
    if(PlayerInfo[playerid][pYo] == 1)
    {
    Yo3DText[playerid] = CreateDynamic3DTextLabel(PlayerInfo[playerid][pEstado], Rojo,0.0, 0.0, 0.0, 30.0, playerid);
    Streamer_Update(playerid);
    }
	return 1;
}

forward PlayerLoad(playerid);
public PlayerLoad(playerid)
{
	new Query[180], NombreUsuario[MAX_PLAYER_NAME], content[60];
    GetPlayerName(playerid, NombreUsuario, sizeof(NombreUsuario));
	mysql_format(1, Query, sizeof(Query), "SELECT * FROM `usuarios` WHERE `Nombre` = '%s'", NombreUsuario);
	mysql_query(1, Query);
	mysql_store_result();

    cache_get_field_content(0, "Nombre", content);
    format(PlayerInfo[playerid][pNombre], sizeof(content), "%s", content);

	cache_get_field_content(0, "Contra", content);
	format(PlayerInfo[playerid][pContra], sizeof(content), "%s", content);

	cache_get_field_content(0, "Email", content);
	format(PlayerInfo[playerid][pCorreo], sizeof(content), "%s", content);

	PlayerInfo[playerid][pSQLID] = cache_get_field_content_int(0, "ID");

 	PlayerInfo[playerid][pAdmin] = cache_get_field_content_int(0, "Admin");

  	PlayerInfo[playerid][pBloqueado] = cache_get_field_content_int(0, "Bloqueado");
 	PlayerInfo[playerid][pPrimerLogueo] = cache_get_field_content_int(0, "PrimerLogueo");
 	PlayerInfo[playerid][pEdad] = cache_get_field_content_int(0, "Edad");
 	PlayerInfo[playerid][pSexo] = cache_get_field_content_int(0, "Sexo");
 	PlayerInfo[playerid][pNivel] = cache_get_field_content_int(0, "Nivel");
 	PlayerInfo[playerid][pExp] = cache_get_field_content_int(0, "Exp");
    PlayerInfo[playerid][pVida] = cache_get_field_content_float(0, "Vida");
 	PlayerInfo[playerid][pChaleco] = cache_get_field_content_float(0, "Chaleco");
 	PlayerInfo[playerid][pTelefono] = cache_get_field_content_int(0, "Telefono");
 	PlayerInfo[playerid][pTrabajo] = cache_get_field_content_int(0, "Trabajo");
 	PlayerInfo[playerid][pPosX] = cache_get_field_content_float(0, "PosX");
 	PlayerInfo[playerid][pPosY] = cache_get_field_content_float(0, "PosY");
 	PlayerInfo[playerid][pPosZ] = cache_get_field_content_float(0, "PosZ");
 	PlayerInfo[playerid][pDineroBanco] = cache_get_field_content_int(0, "DineroBanco");
 	PlayerInfo[playerid][pDineroMano] = cache_get_field_content_int(0, "DineroMano");
 	PlayerInfo[playerid][pEncarcelado] = cache_get_field_content_int(0, "Encarcelado");
    PlayerInfo[playerid][pTiempoCarcel] = cache_get_field_content_int(0, "TiempoCarcel");
    PlayerInfo[playerid][pSkin] = cache_get_field_content_int(0, "Skin");
    PlayerInfo[playerid][pFaccion] = cache_get_field_content_int(0, "Faccion");
    PlayerInfo[playerid][pRango] = cache_get_field_content_int(0, "Rango");
    PlayerInfo[playerid][pLider] = cache_get_field_content_int(0, "Lider");
    PlayerInfo[playerid][pPuntosRol] = cache_get_field_content_int(0, "PuntosRol");
    PlayerInfo[playerid][pInterior] = cache_get_field_content_int(0, "Interior");
    PlayerInfo[playerid][pVirtualWorld] = cache_get_field_content_int(0, "VirtualWorld");
    PlayerInfo[playerid][pHabPistola] = cache_get_field_content_int(0, "HabPistola");
    PlayerInfo[playerid][pHabSD] = cache_get_field_content_int(0, "HabSD");
    PlayerInfo[playerid][pHabDEagle] = cache_get_field_content_int(0, "HabDEagle");
    PlayerInfo[playerid][pHabEscopeta] = cache_get_field_content_int(0, "HabEscopeta");
    PlayerInfo[playerid][pHabSawnoff] = cache_get_field_content_int(0, "HabSawnoff");
    PlayerInfo[playerid][pHabEscopetaCom] = cache_get_field_content_int(0, "HabEscopetaCom");
    PlayerInfo[playerid][pHabUZI] = cache_get_field_content_int(0, "HabUZI");
    PlayerInfo[playerid][pHabMP5] = cache_get_field_content_int(0, "HabMP5");
    PlayerInfo[playerid][pHabAK47] = cache_get_field_content_int(0, "HabAK47");
    PlayerInfo[playerid][pHabM4] = cache_get_field_content_int(0, "HabM4");
    PlayerInfo[playerid][pHabFranco] = cache_get_field_content_int(0, "HabFranco");
    PlayerInfo[playerid][pBol][0] = cache_get_field_content_int(0, "Bol0");
    PlayerInfo[playerid][pBol][1] = cache_get_field_content_int(0, "Bol1");
    PlayerInfo[playerid][pBol][2] = cache_get_field_content_int(0, "Bol2");
    PlayerInfo[playerid][pBol][3] = cache_get_field_content_int(0, "Bol3");
    PlayerInfo[playerid][pBol][4] = cache_get_field_content_int(0, "Bol4");
    PlayerInfo[playerid][pBol][5] = cache_get_field_content_int(0, "Bol5");
    PlayerInfo[playerid][pBol][6] = cache_get_field_content_int(0, "Bol6");
    PlayerInfo[playerid][pBol][7] = cache_get_field_content_int(0, "Bol7");
    PlayerInfo[playerid][pBolCant][0] = cache_get_field_content_int(0, "BolCant0");
    PlayerInfo[playerid][pBolCant][1] = cache_get_field_content_int(0, "BolCant1");
    PlayerInfo[playerid][pBolCant][2] = cache_get_field_content_int(0, "BolCant2");
    PlayerInfo[playerid][pBolCant][3] = cache_get_field_content_int(0, "BolCant3");
    PlayerInfo[playerid][pBolCant][4] = cache_get_field_content_int(0, "BolCant4");
    PlayerInfo[playerid][pBolCant][5] = cache_get_field_content_int(0, "BolCant5");
    PlayerInfo[playerid][pBolCant][6] = cache_get_field_content_int(0, "BolCant6");
    PlayerInfo[playerid][pBolCant][7] = cache_get_field_content_int(0, "BolCant7");
    PlayerInfo[playerid][pManoIzq] = cache_get_field_content_int(0, "ManoIzq");
    PlayerInfo[playerid][pManoIzqCant] = cache_get_field_content_int(0, "ManoIzqCant");
    PlayerInfo[playerid][pManoDer] = cache_get_field_content_int(0, "ManoDer");
    PlayerInfo[playerid][pManoDerCant] = cache_get_field_content_int(0, "ManoDerCant");
    PlayerInfo[playerid][pMuerto] = cache_get_field_content_int(0, "Muerto");
    PlayerInfo[playerid][pEspalda] = cache_get_field_content_int(0, "Espalda");
    PlayerInfo[playerid][pEspaldaCant] = cache_get_field_content_int(0, "EspaldaCant");
    PlayerInfo[playerid][pCint][0] = cache_get_field_content_int(0, "Cint0");
    PlayerInfo[playerid][pCint][1] = cache_get_field_content_int(0, "Cint1");
    PlayerInfo[playerid][pCint][2] = cache_get_field_content_int(0, "Cint2");
    PlayerInfo[playerid][pCint][3] = cache_get_field_content_int(0, "Cint3");
    PlayerInfo[playerid][pCint][4] = cache_get_field_content_int(0, "Cint4");
    PlayerInfo[playerid][pCint][5] = cache_get_field_content_int(0, "Cint5");
    PlayerInfo[playerid][pCint][6] = cache_get_field_content_int(0, "Cint6");
    PlayerInfo[playerid][pCint][7] = cache_get_field_content_int(0, "Cint7");
    PlayerInfo[playerid][pCintCant][0] = cache_get_field_content_int(0, "CintCant0");
    PlayerInfo[playerid][pCintCant][1] = cache_get_field_content_int(0, "CintCant1");
    PlayerInfo[playerid][pCintCant][2] = cache_get_field_content_int(0, "CintCant2");
    PlayerInfo[playerid][pCintCant][3] = cache_get_field_content_int(0, "CintCant3");
    PlayerInfo[playerid][pCintCant][4] = cache_get_field_content_int(0, "CintCant4");
    PlayerInfo[playerid][pCintCant][5] = cache_get_field_content_int(0, "CintCant5");
    PlayerInfo[playerid][pCintCant][6] = cache_get_field_content_int(0, "CintCant6");
    PlayerInfo[playerid][pCintCant][7] = cache_get_field_content_int(0, "CintCant7");
    PlayerInfo[playerid][pServicioPD] = cache_get_field_content_int(0, "ServicioPD");
    PlayerInfo[playerid][pServicioLSMD] = cache_get_field_content_int(0, "ServicioLSMD");
    PlayerInfo[playerid][pServicioCNN] = cache_get_field_content_int(0, "ServicioCNN");
    PlayerInfo[playerid][pServicioWCST] = cache_get_field_content_int(0, "ServicioWCST");
    PlayerInfo[playerid][pLlaveCoche][0] = cache_get_field_content_int(0, "LlaveCoche0");
    PlayerInfo[playerid][pLlaveCoche][1] = cache_get_field_content_int(0, "LlaveCoche1");
    PlayerInfo[playerid][pLlaveCoche][2] = cache_get_field_content_int(0, "LlaveCoche2");
    PlayerInfo[playerid][pLlaveCoche][3] = cache_get_field_content_int(0, "LlaveCoche3");
    PlayerInfo[playerid][pLlaveCoche][4] = cache_get_field_content_int(0, "LlaveCoche4");
    PlayerInfo[playerid][pLlaveCochePrestado][0] = cache_get_field_content_int(0, "LlaveCochePrestado0");
    PlayerInfo[playerid][pLlaveCochePrestado][1] = cache_get_field_content_int(0, "LlaveCochePrestado1");
    PlayerInfo[playerid][pLlaveCochePrestado][2] = cache_get_field_content_int(0, "LlaveCochePrestado2");
    PlayerInfo[playerid][pLlaveCochePrestado][3] = cache_get_field_content_int(0, "LlaveCochePrestado3");
    PlayerInfo[playerid][pLlaveCochePrestado][4] = cache_get_field_content_int(0, "LlaveCochePrestado4");
    PlayerInfo[playerid][pMinPayDay] = cache_get_field_content_int(0, "MinPayDay");
    PlayerInfo[playerid][pLicConduccion] = cache_get_field_content_int(0, "LicConduccion");
	PlayerInfo[playerid][pLicNavegacion] = cache_get_field_content_int(0, "LicNavegacion");
	PlayerInfo[playerid][pLicAviacion] = cache_get_field_content_int(0, "LicAviacion");
	PlayerInfo[playerid][pLicArmas] = cache_get_field_content_int(0, "LicArmas");
	PlayerInfo[playerid][pYo] = cache_get_field_content_int(0, "EstadoY");
	PlayerInfo[playerid][pCasa] = cache_get_field_content_int(0, "Casa");
	PlayerInfo[playerid][pCasaAlq] = cache_get_field_content_int(0, "CasaAlq");
    PlayerInfo[playerid][pNegocio] = cache_get_field_content_int(0, "Negocio");
    PlayerInfo[playerid][pHabPil] = cache_get_field_content_int(0, "HabPil");
    PlayerInfo[playerid][pNivelPiloto] = cache_get_field_content_int(0, "NivelPiloto");
    PlayerInfo[playerid][pHabLad] = cache_get_field_content_int(0, "HabLad");
    PlayerInfo[playerid][pTiempoRobo] = cache_get_field_content_int(0, "TiempoRobo");
    PlayerInfo[playerid][pHambre] = cache_get_field_content_int(0, "Hambre");
    PlayerInfo[playerid][pSed] = cache_get_field_content_int(0, "Sed");
    PlayerInfo[playerid][pAdiccion][0] = cache_get_field_content_int(0, "Adiccion0");
    PlayerInfo[playerid][pAdiccion][1] = cache_get_field_content_int(0, "Adiccion1");
    PlayerInfo[playerid][pAdiccion][2] = cache_get_field_content_int(0, "Adiccion2");
    PlayerInfo[playerid][pAdiccion][3] = cache_get_field_content_int(0, "Adiccion3");
    PlayerInfo[playerid][pAdiccion][4] = cache_get_field_content_int(0, "Adiccion4");
    PlayerInfo[playerid][pDrConsumida][0] = cache_get_field_content_int(0, "DrConsumida0");
    PlayerInfo[playerid][pDrConsumida][1] = cache_get_field_content_int(0, "DrConsumida1");
    PlayerInfo[playerid][pDrConsumida][2] = cache_get_field_content_int(0, "DrConsumida2");
    PlayerInfo[playerid][pDrConsumida][3] = cache_get_field_content_int(0, "DrConsumida3");
    PlayerInfo[playerid][pDrConsumida][4] = cache_get_field_content_int(0, "DrConsumida4");
    PlayerInfo[playerid][pFuerza] = cache_get_field_content_int(0, "Fuerza");
    PlayerInfo[playerid][pCansancioEntrenar] = cache_get_field_content_int(0, "CansancioEntrenar");
    PlayerInfo[playerid][pTest] = cache_get_field_content_int(0, "Test");
    PlayerInfo[playerid][pPremium] = cache_get_field_content_int(0, "Premium");
    PlayerInfo[playerid][pEstado] = cache_get_field_content_int(0, "Estado");
    PlayerInfo[playerid][pOnDuty] = 0;
	mysql_free_result();
    return 1;
}

forward PlayerSave(playerid);
public PlayerSave(playerid)
{
    if(JugadorLogueado[playerid])
    {
    	ActualizarManos(playerid);
        new string[1200];
        format(string, sizeof(string), "UPDATE usuarios SET Contra = '%s', Admin = %d, Test = %d, PrimerLogueo = %d, Edad = %d, Sexo = %d, Nivel = %d, Exp = %d, Vida = %f, Estado = '%s', Chaleco = %f, Telefono = %d WHERE Nombre = '%s'",
    	PlayerInfo[playerid][pContra], PlayerInfo[playerid][pAdmin], PlayerInfo[playerid][pTest],PlayerInfo[playerid][pPrimerLogueo],
    	PlayerInfo[playerid][pEdad], PlayerInfo[playerid][pSexo], PlayerInfo[playerid][pNivel],
        PlayerInfo[playerid][pExp], PlayerInfo[playerid][pVida], PlayerInfo[playerid][pEstado], PlayerInfo[playerid][pChaleco], PlayerInfo[playerid][pTelefono], PlayerInfo[playerid][pNombre]);
    	mysql_query(1, string);
	    if(GetPlayerState(playerid) != PLAYER_STATE_SPECTATING)
        {
            GetPlayerPos(playerid,PlayerInfo[playerid][pPosX],PlayerInfo[playerid][pPosY],PlayerInfo[playerid][pPosZ]);
        }
        PlayerInfo[playerid][pDineroMano] = GetPlayerMoney(playerid);
        format(string, sizeof(string), "UPDATE usuarios SET Trabajo = %d, PosX = %f, PosY = %f, PosZ = %f, DineroBanco = %d, DineroMano = %d, Encarcelado = %d, TiempoCarcel = %d, Skin = %d WHERE Nombre = '%s'",
    	PlayerInfo[playerid][pTrabajo], PlayerInfo[playerid][pPosX], PlayerInfo[playerid][pPosY], PlayerInfo[playerid][pPosZ],
    	PlayerInfo[playerid][pDineroBanco], PlayerInfo[playerid][pDineroMano], PlayerInfo[playerid][pEncarcelado],
    	PlayerInfo[playerid][pTiempoCarcel], PlayerInfo[playerid][pSkin], PlayerInfo[playerid][pNombre]);
    	mysql_query(1, string);

    	if(GetPlayerState(playerid) != PLAYER_STATE_SPECTATING)
        {
            PlayerInfo[playerid][pInterior] = GetPlayerInterior(playerid);
        	PlayerInfo[playerid][pVirtualWorld] = GetPlayerVirtualWorld(playerid);
        }

        format(string, sizeof(string), "UPDATE usuarios SET Faccion = %d, Rango = %d, Lider = %d, PuntosRol = %d, Interior = %d, VirtualWorld = %d, HabPistola = %d, HabSD = %d, HabDEagle = %d, HabEscopeta = %d WHERE Nombre = '%s'",
    	PlayerInfo[playerid][pFaccion], PlayerInfo[playerid][pRango], PlayerInfo[playerid][pLider], PlayerInfo[playerid][pPuntosRol],
    	PlayerInfo[playerid][pInterior], PlayerInfo[playerid][pVirtualWorld], PlayerInfo[playerid][pHabPistola],
    	PlayerInfo[playerid][pHabSD], PlayerInfo[playerid][pHabDEagle], PlayerInfo[playerid][pHabEscopeta], PlayerInfo[playerid][pNombre]);
    	mysql_query(1, string);

	    format(string, sizeof(string), "UPDATE usuarios SET HabSawnoff = %d, HabEscopetaCom = %d, HabUZI = %d, HabMP5 = %d, HabAK47 = %d, HabM4 = %d, HabFranco = %d WHERE Nombre = '%s'",
    	PlayerInfo[playerid][pHabSawnoff], PlayerInfo[playerid][pHabEscopetaCom], PlayerInfo[playerid][pHabUZI], PlayerInfo[playerid][pHabMP5],
    	PlayerInfo[playerid][pHabAK47], PlayerInfo[playerid][pHabM4], PlayerInfo[playerid][pHabFranco], PlayerInfo[playerid][pNombre]);
    	mysql_query(1, string);

		for(new x=0; x<8; x++)
		{
		    format(string, sizeof(string), "UPDATE usuarios SET Bol%d=%d, BolCant%d=%d WHERE Nombre = '%s'",
		    x, PlayerInfo[playerid][pBol][x], x, PlayerInfo[playerid][pBolCant][x],
			PlayerInfo[playerid][pNombre]);
			mysql_query(1, string);
		}

    	format(string, sizeof(string), "UPDATE usuarios SET ManoIzq = %d, ManoIzqCant = %d, ManoDer = %d, ManoDerCant = %d, Muerto = %d, Espalda = %d, EspaldaCant = %d WHERE Nombre = '%s'",
    	PlayerInfo[playerid][pManoIzq], PlayerInfo[playerid][pManoIzqCant], PlayerInfo[playerid][pManoDer], PlayerInfo[playerid][pManoDerCant], PlayerInfo[playerid][pMuerto],
		PlayerInfo[playerid][pEspalda], PlayerInfo[playerid][pEspaldaCant], PlayerInfo[playerid][pNombre]);
    	mysql_query(1, string);

    	format(string, sizeof(string), "UPDATE usuarios SET Cint0 = %d, Cint1 = %d, Cint2 = %d, Cint3 = %d, Cint4 = %d, Cint5 = %d, Cint6 = %d, Cint7 = %d WHERE Nombre = '%s'",
    	PlayerInfo[playerid][pCint][0], PlayerInfo[playerid][pCint][1], PlayerInfo[playerid][pCint][2], PlayerInfo[playerid][pCint][3], PlayerInfo[playerid][pCint][4], PlayerInfo[playerid][pCint][5], PlayerInfo[playerid][pCint][6], PlayerInfo[playerid][pCint][7],
		PlayerInfo[playerid][pNombre]);
    	mysql_query(1, string);

    	format(string, sizeof(string), "UPDATE usuarios SET CintCant0 = %d, CintCant1 = %d, CintCant2 = %d, CintCant3 = %d, CintCant4, CintCant5 = %d, CintCant6 = %d, CintCant7 = %d WHERE Nombre = '%s'",
		PlayerInfo[playerid][pCintCant][0], PlayerInfo[playerid][pCintCant][1], PlayerInfo[playerid][pCintCant][2], PlayerInfo[playerid][pCintCant][3], PlayerInfo[playerid][pCintCant][4], PlayerInfo[playerid][pCintCant][5], PlayerInfo[playerid][pCintCant][6], PlayerInfo[playerid][pCintCant][7], PlayerInfo[playerid][pNombre]);
    	mysql_query(1, string);

    	format(string, sizeof(string), "UPDATE usuarios SET ServicioPD = %d, ServicioLSMD = %d,ServicioCNN = %d, ServicioWCST = %d, LlaveCoche0 = %d, LlaveCoche1 = %d, LlaveCoche2 = %d, LlaveCoche3 = %d, LlaveCoche4 = %d, MinPayDay = %d WHERE Nombre = '%s'",
    	PlayerInfo[playerid][pServicioPD], PlayerInfo[playerid][pServicioLSMD], PlayerInfo[playerid][pServicioCNN], PlayerInfo[playerid][pServicioWCST],PlayerInfo[playerid][pLlaveCoche][0], PlayerInfo[playerid][pLlaveCoche][1], PlayerInfo[playerid][pLlaveCoche][2], PlayerInfo[playerid][pLlaveCoche][3], PlayerInfo[playerid][pLlaveCoche][4],
		PlayerInfo[playerid][pMinPayDay], PlayerInfo[playerid][pNombre]);
    	mysql_query(1, string);

    	format(string, sizeof(string), "UPDATE usuarios SET LlaveCochePrestado0 = %d, LlaveCochePrestado1 = %d, LlaveCochePrestado2 = %d, LlaveCochePrestado3 = %d, LlaveCochePrestado4 = %d WHERE Nombre = '%s'",
    	PlayerInfo[playerid][pLlaveCochePrestado][0], PlayerInfo[playerid][pLlaveCochePrestado][1], PlayerInfo[playerid][pLlaveCochePrestado][2], PlayerInfo[playerid][pLlaveCochePrestado][3], PlayerInfo[playerid][pLlaveCochePrestado][4],
		PlayerInfo[playerid][pNombre]);
    	mysql_query(1, string);

    	format(string, sizeof(string), "UPDATE usuarios SET LicConduccion = %d, LicNavegacion = %d, LicAviacion = %d, LicArmas = %d, EstadoY = %d, Casa = %d, CasaAlq = %d, Negocio = %d WHERE Nombre = '%s'",
    	PlayerInfo[playerid][pLicConduccion], PlayerInfo[playerid][pLicNavegacion], PlayerInfo[playerid][pLicAviacion], PlayerInfo[playerid][pLicArmas],
		PlayerInfo[playerid][pYo],PlayerInfo[playerid][pCasa], PlayerInfo[playerid][pCasaAlq], PlayerInfo[playerid][pNegocio], PlayerInfo[playerid][pNombre]);
    	mysql_query(1, string);

    	format(string, sizeof(string), "UPDATE usuarios SET Premium = %d, HabPil = %d, NivelPiloto = %d, HabLad = %d, TiempoRobo = %d, Hambre = %d, Sed = %d WHERE Nombre = '%s'",
    	PlayerInfo[playerid][pPremium],PlayerInfo[playerid][pHabPil],PlayerInfo[playerid][pNivelPiloto], PlayerInfo[playerid][pHabLad], PlayerInfo[playerid][pTiempoRobo], PlayerInfo[playerid][pHambre], PlayerInfo[playerid][pSed],
		PlayerInfo[playerid][pNombre]);
    	mysql_query(1, string);

    	for(new x=0; x<5; x++)
		{
		    format(string, sizeof(string), "UPDATE usuarios SET Adiccion%d=%d WHERE Nombre = '%s'",
		    x, PlayerInfo[playerid][pAdiccion][x],
			PlayerInfo[playerid][pNombre]);
			mysql_query(1, string);
		}

		for(new x=0; x<5; x++)
		{
		    format(string, sizeof(string), "UPDATE usuarios SET DrConsumida%d=%d WHERE Nombre = '%s'",
		    x, PlayerInfo[playerid][pDrConsumida][x],
			PlayerInfo[playerid][pNombre]);
			mysql_query(1, string);
		}

		format(string, sizeof(string), "UPDATE usuarios SET Fuerza = %d, CansancioEntrenar = %d, Bloqueado = %d WHERE Nombre = '%s'",
    	PlayerInfo[playerid][pFuerza], PlayerInfo[playerid][pCansancioEntrenar], PlayerInfo[playerid][pBloqueado],
		PlayerInfo[playerid][pNombre]);
    	mysql_query(1, string);
    }
    return 1;
}

forward SendFaccionMessage(faccion, color, string[]); //Mensajes OOC a miembros de facción pública
public SendFaccionMessage(faccion, color, string[])
{
	for(new i = 0; i < MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
        {
		    if(PlayerInfo[i][pFaccion] == faccion)
		    {
			    SendClientMessage(i, color, string);
			}
		}
	}
}

forward SendRadioMessage(faccion, color, string[]); //Mensajes IC a miembros de facción pública
public SendRadioMessage(faccion, color, string[])
{
	for(new i = 0; i < MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
        {
		    if(PlayerInfo[i][pFaccion] == faccion)
		    {
			    SendClientMessage(i, color, string);
			}
		}
	}
}

forward SendPublicMessage(color, string[]); //Mensajes IC a facciones gubernamentales
public SendPublicMessage(color, string[])
{
	for(new i = 0; i < MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
        {
		    if(PlayerInfo[i][pFaccion] == 1 || PlayerInfo[i][pFaccion] == 2 || PlayerInfo[i][pFaccion] == 4)
		    {
			    SendClientMessage(i, color, string);
			}
		}
	}
}

forward SendAdminMessage(color, string[]); //Mensajes a admines
public SendAdminMessage(color, string[])
{
	for(new i = 0; i < MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
		    if(PlayerInfo[i][pAdmin] >= 1)
		    {
				SendClientMessage(i, color, string);
			}
		}
	}
}

forward SendDuenoMessage(color, string[]); //Mensajes a dueños
public SendDuenoMessage(color, string[])
{
	for(new i = 0; i < MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
		    if(PlayerInfo[i][pAdmin] >= 5)
		    {
				SendClientMessage(i, color, string);
			}
		}
	}
}

forward SendAnuncio(color, string[]); //Anuncios
public SendAnuncio(color, string[])
{
	for(new i = 0; i < MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i) && JugadorLogueado[i])
		{
			SendClientMessage(i, color, string);
		}
	}
}

forward GetPlayersProx(Float:radi, playerid, targetid); //Cercanía de jugadores
public GetPlayersProx(Float:radi, playerid, targetid)
{
	new Float:posx, Float:posy, Float:posz;
	new Float:oldposx, Float:oldposy, Float:oldposz;
	new Float:tempposx, Float:tempposy, Float:tempposz;
	GetPlayerPos(playerid, oldposx, oldposy, oldposz);
	GetPlayerPos(targetid, posx, posy, posz);
	tempposx = (oldposx -posx);
	tempposy = (oldposy -posy);
	tempposz = (oldposz -posz);
	if(((tempposx < radi) && (tempposx > -radi)) && ((tempposy < radi) && (tempposy > -radi)) && ((tempposz < radi) && (tempposz > -radi)))
	{
	    return 1;
	}
	return 0;
}

forward ProxDetector(Float:radi, playerid, string[],col1,col2,col3,col4,col5); //Mensajes limitados por distancia
public ProxDetector(Float:radi, playerid, string[],col1,col2,col3,col4,col5)
{
	new Float:posx, Float:posy, Float:posz;
	new Float:oldposx, Float:oldposy, Float:oldposz;
	new Float:tempposx, Float:tempposy, Float:tempposz;
	GetPlayerPos(playerid, oldposx, oldposy, oldposz);
	//radi = 2.0; //Trigger Radius
	for(new i = 0; i < MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i) && (GetPlayerVirtualWorld(playerid) == GetPlayerVirtualWorld(i)))
		{
			GetPlayerPos(i, posx, posy, posz);
			tempposx = (oldposx -posx);
			tempposy = (oldposy -posy);
			tempposz = (oldposz -posz);
			//printf("DEBUG: X:%f Y:%f Z:%f",posx,posy,posz);
			if(((tempposx < radi/16) && (tempposx > -radi/16)) && ((tempposy < radi/16) && (tempposy > -radi/16)) && ((tempposz < radi/16) && (tempposz > -radi/16)))
			{
				SendMessage(i, col1, string);
			}
			else if(((tempposx < radi/8) && (tempposx > -radi/8)) && ((tempposy < radi/8) && (tempposy > -radi/8)) && ((tempposz < radi/8) && (tempposz > -radi/8)))
			{
				SendMessage(i, col2, string);
			}
			else if(((tempposx < radi/4) && (tempposx > -radi/4)) && ((tempposy < radi/4) && (tempposy > -radi/4)) && ((tempposz < radi/4) && (tempposz > -radi/4)))
			{
				SendMessage(i, col3, string);
			}
			else if(((tempposx < radi/2) && (tempposx > -radi/2)) && ((tempposy < radi/2) && (tempposy > -radi/2)) && ((tempposz < radi/2) && (tempposz > -radi/2)))
			{
				SendMessage(i, col4, string);
			}
			else if(((tempposx < radi) && (tempposx > -radi)) && ((tempposy < radi) && (tempposy > -radi)) && ((tempposz < radi) && (tempposz > -radi)))
			{
				SendMessage(i, col5, string);
			}
		}
	}
	return 1;
}

stock GetPlayerNameRP(playerid) //Utilizar como *format(Nombre, sizeof(Nombre),"%s", GetPlayerNameRP(playerid));*
{
    new Name[MAX_PLAYER_NAME];
    if(IsPlayerConnected(playerid))
    {
        GetPlayerName(playerid, Name, sizeof(Name));
    }
    for(new name = 0; name < MAX_PLAYER_NAME; name++) if(Name[name] == '_') Name[name] = ' ';
    return Name;
}

stock GetWeaponNameEx(id, name[], len) return format(name,len, "%s", GunNames[id]); //Comprueba nombre de una arma en español
stock SetPlayerLookAt(playerid,Float:x,Float:y) //Comprueba a qué direccion mira el jugador
{
        new Float:pX, Float:pY, Float:pZ, Float:ang;
        GetPlayerPos(playerid, pX, pY, pZ);
        if( y > pY ) ang = (-acos((x - pX) / floatsqroot((x - pX)*(x - pX) + (y - pY)*(y - pY))) - 90.0);
        else if( y < pY && x < pX ) ang = (acos((x - pX) / floatsqroot((x - pX)*(x - pX) + (y - pY)*(y - pY))) - 450.0);
        else if( y < pY ) ang = (acos((x - pX) / floatsqroot((x - pX)*(x - pX) + (y - pY)*(y - pY))) - 90.0);
        if(x > pX) ang = (floatabs(floatabs(ang) + 180.0));
        else ang = (floatabs(ang) - 180.0);
        //ang += 180.0;
        SetPlayerFacingAngle(playerid, ang);
        return;
}

forward JailPlayerOOC(playerid); //Sistema de jail OOC
public JailPlayerOOC(playerid)
{
	new string[90];
	SetPlayerInterior(playerid, 1);
	SetPlayerVirtualWorld(playerid, playerid+1000);
	SetPlayerPos(playerid, 2263.9739, 1647.4904, 1084.2344);
	SetCameraBehindPlayer(playerid);
	format(string, sizeof(string), "Estás en prisión OOC, te quedan %d minutos. Usa /hora para ver el tiempo restante.", PlayerInfo[playerid][pTiempoCarcel]);
	SendClientMessage(playerid, Amarillo, string);
	return 1;
}
UnJailPlayerOOC(playerid)
{
	PlayerInfo[playerid][pTiempoCarcel] = 0;
	PlayerInfo[playerid][pEncarcelado] = 0;
	SetPlayerFacingAngle(playerid, 0);
	SetPlayerVirtualWorld(playerid, 0);
	SetPlayerInterior(playerid,0);
	SetPlayerPos(playerid, 1479.1301,-1742.1343,13.5469);
	SetCameraBehindPlayer(playerid);
	PlayerPlaySound(playerid,1057,0.0,0.0,0.0);
	SendClientMessage(playerid, AzulClaro, "Tu Jail OOC ha terminado. Solo ha sido una advertencia, esperamos que te haya servido.");
	return 1;
}

forward JailPlayerIC(playerid); //Sistema de jail IC
public JailPlayerIC(playerid)
{
	new string[90];
	if(PlayerInfo[playerid][pEncarcelado] == 1)
	{
		format(string, sizeof(string), "Estás en la prisión de comisaría, te quedan %d minutos. Usa /hora para ver el tiempo restante.", PlayerInfo[playerid][pTiempoCarcel]);
		SendClientMessage(playerid, Amarillo, string);
		SetPlayerInterior(playerid, 6);
		SetPlayerVirtualWorld(playerid, 1);
		SetPlayerPos(playerid, 264.1901,77.6065,1001.0391);
	}
	if(PlayerInfo[playerid][pEncarcelado] == 2)
	{
		format(string, sizeof(string), "Estás en la prisión federal, te quedan %d minutos. Usa /hora para ver el tiempo restante.", PlayerInfo[playerid][pTiempoCarcel]);
		SendClientMessage(playerid, Amarillo, string);
		SetPlayerInterior(playerid, 2);
		SetPlayerVirtualWorld(playerid, 0);
		SetPlayerPos(playerid, 2532.8345,-1291.8160,1044.1250);
	}
}
UnJailPlayerIC(playerid)
{
    if(PlayerInfo[playerid][pEncarcelado] == 1)
	{
		PlayerInfo[playerid][pTiempoCarcel] = 0;
		PlayerInfo[playerid][pEncarcelado] = 0;
		SetPlayerFacingAngle(playerid, 90);
		SetPlayerVirtualWorld(playerid, 0);
		SetPlayerInterior(playerid,0);
		SetPlayerPos(playerid, 1554.8660, -1675.6772, 16.1953);
		SetCameraBehindPlayer(playerid);
		PlayerPlaySound(playerid,1057,0.0,0.0,0.0);
		SendClientMessage(playerid, AzulClaro, "Guardia: Ya te puedes ir, esperamos que no se vuelva a repetir.");
	}
	if(PlayerInfo[playerid][pEncarcelado] == 2)
	{
		PlayerInfo[playerid][pTiempoCarcel] = 0;
		PlayerInfo[playerid][pEncarcelado] = 0;
		SetPlayerFacingAngle(playerid, 90);
		SetPlayerVirtualWorld(playerid, 0);
		SetPlayerInterior(playerid,0);
		SetPlayerPos(playerid, 1797.9216,-1578.7523,14.0898);
		SetCameraBehindPlayer(playerid);
		PlayerPlaySound(playerid,1057,0.0,0.0,0.0);
		SendClientMessage(playerid, AzulClaro, "Guardia: Tu condena termina hoy. Esperamos que todo esto te haya servido de algo.");
	}
}

forward CederTimer(playerid);
public CederTimer(playerid)
{
	CederTiempo[playerid] = 0;
	return 1;
}

forward RecargarTimer(playerid);
public RecargarTimer(playerid)
{
	RecargarTiempo[playerid] = 0;
	return 1;
}


forward ComandoDuda(); // Timer que se activa cada hora
public ComandoDuda()
{
	foreach(Player, i)
	{
		if(NewbieTimer[i] > 0) { NewbieTimer[i]--; }
		if(VehRentado[i] > 0){
			if(RentTime[i] > 0){
				RentTime[i]--;
			}
			if(RentTime[i] == 0)
			{
				RentTime[i] = 0;
				if(VehRentado[i] == 1)
				{
					VehRentado[i] = 0;
					new newcar = GetPlayerVehicleID(i);
					if(IsAutoRenta(newcar))
					{
						SetVehicleToRespawn(i);
						TogglePlayerControllable(i, 1);
						SendClientMessage(i, Blanco, "{FFFF04}Información: {FFFFFF}Se desrentó el vehículo que tenías automáticamente.");
					}
				}
			}
		}
	}
}

forward TimerDeCincoMinutos(); //Timer que se activa cada hora
public TimerDeCincoMinutos(){
for(new carid = MAX_VEHPUBLICO+1; carid <= TotalVeh; carid++) //Loop de carids
	{
		new Float:cvida;
		GetVehicleHealth(carid, cvida);
		new engine,lights,alarm,doors,bonnet,boot,objective;
		GetVehicleParamsEx(carid,engine,lights,alarm,doors,bonnet,boot,objective);
		if(engine == 1 && CarInfo[carid][cGas] > 0)CarInfo[carid][cGas]--; //Bajar 1 de gasolina
		if(CarInfo[carid][cGas] < 0)CarInfo[carid][cGas] = 0; //Setear gasolina a 0 si es menor a tal
		if(engine == 1 && CarInfo[carid][cGas] == 0)SetVehicleParamsEx(carid,0,lights,alarm,doors,bonnet,boot,objective); //Apagar motor si no tiene gasolina
		if(CarInfo[carid][cEnDeposito] == 1) //Desguace
		{
			SetVehicleVirtualWorld(carid, carid+1);
			if(IsABoat(carid)){SetVehiclePos(carid, 2294.3999,-2447.8000,0.0000);}
			if(!IsABoat(carid)){SetVehiclePos(carid, 2274.1028,-2345.5371,13.5469);}
		}
		if(CarInfo[carid][cEnDeposito] == 2 && GetVehicleDistanceFromPoint(carid, 1622.1896,-1823.4991,13.5279) > 50) //Depósito LSPD
		{
			new string[80];
			SetVehiclePos(carid, 1622.1896,-1823.4991,13.5279);
			format(string, sizeof(string), "El vehículo #%d ha salido y sido devuelto al depósito de LSPD.", carid);
			SendAdminMessage(Aguamarina, string);
		}
		if(engine == 1 && cvida < MIN_CAR_HEALTH)SetVehicleParamsEx(carid,0,lights,alarm,doors,bonnet,boot,objective); //Apagar motor si está muy dañado
	}
}


forward TimerDeUnaHora(); //Timer que se activa cada hora
public TimerDeUnaHora()
{
    new conteo;
	for(new idx=MAX_VEHPUBLICO+1; idx <= TotalVeh; idx++)
	{
    	SaveCar(idx); //Guardado de vehículos
    	conteo++;
    }
	printf("Coches guardados: %d", conteo);

	for(new x=1; x<=TotalFaccs; x++)
	{
	    if(FaccInfo[x][fTipo] == 3) FaccInfo[x][fPuntosExpansion] ++; //Suma 1 punto de expansión a las pandillas y bandas
	    if(FaccInfo[x][fTipo] == 4) //Resta una hora a las mafias de espera para comprar armas y drogas
	    {
	        if(FaccInfo[x][fTiempoArmas] > 0) FaccInfo[x][fTiempoArmas] --;
	        if(FaccInfo[x][fTiempoDrogas] > 0) FaccInfo[x][fTiempoDrogas] --;
	    }
	}

	for(new x=1; x<=TotalTurfs; x++)
	{
	    if(TurfInfo[x][tDrogaVendida][0] > 0) TurfInfo[x][tDrogaVendida][0] --; //Resta 1 a la droga vendida en los turfs
	    if(TurfInfo[x][tDrogaVendida][1] > 0) TurfInfo[x][tDrogaVendida][1] --;
	    if(TurfInfo[x][tDrogaVendida][2] > 0) TurfInfo[x][tDrogaVendida][2] --;
	    if(TurfInfo[x][tDrogaVendida][3] > 0) TurfInfo[x][tDrogaVendida][3] --;
	    if(TurfInfo[x][tDrogaVendida][4] > 0) TurfInfo[x][tDrogaVendida][4] --;
	}

	for(new playerid=0; playerid<MAX_PLAYERS; playerid++)
	{
	    if(PlayerInfo[playerid][pFaccion] != 0 && FaccInfo[PlayerInfo[playerid][pFaccion]][fTipo] == 3) //Es pandillero
	    {
	        if(Trabajando[playerid] == 0 && EnAutoEscuela[playerid] == 0 && RealizandoMision[playerid] == 0) //No está trabajando ni en autoescuela ni realizando misiones
	        {
		        new rand = random(100), probabilidadturf;
		        for(new x=0; x<=TotalTurfs; x++)
		        {
		            if(TurfInfo[x][tFaccion] == PlayerInfo[playerid][pFaccion]) probabilidadturf += 4;
		        }

		        if(rand <= probabilidadturf) //Misión de pandillero
		        {
		            new probabilidad = random(16);
		            if(probabilidad > 3) //Misión de pintar
		            {
						DarMisionPandilla(playerid, 3);
		            }
		            else if(probabilidad > 1 && PlayerInfo[playerid][pRango] > 2) //Misión de droga
		            {
		                DarMisionPandilla(playerid, 1);
					}
					else if(probabilidad <= 1 && PlayerInfo[playerid][pRango] > 4) //Misión de arma
					{
					    DarMisionPandilla(playerid, 2);
					}
				}
		    }
	    }
	}

	new hora;
	gettime(hora);
	if(hora == 5 || hora == 6 || ConnectedPlayers()==0) //Guardado de stats nocturno
	{
	    new cuenta;
		for(new idx=MAX_VEHPUBLICO+1; idx <= TotalVeh; idx++)
		{
			SaveCar(idx);
			cuenta++;
		}
		printf("Coches guardados: %d", cuenta);

		cuenta = 0;
		for(new x=1; x<=TotalCasas; x++)
	    {
	    	SaveCasa(x); //Guardado de casas
	    	cuenta++;
	    }
	    printf("Casas guardadas: %d (MAX: %d)", cuenta, MAX_HOUSES);

	    cuenta = 0;
	    for(new x=1; x<=TotalNegs; x++)
	    {
	    	SaveNegocios(x); //Guardado de negocios
	    	cuenta++;
	    }
	    printf("Negocios guardados: %d (MAX: %d)", cuenta, MAX_NEGS);

	    cuenta = 0;
	    for(new x=1; x<=TotalTurfs; x++)
	    {
	    	SaveTurf(x); //Guardado de turfs
	    	cuenta++;
	    }
	    printf("Turfs guardados: %d (MAX: %d)", cuenta, MAX_TURFS);

	    cuenta = 0;
	    for(new x=1; x<=TotalFaccs; x++)
	    {
	    	SaveFacc(x); //Guardado de facciones
	    	cuenta++;
	    }
	    printf("Facciones guardadas: %d (MAX: %d)", cuenta, MAX_FACCS);

	    cuenta = 0;
	    for(new x=0; x<=CodigoPlantacion; x++)
	    {
	        if(strlen(PlantaInfo[x][plPlantador]))
	        {
		    	SavePlantacion(x); //Guardado de plantaciones
		    	cuenta++;
	    	}
	    }
	    printf("Plantaciones guardadas: %d (MAX: %d)", cuenta, MAX_PLANTACIONES);
	}
	return 1;
}

forward TimerDeUnMinuto(); //Timer que se activa cada minuto
public TimerDeUnMinuto()
{
	for(new playerid = 0; playerid < MAX_PLAYERS; playerid++) //Loop de playerids
	{
		if(PrimerSpawn[playerid] == 0 || JugadorLogueado[playerid] == 0 || !IsPlayerConnected(playerid)){continue;}
		if(JugadorLogueado[playerid] != 0)
		{
			//Contador de activación de payday
			PlayerInfo[playerid][pMinPayDay] ++;
			if(PlayerInfo[playerid][pMinPayDay] >= 55)
			{
				PlayerInfo[playerid][pMinPayDay] = 0;
				PayDay(playerid);
			}
			//Reloj real
			new hora, minuto, segundo;
			gettime(hora, minuto, segundo);
			SetPlayerTime(playerid, hora+ahora, minuto);
			SetWorldTime(hora+ahora);
			//Job ladrón
			if(PlayerInfo[playerid][pTrabajo] == 4)
			{
				if(PuertaForzada[playerid] > 0){PuertaForzada[playerid] --;}
				if(PuertaForzada[playerid] < 0){PuertaForzada[playerid] = 0;}
				if(PlayerInfo[playerid][pTiempoRobo] > 0){PlayerInfo[playerid][pTiempoRobo] --;}
				if(PlayerInfo[playerid][pTiempoRobo] < 0){PlayerInfo[playerid][pTiempoRobo] = 0;}
				if(PuenteHecho[playerid] > 0){PuenteHecho[playerid] --;}
				if(PuenteHecho[playerid] < 0){PuenteHecho[playerid] = 0;}
			}
			//Asigna el score de un jugador a su nivel
			SetPlayerScore(playerid, PlayerInfo[playerid][pNivel]);
			//Jail IC
			if(PlayerInfo[playerid][pEncarcelado] == 1 || PlayerInfo[playerid][pEncarcelado] == 2)
			{
				if(PlayerInfo[playerid][pTiempoCarcel] > 0)
				{
					PlayerInfo[playerid][pTiempoCarcel]--;
				}
				else if(PlayerInfo[playerid][pTiempoCarcel] == 0)
				{
					UnJailPlayerIC(playerid);
				}
			}
			//Jail OOC
			if(PlayerInfo[playerid][pEncarcelado] == 3)
			{
				if(!IsPlayerInRangeOfPoint(playerid, 10.0, 2263.9739, 1647.4904, 1084.2344))
				{
					JailPlayerOOC(playerid);
					SendClientMessage(playerid, AzulClaro, "Has sido devuelto a prisión OOC.");
					new Nombre[MAX_PLAYER_NAME], string[80];
					format(Nombre, sizeof(Nombre),"%s", GetPlayerNameRP(playerid));
					format(string, sizeof(string), "'%s' ha escapado y sido devuelto a prisión OOC. Posible hack.", Nombre);
					SendAdminMessage(Aguamarina, string);
					printf(string);
				}
				if(PlayerInfo[playerid][pTiempoCarcel] > 0)
				{
					PlayerInfo[playerid][pTiempoCarcel]--;
				}
				else if(PlayerInfo[playerid][pTiempoCarcel] <= 0)
				{
					UnJailPlayerOOC(playerid);
				}
			}
			//Sistema de fuerza /Entrenar
			if(PlayerInfo[playerid][pCansancioEntrenar] > 0)PlayerInfo[playerid][pCansancioEntrenar] --; //Reduce cansancio
			//Hambre y sed
			if(PlayerInfo[playerid][pMuerto] == 0 && PlayerInfo[playerid][pEncarcelado] == 0)
			{
				//Hambre
				if(PlayerInfo[playerid][pHambre] < MIN_HAMBRE)PlayerInfo[playerid][pHambre] = MIN_HAMBRE+1; //Si hambre menor a mínimo, setea mínimo+1 para que se actualice
				if(PlayerInfo[playerid][pHambre] > MIN_HAMBRE)
				{
					PlayerInfo[playerid][pHambre] --;
				}
				ActualizarHambre(playerid);
				//Sed
				if(PlayerInfo[playerid][pSed] < MIN_SED)PlayerInfo[playerid][pSed] = MIN_SED+1; //Si sed menor a mínimo, setea mínimo+1 para que se actualice
				if(PlayerInfo[playerid][pSed] > MIN_SED)
				{
					PlayerInfo[playerid][pSed] --;
				}
				ActualizarSed(playerid);
				//Le va quitando vida por hambre y sed
				new Float:cvida; GetPlayerHealth(playerid, cvida);
				if(PlayerInfo[playerid][pSed] <= MIN_SED && PlayerInfo[playerid][pHambre] <= MIN_HAMBRE)
				{
					if(cvida > 10)GivePlayerHealth(playerid, -2);
				}
				else if(PlayerInfo[playerid][pSed] <= MIN_SED)
				{
					if(cvida > 10)GivePlayerHealth(playerid, -1);
				}
				else if(PlayerInfo[playerid][pHambre] <= MIN_HAMBRE)
				{
					if(cvida > 10)GivePlayerHealth(playerid, -1);
				}
			}
			//Sistema de recuperar vida
			if(PlayerInfo[playerid][pSed] > MIN_SED*2 && PlayerInfo[playerid][pHambre] > MIN_HAMBRE*2)
			{
				new drogaconsumida; //Si ha consumido droga
				for(new x=0; x<5; x++)
				{
					if(PlayerInfo[playerid][pDrConsumida][x] != 0) drogaconsumida = 1;
				}

				if(drogaconsumida == 0)
				{
					new Float:cvida;
					GetPlayerHealth(playerid, cvida);
					if(cvida < 100){GivePlayerHealth(playerid, 1);}
				}
			}
			//Drogas
			new Float:cvida;
			if(PlayerInfo[playerid][pDrConsumida][0] > 0) //Marihuana
			{
    			PlayerInfo[playerid][pDrConsumida][0] --;
				if(PlayerInfo[playerid][pDrConsumida][0] == 0) SendClientMessage(playerid, Naranja, "Se han pasado los efectos de la marihuana.");
				GetPlayerHealth(playerid, cvida);
				if(cvida > 10) SetTimerEx("GivePlayerHealth1", 1000, false, "i", playerid);
			}
			if(PlayerInfo[playerid][pDrConsumida][1] > 0) //Cocaína
			{
				PlayerInfo[playerid][pDrConsumida][1] --;
				if(PlayerInfo[playerid][pDrConsumida][1] == 0) SendClientMessage(playerid, Naranja, "Se han pasado los efectos de la cocaína.");
				GetPlayerHealth(playerid, cvida);
				if(cvida > 10) SetTimerEx("GivePlayerHealth1", 1000, false, "i", playerid);
			}
			if(PlayerInfo[playerid][pDrConsumida][2] > 0) //Crack
			{
				PlayerInfo[playerid][pDrConsumida][2] --;
				if(PlayerInfo[playerid][pDrConsumida][2] == 0) SendClientMessage(playerid, Naranja, "Se han pasado los efectos del crack. Ahora sientes una sensación de depresión.");
				GetPlayerHealth(playerid, cvida);
				if(cvida > 10) SetTimerEx("GivePlayerHealth1", 1200, false, "i", playerid);
			}
			if(PlayerInfo[playerid][pDrConsumida][3] > 0) //Heroína
			{
				PlayerInfo[playerid][pDrConsumida][3] --;
				if(PlayerInfo[playerid][pDrConsumida][3] == 0){SendClientMessage(playerid, Naranja, "Se han pasado los efectos de la heroína."); SetPlayerWeather(playerid, DefaultWeather);}
				GetPlayerHealth(playerid, cvida);
				if(cvida > 10) SetTimerEx("GivePlayerHealth1", 1400, false, "i", playerid);
			}
			if(PlayerInfo[playerid][pDrConsumida][4] > 0) //LSD
			{
				PlayerInfo[playerid][pDrConsumida][4] --;
				if(PlayerInfo[playerid][pDrConsumida][4] == 0)
				{
					SendClientMessage(playerid, Naranja, "Se han pasado los efectos del LSD.");
					RemovePlayerColorFade(playerid);
					SetPlayerWeather(playerid, DefaultWeather);
					gettime(hora, minuto);
					SetPlayerTime(playerid, hora+ahora, minuto);
				}
				for(new x=0; x<=200; x+=5)
				{
					if(PlayerInfo[playerid][pDrConsumida][4] == x){RemovePlayerColorFade(playerid); SetTimerEx("DarEfectoLSD", 200, false, "i", playerid); break;}
				}
			}
		}
	}
	for(new x = 0; x <= CodigoPlantacion; x++) //Loop de plantaciones
	{
		if(PlantaInfo[x][plEstado] > 0)
		{
			PlantaInfo[x][plEstado] ++;
			UpdatePlantacionLabel(x);
		}
	}
	if(AvisoLSPDCompraArmas > 0) AvisoLSPDCompraArmas --; //Aviso a LSPD de compra de armas
	if(AvisoLSPDCompraDrogas > 0) AvisoLSPDCompraDrogas --; //Aviso a LSPD de compra de drogas
	return 1;
}

forward TimerDeMedioMinuto(); //Timer que se activa cada medio minuto
public TimerDeMedioMinuto()
{
    for(new playerid = 0; playerid < MAX_PLAYERS; playerid++)
	{
	    if(PrimerSpawn[playerid] == 0 || JugadorLogueado[playerid] == 0 || !IsPlayerConnected(playerid)){continue;}
     	if(JugadorLogueado[playerid] != 0)
		{
		    if(TaxiConductor[playerid] != NOEXISTE && Trabajando[TaxiConductor[playerid]]) //Está pagando a un taxista
		    {
		        if(!IsATaxi(GetPlayerVehicleID(playerid))){TaxiPasajero[TaxiConductor[playerid]] = NOEXISTE; TaxiConductor[playerid] = NOEXISTE; TaxiCoste[playerid] = 0; return 1;}//No está en un taxi
				new taxista = TaxiConductor[playerid];
				new taxista2 = TaxiPasajero[playerid];
		        GivePlayerMoneyAC(taxista2, -Tarifa[taxista2]);
		        GivePlayerMoneyAC(taxista, Tarifa[taxista]);
		        TaxiCoste[playerid] += Tarifa[taxista];
	            return 1;
		    }
	    }
	}
	return 1;
}

forward TimerDeMedioSegundo(); //Timer que se activa cada medio segundo
public TimerDeMedioSegundo()
{
    for(new playerid; playerid < MAX_PLAYERS; playerid++)
	{
        if(PrimerSpawn[playerid] == 0 || JugadorLogueado[playerid] == 0 || !IsPlayerConnected(playerid)){continue;}
        if(LaserON[playerid] == 1) //Laser en armas
		{
			PonerLaser(playerid);
		}
        //Anticheat
        if(GetPlayerPing(playerid) > MAX_PING) //Ping kicker
        {
            new string[90];
            PingKick[playerid] ++;
            if(PingKick[playerid] >= 20)
            {
                format(string, sizeof(string), "Anticheat: %s fue kickeado. Razón: Exceder el máximo ping permitido.", GetPlayerNameRP(playerid));
            	SendClientMessageToAll(Rojo, string);
            	KickL(playerid);
            }
        }
        else{PingKick[playerid] = 0;}

        if(GetPlayerMoney(playerid) > DineroAC[playerid]) //Dinero
        {
			ResetPlayerMoney(playerid);
			GivePlayerMoney(playerid, DineroAC[playerid]);
        }

        new Float:Chaleco;
        GetPlayerArmour(playerid, Chaleco);
        if(Chaleco > 0 && PlayerInfo[playerid][pAdmin] == 0 && (PlayerInfo[playerid][pFaccion] != 1 || PlayerInfo[playerid][pServicioPD] == 0)) //Tiene chaleco y no es poli y no está de servicio admin y no está de servicio poli
        {
            ChalecoAC[playerid] ++;
		    SetPlayerArmour(playerid, 0);
		    if(ChalecoAC[playerid] >= 10)
		    {
		        new string[256];
				format(string, sizeof(string), "Anticheat: %s fue kickeado. Razón: Hack de armadura.", GetPlayerNameRP(playerid));
	        	SendClientMessageToAll(Rojo, string);
	        	KickL(playerid);
		    }
        }
        else{ChalecoAC[playerid] = 0;}

        if(GetPlayerSpecialAction(playerid) == SPECIAL_ACTION_USEJETPACK && PlayerInfo[playerid][pAdmin] <2) //Jetpack
		{
			new string[90];
			format(string, sizeof(string), "Anticheat: '%s' fue baneado. Razón: Spawnear un jetpack.", GetPlayerNameRP(playerid));
        	SendClientMessageToAll(Rojo, string);
        	BanL(playerid);
		}

		if((GetPlayerWeapon(playerid) == 35 || GetPlayerWeapon(playerid) == 36 || GetPlayerWeapon(playerid) == 37 || GetPlayerWeapon(playerid) == 38) && PlayerInfo[playerid][pAdmin] == 0) //Anti armas tochas
		{
		    new string[90];
			format(string, sizeof(string), "Anticheat: %s fue kickeado. Razón: Hacks de armas.", GetPlayerNameRP(playerid));
        	SendClientMessageToAll(Rojo, string);
        	printf(string);
        	KickL(playerid);
		}

		if(GetPlayerWeapon(playerid) != 0 && GetPlayerWeapon(playerid) != ObjetoInfo[PlayerInfo[playerid][pManoDer]][IDArma] && GetPlayerState(playerid) == PLAYER_STATE_ONFOOT) //Anti spawn de armas
		{
		    ArmaSpawnAC[playerid] ++;
		    SetPlayerArmedWeapon(playerid, ObjetoInfo[PlayerInfo[playerid][pManoDer]][IDArma]);
		    if(ArmaSpawnAC[playerid] >= 6)
		    {
		        new string[90];
				format(string, sizeof(string), "Anticheat: %s fue kickeado. Razón: Hacks de armas.", GetPlayerNameRP(playerid));
	        	SendClientMessageToAll(Rojo, string);
	        	KickL(playerid);
		    }
		}
		else{ArmaSpawnAC[playerid] = 0;}

		VehicleHack[playerid] = 0;
				//Fin anticheat

		if(PlayerInfo[playerid][pAdmin] >= 1) //Parte admin
		{
			//Sistema RECON
			if(GetPlayerState(playerid) == PLAYER_STATE_SPECTATING  && (PlayerInfo[playerid][pSpecType] == ADMIN_SPEC_TYPE_PLAYER || PlayerInfo[playerid][pSpecType] == ADMIN_SPEC_TYPE_VEHICLE))
			{
				new specplayerid = PlayerInfo[playerid][pSpecID];
				SetPlayerVirtualWorld(playerid,GetPlayerVirtualWorld(specplayerid));
				SetPlayerInterior(playerid,GetPlayerInterior(specplayerid));
			}
		} //Fin parte admin

		//Arregla la solicitud de refuerzos
    	if(PlayerInfo[playerid][pFaccion] == 1 && PlayerInfo[playerid][pServicioPD] > 0 && SolicitaRefuerzos[playerid] == 1)
    	{
    	    for(new i = 0; i < MAX_PLAYERS; i++)
			{
				if(IsPlayerConnected(i))
				{
					if(PlayerInfo[i][pFaccion] == 1 && PlayerInfo[i][pServicioPD] > 0)
					{
						SetPlayerMarkerForPlayer(i, playerid, 0x1229FAFF);
					}
				}
			}
    	}

		//Si NO está subido a un vehículo
		if(GetPlayerState(playerid) == 1)
		{
		    //Anim muerte
   	 		if(PlayerInfo[playerid][pMuerto] > 0)
			{
				if(GetPlayerAnimationIndex(playerid) != 390)
				{
					ApplyAnimation(playerid,"CRACK","crckidle2",4.1,1,1,1,0,0,1);
				}
				SetPlayerHealth(playerid, 100);
			}
			//Anim táser
   	 		if(Taseado[playerid] > 0 && PlayerInfo[playerid][pMuerto] == 0)
			{
				if(GetPlayerAnimationIndex(playerid) != 1209)
				{
					ApplyAnimation(playerid,"PED","KO_skid_front",4.1,0,1,1,1,0);
				}
			}
		}
	 	//Si SÍ está subido a un vehículo
		if(IsPlayerInAnyVehicle(playerid))
		{
		    new carid = GetPlayerVehicleID(playerid);
		    if(TaxiConductor[playerid] != NOEXISTE && Trabajando[TaxiConductor[playerid]]) //Está pagando a un taxista
		    {
				new taxista = TaxiConductor[playerid], string[50];
		        format(string, sizeof(string), "~y~Taximetro: %d$", TaxiCoste[playerid]);
	            GameTextForPlayer(playerid, string, 1000, 1);
	            GameTextForPlayer(taxista, string, 1000, 1);
	            return 1;
		    }
		    if(GetPlayerState(playerid) == 2 && !IsABike(carid)) //Si es conductor
		    {
  			    if(CocheAutoescuelaCond(carid) && EnAutoEscuela[playerid] == 1)
  			    {
  			        if(velocidad[playerid] > 90)
  			        {
  			            MaxVelAutoEscuela[playerid] ++;
  			            if(MaxVelAutoEscuela[playerid] > 20)
  			            {
  			                SendClientMessage(playerid, Rojo, "* Has superado el límite de velocidad durante bastante tiempo y has suspendido.");
  			                KillTimer(MaxTiempoAutoEscuelaTimer[playerid]);
  			                GameTextForPlayer(playerid, "~r~Suspenso", 1000, 6);
							GivePlayerMoneyAC(playerid, -100);
							CheckPointAutoEscuela[playerid] = 0;
							EnAutoEscuela[playerid] = 0;
							MaxVelAutoEscuela[playerid] = 0;
			                SetVehicleToRespawn(carid);
			                DisablePlayerCheckpoint(playerid);
			                SetPlayerPos(playerid, 2048.6418,-1908.1290,13.5469);
  			            }
  			        }
  			        else{MaxVelAutoEscuela[playerid] = 0;}
  			    }
		    }
		    new Float:cvida;
		    GetVehicleHealth(carid, cvida);
		    new engine,lights,alarm,doors,bonnet,boot,objective;
			GetVehicleParamsEx(carid,engine,lights,alarm,doors,bonnet,boot,objective);
		    if(cvida < MIN_CAR_HEALTH && engine != 0) //Daños del vehículo inferiores a 350 y motor encendido
		    {
		        SetVehicleParamsEx(carid,0,lights,alarm,doors,bonnet,boot,objective);
		        SendClientMessage(playerid, Rojo, "El motor se ha parado debido a los daños.");
		    }
		}
		ActualizarManos(playerid); //Actualiza los objetos en mano del jugador
		if(EnLlamada[playerid] > 0 && PlayerInfo[playerid][pManoDer] != 68 && PlayerInfo[playerid][pManoIzq] != 68 && EnLlamada[PersonaEnLlamada[playerid]] != 912){ColgarTelefono(playerid);}
		if(IntentarUsado[playerid] > 0) IntentarUsado[playerid] --;
	}
	if(anunciotiempo > 0) anunciotiempo --; //Sistema de anuncios
	return 1;
}

stock StartSpectate(playerid, specplayerid) //Sistema Recon
{
	for(new x=0; x<MAX_PLAYERS; x++)
	{
	    if(GetPlayerState(x) == PLAYER_STATE_SPECTATING && PlayerInfo[x][pSpecID] == playerid)
		{
  	     AdvanceSpectate(x);
		}
	}
	TogglePlayerSpectating(playerid, 1);

	if(IsPlayerInAnyVehicle(specplayerid))
	{
		PlayerSpectateVehicle(playerid, GetPlayerVehicleID(specplayerid));
		PlayerInfo[playerid][pSpecID] = specplayerid;
		PlayerInfo[playerid][pSpecType] = ADMIN_SPEC_TYPE_VEHICLE;
	}
	else
	{
		PlayerSpectatePlayer(playerid, specplayerid);
		PlayerInfo[playerid][pSpecID] = specplayerid;
		PlayerInfo[playerid][pSpecType] = ADMIN_SPEC_TYPE_PLAYER;
	}
	SetPlayerVirtualWorld(playerid,GetPlayerVirtualWorld(specplayerid));
	SetPlayerInterior(playerid,GetPlayerInterior(specplayerid));
}

stock StopSpectate(playerid) //Sistema Recon
{
	TogglePlayerSpectating(playerid, 0);
	PlayerInfo[playerid][pSpecID] = INVALID_PLAYER_ID;
	PlayerInfo[playerid][pSpecType] = ADMIN_SPEC_TYPE_NONE;
	return 1;
}

stock AdvanceSpectate(playerid) //Sistema Recon
{
    if(ConnectedPlayers() == 1) { StopSpectate(playerid); SetTimerEx("ReturnPosition",500,0,"d",playerid); return 1; }
	if(GetPlayerState(playerid) == PLAYER_STATE_SPECTATING && PlayerInfo[playerid][pSpecID] != INVALID_PLAYER_ID)
	{
	    for(new x=PlayerInfo[playerid][pSpecID]+1; x<=MAX_PLAYERS; x++)
		{
	    	if(x == MAX_PLAYERS) x = 0;
	        if(IsPlayerConnected(x) && x != playerid)
			{
				if(GetPlayerState(x) == PLAYER_STATE_SPECTATING && PlayerInfo[x][pSpecID] != INVALID_PLAYER_ID || (GetPlayerState(x) != 1 && GetPlayerState(x) != 2 && GetPlayerState(x) != 3))
				{
					continue;
				}
				else
				{
					StartSpectate(playerid, x);
					break;
				}
			}
		}
	}
	return 1;
}

stock ReverseSpectate(playerid) //Sistema Recon
{
    if(ConnectedPlayers() == 1) { StopSpectate(playerid); SetTimerEx("ReturnPosition",500,0,"d",playerid); return 1; }
	if(GetPlayerState(playerid) == PLAYER_STATE_SPECTATING && PlayerInfo[playerid][pSpecID] != INVALID_PLAYER_ID)
	{
	    for(new x=PlayerInfo[playerid][pSpecID]-1; x>=0; x--)
		{
	    	if(x == 0) x = MAX_PLAYERS;
	        if(IsPlayerConnected(x) && x != playerid)
			{
				if(GetPlayerState(x) == PLAYER_STATE_SPECTATING && PlayerInfo[x][pSpecID] != INVALID_PLAYER_ID || (GetPlayerState(x) != 1 && GetPlayerState(x) != 2 && GetPlayerState(x) != 3))
				{
					continue;
				}
				else
				{
					StartSpectate(playerid, x);
					break;
				}
			}
		}
	}
	return 1;
}

stock ReconTextDraws() //Sistema Recon
{
	for(new l=0; l<130; l++)
	{
	GpsTD[l] = TextDrawCreate(326.000000, 362.000000, " ");
	TextDrawAlignment(GpsTD[l], 2);
	TextDrawBackgroundColor(GpsTD[l], 255);
	TextDrawFont(GpsTD[l], 1);
	TextDrawLetterSize(GpsTD[l], 0.300000, 1.100000);
	TextDrawColor(GpsTD[l], -1587871574);
	TextDrawSetOutline(GpsTD[l], 0);
	TextDrawSetProportional(GpsTD[l], 1);
	TextDrawSetShadow(GpsTD[l], 1);
	}
	return 1;
}

forward ReturnPosition(playerid); //Sistema Recon
public ReturnPosition(playerid)
{
	TogglePlayerControllable(playerid, 1);
	SetPlayerPos(playerid,RecPos[playerid][0],RecPos[playerid][1],RecPos[playerid][2]);
	SetPlayerFacingAngle(playerid,RecPos[playerid][3]);
	SetPlayerInterior(playerid,IntRec[playerid]);
	SetPlayerVirtualWorld(playerid,VwRec[playerid]);
}

stock ConnectedPlayers() //Cuenta el número de jugadores conectados
{
	new Connected;
	for(new i = 0; i < MAX_PLAYERS; i++)
	if(IsPlayerConnected(i))
	Connected++;
	return Connected;
}

forward ChatOOCTimer(playerid); //Chat OOC /b
public ChatOOCTimer(playerid)
{
	ChatOOC[playerid] = 0;
}

forward ShowStats(color, playerid, targetid); //Muestra stats de un jugador
public ShowStats(color, playerid, targetid)
{
    if(IsPlayerConnected(playerid)&&IsPlayerConnected(targetid))
	{
		new stats[128], sexo[2], trabajo[33], faccion[33], lider[9], rango[33], premium[12];
		//Sexo
		if(PlayerInfo[targetid][pSexo] == 1){sexo = "M";}
		if(PlayerInfo[targetid][pSexo] == 2){sexo = "F";}
		//Premium
		if(PlayerInfo[targetid][pPremium] == 0){premium = "{FF0000}No";}
		if(PlayerInfo[targetid][pPremium] == 1){premium = "{04DC00}Sí";}
		//Trabajo
		if(PlayerInfo[targetid][pTrabajo] == 0){trabajo = "No";}
		else{format(trabajo, sizeof(trabajo), "%s", Jobs[PlayerInfo[targetid][pTrabajo]-1][JobNombre]);}
		//Facción
		if(PlayerInfo[targetid][pFaccion] == 0){faccion = "No", rango = "No";}
		if(PlayerInfo[targetid][pFaccion] > 0)
		{
			format(faccion, sizeof(faccion), "%s", FaccInfo[PlayerInfo[targetid][pFaccion]][fNombre]);
		}
		//Líder
		if(PlayerInfo[targetid][pLider] > 0){lider = " (Líder)";}
		//Rango
		if(PlayerInfo[targetid][pFaccion] > 0) //Parte de una facción
		{
	        switch(PlayerInfo[targetid][pRango])
		    {
	            case 1: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[targetid][pFaccion]][fRango1]);
	            case 2: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[targetid][pFaccion]][fRango2]);
	            case 3: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[targetid][pFaccion]][fRango3]);
	            case 4: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[targetid][pFaccion]][fRango4]);
	            case 5: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[targetid][pFaccion]][fRango5]);
	            case 6: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[targetid][pFaccion]][fRango6]);
	            case 7: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[targetid][pFaccion]][fRango7]);
	            case 8: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[targetid][pFaccion]][fRango8]);
	            case 9: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[targetid][pFaccion]][fRango9]);
	            case 10: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[targetid][pFaccion]][fRango10]);
	            case 11: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[targetid][pFaccion]][fRango11]);
	            case 12: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[targetid][pFaccion]][fRango12]);
	            case 13: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[targetid][pFaccion]][fRango13]);
	            case 14: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[targetid][pFaccion]][fRango14]);
	            case 15: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[targetid][pFaccion]][fRango15]);
	            case 16: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[targetid][pFaccion]][fRango16]);
	        }
		}

		SendClientMessage(playerid, color, "||______________________________ Estadísticas del jugador ______________________________||");
		format(stats, sizeof(stats), "Nombre: %s (%s) | Edad: %d | Nivel: %d (%d/%d) | Teléfono: %d | Dinero: %d$ | Banco: %d$", PlayerInfo[targetid][pNombre], sexo, PlayerInfo[targetid][pEdad], PlayerInfo[targetid][pNivel], PlayerInfo[targetid][pExp], GetRespetoMinimo(PlayerInfo[targetid][pNivel] + 1), PlayerInfo[targetid][pTelefono], GetPlayerMoney(targetid), PlayerInfo[targetid][pDineroBanco]);
		SendClientMessage(playerid, color, stats);

		format(stats, sizeof(stats), "Facción: %s%s | Rango: %s (%d) | Trabajo: %s | Puntos de rol: %d", faccion, lider, rango, PlayerInfo[targetid][pRango], trabajo, PlayerInfo[targetid][pPuntosRol]);
		SendClientMessage(playerid, color, stats);

		format(stats, sizeof(stats), "Llaves vehículos propios: %d, %d, %d, %d, %d | Llaves vehículos prestados: %d, %d, %d, %d, %d", PlayerInfo[targetid][pLlaveCoche][0], PlayerInfo[targetid][pLlaveCoche][1], PlayerInfo[targetid][pLlaveCoche][2], PlayerInfo[targetid][pLlaveCoche][3], PlayerInfo[targetid][pLlaveCoche][4],
		PlayerInfo[targetid][pLlaveCochePrestado][0], PlayerInfo[targetid][pLlaveCochePrestado][1], PlayerInfo[targetid][pLlaveCochePrestado][2], PlayerInfo[targetid][pLlaveCochePrestado][3], PlayerInfo[targetid][pLlaveCochePrestado][4]);
		SendClientMessage(playerid, color, stats);

		format(stats, sizeof(stats), "Casa: %d | Casa alquilada: %d | Local: %d | Premium: %s{fdfe8b} | Correo: %s", PlayerInfo[targetid][pCasa], PlayerInfo[targetid][pCasaAlq], PlayerInfo[targetid][pNegocio], premium, PlayerInfo[targetid][pCorreo]);
		SendClientMessage(playerid, color, stats);

		format(stats, sizeof(stats), "[Adicciones/Tolerancia] Marihuana: %d | Cocaína: %d | Crack: %d | Heroína: %d | LSD: %d", PlayerInfo[targetid][pAdiccion][0], PlayerInfo[targetid][pAdiccion][1], PlayerInfo[targetid][pAdiccion][2], PlayerInfo[targetid][pAdiccion][3], PlayerInfo[targetid][pAdiccion][4]);
		SendClientMessage(playerid, color, stats);

		format(stats, sizeof(stats), "[Efectos (-1/min)] Marihuana: %d | Cocaína: %d | Crack: %d | Heroína: %d | LSD: %d", PlayerInfo[targetid][pDrConsumida][0], PlayerInfo[targetid][pDrConsumida][1], PlayerInfo[targetid][pDrConsumida][2], PlayerInfo[targetid][pDrConsumida][3], PlayerInfo[targetid][pDrConsumida][4]);
		SendClientMessage(playerid, color, stats);
    }
}

forward GivePlayerArmour(playerid,Float:Armour); //Dar chaleco a un jugador
public GivePlayerArmour(playerid,Float:Armour)
{
    new Float:armour; GetPlayerArmour(playerid, armour);
    SetPlayerArmour(playerid,armour+Armour);
    return 1;
}

forward GivePlayerHealth(playerid,Float:Health); //Dar vida a un jugador
public GivePlayerHealth(playerid,Float:Health)
{
    new Float:health; GetPlayerHealth(playerid, health);
    SetPlayerHealth(playerid,health+Health);
    return 1;
}

forward GivePlayerHealth1(playerid); //Quita 1 de vida al jugador
public GivePlayerHealth1(playerid)
{
    new Float:health; GetPlayerHealth(playerid, health);
    SetPlayerHealth(playerid,health-1);
    return 1;
}

forward PayDay(playerid);
public PayDay(playerid)
{
	if(JugadorLogueado[playerid] != 1 || PrimerSpawn[playerid] != 1){return 1;}
	PlayerSave(playerid); //Guarda stats
	//Mensaje payday
	GameTextForPlayer(playerid, "~g~PAYDAY", 1000, 1);
	//Puntos de respeto y nivel
	new nivel = PlayerInfo[playerid][pNivel];
	PlayerInfo[playerid][pExp]++;
	GetPlayerLevel(playerid);
	//Sueldos
	new banco = PlayerInfo[playerid][pDineroBanco], sueldo, trabajo, impuestos, string[128];
	SendClientMessage(playerid, Amarillo, "Payday:");
	//Actual balance
	format(string, sizeof(string), "|- Balance actual: %d$", banco);
	SendClientMessage(playerid, AmarilloClaro, string);
	//Si forma parte de facción pública
	if(PlayerInfo[playerid][pFaccion] > 0 && PlayerInfo[playerid][pFaccion] <= 4)
	{
	    if(PlayerInfo[playerid][pFaccion] == 1) //LSPD
	    {
     		sueldo=900+(50*(PlayerInfo[playerid][pRango]-1));
	    }
	     if(PlayerInfo[playerid][pFaccion] == 12) //GN
	    {
	    	sueldo=1500+(50*(PlayerInfo[playerid][pRango]-1));
	    }
	    if(PlayerInfo[playerid][pFaccion] == 2) //LSMD
	    {
	        sueldo=1300+(50*(PlayerInfo[playerid][pRango]-1));
	    }
	    if(PlayerInfo[playerid][pFaccion] == 3) //Gobierno
	    {
	      sueldo=1000+(100*(PlayerInfo[playerid][pRango]-1));
	    }
	    if(PlayerInfo[playerid][pFaccion] == 4) //LSRTV
	    {
	       sueldo=900+(50*(PlayerInfo[playerid][pRango]-1));
	    }
	    PlayerInfo[playerid][pDineroBanco] += sueldo;
		format(string, sizeof(string), "|- Salario facción: {88dd88}%d$", sueldo);
		SendClientMessage(playerid, AmarilloClaro, string);
	}
    SetPlayerProgressBarValue(playerid, XP[playerid], PlayerInfo[playerid][pExp]);
	UpdatePlayerProgressBar(playerid, XP[playerid]);

	//Si tiene job y no es ladrón ni tiene facción pública
	if(PlayerInfo[playerid][pTrabajo] > 0 && PlayerInfo[playerid][pTrabajo] != 8 && !(PlayerInfo[playerid][pFaccion] >= 1 && PlayerInfo[playerid][pFaccion] <= 4))
	{
	    trabajo = Jobs[PlayerInfo[playerid][pTrabajo]][JobPay] + 50*PlayerInfo[playerid][pNivel];
	    PlayerInfo[playerid][pDineroBanco] += trabajo;
		format(string, sizeof(string), "|- Salario base trabajo: {88dd88}%d$", trabajo);
		SendClientMessage(playerid, AmarilloClaro, string);
	}
	//Impuestos
    format(string, sizeof(string), "|- Impuestos del estado: {e70000}%d$", impuestos);
	SendClientMessage(playerid, AmarilloClaro, string);
	//Si tiene alquilada una vivienda
	if(PlayerInfo[playerid][pCasaAlq] > 0)
	{
	    new casa = PlayerInfo[playerid][pCasaAlq];
	    if(HouseInfo[casa][hComprada] == 0 || (HouseInfo[casa][hAlquilable] == 0 && HouseInfo[casa][hComprada] > 0)) //Si no tiene dueño o no es alquilable, desalquilar automáticamente
		{
			PlayerInfo[playerid][pCasaAlq] = 0;
			SendClientMessage(playerid, AmarilloClaro, "Tu casa no tenía dueño o ya no es alquilable y ya no la estás alquilando.");
		}
	    else if(HouseInfo[casa][hComprada] == -1) //Hotel
		{
		    if(PlayerInfo[playerid][pDineroBanco] < HouseInfo[casa][hPAlquiler]) //No tiene suficiente pasta
			{
			    PlayerInfo[playerid][pCasaAlq] = 0;
				HouseInfo[casa][hInquilinos] --;
			    SendClientMessage(playerid, AmarilloClaro, "No tenías suficiente dinero para pagar el alquiler de tu habitación y te han echado.");
			    UpdateHouseLabel(casa);
			}
			else
			{
				PlayerInfo[playerid][pDineroBanco] -= HouseInfo[casa][hPAlquiler];
				format(string, sizeof(string), "|- Alquiler habitación: {e70000}%d$", HouseInfo[casa][hPAlquiler]);
				SendClientMessage(playerid, AmarilloClaro, string);
			}
		}
	    else if(HouseInfo[casa][hComprada] > 0) //Privada
		{
		    if(PlayerInfo[playerid][pDineroBanco] < HouseInfo[casa][hPAlquiler]) //No tiene suficiente pasta
			{
			    PlayerInfo[playerid][pCasaAlq] = 0;
			    HouseInfo[casa][hInquilinos] --;
			    SendClientMessage(playerid, AmarilloClaro, "No tenías suficiente dinero para pagar el alquiler de tu casa y te han echado.");
			    UpdateHouseLabel(casa);
			}
			else
			{
				PlayerInfo[playerid][pDineroBanco] -= HouseInfo[casa][hPAlquiler];
				HouseInfo[casa][hDineroGuardado] += HouseInfo[casa][hPAlquiler];
				format(string, sizeof(string), "|- Alquiler casa: {e70000}%d$", HouseInfo[casa][hPAlquiler]);
				SendClientMessage(playerid, AmarilloClaro, string);
			}
		}
	}
	//Nuevo balance
	if((PlayerInfo[playerid][pDineroBanco] - banco) >= 0)
	{
		format(string, sizeof(string), "|- Nuevo balance: {88dd88}%d$ (+%d$)", PlayerInfo[playerid][pDineroBanco], PlayerInfo[playerid][pDineroBanco] - banco);
		SendClientMessage(playerid, AmarilloClaro, string);
	}
	else
	{
		format(string, sizeof(string), "|- Nuevo balance: {e70000}%d$ (%d$)", PlayerInfo[playerid][pDineroBanco], PlayerInfo[playerid][pDineroBanco] - banco);
		SendClientMessage(playerid, AmarilloClaro, string);
	}
	//Mensaje al subir de nivel
	if(PlayerInfo[playerid][pNivel] > nivel)
	{
		format(string, sizeof(string), "~w~¡Ahora eres nivel ~g~%d~w~!", PlayerInfo[playerid][pNivel]);
		GameTextForPlayer(playerid, string, 1000, 1);
		SetPlayerProgressBarMaxValue(playerid,XP[playerid], PlayerInfo[playerid][pExp]);
		SetPlayerProgressBarValue(playerid,XP[playerid], 0);
		UpdatePlayerProgressBar(playerid,XP[playerid]);
	}
	//Adicción de drogas
	new cvida, Float:cvida2, drunklevel;
	GetPlayerHealth(playerid, cvida2);
	if(PlayerInfo[playerid][pDrConsumida][1] == 0 && PlayerInfo[playerid][pAdiccion][1] > 15) //No ha consumido cocaína y es adicto
	{
	    cvida += (PlayerInfo[playerid][pAdiccion][1]/3);
		SendClientMessage(playerid, NaranjaOscuro, "* Sufres el mono de la cocaina. Consume cocaina antes del próximo payday si no quieres sufrirlo de nuevo.");
		drunklevel += 5000;
		ApplyAnimation(playerid, "FOOD", "EAT_Vomit_P", 3.0, 0, 0, 0, 0, 0);
	}
	if(PlayerInfo[playerid][pDrConsumida][2] == 0 && PlayerInfo[playerid][pAdiccion][2] > 13) //No ha consumido crack y es adicto
	{
	    cvida += (PlayerInfo[playerid][pAdiccion][2]/3);
		SendClientMessage(playerid, NaranjaOscuro, "* Sufres el mono del crack. Consume crack antes del próximo payday si no quieres sufrirlo de nuevo.");
		drunklevel += 5000;
		ApplyAnimation(playerid, "FOOD", "EAT_Vomit_P", 3.0, 0, 0, 0, 0, 0);
	}
	if(PlayerInfo[playerid][pDrConsumida][3] == 0 && PlayerInfo[playerid][pAdiccion][3] > 9) //No ha consumido heroína y es adicto
	{
	    cvida += (PlayerInfo[playerid][pAdiccion][3]/3);
		SendClientMessage(playerid, NaranjaOscuro, "* Sufres el mono de la heroína. Consume heroína antes del próximo payday si no quieres sufrirlo de nuevo.");
		drunklevel += 5000;
		ApplyAnimation(playerid, "FOOD", "EAT_Vomit_P", 3.0, 0, 0, 0, 0, 0);
	}
	if((cvida2 - cvida) > 10){GivePlayerHealth(playerid, -cvida);}
	else if(cvida2 > 10){SetPlayerHealth(playerid, 10);}
	GivePlayerDrunkLevel(playerid, drunklevel);
	if(PlayerInfo[playerid][pAdiccion][0] > 0) PlayerInfo[playerid][pAdiccion][0] --; //MArihuana
	if(PlayerInfo[playerid][pAdiccion][1] > 0) PlayerInfo[playerid][pAdiccion][1] --; //Cocaína
	if(PlayerInfo[playerid][pAdiccion][2] > 0) PlayerInfo[playerid][pAdiccion][2] --; //Crack
	if(PlayerInfo[playerid][pAdiccion][3] > 0) PlayerInfo[playerid][pAdiccion][3] --; //Heroína
	if(PlayerInfo[playerid][pAdiccion][4] > 0) PlayerInfo[playerid][pAdiccion][4] --; //LSD
	//Habilidades físicas
	PlayerInfo[playerid][pFuerza] --;
	if(PlayerInfo[playerid][pFuerza] < 100) PlayerInfo[playerid][pFuerza] = 100;
    return 1;
}

stock GetPlayerLevel(playerid) //Sube de nivel automáticamente
{
    new nivel = PlayerInfo[playerid][pNivel], string[50];
	if(PlayerInfo[playerid][pExp] >= 1110) PlayerInfo[playerid][pNivel]=20;
	else if(PlayerInfo[playerid][pExp] >= 990) PlayerInfo[playerid][pNivel]=19;
	else if(PlayerInfo[playerid][pExp] >= 870) PlayerInfo[playerid][pNivel]=18;
	else if(PlayerInfo[playerid][pExp] >= 750) PlayerInfo[playerid][pNivel]=17;
	else if(PlayerInfo[playerid][pExp] >= 630) PlayerInfo[playerid][pNivel]=16;
	else if(PlayerInfo[playerid][pExp] >= 510) PlayerInfo[playerid][pNivel]=15;
	else if(PlayerInfo[playerid][pExp] >= 450) PlayerInfo[playerid][pNivel]=14;
	else if(PlayerInfo[playerid][pExp] >= 390) PlayerInfo[playerid][pNivel]=13;
	else if(PlayerInfo[playerid][pExp] >= 330) PlayerInfo[playerid][pNivel]=12;
	else if(PlayerInfo[playerid][pExp] >= 270) PlayerInfo[playerid][pNivel]=11;
	else if(PlayerInfo[playerid][pExp] >= 210) PlayerInfo[playerid][pNivel]=10;
	else if(PlayerInfo[playerid][pExp] >= 180) PlayerInfo[playerid][pNivel]=9;
	else if(PlayerInfo[playerid][pExp] >= 150) PlayerInfo[playerid][pNivel]=8;
	else if(PlayerInfo[playerid][pExp] >= 120) PlayerInfo[playerid][pNivel]=7;
	else if(PlayerInfo[playerid][pExp] >= 90) PlayerInfo[playerid][pNivel]=6;
	else if(PlayerInfo[playerid][pExp] >= 60) PlayerInfo[playerid][pNivel]=5;
	else if(PlayerInfo[playerid][pExp] >= 45) PlayerInfo[playerid][pNivel]=4;
	else if(PlayerInfo[playerid][pExp] >= 30) PlayerInfo[playerid][pNivel]=3;
	else if(PlayerInfo[playerid][pExp] >= 15) PlayerInfo[playerid][pNivel]=2;
	else if(PlayerInfo[playerid][pExp] >= 0) PlayerInfo[playerid][pNivel]=1;
	if(PlayerInfo[playerid][pNivel] > nivel)
	{
		format(string, sizeof(string), "~w~¡Ahora eres nivel ~g~%d~w~!", PlayerInfo[playerid][pNivel]);
		GameTextForPlayer(playerid, string, 1000, 1);
	}
	return PlayerInfo[playerid][pNivel];
}

stock SetPlayerLevel(playerid) //Asigna pExp al nivel del jugador
{
	if(PlayerInfo[playerid][pNivel] == 20) PlayerInfo[playerid][pExp] = 1110;
	else if(PlayerInfo[playerid][pNivel] == 19) PlayerInfo[playerid][pExp] = 990;
	else if(PlayerInfo[playerid][pNivel] == 18) PlayerInfo[playerid][pExp] = 870;
	else if(PlayerInfo[playerid][pNivel] == 17) PlayerInfo[playerid][pExp] = 750;
	else if(PlayerInfo[playerid][pNivel] == 16) PlayerInfo[playerid][pExp] = 630;
	else if(PlayerInfo[playerid][pNivel] == 15) PlayerInfo[playerid][pExp] = 510;
	else if(PlayerInfo[playerid][pNivel] == 14) PlayerInfo[playerid][pExp] = 450;
	else if(PlayerInfo[playerid][pNivel] == 13) PlayerInfo[playerid][pExp] = 390;
	else if(PlayerInfo[playerid][pNivel] == 12) PlayerInfo[playerid][pExp] = 330;
	else if(PlayerInfo[playerid][pNivel] == 11) PlayerInfo[playerid][pExp] = 270;
	else if(PlayerInfo[playerid][pNivel] == 10) PlayerInfo[playerid][pExp] = 210;
	else if(PlayerInfo[playerid][pNivel] == 9) PlayerInfo[playerid][pExp] = 180;
	else if(PlayerInfo[playerid][pNivel] == 8) PlayerInfo[playerid][pExp] = 150;
	else if(PlayerInfo[playerid][pNivel] == 7) PlayerInfo[playerid][pExp] = 120;
	else if(PlayerInfo[playerid][pNivel] == 6) PlayerInfo[playerid][pExp] = 90;
	else if(PlayerInfo[playerid][pNivel] == 5) PlayerInfo[playerid][pExp] = 60;
	else if(PlayerInfo[playerid][pNivel] == 4) PlayerInfo[playerid][pExp] = 45;
	else if(PlayerInfo[playerid][pNivel] == 3) PlayerInfo[playerid][pExp] = 30;
	else if(PlayerInfo[playerid][pNivel] == 2) PlayerInfo[playerid][pExp] = 15;
	else if(PlayerInfo[playerid][pNivel] == 1) PlayerInfo[playerid][pExp] = 0;
	return PlayerInfo[playerid][pExp];
}

stock GetRespetoMinimo(level) //Cuenta cuánto falta para el siguiente nivel
{
	new RespetoMinimo;
	if(level == 0 || level == 1) RespetoMinimo = 0;
	else if(level == 2) RespetoMinimo = 15;
	else if(level == 3) RespetoMinimo = 30;
	else if(level == 4) RespetoMinimo = 45;
	else if(level == 5) RespetoMinimo = 60;
	else if(level == 6) RespetoMinimo = 90;
	else if(level == 7) RespetoMinimo = 120;
	else if(level == 8) RespetoMinimo = 150;
	else if(level == 9) RespetoMinimo = 180;
	else if(level == 10) RespetoMinimo = 210;
	else if(level == 11) RespetoMinimo = 270;
	else if(level == 12) RespetoMinimo = 330;
	else if(level == 13) RespetoMinimo = 390;
	else if(level == 14) RespetoMinimo = 450;
	else if(level == 15) RespetoMinimo = 510;
	else if(level == 16) RespetoMinimo = 630;
	else if(level == 17) RespetoMinimo = 750;
	else if(level == 18) RespetoMinimo = 870;
	else if(level == 19) RespetoMinimo = 990;
	else if(level >= 20) RespetoMinimo = 1110;
	return RespetoMinimo;
}

stock GetPlayerCajero(playerid) //Detecta cercanía a un cajero
{
	new Cajero;
	for(new i = 0; i < sizeof(Cajeros); i ++)
	{
		if(IsPlayerInRangeOfPoint(playerid, 1.5, Cajeros[i][cX], Cajeros[i][cY], Cajeros[i][cZ]))
		{
			Cajero = i+1;
		}
	}
	return Cajero;
}

forward EntrarSitioPublico(playerid);
public EntrarSitioPublico(playerid)
{
	if(IsPlayerInRangeOfPoint(playerid, 1.0, 1555.0660,-1675.6772,16.1953)) //Entrada de LSPD
	{
		SetPlayerPos(playerid,246.3626,107.8716,1003.2188);
		SetPlayerInterior(playerid, 10);
		SetPlayerFacingAngle(playerid, 0);
		TogglePlayerControllable(playerid, 0);
		SetTimerEx("Descongelar", 2000, false, "i", playerid);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 246.3626,107.8716,1003.2188)) //Salida de LSPD
	{
		SetPlayerPos(playerid,1555.0660,-1675.6772,16.1953);
		SetPlayerInterior(playerid, 0);
		SetPlayerFacingAngle(playerid, 90);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 1582.0264, -1674.8207, 5.8945)) //2ª planta parking LSPD
	{
        if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
		SetPlayerPos(playerid,-1609.3883, 729.6197, -5.2422);
		SetPlayerFacingAngle(playerid, 0);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, -1609.3883, 729.6197, -5.2422)) //1ª planta parking LSPD
	{
		SetPlayerPos(playerid,1582.0264, -1674.8207, 5.8945);
		SetPlayerFacingAngle(playerid, 270);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 1764.6129,-2022.0841,14.1507)) //Entrada Taller LS
	{
        if(PlayerInfo[playerid][pFaccion] != 5){SendClientMessage(playerid,Rojo,"* No eres Mecánico."); return 1;}
		SetPlayerPos(playerid,1588.5631, -2506.2239, 13.6362);
		SetPlayerInterior(playerid, 15);
		SetPlayerFacingAngle(playerid, 90);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 691.5793,-1275.9186,13.5607)) //Entrada Mafia Rusa
	{
        if(PlayerInfo[playerid][pFaccion] != 11){SendClientMessage(playerid,Rojo,"* No eres de la Mafia Rusa."); return 1;}
		SetPlayerPos(playerid,1298.9158,-797.0090,1084.0078);
		SetPlayerInterior(playerid, 5);
		SetPlayerFacingAngle(playerid, 90);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 1298.9158,-797.0090,1084.0078)) //Salida Mafia Rusa
	{
		SetPlayerPos(playerid,691.5793,-1275.9186,13.5607);
		SetPlayerInterior(playerid, 0);
		SetPlayerFacingAngle(playerid, 90);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 1122.7065,-2037.0870,69.8942)) //Entrada LCN
	{
        if(PlayerInfo[playerid][pFaccion] != 7){SendClientMessage(playerid,Rojo,"* No eres de La Cosa Nostra."); return 1;}
		SetPlayerPos(playerid,2324.3867,-1149.5464,1050.7101);
		SetPlayerInterior(playerid, 12);
		SetPlayerFacingAngle(playerid, 90);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 2324.3867,-1149.5464,1050.7101)) //Salida LCN
	{
		SetPlayerPos(playerid,1122.7065,-2037.0870,69.8942);
		SetPlayerInterior(playerid, 0);
		SetPlayerFacingAngle(playerid, 90);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 1588.5631, -2506.2239, 13.6362)) //Entrada Taller LS SALIDA
	{
        if(PlayerInfo[playerid][pFaccion] != 5){SendClientMessage(playerid,Rojo,"* No eres Mecánico."); return 1;}
		SetPlayerPos(playerid,1764.6129,-2022.0841,14.1507);
		SetPlayerInterior(playerid, 0);
		SetPlayerFacingAngle(playerid, 90);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 270.3885,113.4809,1004.6172)) //Entrada armería comisaría LSPD
	{
        if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
		SetPlayerPos(playerid,221.1510,79.8274,1005.0391);
		SetPlayerInterior(playerid, 6);
		SetPlayerFacingAngle(playerid, 90);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 221.1510,79.8274,1005.0391)) //Salida armería comisaría LSPD
	{
		SetPlayerPos(playerid,270.3885,113.4809,1004.6172);
		SetPlayerInterior(playerid, 10);
		SetPlayerFacingAngle(playerid, 0);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 238.4005,114.8457,1010.2188)) //Salida azotea comisaría LSPD
	{
        if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
		SetPlayerPos(playerid,1573.0088,-1670.1738,28.3956);
		SetPlayerInterior(playerid, 0);
		SetPlayerFacingAngle(playerid, 270);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 1573.0088,-1670.1738,28.3956)) //Entrada azotea comisaría LSPD
	{
		SetPlayerPos(playerid,238.4005,114.8457,1010.2188);
		SetPlayerInterior(playerid, 10);
		SetPlayerFacingAngle(playerid, 90);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 1525.1538,-1677.8840,5.8906) || IsPlayerInRangeOfPoint(playerid, 1.0, -1606.3339,672.5668,-5.2422)) //Entradas cárcel comisaría LSPD
	{
		SetPlayerPos(playerid,218.8535,121.0664,999.0156);
		SetPlayerInterior(playerid, 10);
		SetPlayerVirtualWorld(playerid, 0);
		SetPlayerFacingAngle(playerid, 90);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 217.7758,117.4122,999.0216)) //Entrada celdas comisaría LSPD
	{
		SetPlayerPos(playerid,249.0331,86.8339,1003.3804);
		SetPlayerInterior(playerid, 6);
		SetPlayerVirtualWorld(playerid, 1);
		SetPlayerFacingAngle(playerid, 270);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 249.0331,86.8339,1003.3804)) //Salida celdas comisaría LSPD
	{
		SetPlayerPos(playerid,217.7758,117.4122,999.0216);
		SetPlayerInterior(playerid, 10);
		SetPlayerVirtualWorld(playerid, 0);
		SetPlayerFacingAngle(playerid, 0);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 255.0220,126.2807,1003.2188)) //Ascensor 1ª planta comisaría LSPD
	{
        if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
        TogglePlayerControllable(playerid, 0);
		ShowPlayerDialog(playerid, 1, 2, "Ascensor LSPD", "Comisaría\n1ª Planta parking\n2ª Planta parking", "Aceptar", "Salir");
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 1568.6243,-1689.9784,6.2188)) //Ascensor 1ª planta parking LSPD
	{
        if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
        TogglePlayerControllable(playerid, 0);
		ShowPlayerDialog(playerid, 1, 2, "Ascensor LSPD", "Comisaría\n1ª Planta parking\n2ª Planta parking", "Aceptar", "Salir");
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, -1594.2114,716.2331,-4.9063)) //Ascensor 2ª planta parking LSPD
	{
        if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
        TogglePlayerControllable(playerid, 0);
		ShowPlayerDialog(playerid, 1, 2, "Ascensor LSPD", "Comisaría\n1ª Planta parking\n2ª Planta parking", "Aceptar", "Salir");
	}
	else if(IsPlayerInRangeOfPoint(playerid, 2.0, 1481.0206,-1771.1138,18.7958)) //Ayuntamiento entrada
	{
		SetPlayerPos(playerid, 390.1899,173.7861,1008.3828);
		SetPlayerInterior(playerid, 3);
		SetPlayerFacingAngle(playerid, 90);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 390.1899,173.7861,1008.3828)) //Ayuntamiento salida
	{
		SetPlayerPos(playerid, 1481.0206,-1771.1138,18.7958);
		SetPlayerInterior(playerid, 0);
		SetPlayerFacingAngle(playerid, 0);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 375.88223266602,164.72079467773,1025.7890625) && (GetPlayerVirtualWorld(playerid) == 0)) //Entrada azotea ayuntamiento
    {
	    if(PlayerInfo[playerid][pFaccion] == 0 || PlayerInfo[playerid][pFaccion] > 3){SendClientMessage(playerid,Rojo,"* No puedes entrar por aquí."); return 1;}
 		SetPlayerPos(playerid, 1437.2343,-1786.3534,33.4297);
		SetPlayerInterior(playerid,0);
		SetPlayerFacingAngle(playerid, 90);
    }
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 1437.2343,-1786.3534,33.4297)) //Salida azotea ayuntamiento
	{
		SetPlayerPos(playerid, 375.88223266602,164.72079467773,1025.7890625);
		SetPlayerFacingAngle(playerid, 180);
		SetPlayerInterior(playerid,3);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 366.64654541016,158.77993774414,1008.3828125)) //Entrada garaje ayuntamiento
    {
        if(PlayerInfo[playerid][pFaccion] == 0 || PlayerInfo[playerid][pFaccion] > 3){SendClientMessage(playerid,Rojo,"* No puedes entrar por aquí."); return 1;}
 		SetPlayerPos(playerid, 1524.0345,-1825.3225,13.5469);
		SetPlayerInterior(playerid,0);
		SetPlayerFacingAngle(playerid, 180);
    }
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 1524.0345,-1825.3225,13.5469)) //Salida garaje ayuntamiento
    {
	    if(PlayerInfo[playerid][pFaccion] == 0 || PlayerInfo[playerid][pFaccion] > 3){SendClientMessage(playerid,Rojo,"* No puedes entrar por aquí."); return 1;}
 	  	SetPlayerPos(playerid, 366.64654541016,158.77993774414,1008.3828125);
		SetPlayerInterior(playerid,3);
		SetPlayerFacingAngle(playerid, 0);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 2045.6418,-1908.1290,13.5469)) //Entrada autoescuela Willowfield
	{
		SetPlayerPos(playerid, -2026.8535,-104.0617,1035.1719);
		SetPlayerInterior(playerid,3);
		SetPlayerFacingAngle(playerid, 180);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, -2026.8535,-104.0617,1035.1719)) //Salida autoescuela Willowfield
	{
		SetPlayerPos(playerid, 2045.6418,-1908.1290,13.5469);
		SetPlayerInterior(playerid,0);
		SetPlayerFacingAngle(playerid, 270);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 1498.4912,-1581.3987,13.5498)) //Entrada Hotel Commerce
	{
	    SetPlayerPos(playerid, 1726.9388,-1638.4977,20.2233);
		SetPlayerInterior(playerid,18);
		SetPlayerVirtualWorld(playerid,1);
		SetPlayerFacingAngle(playerid, 180);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 1726.9388,-1638.4977,20.2233)) //Salida Hotel Commerce
	{
	    SetPlayerPos(playerid, 1498.4912,-1581.3987,13.5498);
		SetPlayerInterior(playerid,0);
		SetPlayerVirtualWorld(playerid,0);
		SetPlayerFacingAngle(playerid, 180);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 1459.3337,-1009.9294,26.8438)) //Entrada Banco
	{
	    SetPlayerPos(playerid, 834.6656,7.4580,1004.1870);
		SetPlayerInterior(playerid,3);
		SetPlayerVirtualWorld(playerid,1);
		SetPlayerFacingAngle(playerid, 180);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 834.6656,7.4580,1004.1870)) //Salida Banco
	{
	    SetPlayerPos(playerid, 1459.3337,-1009.9294,26.8438);
		SetPlayerInterior(playerid,0);
		SetPlayerVirtualWorld(playerid,0);
		SetPlayerFacingAngle(playerid, 180);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 1742.9919,-1864.4597,13.5738)) //Entrada Unity Station
	{
	    SetPlayerPos(playerid, 1494.4316,1303.5809,1093.2891);
		SetPlayerInterior(playerid,3);
		SetPlayerVirtualWorld(playerid,1);
		SetPlayerFacingAngle(playerid, 180);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 1494.4316,1303.5809,1093.2891)) //Salida Unity Station
	{
	    SetPlayerPos(playerid, 1742.9919,-1864.4597,13.5738);
		SetPlayerInterior(playerid,0);
		SetPlayerVirtualWorld(playerid,0);
		SetPlayerFacingAngle(playerid, 180);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 5.0, 1147.8459,-1342.6941,13.6440)) //Entrada Trasera Hospital LS
	{
	    SetPlayerPos(playerid, -205.7376,-1763.2035,675.7687);
		SetPlayerInterior(playerid,5);
		SetPlayerVirtualWorld(playerid,0);
		SetPlayerFacingAngle(playerid, 180);
		SetTimerEx("Descongelar", 2000, false, "i", playerid);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, -205.7376,-1763.2035,675.7687)) //Salida Hospital Trasera LS
	{
	    SetPlayerPos(playerid, 1147.8459,-1342.6941,13.6440);
		SetPlayerInterior(playerid,0);
		SetPlayerVirtualWorld(playerid,0);
		SetPlayerFacingAngle(playerid, 180);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 5.0, 1155.9493,-1342.8243,26.6694)) //Azotea Hospital LS
	{
        if(PlayerInfo[playerid][pFaccion] != 2){SendClientMessage(playerid,Rojo,"* No eres Médico."); return 1;}
	    SetPlayerPos(playerid, -203.2680,-1763.2410,675.7687);
		SetPlayerInterior(playerid,5);
		SetPlayerVirtualWorld(playerid,0);
		SetPlayerFacingAngle(playerid, 180);
		SetTimerEx("Descongelar", 2000, false, "i", playerid);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, -203.2680,-1763.2410,675.7687)) //Salida Azotea HP LS
	{
		if(PlayerInfo[playerid][pFaccion] != 2){SendClientMessage(playerid,Rojo,"* No eres Médico."); return 1;}
	    SetPlayerPos(playerid, 1155.9493,-1342.8243,26.6694);
		SetPlayerInterior(playerid,0);
		SetPlayerVirtualWorld(playerid,0);
		SetPlayerFacingAngle(playerid, 180);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 5.0, 1172.6749,-1325.2783,15.4022)) //Entrada Hospital LS
	{
	    SetPlayerPos(playerid, -204.7502,-1735.6351,675.7687);
		SetPlayerInterior(playerid,5);
		SetPlayerVirtualWorld(playerid,0);
		SetPlayerFacingAngle(playerid, 180);
		TogglePlayerControllable(playerid, 0);
		SetTimerEx("Descongelar", 2000, false, "i", playerid);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, -204.7502,-1735.6351,675.7687)) //Salida Hospital LS
	{
	    SetPlayerPos(playerid, 1172.6749,-1325.2783,15.4022);
		SetPlayerInterior(playerid,0);
		SetPlayerVirtualWorld(playerid,0);
		SetPlayerFacingAngle(playerid, 180);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 2232.6450,-1159.8384,25.8906)) //Entrada Motel Jefferson
	{
	    SetPlayerPos(playerid, 2215.0349,-1150.5457,1025.7969);
		SetPlayerInterior(playerid,15);
		SetPlayerVirtualWorld(playerid,1);
		SetPlayerFacingAngle(playerid, 270);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 2215.0349,-1150.5457,1025.7969)) //Salida Motel Jefferson
	{
	    SetPlayerPos(playerid, 2232.6450,-1159.8384,25.8906);
		SetPlayerInterior(playerid,0);
		SetPlayerVirtualWorld(playerid,0);
		SetPlayerFacingAngle(playerid, 90);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 1797.9216,-1578.7523,14.0898)) //Entrada Prisión Federal
	{
	    SetPlayerPos(playerid, 2523.4546,-1301.8833,1048.2891);
		SetPlayerInterior(playerid,2);
		SetPlayerVirtualWorld(playerid,0);
		SetPlayerFacingAngle(playerid, 270);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 2523.4546,-1301.8833,1048.2891)) //Salida Prisión Federal
	{
	    SetPlayerPos(playerid, 1797.9216,-1578.7523,14.0898);
		SetPlayerInterior(playerid,0);
		SetPlayerVirtualWorld(playerid,0);
		SetPlayerFacingAngle(playerid, 270);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 2576.7878,-1289.9611,1044.1250)) //Entrada Patio Prisión Federal
	{
	    SetPlayerPos(playerid, 1772.0688,-1548.1400,9.9063);
		SetPlayerInterior(playerid,0);
		SetPlayerVirtualWorld(playerid,0);
		SetPlayerFacingAngle(playerid, 90);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 1772.0688,-1548.1400,9.9063)) //Salida Patio Prisión Federal
	{
	    SetPlayerPos(playerid, 2576.7878,-1289.9611,1044.1250);
		SetPlayerInterior(playerid,2);
		SetPlayerVirtualWorld(playerid,0);
		SetPlayerFacingAngle(playerid, 90);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 2233.1997,-1333.3169,23.9816)) //Entrada Iglesia Jefferson
	{
	    TogglePlayerControllable(playerid, 0);
		SetTimerEx("Descongelar", 2000, false, "i", playerid);
	    SetPlayerPos(playerid, 1964.0940,-350.2319,1092.9454);
		SetPlayerInterior(playerid,1);
		SetPlayerVirtualWorld(playerid,0);
		SetPlayerFacingAngle(playerid, 180);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 1964.0940,-350.2319,1092.9454)) //Salida Iglesia Jefferson
	{
	    SetPlayerPos(playerid, 2233.1997,-1333.3169,23.9816);
		SetPlayerInterior(playerid,0);
		SetPlayerVirtualWorld(playerid,0);
		SetPlayerFacingAngle(playerid, 90);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 648.7344,-1360.7629,13.5876)) //Entrada LSRTV
	{
	    TogglePlayerControllable(playerid, 0);
		SetTimerEx("Descongelar", 2000, false, "i", playerid);
	    SetPlayerPos(playerid, 248.5891,1783.5326,701.0859);
		SetPlayerInterior(playerid,1);
		SetPlayerVirtualWorld(playerid,0);
		SetPlayerFacingAngle(playerid, 180);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 248.5891,1783.5326,701.0859)) //Salida LSRTV
	{
	    SetPlayerPos(playerid, 648.7344,-1360.7629,13.5876);
		SetPlayerInterior(playerid,0);
		SetPlayerVirtualWorld(playerid,0);
		SetPlayerFacingAngle(playerid, 90);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 732.8732,-1355.4661,15.1563)) //Entrada Parking LSRTV
	{
	    if(PlayerInfo[playerid][pFaccion] != 4){SendClientMessage(playerid,Rojo,"* No puedes entrar por aquí."); return 1;}
	    TogglePlayerControllable(playerid, 0);
		SetTimerEx("Descongelar", 2000, false, "i", playerid);
	    SetPlayerPos(playerid, 258.6264,1777.5300,701.0859);
		SetPlayerInterior(playerid,1);
		SetPlayerVirtualWorld(playerid,0);
		SetPlayerFacingAngle(playerid, 270);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 258.6264,1777.5300,701.0859)) //Salida Parking LSRTV
	{
	    if(PlayerInfo[playerid][pFaccion] != 4){SendClientMessage(playerid,Rojo,"* No puedes entrar por aquí."); return 1;}
	    SetPlayerPos(playerid, 732.8732,-1355.4661,15.1563);
		SetPlayerInterior(playerid,0);
		SetPlayerVirtualWorld(playerid,0);
		SetPlayerFacingAngle(playerid, 270);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 2523.3840,-1281.3458,1048.2891)) //Entrada armería prisión federal
	{
        if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
        TogglePlayerControllable(playerid, 0);
		SetTimerEx("Descongelar", 3000, false, "i", playerid);
		SetPlayerPos(playerid,1089.0194,-801.8175,1088.3660);
		SetPlayerFacingAngle(playerid, 90);
		SetPlayerInterior(playerid, 2);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 1089.0194,-801.8175,1088.3660)) //Salida armería prisión federal
	{
		SetPlayerPos(playerid,2523.3840,-1281.3458,1048.2891);
		SetPlayerFacingAngle(playerid, 270);
		SetPlayerInterior(playerid, 2);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 1084.5272,-808.0339,1088.3669)) //Entrada armería prisión federal - patio
	{
        if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
        TogglePlayerControllable(playerid, 0);
		SetTimerEx("Descongelar", 3000, false, "i", playerid);
		SetPlayerPos(playerid,1757.9861,-1560.4956,15.8120);
		SetPlayerFacingAngle(playerid, 90);
		SetPlayerInterior(playerid, 0);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 1757.9861,-1560.4956,15.8120)) //Salida armería prisión federal - patio
	{
	    if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
	    TogglePlayerControllable(playerid, 0);
		SetTimerEx("Descongelar", 3000, false, "i", playerid);
		SetPlayerPos(playerid,1084.5272,-808.0339,1088.3669);
		SetPlayerFacingAngle(playerid, 0);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 2529.6387,-1281.9346,1048.2891)) //Puerta oficina - prisión
	{
        if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
		SetPlayerPos(playerid,2532.1252,-1281.9380,1048.2891);
		SetPlayerFacingAngle(playerid, 270);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 2532.1252,-1281.9380,1048.2891)) //Puerta prisión oficina
	{
	    if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
		SetPlayerPos(playerid,2529.6387,-1281.9346,1048.2891);
		SetPlayerFacingAngle(playerid, 90);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 1773.4933,-1577.7090,22.9530)) //Azotea-prisión
	{
		SetPlayerPos(playerid,2524.9102,-1280.7483,1048.2891);
		SetPlayerFacingAngle(playerid, 180);
		SetPlayerInterior(playerid, 2);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 1.0, 2524.9102,-1280.7483,1048.2891)) //Prisión-azotea
	{
	    if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
		SetPlayerPos(playerid,1773.4933,-1577.7090,22.9530);
		SetPlayerFacingAngle(playerid, 315);
		SetPlayerInterior(playerid, 0);
	}
    return 1;
}

stock IsVehicleInRangeOfPoint(Float:radi, vehicleid, Float:x, Float:y, Float:z) //Si un vehículo está cerca de un punto
{
        new Float:oldposx, Float:oldposy, Float:oldposz;
        new Float:tempposx, Float:tempposy, Float:tempposz;
        GetVehiclePos(vehicleid, oldposx, oldposy, oldposz);
        tempposx = (oldposx -x);
        tempposy = (oldposy -y);
        tempposz = (oldposz -z);
        if(((tempposx < radi) && (tempposx > -radi)) && ((tempposy < radi) && (tempposy > -radi)) && ((tempposz < radi) && (tempposz > -radi)))
        {
                return 1;
        }
        return 0;
}

forward AbrirPuerta(playerid); //Abre puertas scripteadas
public AbrirPuerta(playerid)
{
	if(PlayerInfo[playerid][pFaccion] == 1) //LSPD
	{
	    if(IsPlayerInRangeOfPoint(playerid, 15.0, 1544.6999500,-1630.8000500,13.3000000) && GetPlayerState(playerid) == PLAYER_STATE_DRIVER) //Barra elevadora LSPD
		{
	    	SetDynamicObjectRot(lspdpuerta[1], 0.0, 10.0, 90.0);
	    	SetTimerEx("CerrarPuerta",4000,0,"p",lspdpuerta[1]);
		}
		else if(IsPlayerInRangeOfPoint(playerid, 12.0, 1589.0595700,-1638.1992200,14.0300000) && GetPlayerState(playerid) == PLAYER_STATE_DRIVER) //Valla parking LSPD
		{
	    	MoveDynamicObject(lspdpuerta[2], 1595.9589800,-1638.1992200,14.0300000, 2.0);
	    	SetTimerEx("CerrarPuerta",4000,0,"p",lspdpuerta[2]);
		}
		else if(IsPlayerInRangeOfPoint(playerid, 2.0, 1582.6169400,-1637.9000200,13.5400000) && GetPlayerState(playerid) == PLAYER_STATE_ONFOOT) //Puerta parking LSPD
		{
	    	SetDynamicObjectRot(lspdpuerta[3], 0.0000000,0.0000000,102.0000000);
	    	SetTimerEx("CerrarPuerta",4000,0,"p",lspdpuerta[3]);
		}
		else if(IsPlayerInRangeOfPoint(playerid, 3.0, 213.8999900,124.9300000,1000.6500200)) //Puerta cárcel comisaria
		{
	    	MoveDynamicObject(lspdpuerta[4], 215.5000000,124.9296900,1000.6500200, 2.0);
	    	SetTimerEx("CerrarPuerta",4000,0,"p",lspdpuerta[4]);
		}
		else if(IsPlayerInRangeOfPoint(playerid, 2.0, 253.1992200,109.8193400,1003.5000000)) //Puerta comisaria 1
		{
	    	MoveDynamicObject(lspdpuerta[5], 253.1992200,111.0000000,1003.5000000, 2.0);
	    	SetTimerEx("CerrarPuerta",4000,0,"p",lspdpuerta[5]);
		}
		else if(IsPlayerInRangeOfPoint(playerid, 2.0, 239.5996100,118.3496100,1003.5000000)) //Puerta comisaria 2
		{
	    	MoveDynamicObject(lspdpuerta[6], 239.5996100,119.5306000,1003.5000000, 2.0);
	    	SetTimerEx("CerrarPuerta",4000,0,"p",lspdpuerta[6]);
		}
		else if(IsPlayerInRangeOfPoint(playerid, 3.0, 258.89999390,91.50000000,1004.09997559)) //Puerta celdas comisaría LSPD
        {
			MoveDynamicObject(lspdpuerta[7], 258.89999390,90.00000000,1004.09997559, 2.0);
			SetTimerEx("CerrarPuerta",4000,0,"p",lspdpuerta[7]);
        }
        else if(IsPlayerInRangeOfPoint(playerid, 3.0, 2527.2000000,-1294.1300000,1049.9000000)) //Puerta prisión
        {
            MoveDynamicObject(puertaprision[1], 2528.8000000,-1294.1299000,1049.9000000, 2.0);
			SetTimerEx("CerrarPuerta",4000,0,"p",puertaprision[1]);
        }
        else if(IsPlayerInRangeOfPoint(playerid, 3.0, 2533.3999000,-1283.8000000,1049.9000000)) //Puerta prisión 2
        {
            MoveDynamicObject(puertaprision[2], 2533.1001000,-1283.8740000,1049.9000000, 2.0);
			SetTimerEx("CerrarPuerta",3000,0,"p",puertaprision[2]);
        }
	}
		
	if(PlayerInfo[playerid][pFaccion] == 4) //LSN
	{
	    if(IsPlayerInRangeOfPoint(playerid, 8.0, 781.8000000,-1384.8000000,12.7000000)) //Puerta LSN sur
		{
	    	MoveDynamicObject(LSNpuerta1, 775.0000000,-1384.8300000,12.7000000, 2.0);
	    	SetTimerEx("CerrarPuerta",5000,0,"p",LSNpuerta1);
		}
		else if(IsPlayerInRangeOfPoint(playerid, 8.0, 781.8000000,-1330.3000000,12.7000000)) //Puerta LSN norte
        {
			MoveDynamicObject(LSNpuerta2, 775.0000000,-1330.1600000,12.7000000, 2.0);
			SetTimerEx("CerrarPuerta",5000,0,"p",LSNpuerta2);
        }
	}
	
	if(IsPlayerInRangeOfPoint(playerid, 12.0, 812.22028, -540.16632, 18.15460)) //Valla Mecanico Dillimore. Lo puede abrir todo el mundo para poder echarse gasolina
		{
	    	MoveDynamicObject(mecaDillimore, 802.22028, -540.16632, 18.15460, 2.0);
	    	SetTimerEx("CerrarPuerta",4000,0,"p",mecaDillimore);
		}

	if(PlayerInfo[playerid][pFaccion] == 11) //Mafia Rusa
	{
     if(IsPlayerInRangeOfPoint(playerid, 8.0, 791.4895,-1152.3440,23.6639) || IsPlayerInRangeOfPoint(playerid, 8.0, 781.0106,-1152.4172,23.0105)) //Puerta LSN sur
		{
	    	MoveDynamicObject(rusopuerta[1], 786.46112, -1152.50549, 19.90062, 2.0);
	    	SetTimerEx("CerrarPuerta",5000,0,"p",rusopuerta[1]);
		}
		else if(IsPlayerInRangeOfPoint(playerid, 8.0, 654.9002,-1224.8835,16.9447) || IsPlayerInRangeOfPoint(playerid, 8.0, 662.4352,-1228.7725,15.1901))
        {
			MoveDynamicObject(rusopuerta[2], 659.0269, -1226.8708, 12.4267, 2.0);
			SetTimerEx("CerrarPuerta",5000,0,"p",rusopuerta[2]);
	    }
		else if(IsPlayerInRangeOfPoint(playerid, 8.0, 665.1636,-1313.1528,13.4609) || IsPlayerInRangeOfPoint(playerid, 8.0, 665.2551,-1304.9216,13.0857))
        {
			MoveDynamicObject(rusopuerta[3], 664.9805, -1309.0577, 9.7636, 2.0);
			SetTimerEx("CerrarPuerta",5000,0,"p",rusopuerta[3]);
	    }
	}
	if(PlayerInfo[playerid][pFaccion] == 7) //La Cosa Nostra
	{
     if(IsPlayerInRangeOfPoint(playerid, 8.0, 1426.8298,-1894.8624,13.4247) || IsPlayerInRangeOfPoint(playerid, 8.0, 1426.1190,-1878.3182,13.0875)) //Puerta LSN sur
		{
	    	MoveDynamicObject(lcnpuerta[1], 1426.8367, -1885.6631, 9.7282, 2.0);
	    	SetTimerEx("CerrarPuerta",5000,0,"p",lcnpuerta[1]);
		}
	}
	if(PlayerInfo[playerid][pFaccion] == 3) //Gobierno
	{
	    if(IsPlayerInRangeOfPoint(playerid, 8.0, 372.0774,167.0035,1008.3828))
		{
	        MoveDynamicObject(gobiernopuerta[1],369.76, 166.58, 1007.40,4);
	    	SetTimerEx("CerrarPuerta",5000,0,"p",gobiernopuerta[1]);
		}
		else if(IsPlayerInRangeOfPoint(playerid, 8.0, 366.5457,189.1614,1008.3828))
        {
			MoveDynamicObject(gobiernopuerta[2],364.29, 189.55, 1007.37,4);
			SetTimerEx("CerrarPuerta",5000,0,"p",gobiernopuerta[2]);
	    }
	}
	if(PlayerInfo[playerid][pFaccion] == 12) //GN
	{
	    if(IsPlayerInRangeOfPoint(playerid, 12, 130.88757, 1939.11035, 20.57796))
		{
	        MoveDynamicObject(puertaGN[0], 120.88757, 1939.11035, 20.57796, 2.0); printf("Abriendo puerta");
	    	SetTimerEx("CerrarPuerta",5000,0,"p",puertaGN[0]);
		}
		else if(IsPlayerInRangeOfPoint(playerid, 12,164.37537, 1792.10754, 19.28235))
        {
			MoveDynamicObject(puertaGN[1], 154.37537, 1792.10754, 19.28235, 2.0); printf("Abriendo puerta1");
			SetTimerEx("CerrarPuerta",5000,0,"p",puertaGN[1]);
	    }
	}
    return 1;
}

forward CerrarPuerta(puerta); //Cierra puertas scripteadas
public CerrarPuerta(puerta)
{
    if(puerta == lspdpuerta[1]){SetDynamicObjectRot(lspdpuerta[1], 0.0, 90.0, 90.0);}
    else if(puerta == rusopuerta[1]){MoveDynamicObject(rusopuerta[1], 786.46112, -1152.50549, 25.30000,2.0);}
    else if(puerta == rusopuerta[2]){MoveDynamicObject(rusopuerta[2], 659.02692, -1226.87085, 17.29962,2.0);}
    else if(puerta == lcnpuerta[1]){MoveDynamicObject(lcnpuerta[1], 1426.8367, -1885.6631, 15.3539,2.0);}
    else if(puerta == rusopuerta[3]){MoveDynamicObject(rusopuerta[3], 664.98047, -1309.05774, 15.22468,2.0);}
	else if(puerta == peajepuerta[1]){SetDynamicObjectRot(peajepuerta[1], 0.0, -89.38135874, -97.81226081);}
	else if(puerta == peajepuerta[2]){SetDynamicObjectRot(peajepuerta[2], 0.0, -90.24079544, 82.18770174);}
	else if(puerta == peajepuerta[3]){SetDynamicObjectRot(peajepuerta[3], 0.0, 270, 307.99633789063);}
	else if(puerta == peajepuerta[4]){SetDynamicObjectRot(peajepuerta[4], 0.0, 90, 307);}
	else if(puerta == lspdpuerta[2]){MoveDynamicObject(lspdpuerta[2], 1589.0595700,-1638.1992200,14.0300000, 2.0);}
	else if(puerta == lspdpuerta[3]){SetDynamicObjectRot(lspdpuerta[3], 0.0000000,0.0000000,0.0000000);}
	else if(puerta == lspdpuerta[4]){MoveDynamicObject(lspdpuerta[4], 213.8999900,124.9300000,1000.6500200, 2.0);}
	else if(puerta == lspdpuerta[5]){MoveDynamicObject(lspdpuerta[5], 253.1992200,109.8193400,1003.5000000, 2.0);}
	else if(puerta == lspdpuerta[6]){MoveDynamicObject(lspdpuerta[6], 239.5996100,118.3496100,1003.5000000, 2.0);}
	else if(puerta == lspdpuerta[7]){MoveDynamicObject(lspdpuerta[7], 258.89999390,91.50000000,1004.09997559, 2.0);}
	else if(puerta == Celda[1]){MoveDynamicObject(Celda[1], 266.25, 78.46, 1001.29, 3.0);}
	else if(puerta == Celda[2]){MoveDynamicObject(Celda[2], 266.25, 82.95, 1001.29, 3.0);}
	else if(puerta == Celda[3]){MoveDynamicObject(Celda[3], 266.25, 87.46, 1001.29, 3.0);}
	else if(puerta == lspddeposito){MoveDynamicObject(lspddeposito, 1620.6500244,-1861.5996094,15.3000002,2.5);}
	else if(puerta == puertaprision[1]){MoveDynamicObject(puertaprision[1], 2527.2000000,-1294.1300000,1049.9000000,2.0);}
	else if(puerta == puertaprision[2]){MoveDynamicObject(puertaprision[2], 2531.7000000,-1283.8740000,1049.9000000,2.0);}
	else if(puerta == puertaceldaprision[1]){SetDynamicObjectRot(puertaceldaprision[1], 0.0, 0.0, 0.0);}
	else if(puerta == puertaceldaprision[2]){SetDynamicObjectRot(puertaceldaprision[2], 0.0, 0.0, 0.0);}
	else if(puerta == puertaceldaprision[3]){SetDynamicObjectRot(puertaceldaprision[3], 0.0, 0.0, 0.0);}
	else if(puerta == puertaceldaprision[4]){SetDynamicObjectRot(puertaceldaprision[4], 0.0, 0.0, 0.0);}
	else if(puerta == puertaceldaprision[5]){SetDynamicObjectRot(puertaceldaprision[5], 0.0, 0.0, 0.0);}
	else if(puerta == puertaceldaprision[6]){SetDynamicObjectRot(puertaceldaprision[6], 0.0, 0.0, 0.0);}
	else if(puerta == puertaceldaprision[7]){SetDynamicObjectRot(puertaceldaprision[7], 0.0, 0.0, 0.0);}
	else if(puerta == puertaceldaprision[8]){SetDynamicObjectRot(puertaceldaprision[8], 0.0, 0.0, 0.0);}
	else if(puerta == puertaceldaprision[9]){SetDynamicObjectRot(puertaceldaprision[9], 0.0, 0.0, 180.0);}
	else if(puerta == puertaceldaprision[10]){SetDynamicObjectRot(puertaceldaprision[10], 0.0, 0.0, 180.0);}
	else if(puerta == puertaceldaprision[11]){SetDynamicObjectRot(puertaceldaprision[11], 0.0, 0.0, 180.0);}
	else if(puerta == puertaceldaprision[12]){SetDynamicObjectRot(puertaceldaprision[12], 0.0, 0.0, 180.0);}
	else if(puerta == puertaceldaprision[13]){SetDynamicObjectRot(puertaceldaprision[13], 0.0, 0.0, 180.0);}
	else if(puerta == puertaceldaprision[14]){SetDynamicObjectRot(puertaceldaprision[14], 0.0, 0.0, 180.0);}
	else if(puerta == puertaceldaprision[15]){SetDynamicObjectRot(puertaceldaprision[15], 0.0, 0.0, 180.0);}
	else if(puerta == LSNpuerta1){MoveDynamicObject(LSNpuerta1, 781.8000000,-1384.8000000,12.7000000, 2.0);}
	else if(puerta == LSNpuerta2){MoveDynamicObject(LSNpuerta2, 781.8000000,-1330.3000000,12.7000000, 2.0);}
	else if(puerta == gobiernopuerta[1]){MoveDynamicObject(gobiernopuerta[1],371.26, 166.58, 1007.40,4);}
	else if(puerta == gobiernopuerta[2]){MoveDynamicObject(gobiernopuerta[2],365.77, 189.55, 1007.37,4);}
	else if(puerta == mecaDillimore){MoveDynamicObject(mecaDillimore,812.22028, -540.16632, 18.15460,4);}
	else if(puerta == puertaGN[0]){MoveDynamicObject(puertaGN[0],130.88757, 1939.11035, 20.57796,4);}
	else if(puerta == puertaGN[1]){MoveDynamicObject(puertaGN[1],164.37537, 1792.10754, 19.28235,4);}
    return 1;
}

//----------Inventario----------//
forward MostrarInv(playerid); //Muestra inventario al jugador
public MostrarInv(playerid)
{
    ActualizarManos(playerid);
    new dialog[1024], string[128];
	for(new i = 0; i < 8; i++)
	{
		new Bol = PlayerInfo[playerid][pBol][i];
		if(Bol == 0){format(string, sizeof(string), "\n{b0b0b0}#%d: %s (%d)", i+1, ObjetoInfo[Bol][NombreObjeto], PlayerInfo[playerid][pBolCant][i]);}
		else{format(string, sizeof(string), "\n{FFFFFF}#%d: %s {fdfe8b}(%d)", i+1, ObjetoInfo[Bol][NombreObjeto], PlayerInfo[playerid][pBolCant][i]);}
		strcat(dialog, string);
	}
	strcat(dialog, "\n|--------------------------------------|");
	if(PlayerInfo[playerid][pManoDer] == 0)
	{
		format(string, sizeof(string), "\n{b0b0b0}Mano derecha: Nada");
		strcat(dialog, string);
	}
	else
	{
		format(string, sizeof(string), "\n{FFFFFF}Mano derecha: %s {fdfe8b}(%d)", ObjetoInfo[PlayerInfo[playerid][pManoDer]][NombreObjeto], PlayerInfo[playerid][pManoDerCant]);
		strcat(dialog, string);
	}
	if(PlayerInfo[playerid][pManoIzq] == 0)
	{
		format(string, sizeof(string), "\n{b0b0b0}Mano izquierda: Nada");
		strcat(dialog, string);
	}
	else
	{
		format(string, sizeof(string), "\n{FFFFFF}Mano izquierda: %s {fdfe8b}(%d)", ObjetoInfo[PlayerInfo[playerid][pManoIzq]][NombreObjeto], PlayerInfo[playerid][pManoIzqCant]);
		strcat(dialog, string);
	}
	format(string, sizeof(string), "\n{FFFFFF}Intercambiar objetos de mano");
	strcat(dialog, string);
	ShowPlayerDialog(playerid, 2, DIALOG_STYLE_LIST, "Inventario", dialog, "Seleccionar", "Cerrar");
	return 1;
}

forward SacarBolsillo(playerid, id); //Saca un objeto del bolsillo
public SacarBolsillo(playerid, id)
{
    ActualizarManos(playerid);
    new Bol = PlayerInfo[playerid][pBol][id];
	new Cant = PlayerInfo[playerid][pBolCant][id];
    if(Bol == 0){SendClientMessage(playerid, Rojo, "* Bolsillo vacío."); return 1;}
    if(PlayerInfo[playerid][pManoDer] == 0) //Si la mano derecha está libre
    {
   	    if(ObjetoInfo[Bol][IDArma] > 0) //Es un arma
		{
			new arma = ObjetoInfo[Bol][IDArma], municion = Cant;
			if(municion > 0){GivePlayerWeapon(playerid, arma, municion);} //Si tiene munición, dar el arma.
		}
		new string[80];
		PlayerInfo[playerid][pManoDer] = Bol;
		PlayerInfo[playerid][pManoDerCant] = Cant;
		PonerObjeto(playerid, 1, Bol);
		PlayerInfo[playerid][pBol][id] = 0;
		PlayerInfo[playerid][pBolCant][id] = 0;
		format(string, sizeof(string), "* Sacas un/a {fce80c}%s (%d) {FFFFFF}del bolsillo {fce80c}#%d.", ObjetoInfo[Bol][NombreObjeto], Cant, id+1);
		SendClientMessage(playerid, Blanco, string);
        return 1;
	}
	else if(PlayerInfo[playerid][pManoIzq] == 0) //Si la mano izquierda está libre
	{
	    new string[80];
		PlayerInfo[playerid][pManoIzq] = Bol;
		PlayerInfo[playerid][pManoIzqCant] = Cant;
		PonerObjeto(playerid, 2, Bol);
		PlayerInfo[playerid][pBol][id] = 0;
		PlayerInfo[playerid][pBolCant][id] = 0;
		format(string, sizeof(string), "* Sacas un/a {fce80c}%s (%d) {FFFFFF}del bolsillo {fce80c}#%d.", ObjetoInfo[Bol][NombreObjeto], Cant, id+1);
		SendClientMessage(playerid, Blanco, string);
	}
	else
	{
		SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;
	}
	return 1;
}

forward GuardarBolsillo(playerid, mano); //Guardar un objeto en el bolsillo
public GuardarBolsillo(playerid, mano)
{
    ActualizarManos(playerid);
    if(mano == 1)
    {
        if(PlayerInfo[playerid][pManoDer] == 0){SendClientMessage(playerid, Rojo, "* No tienes nada en tu mano derecha."); return 1;}
		new Mano = PlayerInfo[playerid][pManoDer];
		new Cant = PlayerInfo[playerid][pManoDerCant];
		if(ObjetoInfo[Mano][Guardable] == 0 || ObjetoInfo[Mano][Guardable] == 2){SendClientMessage(playerid, Rojo, "* Este objeto es demasiado grande, no puedes guardarlo en el inventario."); return 1;}
        new string[90];
        new BolsilloLibre;
		for(new x = 0; x < 8; x++) //Coloca el objeto en el primer bolsillo libre que encuentra
		{
			if(PlayerInfo[playerid][pBol][x] == 0)
			{
			    PlayerInfo[playerid][pBol][x] = Mano;
			    PlayerInfo[playerid][pBolCant][x] = Cant;
			    RemovePlayerAttachedObject(playerid, 1);
			    if(ObjetoInfo[Mano][IDArma] > 0) //Guarda un arma
		        {
					Cant = GetPlayerAmmo(playerid);
					RemovePlayerWeapon(playerid, ObjetoInfo[Mano][IDArma]);
		        }
			    PlayerInfo[playerid][pManoDer] = 0;
			    PlayerInfo[playerid][pManoDerCant] = 0;
			    format(string, sizeof(string), "* Guardas un/a {fce80c}%s (%d) {FFFFFF}en el bolsillo {fce80c}#%d.", ObjetoInfo[Mano][NombreObjeto], Cant, x+1);
                SendClientMessage(playerid, Blanco, string);
			    BolsilloLibre = 1;
			    return 1;
			}
		}
		if(BolsilloLibre == 0){SendClientMessage(playerid, Rojo, "* Tienes todos los huecos del inventario ocupados."); return 1;}
	}
	else if(mano == 2)
	{
	    if(PlayerInfo[playerid][pManoIzq] == 0){SendClientMessage(playerid, Rojo, "* No tienes nada en tu mano izquierda."); return 1;}
		new Mano = PlayerInfo[playerid][pManoIzq];
		new Cant = PlayerInfo[playerid][pManoIzqCant];
		if(ObjetoInfo[Mano][Guardable] == 0 || ObjetoInfo[Mano][Guardable] == 2){SendClientMessage(playerid, Rojo, "* Este objeto es demasiado grande, no puedes guardarlo en el inventario."); return 1;}
		new string[90];
		new BolsilloLibre;
		for(new x = 0; x < 8; x++) //Coloca el objeto en el primer bolsillo libre que encuentra
		{
			if(PlayerInfo[playerid][pBol][x] == 0)
			{
			    PlayerInfo[playerid][pBol][x] = Mano;
			    PlayerInfo[playerid][pBolCant][x] = Cant;
			    RemovePlayerAttachedObject(playerid, 2);
			    PlayerInfo[playerid][pManoIzq] = 0;
			    PlayerInfo[playerid][pManoIzqCant] = 0;
			    format(string, sizeof(string), "* Guardas un/a {fce80c}%s (%d) {FFFFFF}en el bolsillo {fce80c}#%d.", ObjetoInfo[Mano][NombreObjeto], Cant, x+1);
                SendClientMessage(playerid, Blanco, string);
			    BolsilloLibre = 1;
			    return 1;
			}
		}
		if(BolsilloLibre == 0){SendClientMessage(playerid, Rojo, "* Tienes todos los huecos del inventario ocupados."); return 1;}
	}
	return 1;
}
//----------Cinturón LSPD----------//
forward MostrarCint(playerid); //Muestra cinturón al jugador (PD)
public MostrarCint(playerid)
{
    ActualizarManos(playerid);
    new dialog[1024], string[128];
	for(new i = 0; i < 8; i++)
	{
		new Cint = PlayerInfo[playerid][pCint][i];
		if(Cint == 0){format(string, sizeof(string), "\n{b0b0b0}#%d: %s (%d)", i+1, ObjetoInfo[Cint][NombreObjeto], PlayerInfo[playerid][pCintCant][i]);}
		else{format(string, sizeof(string), "\n{FFFFFF}#%d: %s {fdfe8b}(%d)", i+1, ObjetoInfo[Cint][NombreObjeto], PlayerInfo[playerid][pCintCant][i]);}
		strcat(dialog, string);
	}
	strcat(dialog, "\n|--------------------------------------|");
	if(PlayerInfo[playerid][pManoDer] == 0)
	{
		format(string, sizeof(string), "\n{b0b0b0}Mano derecha: Nada");
		strcat(dialog, string);
	}
	else
	{
		format(string, sizeof(string), "\n{FFFFFF}Mano derecha: %s {fdfe8b}(%d)", ObjetoInfo[PlayerInfo[playerid][pManoDer]][NombreObjeto], PlayerInfo[playerid][pManoDerCant]);
		strcat(dialog, string);
	}
	if(PlayerInfo[playerid][pManoIzq] == 0)
	{
		format(string, sizeof(string), "\n{b0b0b0}Mano izquierda: Nada");
		strcat(dialog, string);
	}
	else
	{
		format(string, sizeof(string), "\n{FFFFFF}Mano izquierda: %s {fdfe8b}(%d)", ObjetoInfo[PlayerInfo[playerid][pManoIzq]][NombreObjeto], PlayerInfo[playerid][pManoIzqCant]);
		strcat(dialog, string);
	}
	format(string, sizeof(string), "\n{FFFFFF}Intercambiar objetos de mano");
	strcat(dialog, string);
	ShowPlayerDialog(playerid, 5, DIALOG_STYLE_LIST, "Cinturón", dialog, "Seleccionar", "Cerrar");
	return 1;
}

forward SacarCint(playerid, id); //Saca un objeto del cinturón (PD)
public SacarCint(playerid, id)
{
    ActualizarManos(playerid);
    new Cint = PlayerInfo[playerid][pCint][id];
	new Cant = PlayerInfo[playerid][pCintCant][id];
    if(Cint == 0){SendClientMessage(playerid, Rojo, "* Espacio vacío."); return 1;}
    if(PlayerInfo[playerid][pManoDer] == 0) //Si la mano derecha está libre
    {
   	    if(ObjetoInfo[Cint][IDArma] > 0) //Es un arma
		{
			new arma = ObjetoInfo[Cint][IDArma], municion = Cant;
			if(municion > 0){GivePlayerWeapon(playerid, arma, municion);} //Si tiene munición, dar el arma.
		}
		new string[80];
		PlayerInfo[playerid][pManoDer] = Cint;
		PlayerInfo[playerid][pManoDerCant] = Cant;
		PonerObjeto(playerid, 1, Cint);
		PlayerInfo[playerid][pCint][id] = 0;
		PlayerInfo[playerid][pCintCant][id] = 0;
		format(string, sizeof(string), "* Sacas un/a {fce80c}%s (%d) {FFFFFF}del cinturón.", ObjetoInfo[Cint][NombreObjeto], Cant);
		SendClientMessage(playerid, Blanco, string);
		if(Cint == 38){SendClientMessage(playerid, Blanco, "Pulsa Y para recargar el táser cuando dispares.");}
        return 1;
	}
	else if(PlayerInfo[playerid][pManoIzq] == 0) //Si la mano izquierda está libre
	{
	    new string[80];
		PlayerInfo[playerid][pManoIzq] = Cint;
		PlayerInfo[playerid][pManoIzqCant] = Cant;
		PonerObjeto(playerid, 2, Cint);
		PlayerInfo[playerid][pCint][id] = 0;
		PlayerInfo[playerid][pCintCant][id] = 0;
		format(string, sizeof(string), "* Sacas un/a {fce80c}%s (%d) {FFFFFF}del cinturón.", ObjetoInfo[Cint][NombreObjeto], Cant);
		SendClientMessage(playerid, Blanco, string);
	}
	else
	{
		SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;
	}
	return 1;
}

forward GuardarCint(playerid, mano); //Guardar un objeto en el cinturón (PD)
public GuardarCint(playerid, mano)
{
    ActualizarManos(playerid);
    if(mano == 1)
    {
        if(PlayerInfo[playerid][pManoDer] == 0){SendClientMessage(playerid, Rojo, "* No tienes nada en tu mano derecha."); return 1;}
		new Mano = PlayerInfo[playerid][pManoDer];
		new Cant = PlayerInfo[playerid][pManoDerCant];
		if(ObjetoInfo[Mano][Guardable] == 0 && Mano != 3){SendClientMessage(playerid, Rojo, "* No puedes guardar este objeto en el cinturón."); return 1;}
        if(ObjetoInfo[Mano][IDArma] > 0) //Guarda un arma
        {
			Cant = GetPlayerAmmo(playerid);
			RemovePlayerWeapon(playerid, ObjetoInfo[Mano][IDArma]);
        }
        new string[80];
        new CintLibre;
		for(new x = 0; x < 8; x++) //Coloca el objeto en el primer slot libre del cinturón
		{
			if(PlayerInfo[playerid][pCint][x] == 0)
			{
			    PlayerInfo[playerid][pCint][x] = Mano;
			    PlayerInfo[playerid][pCintCant][x] = Cant;
			    RemovePlayerAttachedObject(playerid, 1);
			    PlayerInfo[playerid][pManoDer] = 0;
			    PlayerInfo[playerid][pManoDerCant] = 0;
			    format(string, sizeof(string), "* Guardas un/a {fce80c}%s (%d) {FFFFFF}en el cinturón.", ObjetoInfo[Mano][NombreObjeto], Cant);
                SendClientMessage(playerid, Blanco, string);
			    CintLibre = 1;
			    return 1;
			}
		}
		if(CintLibre == 0){SendClientMessage(playerid, Rojo, "* Tienes todos los huecos del cinturón ocupados."); return 1;}
	}
	else if(mano == 2)
	{
	    if(PlayerInfo[playerid][pManoIzq] == 0){SendClientMessage(playerid, Rojo, "* No tienes nada en tu mano izquierda."); return 1;}
		new Mano = PlayerInfo[playerid][pManoIzq];
		new Cant = PlayerInfo[playerid][pManoIzqCant];
		if(ObjetoInfo[Mano][Guardable] == 0 && Mano != 3){SendClientMessage(playerid, Rojo, "* No puedes guardar este objeto en el cinturón."); return 1;}
		new string[80];
		new CintLibre;
		for(new x = 0; x < 8; x++) //Coloca el objeto en el primer bolsillo libre que encuentra
		{
			if(PlayerInfo[playerid][pCint][x] == 0)
			{
			    PlayerInfo[playerid][pCint][x] = Mano;
			    PlayerInfo[playerid][pCintCant][x] = Cant;
			    RemovePlayerAttachedObject(playerid, 2);
			    PlayerInfo[playerid][pManoIzq] = 0;
			    PlayerInfo[playerid][pManoIzqCant] = 0;
			    format(string, sizeof(string), "* Guardas un/a {fce80c}%s (%d) {FFFFFF}en el cinturón.", ObjetoInfo[Mano][NombreObjeto], Cant);
                SendClientMessage(playerid, Blanco, string);
			    CintLibre = 1;
			    return 1;
			}
		}
		if(CintLibre == 0){SendClientMessage(playerid, Rojo, "* Tienes todos los huecos del cinturón ocupados."); return 1;}
	}
	return 1;
}
//--------------------//
//----------Maleteros----------//
forward MostrarMaletero(playerid, vehicleid); //Muestra maletero de un vehículo al jugador
public MostrarMaletero(playerid, vehicleid)
{
    if(VehMaletero[vehicleid] == 0){return 1;}
    ActualizarManos(playerid);
    new dialog[1024], string[128];
    for(new i = 0; i < CarInfo[vehicleid][cMaxMaletero]; i++)
	{
		new Bonnet = CarInfo[vehicleid][cMaletero][i];
		if(Bonnet == 0){format(string, sizeof(string), "\n{b0b0b0}#%d: %s (%d)", i+1, ObjetoInfo[Bonnet][NombreObjeto], CarInfo[vehicleid][cMaleteroCant][i]);}
		else{format(string, sizeof(string), "\n{FFFFFF}#%d: %s {fdfe8b}(%d)", i+1, ObjetoInfo[Bonnet][NombreObjeto], CarInfo[vehicleid][cMaleteroCant][i]);}
		strcat(dialog, string);
	}
 	format(string, sizeof(string), "\n{fce80c}|--------------------------------------|");
	strcat(dialog, string);
	if(PlayerInfo[playerid][pManoDer] == 0)
	{
		format(string, sizeof(string), "\n{b0b0b0}Mano derecha: Nada");
		strcat(dialog, string);
	}
	else
	{
		format(string, sizeof(string), "\n{FFFFFF}Mano derecha: %s {fdfe8b}(%d)", ObjetoInfo[PlayerInfo[playerid][pManoDer]][NombreObjeto], PlayerInfo[playerid][pManoDerCant]);
		strcat(dialog, string);
	}
	if(PlayerInfo[playerid][pManoIzq] == 0)
	{
		format(string, sizeof(string), "\n{b0b0b0}Mano izquierda: Nada");
		strcat(dialog, string);
	}
	else
	{
		format(string, sizeof(string), "\n{FFFFFF}Mano izquierda: %s {fdfe8b}(%d)", ObjetoInfo[PlayerInfo[playerid][pManoIzq]][NombreObjeto], PlayerInfo[playerid][pManoIzqCant]);
		strcat(dialog, string);
	}
	format(string, sizeof(string), "Maletero %s", GetVehicleName(vehicleid));
	ShowPlayerDialog(playerid, 6, DIALOG_STYLE_LIST, string, dialog, "Seleccionar", "Salir");
	return 1;
}

forward SacarMaletero(playerid, vehicleid, id); //Saca un objeto de un maletero
public SacarMaletero(playerid, vehicleid, id)
{
    if(VehMaletero[vehicleid] == 0){return 1;}
    ActualizarManos(playerid);
    new Bonnet = CarInfo[vehicleid][cMaletero][id];
	new Cant = CarInfo[vehicleid][cMaleteroCant][id];
    if(Bonnet == 0){SendClientMessage(playerid, Rojo, "* Espacio vacío."); return 1;}
    if(PlayerInfo[playerid][pManoDer] == 0) //Si la mano derecha está libre
    {
   	    if(ObjetoInfo[Bonnet][IDArma] > 0) //Es un arma
		{
			new arma = ObjetoInfo[Bonnet][IDArma], municion = Cant;
			if(municion > 0){GivePlayerWeapon(playerid, arma, municion);} //Si tiene munición, dar el arma.
		}
		new string[80];
		PlayerInfo[playerid][pManoDer] = Bonnet;
		PlayerInfo[playerid][pManoDerCant] = Cant;
		PonerObjeto(playerid, 1, Bonnet);
		CarInfo[vehicleid][cMaletero][id] = 0;
		CarInfo[vehicleid][cMaleteroCant][id] = 0;
		format(string, sizeof(string), "* Sacas un/a {fce80c}%s (%d) {FFFFFF}del maletero.", ObjetoInfo[Bonnet][NombreObjeto], Cant);
		SendClientMessage(playerid, Blanco, string);
		VehMaleteroPlayer[playerid] = 0;
		if(Bonnet == 38){SendClientMessage(playerid, Blanco, "Pulsa Y para recargar el táser cuando dispares.");}
        return 1;
	}
	else if(PlayerInfo[playerid][pManoIzq] == 0) //Si la mano izquierda está libre
	{
	    new string[80];
		PlayerInfo[playerid][pManoIzq] = Bonnet;
		PlayerInfo[playerid][pManoIzqCant] = Cant;
		PonerObjeto(playerid, 2, Bonnet);
		CarInfo[vehicleid][cMaletero][id] = 0;
		CarInfo[vehicleid][cMaleteroCant][id] = 0;
		format(string, sizeof(string), "* Sacas un/a {fce80c}%s (%d) {FFFFFF}del maletero.", ObjetoInfo[Bonnet][NombreObjeto], Cant);
		SendClientMessage(playerid, Blanco, string);
		VehMaleteroPlayer[playerid] = 0;
	}
	else
	{
		SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;
	}
	return 1;
}

forward GuardarMaletero(playerid, vehicleid, mano); //Guardar un objeto en el maletero de un vehículo
public GuardarMaletero(playerid, vehicleid, mano)
{
    if(VehMaletero[vehicleid] == 0){return 1;}
    ActualizarManos(playerid);
    if(mano == 1)
    {
        if(PlayerInfo[playerid][pManoDer] == 0){SendClientMessage(playerid, Rojo, "* No tienes nada en tu mano derecha."); return 1;}
		new Mano = PlayerInfo[playerid][pManoDer];
		new Cant = PlayerInfo[playerid][pManoDerCant];
        if(ObjetoInfo[Mano][IDArma] > 0) //Guarda un arma
        {
			Cant = GetPlayerAmmo(playerid);
			RemovePlayerWeapon(playerid, ObjetoInfo[Mano][IDArma]);
        }
        new string[80];
        new BonnetLibre;
		for(new x = 0; x < CarInfo[vehicleid][cMaxMaletero]; x++) //Coloca el objeto en el primer slot libre del maletero
		{
			if(CarInfo[vehicleid][cMaletero][x] == 0)
			{
			    CarInfo[vehicleid][cMaletero][x] = Mano;
			    CarInfo[vehicleid][cMaleteroCant][x] = Cant;
			    RemovePlayerAttachedObject(playerid, 1);
			    PlayerInfo[playerid][pManoDer] = 0;
			    PlayerInfo[playerid][pManoDerCant] = 0;
			    format(string, sizeof(string), "* Guardas un/a {fce80c}%s (%d) {FFFFFF}en el maletero.", ObjetoInfo[Mano][NombreObjeto], Cant);
                SendClientMessage(playerid, Blanco, string);
			    BonnetLibre = 1;
			    VehMaleteroPlayer[playerid] = 0;
			    return 1;
			}
		}
		if(BonnetLibre == 0){SendClientMessage(playerid, Rojo, "* Todos los huecos del maletero están ocupados."); return 1;}
	}
	else if(mano == 2)
	{
	    if(PlayerInfo[playerid][pManoIzq] == 0){SendClientMessage(playerid, Rojo, "* No tienes nada en tu mano izquierda."); return 1;}
		new Mano = PlayerInfo[playerid][pManoIzq];
		new Cant = PlayerInfo[playerid][pManoIzqCant];
		new string[80];
		new BonnetLibre;
		for(new x = 0; x < CarInfo[vehicleid][cMaxMaletero]; x++) //Coloca el objeto en el primer slot libre que encuentra
		{
			if(CarInfo[vehicleid][cMaletero][x] == 0)
			{
			    CarInfo[vehicleid][cMaletero][x] = Mano;
			    CarInfo[vehicleid][cMaleteroCant][x] = Cant;
			    RemovePlayerAttachedObject(playerid, 2);
			    PlayerInfo[playerid][pManoIzq] = 0;
			    PlayerInfo[playerid][pManoIzqCant] = 0;
			    format(string, sizeof(string), "* Guardas un/a {fce80c}%s (%d) {FFFFFF}en el maletero.", ObjetoInfo[Mano][NombreObjeto], Cant);
                SendClientMessage(playerid, Blanco, string);
			    BonnetLibre = 1;
			    VehMaleteroPlayer[playerid] = 0;
			    return 1;
			}
		}
		if(BonnetLibre == 0){SendClientMessage(playerid, Rojo, "* Todos los huecos del maletero están ocupados."); return 1;}
	}
	return 1;
}
//--------------------//
//----------Armarios----------//
forward MostrarArmario(playerid, casa); //Muestra armario de una casa al jugador
public MostrarArmario(playerid, casa)
{
    ActualizarManos(playerid);
    new dialog[1024], string[128];
    for(new i = 0; i < 10; i++)
	{
		new ArmarioObj = HouseInfo[casa][hArmario][i];
		if(ArmarioObj == 0){format(string, sizeof(string), "\n{b0b0b0}#%d: %s (%d)", i+1, ObjetoInfo[ArmarioObj][NombreObjeto], HouseInfo[casa][hArmarioCant][i]);}
		else{format(string, sizeof(string), "\n{FFFFFF}#%d: %s {fdfe8b}(%d)", i+1, ObjetoInfo[ArmarioObj][NombreObjeto], HouseInfo[casa][hArmarioCant][i]);}
		strcat(dialog, string);
	}
 	format(string, sizeof(string), "\n{fce80c}|--------------------------------------|");
	strcat(dialog, string);
	if(PlayerInfo[playerid][pManoDer] == 0)
	{
		format(string, sizeof(string), "\n{b0b0b0}Mano derecha: Nada");
		strcat(dialog, string);
	}
	else
	{
		format(string, sizeof(string), "\n{FFFFFF}Mano derecha: %s {fdfe8b}(%d)", ObjetoInfo[PlayerInfo[playerid][pManoDer]][NombreObjeto], PlayerInfo[playerid][pManoDerCant]);
		strcat(dialog, string);
	}
	if(PlayerInfo[playerid][pManoIzq] == 0)
	{
		format(string, sizeof(string), "\n{b0b0b0}Mano izquierda: Nada");
		strcat(dialog, string);
	}
	else
	{
		format(string, sizeof(string), "\n{FFFFFF}Mano izquierda: %s {fdfe8b}(%d)", ObjetoInfo[PlayerInfo[playerid][pManoIzq]][NombreObjeto], PlayerInfo[playerid][pManoIzqCant]);
		strcat(dialog, string);
	}
	ShowPlayerDialog(playerid, 20, DIALOG_STYLE_LIST, "Armario", dialog, "Seleccionar", "Salir");
	return 1;
}

forward SacarArmario(playerid, casa, id); //Saca un objeto de un armario
public SacarArmario(playerid, casa, id)
{
    if(casa == 0){return 1;}
    ActualizarManos(playerid);
    new ArmarioObj = HouseInfo[casa][hArmario][id];
	new Cant = HouseInfo[casa][hArmarioCant][id];
    if(ArmarioObj == 0){SendClientMessage(playerid, Rojo, "* Espacio vacío."); return 1;}
    if(PlayerInfo[playerid][pManoDer] == 0) //Si la mano derecha está libre
    {
   	    if(ObjetoInfo[ArmarioObj][IDArma] > 0) //Es un arma
		{
			new arma = ObjetoInfo[ArmarioObj][IDArma], municion = Cant;
			if(municion > 0){GivePlayerWeapon(playerid, arma, municion);} //Si tiene munición, dar el arma.
		}
		new string[80];
		PlayerInfo[playerid][pManoDer] = ArmarioObj;
		PlayerInfo[playerid][pManoDerCant] = Cant;
		PonerObjeto(playerid, 1, ArmarioObj);
		HouseInfo[casa][hArmario][id] = 0;
		HouseInfo[casa][hArmarioCant][id] = 0;
		format(string, sizeof(string), "* Sacas un/a {fce80c}%s (%d) {FFFFFF}del armario.", ObjetoInfo[ArmarioObj][NombreObjeto], Cant);
		SendClientMessage(playerid, Blanco, string);
		if(ArmarioObj == 38){SendClientMessage(playerid, Blanco, "Pulsa Y para recargar el táser cuando dispares.");}
        return 1;
	}
	else if(PlayerInfo[playerid][pManoIzq] == 0) //Si la mano izquierda está libre
	{
	    new string[80];
		PlayerInfo[playerid][pManoIzq] = ArmarioObj;
		PlayerInfo[playerid][pManoIzqCant] = Cant;
		PonerObjeto(playerid, 2, ArmarioObj);
		HouseInfo[casa][hArmario][id] = 0;
		HouseInfo[casa][hArmarioCant][id] = 0;
		format(string, sizeof(string), "* Sacas un/a {fce80c}%s (%d) {FFFFFF}del armario.", ObjetoInfo[ArmarioObj][NombreObjeto], Cant);
		SendClientMessage(playerid, Blanco, string);
	}
	else
	{
		SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;
	}
	return 1;
}

forward GuardarArmario(playerid, casa, mano); //Guardar un objeto en el armario de una casa
public GuardarArmario(playerid, casa, mano)
{
    if(casa == 0){return 1;}
    ActualizarManos(playerid);
    if(mano == 1)
    {
        if(PlayerInfo[playerid][pManoDer] == 0){SendClientMessage(playerid, Rojo, "* No tienes nada en tu mano derecha."); return 1;}
		new Mano = PlayerInfo[playerid][pManoDer];
		new Cant = PlayerInfo[playerid][pManoDerCant];
        if(ObjetoInfo[Mano][IDArma] > 0) //Guarda un arma
        {
			Cant = GetPlayerAmmo(playerid);
			RemovePlayerWeapon(playerid, ObjetoInfo[Mano][IDArma]);
        }
        new string[80];
        new ArmarioLibre;
		for(new x = 0; x < 10; x++) //Coloca el objeto en el primer slot libre del maletero
		{
			if(HouseInfo[casa][hArmario][x] == 0)
			{
			    HouseInfo[casa][hArmario][x] = Mano;
			    HouseInfo[casa][hArmarioCant][x] = Cant;
			    RemovePlayerAttachedObject(playerid, 1);
			    PlayerInfo[playerid][pManoDer] = 0;
			    PlayerInfo[playerid][pManoDerCant] = 0;
			    format(string, sizeof(string), "* Guardas un/a {fce80c}%s (%d) {FFFFFF}en el armario.", ObjetoInfo[Mano][NombreObjeto], Cant);
                SendClientMessage(playerid, Blanco, string);
			    ArmarioLibre = 1;
			    return 1;
			}
		}
		if(ArmarioLibre == 0){SendClientMessage(playerid, Rojo, "* Todos los huecos del armario están ocupados."); return 1;}
	}
	else if(mano == 2)
	{
	    if(PlayerInfo[playerid][pManoIzq] == 0){SendClientMessage(playerid, Rojo, "* No tienes nada en tu mano izquierda."); return 1;}
		new Mano = PlayerInfo[playerid][pManoIzq];
		new Cant = PlayerInfo[playerid][pManoIzqCant];
		new string[80];
		new ArmarioLibre;
		for(new x = 0; x < 10; x++) //Coloca el objeto en el primer slot libre que encuentra
		{
			if(HouseInfo[casa][hArmario][x] == 0)
			{
   				HouseInfo[casa][hArmario][x] = Mano;
			    HouseInfo[casa][hArmarioCant][x] = Cant;
			    RemovePlayerAttachedObject(playerid, 2);
			    PlayerInfo[playerid][pManoIzq] = 0;
			    PlayerInfo[playerid][pManoIzqCant] = 0;
			    format(string, sizeof(string), "* Guardas un/a {fce80c}%s (%d) {FFFFFF}en el armario.", ObjetoInfo[Mano][NombreObjeto], Cant);
                SendClientMessage(playerid, Blanco, string);
			    ArmarioLibre = 1;
			    return 1;
			}
		}
		if(ArmarioLibre == 0){SendClientMessage(playerid, Rojo, "* Todos los huecos del armario están ocupados."); return 1;}
	}
	return 1;
}
//--------------------//
//----------Almacenes----------//
forward MostrarAlmacen(playerid, nego); //Muestra almacén de un local al jugador
public MostrarAlmacen(playerid, nego)
{
    ActualizarManos(playerid);
    new dialog[1024], string[80];
    for(new i = 0; i < NegoInfo[nego][nMaxAlmacen]; i++)
	{
		new AlmacenObj = NegoInfo[nego][nAlmacen][i];
		if(AlmacenObj == 0){format(string, sizeof(string), "\n{b0b0b0}#%d: %s (%d)", i+1, ObjetoInfo[AlmacenObj][NombreObjeto], NegoInfo[nego][nAlmacenCant][i]);}
		else{format(string, sizeof(string), "\n{FFFFFF}#%d: %s {fdfe8b}(%d)", i+1, ObjetoInfo[AlmacenObj][NombreObjeto], NegoInfo[nego][nAlmacenCant][i]);}
		strcat(dialog, string);
	}
 	format(string, sizeof(string), "\n{fce80c}|--------------------------------------|");
	strcat(dialog, string);
	if(PlayerInfo[playerid][pManoDer] == 0)
	{
		format(string, sizeof(string), "\n{b0b0b0}Mano derecha: Nada");
		strcat(dialog, string);
	}
	else
	{
		format(string, sizeof(string), "\n{FFFFFF}Mano derecha: %s {fdfe8b}(%d)", ObjetoInfo[PlayerInfo[playerid][pManoDer]][NombreObjeto], PlayerInfo[playerid][pManoDerCant]);
		strcat(dialog, string);
	}
	if(PlayerInfo[playerid][pManoIzq] == 0)
	{
		format(string, sizeof(string), "\n{b0b0b0}Mano izquierda: Nada");
		strcat(dialog, string);
	}
	else
	{
		format(string, sizeof(string), "\n{FFFFFF}Mano izquierda: %s {fdfe8b}(%d)", ObjetoInfo[PlayerInfo[playerid][pManoIzq]][NombreObjeto], PlayerInfo[playerid][pManoIzqCant]);
		strcat(dialog, string);
	}
	ShowPlayerDialog(playerid, 21, DIALOG_STYLE_LIST, "Almacén", dialog, "Seleccionar", "Salir");
	return 1;
}

forward SacarAlmacen(playerid, nego, id); //Saca un objeto de un almacén
public SacarAlmacen(playerid, nego, id)
{
    if(nego == 0){return 1;}
    ActualizarManos(playerid);
    new AlmacenObj = NegoInfo[nego][nAlmacen][id];
	new Cant = NegoInfo[nego][nAlmacenCant][id];
    if(AlmacenObj == 0){SendClientMessage(playerid, Rojo, "* Espacio vacío."); return 1;}
    if(PlayerInfo[playerid][pManoDer] == 0) //Si la mano derecha está libre
    {
   	    if(ObjetoInfo[AlmacenObj][IDArma] > 0) //Es un arma
		{
			new arma = ObjetoInfo[AlmacenObj][IDArma], municion = Cant;
			if(municion > 0){GivePlayerWeapon(playerid, arma, municion);} //Si tiene munición, dar el arma.
		}
		new string[80];
		PlayerInfo[playerid][pManoDer] = AlmacenObj;
		PlayerInfo[playerid][pManoDerCant] = Cant;
		PonerObjeto(playerid, 1, AlmacenObj);
		NegoInfo[nego][nAlmacen][id] = 0;
		NegoInfo[nego][nAlmacenCant][id] = 0;
		format(string, sizeof(string), "* Sacas un/a {fce80c}%s (%d) {FFFFFF}del armario.", ObjetoInfo[AlmacenObj][NombreObjeto], Cant);
		SendClientMessage(playerid, Blanco, string);
		if(AlmacenObj == 38){SendClientMessage(playerid, Blanco, "Pulsa Y para recargar el táser cuando dispares.");}
        return 1;
	}
	else if(PlayerInfo[playerid][pManoIzq] == 0) //Si la mano izquierda está libre
	{
	    new string[80];
		PlayerInfo[playerid][pManoIzq] = AlmacenObj;
		PlayerInfo[playerid][pManoIzqCant] = Cant;
		PonerObjeto(playerid, 2, AlmacenObj);
		NegoInfo[nego][nAlmacen][id] = 0;
		NegoInfo[nego][nAlmacenCant][id] = 0;
		format(string, sizeof(string), "* Sacas un/a {fce80c}%s (%d) {FFFFFF}del armario.", ObjetoInfo[AlmacenObj][NombreObjeto], Cant);
		SendClientMessage(playerid, Blanco, string);
	}
	else
	{
		SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;
	}
	return 1;
}

forward GuardarAlmacen(playerid, nego, mano); //Guardar un objeto en el almacén de un local
public GuardarAlmacen(playerid, nego, mano)
{
    if(nego == 0){return 1;}
    ActualizarManos(playerid);
    if(mano == 1)
    {
        if(PlayerInfo[playerid][pManoDer] == 0){SendClientMessage(playerid, Rojo, "* No tienes nada en tu mano derecha."); return 1;}
		new Mano = PlayerInfo[playerid][pManoDer];
		new Cant = PlayerInfo[playerid][pManoDerCant];
        if(ObjetoInfo[Mano][IDArma] > 0) //Guarda un arma
        {
			Cant = GetPlayerAmmo(playerid);
			RemovePlayerWeapon(playerid, ObjetoInfo[Mano][IDArma]);
        }
        new string[80];
        new AlmacenLibre;
		for(new x = 0; x < NegoInfo[nego][nMaxAlmacen]; x++) //Coloca el objeto en el primer slot libre del maletero
		{
			if(NegoInfo[nego][nAlmacen][x] == 0)
			{
			    NegoInfo[nego][nAlmacen][x] = Mano;
			    NegoInfo[nego][nAlmacenCant][x] = Cant;
			    RemovePlayerAttachedObject(playerid, 1);
			    PlayerInfo[playerid][pManoDer] = 0;
			    PlayerInfo[playerid][pManoDerCant] = 0;
			    format(string, sizeof(string), "* Guardas un/a {fce80c}%s (%d) {FFFFFF}en el armario.", ObjetoInfo[Mano][NombreObjeto], Cant);
                SendClientMessage(playerid, Blanco, string);
			    AlmacenLibre = 1;
			    return 1;
			}
		}
		if(AlmacenLibre == 0){SendClientMessage(playerid, Rojo, "* Todos los huecos del armario están ocupados."); return 1;}
	}
	else if(mano == 2)
	{
	    if(PlayerInfo[playerid][pManoIzq] == 0){SendClientMessage(playerid, Rojo, "* No tienes nada en tu mano izquierda."); return 1;}
		new Mano = PlayerInfo[playerid][pManoIzq];
		new Cant = PlayerInfo[playerid][pManoIzqCant];
		new string[80];
		new AlmacenLibre;
		for(new x = 0; x < NegoInfo[nego][nMaxAlmacen]; x++) //Coloca el objeto en el primer slot libre que encuentra
		{
			if(NegoInfo[nego][nAlmacen][x] == 0)
			{
   				NegoInfo[nego][nAlmacen][x] = Mano;
			    NegoInfo[nego][nAlmacenCant][x] = Cant;
			    RemovePlayerAttachedObject(playerid, 2);
			    PlayerInfo[playerid][pManoIzq] = 0;
			    PlayerInfo[playerid][pManoIzqCant] = 0;
			    format(string, sizeof(string), "* Guardas un/a {fce80c}%s (%d) {FFFFFF}en el armario.", ObjetoInfo[Mano][NombreObjeto], Cant);
                SendClientMessage(playerid, Blanco, string);
			    AlmacenLibre = 1;
			    return 1;
			}
		}
		if(AlmacenLibre == 0){SendClientMessage(playerid, Rojo, "* Todos los huecos del armario están ocupados."); return 1;}
	}
	return 1;
}
//--------------------//

forward ActualizarManos(playerid); //Actualiza el inventario
public ActualizarManos(playerid)
{
	new ManoDer = PlayerInfo[playerid][pManoDer], ManoDerCant = PlayerInfo[playerid][pManoDerCant];
	if(ManoDer > 0 && ObjetoInfo[ManoDer][IDArma] > 0) //Actualiza la munición del arma que sujeta
	{
	    PlayerInfo[playerid][pManoDerCant] = GetPlayerWeaponAmmo(playerid, ObjetoInfo[ManoDer][IDArma]);
	}
	if(ManoDer == 0){RemovePlayerAttachedObject(playerid, 1);}

	if(ObjetoInfo[ManoDer][Arrojadizo] == 1 && ManoDerCant <= 0) //Si es arrojadizo y tiene 0 munición se la quita
	{
		PlayerInfo[playerid][pManoDer] = 0;
		PlayerInfo[playerid][pManoDerCant] = 0;
		RemovePlayerAttachedObject(playerid, 1);
	}

	if(ManoDer > 0 && ManoDer < sizeof(ObjetoInfo)) //Si la cantidad del objeto es mayor a su capacidad, setear su cantidad a su capacidad
	{
	    if(ManoDerCant > ObjetoInfo[ManoDer][Capacidad])
	    {
	        if(ObjetoInfo[ManoDer][IDArma] > 0){ResetPlayerWeapons(playerid), GivePlayerWeapon(playerid, ObjetoInfo[ManoDer][IDArma], ObjetoInfo[ManoDer][Capacidad]);}
	        PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[ManoDer][Capacidad];
	    }
	    if(ManoDer < 19 && ManoDerCant <= 0){GivePlayerWeapon(playerid, ObjetoInfo[ManoDer][IDArma], 1);}
	}

	new ManoIzq = PlayerInfo[playerid][pManoIzq], ManoIzqCant = PlayerInfo[playerid][pManoIzqCant];
	if(ManoIzq == 0){RemovePlayerAttachedObject(playerid, 2);}
	if(ManoIzq > 0 && ManoIzq < sizeof(ObjetoInfo))
	{
	    if(ManoIzqCant > ObjetoInfo[ManoIzq][Capacidad])
	    {
	        PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[ManoIzq][Capacidad];
	    }
	    if(ManoIzq < 19 && ManoIzqCant <= 0){PlayerInfo[playerid][pManoIzqCant] = 1;}
	}
	if(ObjetoInfo[ManoIzq][Arrojadizo] == 1 && ManoIzqCant <= 0)
	{
		PlayerInfo[playerid][pManoIzq] = 0;
		PlayerInfo[playerid][pManoIzqCant] = 0;
		RemovePlayerAttachedObject(playerid, 2);
	}
}

forward GetVehicleModelIDFromName(vname[]);//obtiene el ID de un vehiculo dado el nombre
public GetVehicleModelIDFromName(vname[])
{
	for(new i = 0; i < 211; i++)
	{
		if ( strfind(VehicleNames[i], vname, true) != -1 )
			return i + 400;
	}
	return -1;
}


forward CambiarObjetosMano(playerid); //Cambia objetos de mano
public CambiarObjetosMano(playerid)
{
    ActualizarManos(playerid);
    if(PlayerInfo[playerid][pManoDer] == 0 && PlayerInfo[playerid][pManoIzq] == 0){SendClientMessage(playerid, Rojo, "* No tienes nada en ninguna mano."); return 1;}
	new ManoDer = PlayerInfo[playerid][pManoDer], ManoDerCant = PlayerInfo[playerid][pManoDerCant];
	new ManoIzq = PlayerInfo[playerid][pManoIzq], ManoIzqCant = PlayerInfo[playerid][pManoIzqCant];
	if(ManoDer == 0)
	{
	    new string[80];
		RemovePlayerAttachedObject(playerid, 2);
        PonerObjeto(playerid, 1, ManoIzq);
        format(string, sizeof(string), "* Pasas tu {fce80c}%s (%d) {FFFFFF}a tu mano derecha.", ObjetoInfo[ManoIzq][NombreObjeto], ManoIzqCant);
        SendClientMessage(playerid, Blanco, string);
        if(ObjetoInfo[ManoIzq][IDArma] > 0){GivePlayerWeapon(playerid, ObjetoInfo[ManoIzq][IDArma], ManoIzqCant);}
	}
	else if(ManoIzq == 0)
	{
		new string[80];
		PonerObjeto(playerid, 2, ManoDer);
		ResetPlayerWeapons(playerid);
		RemovePlayerAttachedObject(playerid, 1);
		format(string, sizeof(string), "* Pasas tu {fce80c}%s (%d) {FFFFFF}a tu mano izquierda.", ObjetoInfo[ManoDer][NombreObjeto], ManoDerCant);
        SendClientMessage(playerid, Blanco, string);
	}
	else
	{
	    new string[80];
		PonerObjeto(playerid, 1, ManoIzq);
		PonerObjeto(playerid, 2, ManoDer);
		format(string, sizeof(string), "* Pasas tu {fce80c}%s (%d) {FFFFFF}a tu mano derecha y tu {fce80c}%s (%d) {FFFFFF}a tu mano izquierda.", ObjetoInfo[ManoIzq][NombreObjeto], ManoIzqCant, ObjetoInfo[ManoDer][NombreObjeto], ManoDerCant);
        SendClientMessage(playerid, Blanco, string);
        ResetPlayerWeapons(playerid);
        if(ObjetoInfo[ManoIzq][IDArma] > 0){GivePlayerWeapon(playerid, ObjetoInfo[ManoIzq][IDArma], ManoIzqCant);}
	}
    PlayerInfo[playerid][pManoDerCant] = ManoIzqCant, PlayerInfo[playerid][pManoDer] = ManoIzq;
	PlayerInfo[playerid][pManoIzqCant] = ManoDerCant, PlayerInfo[playerid][pManoIzq] = ManoDer;
    return 1;
}

forward RecogerObjeto(playerid);
public RecogerObjeto(playerid)
{
	if(PlayerInfo[playerid][pManoDer] > 0 && PlayerInfo[playerid][pManoIzq] > 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT || PlayerInfo[playerid][pMuerto] > 0){SendClientMessage(playerid, Rojo, "* No puedes usar este comando en esta situación."); return 1;}
	new ObjetoRecogido, string[80];
	for(new i = 0; i < sizeof(DropInfo); i++)
	{
		if(IsPlayerInRangeOfPoint(playerid, 2.0,DropInfo[i][DropPosX],DropInfo[i][DropPosY],DropInfo[i][DropPosZ]))
		{
			if(GetPlayerVirtualWorld(playerid) == DropInfo[i][DropVWorld] && GetPlayerInterior(playerid) == DropInfo[i][DropInterior])
			{
			    if(DropInfo[i][DropID] == 0) break;
			    //if(PlayerInfo[playerid][pServicioPD] > 0 && ObjetoInfo[DropInfo[i][DropID]][IDArma] != 0){SendClientMessage(playerid, Rojo, "* No puedes recoger armas del suelo estando de servicio. Para recoger pruebas utiliza /RecogerPrueba."); return 1;}
			    //if(PlayerInfo[playerid][pServicioPD] > 0 && (DropInfo[i][DropID] >= 39 && DropInfo[i][DropID] <= 53)){SendClientMessage(playerid, Rojo, "* No puedes recoger municiones del suelo estando de servicio. Para recoger pruebas utiliza /RecogerPrueba."); return 1;}
				DestroyDynamicObject(DropObject[i]);
				if(PlayerInfo[playerid][pManoDer] == 0)
				{
				    PlayerInfo[playerid][pManoDer] = DropInfo[i][DropID], PlayerInfo[playerid][pManoDerCant] = DropInfo[i][DropCantidad];
					if(ObjetoInfo[DropInfo[i][DropID]][IDArma] > 0 && DropInfo[i][DropCantidad] > 0){GivePlayerWeapon(playerid,ObjetoInfo[DropInfo[i][DropID]][IDArma],DropInfo[i][DropCantidad]);}
					PonerObjeto(playerid, 1, DropInfo[i][DropID]);
				}
				else if(PlayerInfo[playerid][pManoIzq] == 0)
				{
				    PlayerInfo[playerid][pManoIzq] = DropInfo[i][DropID], PlayerInfo[playerid][pManoIzqCant] = DropInfo[i][DropCantidad];
					PonerObjeto(playerid, 2, DropInfo[i][DropID]);
				}
				format(string, sizeof(string), "* Recoges un/a {fce80c}%s (%d) {FFFFFF}del suelo.", ObjetoInfo[DropInfo[i][DropID]][NombreObjeto], DropInfo[i][DropCantidad]);
				SendClientMessage(playerid, Blanco, string);
				DropInfo[i][DropPosX] = 0.0;
				DropInfo[i][DropPosY] = 0.0;
				DropInfo[i][DropPosZ] = 0.0;
				DropInfo[i][DropID] = 0;
				DropInfo[i][DropCantidad] = 0;
				Streamer_Update(playerid);
				ObjetoRecogido = 1;
				break;
			}
		}
	}
	if(ObjetoRecogido == 0){SendClientMessage(playerid, Rojo, "* No estás cerca de ningún objeto."); return 1;}
	return 1;
}

stock PonerObjeto(playerid, slot, objetoid) //Coloca un objeto en la mano
{
    if(slot == 1)
	{
	    if(objetoid == 1) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6); //Armas
	    if(objetoid == 2) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 3) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 4) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 5) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 6) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 7) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 8) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 9) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 10) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 11) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 12) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 13) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 14) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 15) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 16) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 17) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 18) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 19) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 20) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 21) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 22) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 23) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 24) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 25) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 26) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 27) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 28) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 29) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 30) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 31) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 32) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 33) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 34) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 35) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 36) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 37) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);
	    if(objetoid == 38) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);


        if(objetoid >= 39 && objetoid <= 43) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,0.065000,0.029999,0.016999,10.800001,-103.099998,0.000000,0.649999,0.910999,0.476999); //Cargador pequeño
        if(objetoid >= 44 && objetoid <= 46) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,0.064999,0.035998,0.018999,1.599980,-105.499984,1.800009,0.649999,0.910999,0.476999); //Cargador grande
        if(objetoid >= 47 && objetoid <= 49) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,0.047999,0.058999,0.016999,100.800003,-103.099998,0.000000,0.482998,0.710998,0.414999); //Munición pequeña
	    if(objetoid == 50) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,0.037999,0.066998,0.016999,100.800003,8.199994,-0.999999,0.484999,0.847999,0.408999); //Munición escopeta
		if(objetoid >= 51 && objetoid <= 53) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,0.045999,0.074998,0.016999,100.800003,-3.899986,0.000000,0.445999,0.910999,0.476999); //Munición grande

		if(objetoid == 54)SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6); //Granada cegadora

	    if(objetoid >= 55 && objetoid <= 57) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,0.204000,0.029998,0.016999,10.800001,-103.099998,0.000000,0.839000,0.423999,0.645000); //Doritos, patatas y nachos
	    if(objetoid == 58 ||  objetoid == 59) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,0.043999,0.029998,0.016999,10.800001,-13.199980,1.000000,1.000000,1.000000,1.000000); //Sprunk y fanta
	    if(objetoid == 60) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,-0.031000,-0.030001,0.060999,10.800001,17.200008,0.000000,1.000000,1.000000,1.000000); //Botella agua
	    if(objetoid == 61) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,0.042000,0.055999,-0.085000,10.800001,1.100013,0.000000,1.000000,1.000000,1.000000); //Botella cerveza
	    if(objetoid == 62) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,0.064999,0.029998,0.016999,10.800001,-30.299997,0.000000,1.000000,1.000000,1.000000); //Copa de vino
	    if(objetoid == 63 || objetoid == 64) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,0.059999,0.029998,0.016999,10.800001,-31.300012,0.000000,1.000000,1.000000,1.000000); //Vaso de whisky y ron
	    if(objetoid == 65) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,0.088999,0.029998,0.045999,-43.799991,-24.899995,-10.599997,1.000000,1.000000,0.833999); //Hamburguesa
	    if(objetoid == 66) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,0.054000,0.029998,0.016999,106.699981,-11.200008,-105.300056,1.000000,1.000000,1.000000); //Burrito
	    if(objetoid == 67) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,0.296000,0.126998,0.016999,103.400001,0.199999,0.000000,1.000000,1.000000,1.000000); //Pizza
	    if(objetoid == 68) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,-0.005000,-0.010000,-0.024000,10.800001,1.499994,0.000000,1.000000,1.000000,1.000000); //Móvil
	    if(objetoid == 69) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,0.117999,0.009998,-0.041000,10.800001,-103.099998,0.000000,1.000000,1.000000,1.000000); //Mechero
	    if(objetoid == 70) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,0.070999,0.032999,0.025999,10.800001,89.800041,0.000000,1.000000,1.000000,1.000000); //Cigarrillos
	    if(objetoid == 71) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,0.035000,0.059999,-0.076000,10.800001,5.399998,0.000000,1.000000,1.000000,1.000000); //Botella ron
	    if(objetoid == 72) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,0.037000,0.072998,-0.065001,10.800001,0.100004,0.000000,1.000000,1.000000,1.000000); //Botella whisky
	    if(objetoid == 73) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,0.036000,0.034998,0.064998,10.800001,-0.399997,0.000000,1.000000,1.000000,1.000000); //Botella vino
	    if(objetoid == 74) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,0.079999,0.020998,0.016999,10.800001,164.000000,0.000000,1.000000,1.000000,1.000000); //Destornillador

	    if(objetoid >= 75 && objetoid <= 79) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,0.092000,0.147998,-0.012001,-108.800010,178.099975,95.300003,0.703999,0.758000,0.787999); //Fardos droga
	    if(objetoid >= 80 && objetoid <= 84) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,0.117999,0.009998,-0.041000,10.800001,-103.099998,0.000000,1.000000,1.000000,1.000000); //Bolsitas droga
	    if(objetoid == 85) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,0.117999,0.009998,-0.041000,10.800001,-103.099998,0.000000,1.000000,1.000000,1.000000); //Semillas maria y coca
	    if(objetoid == 86) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,-0.010000,0.066998,0.096998,10.800001,-3.799994,0.000000,0.533999,0.475000,0.656000); //Planta maria

	    if(objetoid >= 87 && objetoid <= 101) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,-0.034000,-0.010001,-0.006000,-2.199992,76.499961,179.900070,1.038000,1.230000,1.000000); //Relojes
	    if(objetoid >= 102 && objetoid <= 124) SetPlayerAttachedObject(playerid,1,ObjetoInfo[objetoid][ModeloObjeto],6,0.152999,0.106998,0.034999,-85.699996,179.999969,78.399993,1.038999,0.752000,0.854999); //Cajas de armamento
	    if(objetoid == 125) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6,0.092000,0.147998,-0.012001,-108.800010,178.099975,95.300003,0.703999,0.758000,0.787999);//Gps
	    if(objetoid == 126) SetPlayerAttachedObject(playerid, 1, ObjetoInfo[objetoid][ModeloObjeto], 6);// Boombox
	}
	if(slot == 2)
	{
	    if(objetoid == 1) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.024999,0.000000,-0.005999,0.000000,0.000000,0.000000,1.000000,1.000000,1.000000); //Armas
        if(objetoid == 2) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,-0.040000,0.067000,-0.003000,-29.899999,152.000000,176.000030,1.000000,1.000000,1.000000);
	    if(objetoid == 3) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.000000,0.059999,-0.022000,161.599990,10.700001,5.800002,1.000000,1.000000,1.000000);
	    if(objetoid == 4) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.180999,0.000000,0.017999,0.000000,177.800018,-8.799996,1.000000,1.000000,1.000000);
	    if(objetoid == 5) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.135999,0.030999,0.053999,-17.900001,153.800018,0.000000,1.000000,1.000000,1.000000);
	    if(objetoid == 6) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.041999,0.051999,-0.080000,-27.899986,155.800018,-167.499938,1.000000,1.000000,1.000000);
	    if(objetoid == 7) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.156999,0.092000,0.071999,-25.099998,172.899963,-19.899995,1.000000,1.000000,1.000000);
	    if(objetoid == 8) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.058000,0.008000,-0.109000,-27.999998,155.100036,172.699966,1.000000,1.000000,1.000000);
	    if(objetoid == 9) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.000000,0.078999,-0.009000,155.599990,7.200000,4.800000,1.000000,1.000000,1.000000);
	    if(objetoid == 10) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.015000,0.041000,-0.068000,-25.599971,162.900054,-175.300018,1.000000,1.000000,1.000000);
        if(objetoid == 11) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.023999,0.052999,-0.041999,157.899978,2.499999,0.000000,1.000000,1.000000,1.000000);
	    if(objetoid == 12) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,-0.002000,0.074000,0.001000,151.200042,23.000000,-9.100001,1.000000,1.000000,1.000000);
	    if(objetoid == 13) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.017999,0.003999,-0.047999,168.200012,18.300003,-27.900005,1.000000,1.000000,1.000000);
        if(objetoid == 14) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.176000,0.000000,-0.011000,-23.399999,160.599990,-6.399995,1.000000,1.000000,1.000000);
	    if(objetoid == 15) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.008999,-0.018999,-0.047999,-33.199996,159.900085,156.399902,1.000000,1.000000,1.000000);
	    if(objetoid == 16) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.019000,0.047000,-0.021000,164.499984,0.000000,-17.599994,1.000000,1.000000,1.000000);
	    if(objetoid == 17) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.034000,0.063000,-0.037999,164.500000,14.599996,-4.700009,1.000000,1.000000,1.000000);
	    if(objetoid == 18) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.022999,0.039000,-0.125999,165.700012,0.000000,0.000000,1.000000,1.000000,1.000000);
	    if(objetoid == 19) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.033000,0.057999,-0.017999,146.299987,14.999998,-4.700002,1.000000,1.000000,1.000000);
	    if(objetoid == 20) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.050999,0.038000,-0.021999,144.500015,9.100000,-11.600002,1.000000,1.000000,1.000000);
	    if(objetoid == 21) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.041000,0.038000,-0.026999,173.899963,0.000000,1.799999,1.000000,1.000000,1.000000);
	    if(objetoid == 22) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.000000,0.089000,0.000000,153.500015,10.000001,4.800000,1.000000,1.000000,1.000000);
        if(objetoid == 23) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.040000,0.026000,0.011000,-156.300003,0.000000,2.600000,1.000000,1.000000,1.000000);
	    if(objetoid == 24) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.023000,0.048999,-0.013000,172.200012,14.400005,0.599999,1.000000,1.000000,1.000000);
	    if(objetoid == 25) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.024999,0.048000,-0.012000,172.000076,-3.099988,-2.099991,1.000000,1.000000,1.000000);
	    if(objetoid == 26) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.005000,0.065000,-0.016000,162.399963,9.599999,8.400000,1.000000,1.000000,1.000000);
	    if(objetoid == 27) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.057999,0.076999,-0.023999,162.799942,14.399999,0.000000,1.000000,1.000000,1.000000);
	    if(objetoid == 28) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.043999,0.028999,-0.038000,167.499969,15.999998,0.000000,1.000000,1.000000,1.000000);
	    if(objetoid == 29) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.048000,0.049999,0.011000,-172.600006,-2.299995,5.999999,1.000000,1.000000,1.000000);
        if(objetoid == 30) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,-0.043000,0.065999,-0.044999,167.499954,17.399999,0.000000,1.000000,1.000000,1.000000);
        if(objetoid == 31) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,-0.018000,0.085000,0.033000,167.399978,12.200000,-0.299997,1.000000,1.000000,1.000000);
        if(objetoid == 32) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,-0.022000,0.087999,0.006999,154.899978,20.799997,-0.300001,1.000000,1.000000,1.000000);
        if(objetoid == 33) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.047000,0.057000,-0.038000,133.699981,17.199989,2.099999,1.000000,1.000000,1.000000);
        if(objetoid == 34) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.036999,0.026999,-0.079999,152.899993,14.900004,-0.400000,1.000000,1.000000,1.000000);
        if(objetoid == 35) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.004000,0.061999,-0.063999,126.599990,33.099998,2.200000,1.000000,1.000000,1.000000);
        if(objetoid == 36) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.018000,0.062999,0.074999,-109.400039,0.000000,0.000000,1.000000,1.000000,1.000000);
        if(objetoid == 37) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.018000,0.062999,0.074999,-109.400039,0.000000,0.000000,1.000000,1.000000,1.000000);
        if(objetoid == 38) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.050999,0.038000,-0.021999,144.500015,9.100000,-11.600002,1.000000,1.000000,1.000000);

		if(objetoid >= 39 && objetoid <= 43) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.092000,0.038000,-0.026000,-37.200008,82.199996,3.499996,0.649999,0.910999,0.476999); //Cargador pequeño
        if(objetoid >= 44 && objetoid <= 46) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.092000,0.038000,-0.026000,-37.200008,82.199996,3.499996,0.649999,0.910999,0.476999); //Cargador grande
        if(objetoid >= 47 && objetoid <= 49) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.067999,0.053999,-0.006999,-110.800018,-20.899999,3.499995,0.482998,0.710998,0.414999); //Munición pequeña
	    if(objetoid == 50) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.129999,0.076999,-0.022999,-108.799964,163.299972,3.499995,0.484999,0.847999,0.408999); //Munición escopeta
		if(objetoid >= 51 && objetoid <= 53) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.145999,0.071999,-0.008000,-107.200004,172.799987,3.499995,0.445999,0.910999,0.476999); //Munición grande

		if(objetoid == 54) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.034000,0.063000,-0.037999,164.500000,14.599996,-4.700009,1.000000,1.000000,1.000000); //Granada cegadora

		if(objetoid >= 55 && objetoid <= 57) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.216999,0.037999,-0.002999,-13.699973,-98.399971,3.000000,0.839000,0.423999,0.645000); //Doritos, patatas y nachos
		if(objetoid == 58 || objetoid == 59) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.072000,0.036999,-0.026000,-11.800009,175.100036,3.000000,1.000000,1.000000,1.000000); //Sprunk y fanta
		if(objetoid == 60) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.134000,0.001999,-0.122000,-37.200008,-149.699951,-37.999996,1.000000,1.000000,1.000000); //Botella agua
		if(objetoid == 61) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.092000,0.114000,0.069000,-37.200008,-173.000015,3.499995,1.000000,1.000000,1.000000); //Botella cerveza
		if(objetoid == 62) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.077000,0.037999,-0.026000,-37.200008,-174.300003,3.499995,1.000000,1.000000,1.000000); //Copa vino
		if(objetoid == 63 || objetoid == 64) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.081000,0.037999,-0.012999,-37.200008,172.500061,3.499995,1.000000,1.000000,1.000000); //Vaso de whisky y ron
		if(objetoid == 65) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.125999,0.037999,-0.006999,-143.300033,-3.300006,144.699966,1.000000,1.000000,0.833999); //Hamburguesa
		if(objetoid == 66) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.092000,0.037999,-0.026000,-37.200008,82.199996,-175.000000,1.000000,1.000000,1.000000); //Burrito
		if(objetoid == 67) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.293000,0.108000,-0.049999,-116.499977,170.400054,3.799995,1.000000,1.000000,1.000000); //Pizza
		if(objetoid == 68) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.144999,-0.009999,0.027000,-23.500009,-173.399993,3.499995,1.000000,1.000000,1.000000); //Móvil
		if(objetoid == 69) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.036000,0.037999,0.054999,-37.200008,82.199996,3.499995,1.000000,1.000000,1.000000); //Mechero
		if(objetoid == 70) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.092000,0.038000,-0.026000,-37.200008,82.199996,3.499996,1.000000,1.000000,1.000000); //Cigarrillos
		if(objetoid == 71) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.092000,0.096000,0.066999,-25.500007,179.099990,3.499995,1.000000,1.000000,1.000000); //Botella de ron
		if(objetoid == 72) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.092000,0.092000,0.045000,-37.200008,-165.699996,3.499995,1.000000,1.000000,1.000000); //Botella de whisky
		if(objetoid == 73) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.072000,0.037999,-0.038000,-15.100006,-158.999984,3.499995,1.000000,1.000000,1.000000); //Botella de vino
		if(objetoid == 74) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.092000,0.037999,-0.026000,-37.200008,-18.400012,3.499995,1.000000,1.000000,1.000000); //Destornillador

		if(objetoid >= 75 && objetoid <= 79) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.150000,0.002999,-0.026000,-117.300010,-4.899999,81.599998,0.703999,0.758000,0.787999); //Fardos droga
		if(objetoid >= 80 && objetoid <= 84) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.036000,0.037999,0.054999,-37.200008,82.199996,3.499995,1.000000,1.000000,1.000000); //Bolsitas droga
		if(objetoid == 85) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.036000,0.037999,0.054999,-37.200008,82.199996,3.499995,1.000000,1.000000,1.000000); //Semillas maria y coca
		if(objetoid == 86) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.146999,0.037999,-0.098000,-37.200008,170.300018,3.499995,0.533999,0.475000,0.656000); //Planta maria

		if(objetoid >= 87 && objetoid <= 101) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,-0.014999,-0.005999,-0.018000,-35.700012,82.199996,-68.900001,1.038000,1.230000,1.000000); //Relojes
		if(objetoid >= 102 && objetoid <= 124) SetPlayerAttachedObject(playerid,2,ObjetoInfo[objetoid][ModeloObjeto],5,0.171999,0.079999,-0.111999,-124.399993,166.300018,-93.599990,1.038999,0.752000,0.854999); //Cajas de armamento
	    if(objetoid == 125) SetPlayerAttachedObject(playerid, 2, ObjetoInfo[objetoid][ModeloObjeto], 6,0.092000,0.147998,-0.012001,-108.800010,178.099975,95.300003,0.703999,0.758000,0.787999);//Gps
	    if(objetoid == 126) SetPlayerAttachedObject(playerid, 2, ObjetoInfo[objetoid][ModeloObjeto], 6);// Boombox
	}
	if(slot == 3)
	{
        if(ObjetoInfo[objetoid][IDArma] == 9){SetPlayerAttachedObject(playerid,3,ObjetoInfo[objetoid][ModeloObjeto],1,  -0.385000, -0.136000, 0.065999, 170.800003, 3.999998, 5.099969, 1.000000);}
		if(ObjetoInfo[objetoid][IDArma] < 16){SetPlayerAttachedObject(playerid,3,ObjetoInfo[objetoid][ModeloObjeto],1, -0.1061, -0.1544, -0.0411, 0.0000, 60.0000, 60.0000, 1.0000);}
		if(ObjetoInfo[objetoid][IDArma] >= 16){SetPlayerAttachedObject(playerid,3,ObjetoInfo[objetoid][ModeloObjeto],1, -0.1061, -0.1544, -0.0411, 0.0000, 0.0000, 0.0000, 1.0000);}
	}
	return 1;
}

forward ConnectMySQL(); //Conectar a la base mysql NOTA: DEBE EXISTIR EL USUARIO 'Plantilla' PARA CONECTAR A LA BASE DE DATOS
public ConnectMySQL()
{
    printf("*- Conectando Base de Datos '%s'", SQL_DB);
    mysql_debug(1);
    new value = mysql_connect(SQL_HOST, SQL_USER, SQL_DB, SQL_PASS);
    //mysql_query(1, "SELECT Nombre FROM usuarios WHERE Nombre = 'Plantilla'"); //Comprueba si se ha conectado correctamente
    //mysql_store_result();
    //new value;
	//value = mysql_num_rows();
///	mysql_free_result();
	if(value != 0)
	{
	    printf("*- Conectado a '%s'", SQL_DB);
	    ConectadoBaseDatos = 1;
	}
	else
	{
		printf("ERROR");
	    printf("ERROR");
	    printf("ERROR");
	    printf("ERROR");
	    printf("ERROR");
	    printf("ERROR");
	    printf("[MYSQL]: >>ERROR<< No se pudo conectar a '%s'", SQL_DB);
	    printf("ERROR");
	    printf("ERROR");
	    printf("ERROR");
	    printf("ERROR");
	    printf("ERROR");
	    printf("ERROR");
	    ConectadoBaseDatos = 0;
	}
	return 1;
}

CheckAccountExists(account[])
{
	new string[256];
    format(string, sizeof(string), "SELECT Nombre FROM usuarios WHERE Nombre = '%s'", account);
    mysql_query(1, string);

	mysql_store_result();

	new value;
	value = mysql_num_rows();
	mysql_free_result();
	return value;
}

stock RemovePlayerWeapon(playerid, weaponid) //Quitar un arma de un jugador
{
    if(!IsPlayerConnected(playerid) || weaponid < 0 || weaponid > 50)
        return;
    new saveweapon[13], saveammo[13];
    for(new slot = 0; slot < 13; slot++)
        GetPlayerWeaponData(playerid, slot, saveweapon[slot], saveammo[slot]);
    ResetPlayerWeapons(playerid);
    for(new slot; slot < 13; slot++)
    {
        if(saveweapon[slot] == weaponid || saveammo[slot] == 0)
            continue;
        GivePlayerWeapon(playerid, saveweapon[slot], saveammo[slot]);
    }
    GivePlayerWeapon(playerid, 0, 1);
}

stock GetPlayerWeaponAmmo(playerid, weapon) //Retorna la municion de un arma
{
    new wdata[13][2];
    for(new i; i < 13; i++)
    {
        GetPlayerWeaponData(playerid, i, wdata[i][0], wdata[i][1]);
        if(wdata[i][0] == weapon)return wdata[i][1];
    }
    return 0;
}

forward TSonidoDisparo(playerid); //Sistema sonido de armas
public TSonidoDisparo(playerid)
{
    TimerSonidoDisparo[playerid] = 0;
}

forward EncenderMotor(playerid); //Sistema arrancado de vehiculos
public EncenderMotor(playerid)
{
	new car = GetPlayerVehicleID(playerid);
	new string[60];
	format(string, sizeof(string), "* %s enciende el motor de su vehículo.", GetPlayerNameRP(playerid));
	ProxDetector(20.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
	new engine,lights,alarm,doors,bonnet,boot,objective;
	GetVehicleParamsEx(car,engine,lights,alarm,doors,bonnet,boot,objective);
	SetVehicleParamsEx(car,1,lights,alarm,doors,bonnet,boot,objective);
	EncendiendoMotor[playerid] = 0;
}

stock GetDistance(Float:x1, Float:y1, Float:z1, Float:x2, Float:y2, Float:z2) //Calcula distancia entre dos puntos
{
	return floatround(floatsqroot(((x1 - x2) * (x1 - x2)) + ((y1 - y2) * (y1 - y2)) + ((z1 - z2) * (z1 - z2))));
}

forward Congelar(playerid); //Congelar al jugador
public Congelar(playerid)
{
	TogglePlayerControllable(playerid, 0);
    return 1;
}

forward Descongelar(playerid); //Descongelar al jugador
public Descongelar(playerid)
{
	TogglePlayerControllable(playerid, 1);
    return 1;
}

forward Destasear(playerid); //Destasea al jugador
public Destasear(playerid)
{
    if(Taseado[playerid] > 0){Taseado[playerid] = 0;}
    TogglePlayerControllable(playerid, 1);
    return 1;
}

forward LlenarDeposito(playerid); //Timer para llenar el depósito
public LlenarDeposito(playerid)
{
    LlenandoDeposito[playerid] = 0;
	GameTextForPlayer(playerid, "~r~Deposito llenado", 3000, 5);
	TogglePlayerControllable(playerid, 1);
    return 1;
}

forward Muerto(playerid); //Sistema de muerte (en shock)
public Muerto(playerid)
{
	if(PlayerInfo[playerid][pMuerto] > 0)
	{
	    Muerte[playerid] = PlayerInfo[playerid][pMuerto];
		PlayerInfo[playerid][pMuerto] = 0;
		SpawnPlayer(playerid);
		if(PlayerInfo[playerid][pEncarcelado] == 0)
		{
	  		SetPlayerVirtualWorld(playerid, 0);
		    SetPlayerInterior(playerid, 0);
		    if(PlayerInfo[playerid][pExp] < 0){PlayerInfo[playerid][pExp] = 0;}
		    GetPlayerLevel(playerid);
		    SendClientMessage(playerid, Rosa, "Quedaste inconsciente. Una ambulancia te llevó al hospital.");
		}
		if(PlayerInfo[playerid][pEncarcelado] == 1 || PlayerInfo[playerid][pEncarcelado] == 2)
		{
			SendClientMessage(playerid, Rosa, "Quedaste inconsciente debido a las heridas.");
		}
	}
	return 1;
}

forward MuertoFlash(playerid); //Luz al morir
public MuertoFlash(playerid)
{
	if(PlayerInfo[playerid][pMuerto] > 0)
	{
	    RemovePlayerColorFade(playerid);
        FlashPlayerScreen(playerid, 0xFFFFFFFF, 1, 1);
	}
	return 1;
}

stock GetWeaponModel(weaponid) //Modelo de un arma
{
        switch(weaponid)
        {
            case 1:
                return 331;

                case 2..8:
                    return weaponid+331;

        case 9:
                    return 341;

                case 10..15:
                        return weaponid+311;

                case 16..18:
                    return weaponid+326;

                case 22..29:
                    return weaponid+324;

                case 30,31:
                    return weaponid+325;

                case 32:
                    return 372;

                case 33..45:
                    return weaponid+324;

                case 46:
                    return 371;
        }
        return 0;
}

forward RecargarTaser(playerid); //Recarga el táser (PD)
public RecargarTaser(playerid)
{
	TaserRecarga[playerid] = 0;
	return 1;
}

stock PonerUniformeFaccion(playerid) //Poner skin de uniforme de facción
{
	if(PlayerInfo[playerid][pFaccion] == 1) //SetPlayerColor(playerid, TEAM_BLUE_COLOR);
	{
		switch(PlayerInfo[playerid][pServicioPD])
		{
			case 1: SetPlayerSkin(playerid, 71);
			case 2: SetPlayerSkin(playerid, 284);
			case 3: SetPlayerSkin(playerid, 280);
			case 4: SetPlayerSkin(playerid, 281);
			case 5: SetPlayerSkin(playerid, 267);
			case 6: SetPlayerSkin(playerid, 266);
			case 7: SetPlayerSkin(playerid, 265);
			case 8: SetPlayerSkin(playerid, PlayerInfo[playerid][pSkin]);
			case 9: SetPlayerSkin(playerid, 285);
			case 10: SetPlayerSkin(playerid, 283);
			case 11: SetPlayerSkin(playerid, 288);
			case 12: SetPlayerSkin(playerid, 211);
			case 13: SetPlayerSkin(playerid, 282);
		}
	}
	if(PlayerInfo[playerid][pFaccion] == 2)
	if(PlayerInfo[playerid][pServicioLSMD] == 1) //SetPlayerColor(playerid, TEAM_MED_COLOR);
	{
			if(PlayerInfo[playerid][pRango] == 1 && PlayerInfo[playerid][pServicioLSMD] == 1) { SetPlayerSkin(playerid, 276);}
			if(PlayerInfo[playerid][pRango] == 2 && PlayerInfo[playerid][pServicioLSMD] == 1) { SetPlayerSkin(playerid, 276);}
			if(PlayerInfo[playerid][pRango] == 3 && PlayerInfo[playerid][pServicioLSMD] == 1) { SetPlayerSkin(playerid, 275);}
			if(PlayerInfo[playerid][pRango] == 4 && PlayerInfo[playerid][pServicioLSMD] == 1) { SetPlayerSkin(playerid, 275);}
			if(PlayerInfo[playerid][pRango] == 5 && PlayerInfo[playerid][pServicioLSMD] == 1) { SetPlayerSkin(playerid, 70);}
			if(PlayerInfo[playerid][pRango] == 6 && PlayerInfo[playerid][pServicioLSMD] == 1) { SetPlayerSkin(playerid, 240);}
			if(PlayerInfo[playerid][pSexo]  == 2 && PlayerInfo[playerid][pRango] < 6 && PlayerInfo[playerid][pServicioLSMD] == 1) { SetPlayerSkin(playerid, 308);}
	}
	if(PlayerInfo[playerid][pFaccion] == 5)
	if(PlayerInfo[playerid][pServicioWCST] == 1)
	{
			if(PlayerInfo[playerid][pRango] == 1 && PlayerInfo[playerid][pServicioWCST] == 1) { SetPlayerSkin(playerid, 8);}
			if(PlayerInfo[playerid][pRango] == 2 && PlayerInfo[playerid][pServicioWCST] == 1) { SetPlayerSkin(playerid, 50);}
			if(PlayerInfo[playerid][pRango] == 3 && PlayerInfo[playerid][pServicioWCST] == 1) { SetPlayerSkin(playerid, 16);}
			if(PlayerInfo[playerid][pRango] == 4 && PlayerInfo[playerid][pServicioWCST] == 1) { SetPlayerSkin(playerid, 268);}
			if(PlayerInfo[playerid][pRango] == 5 && PlayerInfo[playerid][pServicioWCST] == 1) { SetPlayerSkin(playerid, 42);}
			if(PlayerInfo[playerid][pSexo]  == 2 && PlayerInfo[playerid][pRango] < 5 && PlayerInfo[playerid][pServicioWCST] == 1) { SetPlayerSkin(playerid, 69);}
	}
	if(PlayerInfo[playerid][pFaccion] == 4)
	if(PlayerInfo[playerid][pServicioCNN] == 1)
	{
			if(PlayerInfo[playerid][pRango] == 1 && PlayerInfo[playerid][pServicioCNN] == 1) { SetPlayerSkin(playerid, 188);}
			if(PlayerInfo[playerid][pRango] == 2 && PlayerInfo[playerid][pServicioCNN] == 1) { SetPlayerSkin(playerid, 20);}
			if(PlayerInfo[playerid][pRango] == 3 && PlayerInfo[playerid][pServicioCNN] == 1) { SetPlayerSkin(playerid, 46);}
			if(PlayerInfo[playerid][pRango] == 4 && PlayerInfo[playerid][pServicioCNN] == 1) { SetPlayerSkin(playerid, 70);}
			if(PlayerInfo[playerid][pRango] == 5 && PlayerInfo[playerid][pServicioCNN] == 1) { SetPlayerSkin(playerid, 290);}
			if(PlayerInfo[playerid][pSexo]  == 2 && PlayerInfo[playerid][pRango] < 5 && PlayerInfo[playerid][pServicioCNN] == 1) { SetPlayerSkin(playerid, 219);}
	}
	return 1;
}

stock DropObjeto(ObjetoID, Cantidad, Float:X, Float:Y, Float:Z, world, interior)
{
    if(ObjetoID != 0)
    {
        new Float:rotx, Float:roty, Float:rotz;
        for(new i = 0; i < sizeof(DropInfo); i++)
        {
            if(DropInfo[i][DropPosX] == 0.0 && DropInfo[i][DropPosY] == 0.0 && DropInfo[i][DropPosZ] == 0.0)
            {
                DropInfo[i][DropID] = ObjetoID;
                DropInfo[i][DropCantidad] = Cantidad;
                DropInfo[i][DropPosX] = X;
                DropInfo[i][DropPosY] = Y;
                DropInfo[i][DropPosZ] = Z;
                DropInfo[i][DropVWorld] = world;
                DropInfo[i][DropInterior] = interior;
                rotx = 80;
                roty = 0;
                rotz = 0;

                if(ObjetoID >= 47 && ObjetoID <= 49) rotx = 0;
                if(ObjetoID >= 50 && ObjetoID <= 53) rotx = 0; Z+=0.02;
                if(ObjetoID == 67) rotx = 0;
                if(ObjetoID >= 75 && ObjetoID <= 79) rotx = 0;
                if(ObjetoID >= 102 && ObjetoID <= 125) rotx = 0; Z+=0.02;

                DropObject[i] = CreateDynamicObject(ObjetoInfo[ObjetoID][ModeloObjeto], X, Y, Z-1, rotx, roty, rotz, world);
                SetTimerEx("DropObjetoTimer", 36000000, false, "i", i);
                return 1;
            }
        }
        return 1;
    }
    return 1;
}

forward DropObjetoTimer(i);
public DropObjetoTimer(i)
{
    DestroyDynamicObject(DropObject[i]);
    DropInfo[i][DropPosX] = 0.0;
    DropInfo[i][DropPosY] = 0.0;
    DropInfo[i][DropPosZ] = 0.0;
    DropInfo[i][DropID] = 0;
    DropInfo[i][DropCantidad] = 0;
    return 1;
}

public OnPlayerEnterDynamicArea(playerid, areaid)
{
	foreach(Player,i)
	{
	    if(GetPVarType(i, "pDynamicBBArea"))
	    {
	        if(areaid == GetPVarInt(i, "pDynamicBBArea"))
	        {
	            new station[256];
	            GetPVarString(i, "pDynamicBBStation", station, sizeof(station));
	            if(!isnull(station))
				{
					PlayAudioEx(playerid, station, GetPVarFloat(i, "pDynamicBBX"), GetPVarFloat(i, "pDynamicBBY"), GetPVarFloat(i, "pDynamicBBZ"), 30.0, 1);
	            }
				return 1;
	        }
	    }
	}
	return 1;
}

public OnPlayerLeaveDynamicArea(playerid, areaid)
{
    foreach(Player,i)
	{
	    if(GetPVarType(i, "pDynamicBBArea"))
	    {
	        if(areaid == GetPVarInt(i, "pDynamicBBArea"))
	        {
	            StopAudioEx(playerid);
				return 1;
	        }
	    }
	}
	return 1;
}

catalogovehiculos(playerid, concesionario) /* Catalogo */
{
	/* Si en el ciclo de elegir vehículo se sobrepasan el valor máximo o mínimo de ID de vehiculo, evitar error de ID */
	if (EnCatalogoVeh[playerid] < MenorPosArray(concesionario))
    	EnCatalogoVeh[playerid] = MayorPosArray(concesionario);
	if (EnCatalogoVeh[playerid] > MayorPosArray(concesionario))
	    EnCatalogoVeh[playerid] = MenorPosArray(concesionario);

    TextDrawShowForPlayer(playerid, Modelo[EnCatalogoVeh[playerid]]);
 	TextDrawShowForPlayer(playerid, CocheNombre[EnCatalogoVeh[playerid]]);
  	TextDrawShowForPlayer(playerid, Costo[EnCatalogoVeh[playerid]]);
   	TextDrawShowForPlayer(playerid, Id[EnCatalogoVeh[playerid]]);
	return 1;
}

MayorPosArray(concesionario)
{
	new mayorpos;
	for(new i = 0; i < MAX_CAR_DATA; i++)
	{
		if(datacar[i][dcConcesionario] == concesionario)
		{
			mayorpos = i;
		}
	}
	return mayorpos;
}

MenorPosArray(concesionario)
{
	new menorpos;
	for(new i = 0; i < MAX_CAR_DATA; i++)
	{
		if(datacar[i][dcConcesionario] == concesionario)
		{
			menorpos = i;
			break;
		}
	}
	return menorpos;
}

GetPlayerConcesionarioEx(playerid) //Retorna ID de concesionario
{
	new Concesionario;
	for(new i = 0; i < 5; i ++)
	{
		if(IsPlayerInRangeOfPoint(playerid, 5, Concesionarios[i][cX], Concesionarios[i][cY], Concesionarios[i][cZ]))
		{
			Concesionario = i;
		}
	}
	return Concesionario;
}

GetPlayerConcesionario(playerid) //Retorna ID de concesionario + 1
{
	new Concesionario;
	for(new i = 0; i < 5; i ++)
	{
		if(IsPlayerInRangeOfPoint(playerid, 5, Concesionarios[i][cX], Concesionarios[i][cY], Concesionarios[i][cZ]))
		{
			Concesionario = i+1;
		}
	}
	return Concesionario;
}

//Gamemode
main()
{
	print(" ");
	print("Sky RolePlay - Versión 0.1v");
	print(" ");
}

public OnGameModeInit()
{
	//----------- Textos en Carteles ----------------//
	new Aparcar = CreateObject(4731, 1536.22, -1673.14, 12.41,   -59.70, 91.42, 1.82);
    SetObjectMaterialText(Aparcar, "Parking Privado", 0, 70, "Arial Black", 24, 0, Blanco, 0, 1);
    //----------- Timers del Servidor ----------------//
    SetTimer("TimerDeUnaHora",3600000,1);
    SetTimer("TimerDeCincoMinutos",300000,1);
    SetTimer("TimerDeUnMinuto",60000,1);
    SetTimer("TimerDeMedioMinuto",30000,1);
    SetTimer("TimerDeMedioSegundo",500,1);
    SetTimer("RandomWeather", 14400000, 1);
	SetTimer("ServerMicrobeat",250,true);
	SetTimer("ComandoDuda",1000,true);
	SetTimer("TiempoServer",1000,true);
    MensajesTimer = SetTimer("MensajesAleatorios",300000, 1);
	//----------- Configuración del Servidor ----------------//
	new string[256];
    ConnectMySQL(); /* Base de Datos MYSQL(Conectar) */
    AntiDeAMX(); /* AntiDeAmx */
    AddPlayerClass(2,1958.3783,1343.1572,1100.3746,269.1425,-1,-1,-1,-1,-1,-1); /* Sistema Spawn */
    AllowInteriorWeapons(1); /* Armas en Interiores */
    DisableInteriorEnterExits(); /* Desactiva Entradas/Locales */
    EnableStuntBonusForAll(0); /* Desactiva Bonus por Saltos */
	UsePlayerPedAnims(); /* Caminar como CJ */
    ManualVehicleEngineAndLights(); /* Sistema de Arranque(Vehículos) */
    AreaDepositoLSPD = CreateDynamicPolygon(PuntosDeposito, 12, 17.5); /* Área depósito LSPD */
    ropa = LoadModelSelectionMenu("ropa.TXT"); /* Sistema elección skin */
    for(new i = 0; i < MAX_LSEDINFORMES; i++) InformeEmergencias[i][ieEstado] = NOEXISTE; /* Comando /Informes LSMD */
    //----------- 3DTextlabel's ----------------//
    CreateDynamic3DTextLabel("Combustible\n\n{FFFFFF}Para llenar combustible utiliza{FFFF04} /rellenar [Litros]", Blanco, 1789.1157,-2042.0454,13.5370, 20, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1);
    CreateDynamic3DTextLabel("Combustible\n\n{FFFFFF}Para llenar combustible utiliza{FFFF04} /rellenar [Litros]", Blanco,  813.817932 , -573.802307 , 16.321636, 20, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1);
	CreateDynamic3DTextLabel("Combustible\n\n{FFFFFF}Para llenar combustible utiliza{FFFF04} /rellenar [Litros]", Blanco,   804.723632 , -573.470947 , 16.321636, 20, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1);
	CreateDynamic3DTextLabel("{FFFFFF}Departamento de Policía\nID: 1 | Propietario: {10E4FF}Gobierno\n\n{FFFF04}Presione [F]", Blanco, 1555.0660, -1675.6772, 16.1953, 20, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Entrada a LSPD
    CreateDynamic3DTextLabel("/Parking", Amarillo, 1582.0264, -1678.7787, 5.8946, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Parking 1ª planta LSPD
    CreateDynamic3DTextLabel("2ª Planta", Amarillo, 1582.0264, -1674.8207, 5.8945, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Entrada 2ª planta parking LSPD
    CreateDynamic3DTextLabel("1ª Planta", Amarillo, -1609.3883, 729.6197, -5.2422, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Entrada 1ª planta parking LSPD
    CreateDynamic3DTextLabel("/Parking", Amarillo, -1605.4362, 729.6197, -5.2422, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Parking 2ª planta LSPD
    CreateDynamic3DTextLabel("Ascensor", Amarillo, 1568.6243,-1689.9784,6.2188, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Ascensor parking 1ª planta LSPD
    CreateDynamic3DTextLabel("Cárcel", Amarillo, 1524.4836,-1677.9070,6.2188, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Cárcel parking 1ª planta LSPD
    CreateDynamic3DTextLabel("Ascensor", Amarillo, -1594.2114,716.2331,-4.9063, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Ascensor parking 2ª planta LSPD
    CreateDynamic3DTextLabel("Cárcel", Amarillo, -1606.3357,672.0615,-4.9063, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Cárcel parking 1ª planta LSPD
    CreateDynamic3DTextLabel("Armería", Amarillo, 270.3885,113.2809,1004.6172, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Armería LSPD entrada
    CreateDynamic3DTextLabel("Ascensor", Amarillo, 255.0220,126.2807,1003.2188, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Ascensor comisaría LSPD
    CreateDynamic3DTextLabel("Azotea", Amarillo, 238.4005,114.8457,1010.2188, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Azotea entrada comisaría LSPD
    CreateDynamic3DTextLabel("Azotea", Amarillo, 1155.9493,-1342.8243,26.6694, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Azotea entrada Hospital
    CreateDynamic3DTextLabel("Celdas", Amarillo, 217.7758,117.4122,999.0216, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Celdas entrada comisaría LSPD
    CreateDynamic3DTextLabel("{FFFFFF}Ayuntamiento\nID: 2 | Propietario: {10E4FF}Gobierno\n\n{FFFF04}Presione [F]", Blanco, 1481.0206,-1771.1138,18.7958, 20, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Entrada ayuntamiento
    CreateDynamic3DTextLabel("{FFFFFF}Ayuntamiento\nID: 3 | Propietario: {10E4FF}Gobierno\n\n{FFFF04}Presione [F]", Blanco, 1437.2343,-1786.3534,33.4297, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Entrada azotea ayuntamiento
    CreateDynamic3DTextLabel("Azotea", Amarillo, 375.88223,164.720794,1025.78, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Salida azotea ayuntamiento
    CreateDynamic3DTextLabel("Garaje", Amarillo, 366.64654,158.779937,1008.38, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Entrada garaje ayuntamiento
    CreateDynamic3DTextLabel("{FFFFFF}Ayuntamiento\nID: 4 | Propietario: {10E4FF}Gobierno\n\n{FFFF04}Presione [F]", Blanco, 1524.0345,-1825.3225,13.5469, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Salida garaje ayuntamiento
    CreateDynamic3DTextLabel("/Vestuario", AzulClaro, 267.6066,118.4081,1004.6172, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Salida garaje ayuntamient
    CreateDynamic3DTextLabel("/Vestuario", AzulClaro, 1589.9855,-2493.0557,13.5547, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 0, -1, 15,-1,100.0);//Vestuario Taller LS
    CreateDynamic3DTextLabel("/Vestuario", AzulClaro, 807.671447 , -545.271301 , 16.321636, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 0, -1, 0,-1,100.0);//Vestuario Taller Dillimore
    CreateDynamic3DTextLabel("/Vestuario", AzulClaro, -213.0010,-1760.6923,675.7687, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); // Vestuario LSMD
    CreateDynamic3DTextLabel("/Vestuario", AzulClaro, 759.6329,-1331.5673,13.8953, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); // Vestuario LSMD
    CreateDynamic3DTextLabel("/Armeria", NaranjaOscuro, 220.0135,79.7864,1005.0391, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Salida garaje ayuntamiento
    CreateDynamic3DTextLabel("{FFFFFF}Autoescuela\nID: 5 | Propietario: {10E4FF}Gobierno\n\n{FFFF04}Presione [F]",Blanco,2045.6418,-1908.1290,13.5469, 20, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Entra autoescuela Willowfield
    CreateDynamic3DTextLabel("{FFFFFF}Oficina\n\n{FFFF04}Presione [F]",Blanco,1764.6129,-2022.0841,14.1507, 10, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1, 0, 0); //Entrada Hotel Commerce
    CreateDynamic3DTextLabel("{FFFFFF}Hotel Midtown\n\n{FFFF04}Presione [F]",Blanco,1498.4912,-1581.3987,13.5498, 10, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1, 0, 0); //Oficila Taller LS
    CreateDynamic3DTextLabel("{FFFFFF}Hotel Everlast\n\n{FFFF04}Presione [F]",Blanco,873.3649,-2005.0197,4.0954, 10, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1, 0, 0); //Oficila Taller LS
    CreateDynamic3DTextLabel("{FFFFFF}Motel Resort\n\n{FFFF04}Presione [F]",Blanco,2232.6450,-1159.8384,25.8906, 10, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1, 0, 0); //Entrada Motel Jefferson
    CreateDynamic3DTextLabel("{FFFFFF}Prisión Federal\nID: 8 | Propietario: {10E4FF}Gobierno\n\n{FFFF04}Presione [F]", Blanco, 1797.9216,-1578.7523,14.0898, 20, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Entrada Prisión Federal
    CreateDynamic3DTextLabel("Patio", Amarillo, 2576.7878,-1289.9611,1044.1250, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Entrada Patio Prisión Federal
    CreateDynamic3DTextLabel("Entrada Trasera", Amarillo, 1772.0688,-1548.1400,9.9063, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Salida Patio Prisión Federal
    CreateDynamic3DTextLabel("{FFFFFF}Iglesia\n\n{FFFF04}Presione [F]", Amarillo, 2233.1997,-1333.3169,23.9816, 20, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Entrada Iglesia Jefferson
    CreateDynamic3DTextLabel("{FFFFFF}Radio & Televisión - Estudios CNN\n\n{FFFF04}Presione [F]", Amarillo, 648.7344,-1360.7629,13.5876, 20, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Entrada LSRTV
    CreateDynamic3DTextLabel("Parking", Amarillo, 258.6264,1777.5300,701.0859, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Entrada Parking LSRTV
    CreateDynamic3DTextLabel("Entrada Trasera", Amarillo, 732.8732,-1355.4661,15.1563, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Salida Parking LSRTV
    CreateDynamic3DTextLabel("Entrada Trasera", Amarillo, 1147.8459,-1342.6941,13.6440, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Entrada Trasera Hospital
    CreateDynamic3DTextLabel("Armería", Amarillo, 2523.3840,-1281.3458,1048.2891, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Armería prisión federal entrada
    CreateDynamic3DTextLabel("/Vestuario",AzulClaro,1085.0271,-803.6704,1088.3669, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Prision federal
    CreateDynamic3DTextLabel("/Armeria",NaranjaOscuro,1086.6472,-807.9135,1088.3669, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Prision federal
    CreateDynamic3DTextLabel("Patio", Amarillo, 1084.5272,-808.0339,1088.3669, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Armería - patio
    CreateDynamic3DTextLabel("Armería", Amarillo, 1757.9861,-1560.4956,15.8120, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Patio - armería
    CreateDynamic3DTextLabel("Prisión", Amarillo, 2529.6387,-1281.9346,1048.2891, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Puerta oficina - prisión
    CreateDynamic3DTextLabel("Oficina", Amarillo, 2532.1252,-1281.9380,1048.2891, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Puerta oficina - prisión
    CreateDynamic3DTextLabel("/Bandeja", Naranja, 2567.2358,-1283.9948,1044.1250, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Comando comer prisión
	CreateDynamic3DTextLabel("¿No hay ningún mecánico online?\nColoca (/AutoReparar)", Naranja, 1801.8079,-2041.0232,13.5503, 8, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Comando /AutoReparar
	CreateDynamic3DTextLabel("¿No hay ningún mecánico online?\nColoca (/AutoReparar)", Naranja, 816.115112 , -572.825439 , 16.321636, 8, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Comando /AutoReparar
	CreateDynamic3DTextLabel("Prisión", Amarillo, 1773.4933,-1577.7090,22.9530, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Azotea-prisión
	CreateDynamic3DTextLabel("Azotea", Amarillo, 2524.9102,-1280.7483,1048.2891, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Prisión-azotea
	CreateDynamic3DTextLabel("Azotea", Amarillo, -203.2680,-1763.2410,675.7687, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Prisión-azotea
	CreateDynamic3DTextLabel("Salida Trasera", Amarillo, -205.7376,-1763.2035,675.7687, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Prisión-azotea
	CreateDynamic3DTextLabel("{FFFFFF}Unity Station\nID: 11 | Propietario: {10E4FF}Gobierno\n\n{FFFF04}Presione [F]", Blanco, 1742.9919,-1864.4597,13.5738, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 30);
	CreateDynamic3DTextLabel("{FFFFFF}Banco Central de Los Santos\nID: 12 | Propietario: {10E4FF}Gobierno\n\n{FFFF04}Presione [F]", Blanco, 1459.3337,-1009.9294,26.8438, 5, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 30);
    CreateDynamic3DTextLabel("{FFFFFF}Hospital de Los Santos\nID: 13 | Propietario: {10E4FF}Gobierno\n\n{FFFF04}Presione [F]", Blanco, 1172.0803,-1323.3826,15.4031, 20, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Entrada ayuntamiento
    CreateDynamic3DTextLabel("{FFFFFF}Mafia Rusa\n\n{FFFF04}Presione [F]", Blanco, 691.5793,-1275.9186,13.5607, 20, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Entrada ayuntamiento
    CreateDynamic3DTextLabel("{FFFFFF}Yakuza\n\n{FFFF04}Presione [F]", Blanco, 474.5698,-1519.6808,20.3892, 20, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Entrada ayuntamiento
    CreateDynamic3DTextLabel("{FFFFFF}La Cosa Nostra\n\n{FFFF04}Presione [F]", Blanco, 1122.7065,-2037.0870,69.8942, 20, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Entrada ayuntamiento
    CreateDynamic3DTextLabel("{FFFFFF}¿No tienes GPS?\n\nUtiliza {FFFF04}/ver mapa{FFFFFF} para ubicarte", Blanco, 1752.0259,-1861.8715,13.5770, 20, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Entrada ayuntamiento
    CreateDynamic3DTextLabel("{FFFFFF}¿Necesitas armas?\n\nUsa /contactoarmas", Blanco, -1744.2081,161.1686,3.2562, 20, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Compra de armas
    CreateDynamic3DTextLabel("{FFFFFF}¿Necesitas armas?\n\nUsa /contactoarmas", Blanco, 2803.7034,970.4707,10.7500, 20, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1); //Compra de armas 2
	//----------- MapIcons del Servidor ----------------//
	CreateDynamicMapIcon(1742.8489,-1860.8014,13.5783, 58, 0, 0, 0, -1, 100.0); // SpawnUnity
	CreateDynamicMapIcon(1555.0660, -1675.6772, 16.1953, 30, 0, 0, 0, -1, 100.0); // Comisaria
	CreateDynamicMapIcon(1481.0206,-1771.1138,18.7958, 3, 0, 0, 0, -1, 100.0); // Ayuntamiento
	CreateDynamicMapIcon(2045.6418,-1908.1290,13.5469, 55, 0, 0, 0, -1, 100.0); // Autoescuela
	CreateDynamicMapIcon(1797.9216,-1578.7523,14.0898, 30, 0, 0, 0, -1, 100.0); // Comisaria
	CreateDynamicMapIcon(2233.1997,-1333.3169,23.9816, 42, 0, 0, 0, -1, 100.0); // Iglesia
	CreateDynamicMapIcon(648.7344,-1360.7629,13.5876, 58, 0, 0, 0, -1, 100.0); // CNN
	CreateDynamicMapIcon(1459.3337,-1009.9294,26.8438, 52, 0, 0, 0, -1, 100.0); // Banco Central
	CreateDynamicMapIcon(1172.0803,-1323.3826,15.4031, 22, 0, 0, 0, -1, 100.0); // Hospital LS
	CreateDynamicMapIcon(1744.4066,-1863.7966,13.5746, 56, 0, 0, 0, -1, 100.0); // Taxista
	CreateDynamicMapIcon(1792.4111,-2037.2555,13.5226, 27, 0, 0, 0, -1, 100.0); // Taller LS
	CreateDynamicMapIcon(58.5263,-1524.1663,4.9697, 11, 0, 0, 0, -1, 100.0); // Peaje LS
	CreateDynamicMapIcon(15.5997,-1327.1025,12.1330, 11, 0, 0, 0, -1, 100.0); // Peaje LS/SF Tunel
	CreateDynamicMapIcon(1940.9242,-1772.9498,13.6406, 43, 0, 0, 0, -1, 100.0); // Gasolinera
	CreateDynamicMapIcon(1004.1641,-937.5199,42.3281, 43, 0, 0, 0, -1, 100.0); // Gasolinera
	CreateDynamicMapIcon(655.1628,-564.9158,16.3359, 43, 0, 0, 0, -1, 100.0); // Gasolinera
	CreateDynamicMapIcon(1381.8740,459.1226,20.3452, 43, 0, 0, 0, -1, 100.0); // Gasolinera
	CreateDynamicMapIcon(-89.8967,-1169.3822,2.3944, 43, 0, 0, 0, -1, 100.0); // Gasolinera
	CreateDynamicMapIcon(2017.0374,-2274.6824,13.5969, 5, 0, 0, 0,-1, 500.0); //SacarLicencia LS.
	//----------- Pickups del Servidor ----------------//
    CreateDynamicPickup(1239,1,-203.2680,-1763.2410,675.7687,-1,-1,-1,30);//Azotea
    CreateDynamicPickup(1239,1,58.5263,-1524.1663,4.9697,-1,-1,-1,30);//Peaje LS 1
    CreateDynamicPickup(1239,1,47.2068,-1539.4961,5.1773,-1,-1,-1,30);//Peaje LS 2
    CreateDynamicPickup(1239,1,7.6903,-1312.1354,11.7702,-1,-1,-1,30);//Peaje LS/SF Tunel 2
    CreateDynamicPickup(1239,1,20.5132,-1346.0331,10.0572,-1,-1,-1,30);//Peaje LS/SF Tunel 1
    CreateDynamicPickup(1239,1,-205.7376,-1763.2035,675.7687,-1,-1,-1,30);//Salida Trasera
    CreateDynamicPickup(1318,1,1742.9919,-1864.4597,13.5738,-1,-1,-1,30);//Unity Station
    CreateDynamicPickup(1318,1,1172.0803,-1323.3826,15.4031,-1,-1,-1,30);//Hospital LS
    CreateDynamicPickup(1318,1,1764.6129,-2022.0841,14.1507,-1,-1,-1,30);//Taller LS
    CreateDynamicPickup(1239,1,1582.0264, -1678.7787, 5.8946,-1,-1,-1,30);//Parking
    CreateDynamicPickup(1239,1,1147.8459,-1342.6941,13.6440,-1,-1,-1,30);//Entrada Trasera Hospital
    CreateDynamicPickup(1239,1,732.8732,-1355.4661,15.1563,-1,-1,-1,30);//Entrada Trasera
    CreateDynamicPickup(1239,1,1155.9493,-1342.8243,26.6694,-1,-1,-1,30);//Azotea
    CreateDynamicPickup(1239,1,-1605.4362, 729.6197, -5.2422,-1,-1,-1,30);//Parking
    CreateDynamicPickup(1318,1,1555.0660, -1675.6772, 16.1953,-1,-1,-1,30);//Comisaría
    CreateDynamicPickup(1318,1,691.5793,-1275.9186,13.5607,-1,-1,-1,30);//Mafia Rusa
    CreateDynamicPickup(1318,1,474.5698,-1519.6808,20.3892,-1,-1,-1,30);//Yakuza
    CreateDynamicPickup(1318,1,1122.7065,-2037.0870,69.8942,-1,-1,-1,30);//La Cosa Nostra
    CreateDynamicPickup(1318,1,2233.1997,-1333.3169,23.9816,-1,-1,-1,30);//Iglesia
    CreateDynamicPickup(1239,1,1582.0264, -1674.8207, 5.8945,-1,-1,-1,30);//Planta Baja 2
    CreateDynamicPickup(1239,1,2529.6387,-1281.9346,1048.2891,-1,-1,-1,30);//Prisión
    CreateDynamicPickup(1239,1,1773.4933,-1577.7090,22.9530,-1,-1,-1,30);//Prisión
    CreateDynamicPickup(1239,1,2567.2358,-1283.9948,1044.1250,-1,-1,-1,30);//Bandeja
    CreateDynamicPickup(1239,1,1801.8079,-2041.0232,13.5503,-1,-1,-1,30);//Autoreparar
    CreateDynamicPickup(1239,1,816.115112,-572.825439,16.321636,-1,-1,-1,30);//Autoreparar
    CreateDynamicPickup(1239,1,2532.1252,-1281.9380,1048.2891,-1,-1,-1,30);//Oficina
    CreateDynamicPickup(1239,1,1084.5272,-808.0339,1088.3669,-1,-1,-1,30);//Patio
    CreateDynamicPickup(1239,1,258.6264,1777.5300,701.0859,-1,-1,-1,30);//Parking
    CreateDynamicPickup(1239,1,-1609.3883, 729.6197, -5.24223,-1,-1,-1,30);//Planta Baja 1
    CreateDynamicPickup(1239,1,1524.4836,-1677.9070,6.2188,-1,-1,-1,30);//Carcel
    CreateDynamicPickup(1239,1,-1606.3357,672.0615,-4.9063,-1,-1,-1,30);//Carcel
    CreateDynamicPickup(1239,1,270.3885,113.2809,1004.6172,-1,-1,-1,30);//Armería
    CreateDynamicPickup(1318,1,1459.3337,-1009.9294,26.8438,-1,-1,-1,30);//Banco
    CreateDynamicPickup(1318,1,648.7344,-1360.7629,13.5876,-1,-1,-1,30);//CNN
    CreateDynamicPickup(1239,1,1568.6243,-1689.9784,6.21888,-1,-1,-1,30);//Ascensor
    CreateDynamicPickup(1239,1,255.0220,126.2807,1003.2188,-1,-1,-1,30);//Ascensor
    CreateDynamicPickup(1239,1,238.4005,114.8457,1010.2188,-1,-1,-1,30);//Azotea
    CreateDynamicPickup(1239,1,2524.9102,-1280.7483,1048.2891,-1,-1,-1,30);//Azotea
    CreateDynamicPickup(1239,1,2576.7878,-1289.9611,1044.1250,-1,-1,-1,30);//Patio
    CreateDynamicPickup(1239,1,1772.0688,-1548.1400,9.9063,-1,-1,-1,30);//Entrada Trasera
    CreateDynamicPickup(1239,1,375.88223,164.720794,1025.78,-1,-1,-1,30);//Azotea
    CreateDynamicPickup(1239,1,217.7758,117.4122,999.0216,-1,-1,-1,30);//Celdas
    CreateDynamicPickup(1239,1,366.64654,158.779937,1008.38,-1,-1,-1,30);//Garaje
    CreateDynamicPickup(1239,1,-1594.2114,716.2331,-4.9063,-1,-1,-1,30);//Ascensor
	CreateDynamicPickup(1318,1,1481.0206,-1771.1138,18.7958,-1,-1,-1,30);//Ayuntamiento
	CreateDynamicPickup(1318,1,1437.2343,-1786.3534,33.4297,-1,-1,-1,30);//Ayuntamiento
	CreateDynamicPickup(1318,1,1524.0345,-1825.3225,13.5469,-1,-1,-1,30);//Ayuntamiento
	CreateDynamicPickup(1318,1,2045.6418,-1908.1290,13.5469,-1,-1,-1,30);//Autoescuela
	CreateDynamicPickup(1318,1,1498.4912,-1581.3987,13.5498,-1,-1,-1,30);//Hotel LSPD
	CreateDynamicPickup(1318,1,873.3649,-2005.0197,4.0954,-1,-1,-1,30);//Hotel Everlast
	CreateDynamicPickup(1318,1,2232.6450,-1159.8384,25.8906,-1,-1,-1,30);//Hotel Jefferson
	CreateDynamicPickup(1318,1,1797.9216,-1578.7523,14.0898,-1,-1,-1,30);//Prisión Federal
    CreateDynamicPickup(1275, 23, -213.0010,-1760.6923,675.7687);//Vestuario
    CreateDynamicPickup(1275, 23, 759.6329,-1331.5673,13.8953);//Vestuario
    CreateDynamicPickup(1275, 23, 267.6066,118.4081,1004.6172);//Vestuario
    CreateDynamicPickup(1275, 23, 1589.9855,-2493.0557,13.5547,-1,15);//Vestuario
    CreateDynamicPickup(1275, 23, 807.671447 , -545.271301 , 16.321636);//Vestuario
    CreateDynamicPickup(353, 23, 220.0135,79.7864,1005.0391);//Armería
	CreateDynamicPickup(1275, 23, 1085.0271,-803.6704,1088.3669);//Vestuario
	CreateDynamicPickup(353, 23, 1086.6472,-807.9135,1088.3669);//Armeria
	CreateDynamicPickup(1239,1,-1744.2081,161.1686,3.2562,-1,-1,-1,30);//Armas
	CreateDynamicPickup(1239,1,2803.7034,970.4707,10.7500,-1,-1,-1,30);//Armas
	//----------- Textdraws ----------------//
	Intro[0] = TextDrawCreate(320.000000, 422.000000, "_"); /* Intro Servidor */
	TextDrawAlignment(Intro[0], 2);
	TextDrawBackgroundColor(Intro[0], 255);
	TextDrawFont(Intro[0], 1);
	TextDrawLetterSize(Intro[0], 0.500000, 5.000000);
	TextDrawColor(Intro[0], -1);
	TextDrawSetOutline(Intro[0], 0);
	TextDrawSetProportional(Intro[0], 1);
	TextDrawSetShadow(Intro[0], 1);
	TextDrawUseBox(Intro[0], 1);
	TextDrawBoxColor(Intro[0], 120);
	TextDrawTextSize(Intro[0], 0.000000, 699.000000);
	TextDrawSetSelectable(Intro[0], 0);

	Intro[1] = TextDrawCreate(321.000000, 421.000000, "Bienvenido a Sky RolePlay versi¦n 0.2v");
	TextDrawAlignment(Intro[1], 2);
	TextDrawBackgroundColor(Intro[1], 255);
	TextDrawFont(Intro[1], 1);
	TextDrawLetterSize(Intro[1], 0.430000, 1.500000);
	TextDrawColor(Intro[1], -1);
	TextDrawSetOutline(Intro[1], 1);
	TextDrawSetProportional(Intro[1], 1);
	TextDrawSetSelectable(Intro[1], 0);

	Intro[2] = TextDrawCreate(321.000000, 434.000000, "¡Volvimos para quedarnos, invita a tus amigos y diviertete!");
	TextDrawAlignment(Intro[2], 2);
	TextDrawBackgroundColor(Intro[2], 255);
	TextDrawFont(Intro[2], 1);
	TextDrawLetterSize(Intro[2], 0.310000, 1.100000);
	TextDrawColor(Intro[2], -1);
	TextDrawSetOutline(Intro[2], 1);
	TextDrawSetProportional(Intro[2], 1);
	TextDrawSetSelectable(Intro[2], 0);

	Barra[0] = TextDrawCreate(11.999979, 431.573211, "Sky RolePlay"); /* Barra de Abajo */
	TextDrawLetterSize(Barra[0], 0.311598, 1.234132);
	TextDrawAlignment(Barra[0], 1);
	TextDrawColor(Barra[0], 0xADD8E6FF);
	TextDrawSetShadow(Barra[0], 0);
	TextDrawSetOutline(Barra[0], 1);
	TextDrawBackgroundColor(Barra[0], 51);
	TextDrawFont(Barra[0], 2);
	TextDrawSetProportional(Barra[0], 1);

	Barra[1] = TextDrawCreate(298.399841, 427.839935, "12:49hs");
	TextDrawLetterSize(Barra[1], 0.493999, 1.674666);
	TextDrawAlignment(Barra[1], 1);
	TextDrawColor(Barra[1], -1);
	TextDrawSetShadow(Barra[1], 0);
	TextDrawSetOutline(Barra[1], 1);
	TextDrawBackgroundColor(Barra[1], 51);
	TextDrawFont(Barra[1], 3);
	TextDrawSetProportional(Barra[1], 1);

	Barra[2] = TextDrawCreate(2.000000, 430.086669, "usebox");
	TextDrawLetterSize(Barra[2], 0.000000, 1.259629);
	TextDrawTextSize(Barra[2], 637.199951, 0.000000);
	TextDrawAlignment(Barra[2], 1);
	TextDrawColor(Barra[2], 0);
	TextDrawUseBox(Barra[2], true);
	TextDrawBoxColor(Barra[2], 1044200213);
	TextDrawSetShadow(Barra[2], 0);
	TextDrawSetOutline(Barra[2], 0);
	TextDrawFont(Barra[2], 0);
	SetTimer("Clock",1000,true);
    for(new i=0; i < MAX_CAR_DATA; i++) /* Catálogo */
	{
		format(string, sizeof(string), "Vehiculo: %s", datacar[i][dcNombre]);
		CocheNombre[i] = TextDrawCreate(240.000000,342.000000,string);
    	format(string, sizeof(string), "Precio: %d$", datacar[i][dcPrecio]);
		Costo[i] = TextDrawCreate(241.000000,356.000000,string);
		format(string, sizeof(string), "Id: %d Nivel: %d", i, datacar[i][dcNivel]);
		Id[i] = TextDrawCreate(240.000000,369.000000,string);
		Modelo[i] = TextDrawCreate(240.000000, 120.000000,"");

		TextDrawAlignment(CocheNombre[i],0);
		TextDrawAlignment(Costo[i],0);
		TextDrawAlignment(Id[i],0);
		TextDrawAlignment(Modelo[i], 2);

		TextDrawBackgroundColor(CocheNombre[i],0x000000ff);
		TextDrawBackgroundColor(Costo[i],0x000000ff);
		TextDrawBackgroundColor(Id[i],0x000000ff);
		TextDrawBackgroundColor(Modelo[i], 0x778899ff);

		TextDrawFont(CocheNombre[i],2);
		TextDrawLetterSize(CocheNombre[i],0.499999,1.100000);
		TextDrawFont(Costo[i],2);
		TextDrawLetterSize(Costo[i],0.499999,1.100000);
		TextDrawFont(Id[i],2);
		TextDrawLetterSize(Id[i],0.499999,1.300000);
		TextDrawFont(Modelo[i], 5);
		TextDrawLetterSize(Modelo[i], 0.000000, -0.000000);

		TextDrawColor(CocheNombre[i],0xffffffff);
		TextDrawColor(Costo[i],0x00ff0066);
		TextDrawColor(Id[i],0xffffffff);
		TextDrawColor(Modelo[i], 0xffffffff);

		TextDrawSetOutline(CocheNombre[i],1);
		TextDrawSetOutline(Costo[i],1);
		TextDrawSetOutline(Id[i],1);
		TextDrawSetOutline(Modelo[i], 0);

		TextDrawSetProportional(CocheNombre[i],1);
		TextDrawSetProportional(Costo[i],1);
		TextDrawSetProportional(Id[i],1);
		TextDrawSetProportional(Modelo[i], 1);

		TextDrawSetShadow(CocheNombre[i],1);
		TextDrawSetShadow(Costo[i],1);
		TextDrawSetShadow(Id[i],1);
		TextDrawSetShadow(Modelo[i], 1);

		TextDrawUseBox(Modelo[i], 1);
		TextDrawBoxColor(Modelo[i], 0x00000000);
		TextDrawTextSize(Modelo[i], 220.000000, 220.000000);
		TextDrawSetPreviewModel(Modelo[i], datacar[i][dcIDModel]);
		TextDrawSetPreviewRot(Modelo[i], -16.000000, 0.000000, -55.000000, 0.90);
		TextDrawSetSelectable(Modelo[i], 0);
	}

	fila[1] = TextDrawCreate(238.000, 113.500, "LD_DUAL:black"); /* Catálogo */
    TextDrawFont(fila[1], 4);
    TextDrawTextSize(fila[1], 225.000, 7.000);
    TextDrawColor(fila[1], -1);
    fila[2] = TextDrawCreate(238.000, 334.000, "LD_DUAL:black");
    TextDrawFont(fila[2], 4);
    TextDrawTextSize(fila[2], 225.000, 7.000);
    TextDrawColor(fila[2], -1);
    fila[3] = TextDrawCreate(240.000, 114.000, "LD_DUAL:black");
    TextDrawFont(fila[3], 4);
    TextDrawTextSize(fila[3], -7.000, 227.000);
    TextDrawColor(fila[3], -1);
    fila[4] = TextDrawCreate(467.000, 114.000, "LD_DUAL:black");
    TextDrawFont(fila[4], 4);
    TextDrawTextSize(fila[4], -7.000, 227.000);
    TextDrawColor(fila[4], -1);

    for(new i=0; i<MAX_PLAYERS; i++) /* Velocímetro */
    {
        box[i] = TextDrawCreate(618,389,"_");
		TextDrawLetterSize(box[i],0.5,3.999996);
		TextDrawUseBox(box[i],1);
		TextDrawBoxColor(box[i],0x00000060);
		TextDrawTextSize(box[i],473,0);
		vvel[i] = TextDrawCreate(478,389,"_");
		TextDrawLetterSize(vvel[i],0.37,1.099999);
		TextDrawSetOutline(vvel[i],1);
		fuel[i] = TextDrawCreate(478,413,"_");
		TextDrawLetterSize(fuel[i],0.37,1.099999);
		TextDrawSetOutline(fuel[i],1);
    }

   	for(new i=0; i < MAX_PLAYERS; i++)
	{
		hambre[i] = TextDrawCreate(520.000000, 429.000000, "hud:radar_dateFood"); /* Tenedor Hambre */
		TextDrawBackgroundColor(hambre[i], 255);
		TextDrawFont(hambre[i], 4);
		TextDrawLetterSize(hambre[i], 0.500000, 1.000000);
		TextDrawColor(hambre[i], -1);
		TextDrawSetOutline(hambre[i], 1);
		TextDrawSetProportional(hambre[i], 0);
		TextDrawUseBox(hambre[i], 1);
		TextDrawBoxColor(hambre[i], 255);
		TextDrawTextSize(hambre[i], 15.000000, 15.000000);

		sed[i] = TextDrawCreate(409.000000, 429.000000, "hud:radar_dateDrink"); /* Copa Sed */
		TextDrawBackgroundColor(sed[i], 255);
		TextDrawFont(sed[i], 4);
		TextDrawLetterSize(sed[i], 0.500000, 1.000000);
		TextDrawColor(sed[i], -1);
		TextDrawSetOutline(sed[i], 1);
		TextDrawSetProportional(sed[i], 0);
		TextDrawUseBox(sed[i], 1);
		TextDrawBoxColor(sed[i], 255);
		TextDrawTextSize(sed[i], 15.000000, 15.000000);
	}
	//----------- Menú de Compras ----------------//
	restaurantes = CreateMenu("Restaurante", 2, 50.0, 180.0, 200.0, 200.0); /* Menú Restaurantes */
	AddMenuItem(restaurantes, 0, "Botella de cerveza");
	AddMenuItem(restaurantes, 1, "15$");
	AddMenuItem(restaurantes, 0, "Copa de vino");
	AddMenuItem(restaurantes, 1, "15$");
    AddMenuItem(restaurantes, 0, "Vaso de whisky");
	AddMenuItem(restaurantes, 1, "15$");
	AddMenuItem(restaurantes, 0, "Vaso de ron");
	AddMenuItem(restaurantes, 1, "15$");
	AddMenuItem(restaurantes, 0, "Salir");

	bares = CreateMenu("Bar", 2, 50.0, 180.0, 200.0, 200.0); /* Menú Bares */
	AddMenuItem(bares, 0, "Botella de cerveza");
	AddMenuItem(bares, 1, "15$");
	AddMenuItem(bares, 0, "Botella de agua");
	AddMenuItem(bares, 1, "10$");
	AddMenuItem(bares, 0, "Lata de fanta");
	AddMenuItem(bares, 1, "13$");
	AddMenuItem(bares, 0, "Lata de sprunk");
	AddMenuItem(bares, 1, "13$");
	AddMenuItem(bares, 0, "Copa de vino");
	AddMenuItem(bares, 1, "15$");
    AddMenuItem(bares, 0, "Vaso de whisky");
	AddMenuItem(bares, 1, "15$");
	AddMenuItem(bares, 0, "Vaso de ron");
	AddMenuItem(bares, 1, "15$");
	AddMenuItem(bares, 0, "Salir");

	comidasrapidas = CreateMenu("Menú", 2, 50.0, 180.0, 200.0, 200.0); /* Menú Comidas Rápidas */
	AddMenuItem(comidasrapidas, 0, "Lata de sprunk");
	AddMenuItem(comidasrapidas, 1, "13$");
	AddMenuItem(comidasrapidas, 0, "Lata de fanta");
	AddMenuItem(comidasrapidas, 1, "13$");
	AddMenuItem(comidasrapidas, 0, "Botella de agua");
	AddMenuItem(comidasrapidas, 1, "10$");
	AddMenuItem(comidasrapidas, 0, "Hamburguesa");
	AddMenuItem(comidasrapidas, 1, "20$");
	AddMenuItem(comidasrapidas, 0, "Burrito");
	AddMenuItem(comidasrapidas, 1, "20$");
	AddMenuItem(comidasrapidas, 0, "Pizza");
	AddMenuItem(comidasrapidas, 1, "30$");
	AddMenuItem(comidasrapidas, 0, "Salir");

	discoteca = CreateMenu("Menú", 2, 50.0, 180.0, 200.0, 200.0); /* Menú Clubs y Discotecas */
	AddMenuItem(discoteca, 0, "Lata de sprunk");
	AddMenuItem(discoteca, 1, "13$");
	AddMenuItem(discoteca, 0, "Lata de fanta");
	AddMenuItem(discoteca, 1, "13$");
    AddMenuItem(discoteca, 0, "Vaso de whisky");
	AddMenuItem(discoteca, 1, "15$");
	AddMenuItem(discoteca, 0, "Vaso de ron");
	AddMenuItem(discoteca, 1, "15$");
	AddMenuItem(discoteca, 0, "Salir");

	puticlub = CreateMenu("Menú", 2, 50.0, 180.0, 200.0, 200.0); /* Menú Puticlubs */
	AddMenuItem(puticlub, 0, "Botella de cerveza");
	AddMenuItem(puticlub, 1, "15$");
    AddMenuItem(puticlub, 0, "Vaso de whisky");
	AddMenuItem(puticlub, 1, "15$");
	AddMenuItem(puticlub, 0, "Vaso de ron");
	AddMenuItem(puticlub, 1, "15$");
	AddMenuItem(puticlub, 0, "Salir");

	ammunation = CreateMenu("Tienda de armas", 2, 50.0, 180.0, 200.0, 200.0); /* Menú Ammunations */
	AddMenuItem(ammunation, 0, "M1911");
	AddMenuItem(ammunation, 1, "2100$");
    AddMenuItem(ammunation, 0, "Cargador M1911");
	AddMenuItem(ammunation, 1, "300$");
	AddMenuItem(ammunation, 0, "Balas 45. ACP");
	AddMenuItem(ammunation, 1, "1000$");
	AddMenuItem(ammunation, 0, "Remington 870");
	AddMenuItem(ammunation, 1, "4800$");
	AddMenuItem(ammunation, 0, "Cartuchos 12GA");
	AddMenuItem(ammunation, 1, "800$");
	AddMenuItem(ammunation, 0, "Remington 700");
	AddMenuItem(ammunation, 1, "6200$");
	AddMenuItem(ammunation, 0, "Cargador Remington 700");
	AddMenuItem(ammunation, 1, "500$");
	AddMenuItem(ammunation, 0, "Balas 7.62x51mm");
	AddMenuItem(ammunation, 1, "700$");
	AddMenuItem(ammunation, 0, "Salir");

	menu247 = CreateMenu("24/7", 2, 50.0, 180.0, 200.0, 200.0); /* Menú Tienda 24/7 */
	AddMenuItem(menu247, 0, "Bolsa de doritos");
	AddMenuItem(menu247, 1, "20$");
	AddMenuItem(menu247, 0, "Bolsa de patatas");
	AddMenuItem(menu247, 1, "20$");
	AddMenuItem(menu247, 0, "Bolsa de nachos");
	AddMenuItem(menu247, 1, "20$");
	AddMenuItem(menu247, 0, "Lata de sprunk");
	AddMenuItem(menu247, 1, "13$");
	AddMenuItem(menu247, 0, "Lata de fanta");
	AddMenuItem(menu247, 1, "13$");
	AddMenuItem(menu247, 0, "Botella de agua");
	AddMenuItem(menu247, 1, "10$");
	AddMenuItem(menu247, 0, "Botella de cerveza");
	AddMenuItem(menu247, 1, "15$");
	AddMenuItem(menu247, 0, "Salir");

	tiendadeportes = CreateMenu("Tienda deportiva", 2, 50.0, 180.0, 200.0, 200.0); /* Menú Tienda de Deportes */
	AddMenuItem(tiendadeportes, 0, "Bate");
	AddMenuItem(tiendadeportes, 1, "50$");
	AddMenuItem(tiendadeportes, 0, "Palo de golf");
	AddMenuItem(tiendadeportes, 1, "70$");
	AddMenuItem(tiendadeportes, 0, "Palo de billar");
	AddMenuItem(tiendadeportes, 1, "60$");
	AddMenuItem(tiendadeportes, 0, "Salir");

	ferreteria = CreateMenu("Ferretería", 2, 50.0, 180.0, 200.0, 200.0); /* Menú de Ferreteria */
	AddMenuItem(ferreteria, 0, "Palanca");
	AddMenuItem(ferreteria, 1, "100$");
	AddMenuItem(ferreteria, 0, "Cuchillo");
	AddMenuItem(ferreteria, 1, "100$");
	AddMenuItem(ferreteria, 0, "Destornillador");
	AddMenuItem(ferreteria, 1, "20$");
	AddMenuItem(ferreteria, 0, "Extintor");
	AddMenuItem(ferreteria, 1, "300$");
	AddMenuItem(ferreteria, 0, "Spray");
	AddMenuItem(ferreteria, 1, "150$");
	AddMenuItem(ferreteria, 0, "Pala");
	AddMenuItem(ferreteria, 1, "60$");
	AddMenuItem(ferreteria, 0, "Salir");

	tiendaropa = CreateMenu("Tienda de ropa", 2, 50.0, 180.0, 200.0, 200.0); /* Menú Tiendas de Ropa */
	AddMenuItem(tiendaropa, 0, "Skin");
	AddMenuItem(tiendaropa, 1, "100$");
	AddMenuItem(tiendaropa, 0, "Salir");

	electronica = CreateMenu("Tienda de electrónica", 2, 50.0, 180.0, 200.0, 200.0); /* Menú Tiendas Electronicas */
	AddMenuItem(electronica, 0, "Movil");
	AddMenuItem(electronica, 1, "3000$");
	AddMenuItem(electronica, 0, "Camara");
	AddMenuItem(electronica, 1, "400$");
	AddMenuItem(electronica, 0, "Reloj casio digital");
	AddMenuItem(electronica, 1, "800$");
	AddMenuItem(electronica, 0, "GPS");
	AddMenuItem(electronica, 1, "2100$");
	AddMenuItem(electronica, 0, "Salir");

	estanco = CreateMenu("Estanco", 2, 50.0, 180.0, 200.0, 200.0); //* Menú Estancos */
	AddMenuItem(estanco, 0, "Cigarrillos");
	AddMenuItem(estanco, 1, "20$");
	AddMenuItem(estanco, 0, "Mechero");
	AddMenuItem(estanco, 1, "15$");
	AddMenuItem(estanco, 0, "Salir");

	licoreria = CreateMenu("Licoreria", 2, 50.0, 180.0, 200.0, 200.0); /* Menú Licoleria */
	AddMenuItem(licoreria, 0, "Botella Whisky");
	AddMenuItem(licoreria, 1, "30$");
	AddMenuItem(licoreria, 0, "Botella Ron");
	AddMenuItem(licoreria, 1, "30$");
	AddMenuItem(licoreria, 0, "Botella cerveza");
	AddMenuItem(licoreria, 1, "20$");
	AddMenuItem(licoreria, 0, "Salir");
	//----------- Labels/MapIcon/Pickups ----------------//
	for(new i=0;i<MAX_PLAYERS;i++)
	{
 		AFK[i] = Create3DTextLabel("[AFK]{FFFFFF}",0xFFFF04FF,0.0, 0.0,0.0,10,0,1);
	}
    for(new x=0; x<sizeof(Mostradores); x++)
    {
    	CreateDynamic3DTextLabel("'/Comprar' o H",0xb0b0b0FF,Mostradores[x][0],Mostradores[x][1],Mostradores[x][2], 1, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1);
    	CreateDynamicObject(19197, Mostradores[x][0],Mostradores[x][1],Mostradores[x][2], 0.00000, 0.00000, 0.00000);
	}
    for(new i; i < sizeof(Cajeros); i++) //Cajeros
	{
		CreateDynamicMapIcon(Cajeros[i][cX], Cajeros[i][cY], Cajeros[i][cZ], 52, 0, 0, 0, -1, 100.0);
		CreateDynamic3DTextLabel("{FFFFFF}Cajero Automático\n\n{fce80c}Presiona [F] o /ATM", VerdeOscuro, Cajeros[i][cX], Cajeros[i][cY], Cajeros[i][cZ] + 0.5, 10);
	}
    for(new i; i < sizeof(ParkInfo); i++) //Parking
	{
		CreateDynamic3DTextLabel("/Parking", Amarillo, ParkInfo[i][parkPosX], ParkInfo[i][parkPosY], ParkInfo[i][parkPosZ] + 0.5, 10);
		CreateDynamicPickup(1239, 23, ParkInfo[i][parkPosX], ParkInfo[i][parkPosY], ParkInfo[i][parkPosZ]);
	}
	for(new i; i < sizeof(Jobs); i++) //Jobs
	{
		CreateDynamicPickup(1239, 23, Jobs[i][Jx], Jobs[i][Jy], Jobs[i][Jz]);
		CreateDynamicMapIcon(Jobs[i][Jx], Jobs[i][Jy], Jobs[i][Jz], 56, 0, 0, 0, -1, 100.0);
		format(string, 128, "{FFFFFF}Recepción de %s\n\n¿Quieres ser %s? usa {fce80c}(/trabajo)", Jobs[i][JobNombre],Jobs[i][JobNombre]);
		CreateDynamic3DTextLabel(string, Amarillo, Jobs[i][Jx], Jobs[i][Jy], Jobs[i][Jz] + 0.4, 15);
	}
	for(new i; i < sizeof(Gasolineras); i++) //Jobs
	{
		format(string, 128, "Combustible\n\n{FFFFFF}Para llenar combustible utiliza{FFFF04} /rellenar [Litros]");
		CreateDynamic3DTextLabel(string, Blanco, Gasolineras[i][Gx], Gasolineras[i][Gy], Gasolineras[i][Gz] + 0.4, 5);
	}
	for(new i; i < sizeof(Concesionarios); i++) //Concesionarios
	{
		CreateDynamicPickup(1239, 23, Concesionarios[i][cX], Concesionarios[i][cY], Concesionarios[i][cZ]);
		CreateDynamicMapIcon(Concesionarios[i][cX], Concesionarios[i][cY], Concesionarios[i][cZ], 55, 0, 0, 0, -1, 100.0);
		format(string, 128, "Concesionario %s", Concesionarios[i][cNombre]);
		CreateDynamic3DTextLabel(string, Amarillo, Concesionarios[i][cX], Concesionarios[i][cY], Concesionarios[i][cZ] + 0.1, 30);
		CreateDynamic3DTextLabel("/comprarveh - /catalogo", Gris, Concesionarios[i][cX], Concesionarios[i][cY], Concesionarios[i][cZ], 30);
	}
    for(new i; i < sizeof(AutoEscuelas); i++) //Autoescuelas
	{
		CreateDynamicPickup(1239, 23, AutoEscuelas[i][AutoX], AutoEscuelas[i][AutoY], AutoEscuelas[i][AutoZ]);
		format(string, 50, "%s", AutoEscuelas[i][AutoNombre]);
		CreateDynamic3DTextLabel(string, Amarillo, AutoEscuelas[i][AutoX], AutoEscuelas[i][AutoY], AutoEscuelas[i][AutoZ] + 0.5, 30);
		CreateDynamic3DTextLabel("/Examen", Gris, AutoEscuelas[i][AutoX], AutoEscuelas[i][AutoY], AutoEscuelas[i][AutoZ], 30);
	}
	//----------- Objetos Moviles ----------------//
	lspdpuerta[1] = CreateDynamicObject(968,1544.6999500,-1630.8000500,13.3000000,0.0000000,90.0000000,90.0000000); //object(barrierturn) (1)
	lspdpuerta[2] = CreateDynamicObject(975,1589.0595700,-1638.1992200,14.0300000,0.0000000,0.0000000,0.0000000); //object(columbiangate) (1)
	lspdpuerta[3] = CreateDynamicObject(3089,1582.6169400,-1637.9000200,13.5400000,0.0000000,0.0000000,0.0000000); //object(ab_casdorlok) (1)
	lspdpuerta[4] = CreateDynamicObject(2930,213.8999900,124.9300000,1000.6500200,0.0000000,0.0000000,90.0000000); //object(chinatgate) (2)
	lspdpuerta[5] = CreateDynamicObject(3089,253.1992200,109.8193400,1003.5000000,0.0000000,0.0000000,270.0000000); //object(ab_casdorlok) (1)
	lspdpuerta[6] = CreateDynamicObject(3089,239.5996100,118.3496100,1003.5000000,0.0000000,0.0000000,270.0000000); //object(ab_casdorlok) (1)
	lspdpuerta[7] = CreateDynamicObject(2930,258.89999390,91.50000000,1004.09997559,0.00000000,0.00000000,0.00000000); //object(chinatgate) (3)
	peajepuerta[1] = CreateDynamicObject(968, 53.86662300, -1526.9995120, 4.77926100,   0.00000, -89.38135874, -97.81226081);
	peajepuerta[2] = CreateDynamicObject(968, 52.44144100, -1536.91735800, 4.86119400,   0.00000, -90.24079544, 82.18770174);
	peajepuerta[3] = CreateDynamicObject(968, 5.8720703125, -1318.119140625, 11.241556167603,   0.00000, 270, 307.99633789063);
	peajepuerta[4] = CreateDynamicObject(968, 23.958234, -1339.254516,9.898574,   0.00000, 90, 307);
	Celda[1] = CreateDynamicObject(19303, 266.25, 78.46, 1001.29, 0.00, 0.00, 90.00);
	Celda[2] = CreateDynamicObject(19303, 266.25, 82.95, 1001.29, 0.00, 0.00, 90.00);
	Celda[3] = CreateDynamicObject(19303, 266.25, 87.46, 1001.29, 0.00, 0.00, 90.00);
	lspddeposito = CreateDynamicObject(980,1620.6500244,-1861.5996094,15.3000002,0.0000000,0.0000000,179.9945068); //object(airportgate) (3)
	puertaprision[1] = CreateDynamicObject(2930,2527.2000000,-1294.1300000,1049.9000000,0.0000000,0.0000000,90.0000000); //object(chinatgate) (2)
	puertaprision[2] = CreateDynamicObject(2930,2531.7000000,-1283.8740000,1049.9000000,0.0000000,0.0000000,90.0000000); //object(chinatgate) (2)
	gobiernopuerta[1] = CreateDynamicObject(1536, 371.26, 166.58, 1007.40,   0.00, 0.00, 0.00);
	gobiernopuerta[2] = CreateDynamicObject(1536, 365.77, 189.55, 1007.37,   0.00, 0.00, 0.00);
	rusopuerta[1] = CreateDynamicObject(980, 786.46112, -1152.50549, 25.30000,   0.00000, 0.00000, 92.00000);
	rusopuerta[2] = CreateDynamicObject(980, 659.02692, -1226.87085, 17.29962,   0.00000, 0.00000, 62.00000);
	rusopuerta[3] = CreateDynamicObject(980, 664.98047, -1309.05774, 15.22468,   0.00000, 0.00000, 0.00000);
	lcnpuerta[1] = CreateDynamicObject(980, 1426.8367, -1885.6631, 15.3539,   0.00000, 0.00000, 0.00000);
	mecaDillimore=CreateDynamicObject(980, 812.22028, -540.16632, 18.15460,   0.00000, 0.00000, 0.06000);
	puertaceldaprision[1] = CreateDynamicObject(1495,2555.7200000,-1304.1000000,1043.1000000,0.0000000,0.0000000,0.0000000); //object(gen_doorext01) (1)
	puertaceldaprision[2] = CreateDynamicObject(1495,2559.6199000,-1304.0996000,1043.1000000,0.0000000,0.0000000,0.0000000); //object(gen_doorext01) (2)
	puertaceldaprision[3] = CreateDynamicObject(1495,2551.8210000,-1304.0996000,1043.1000000,0.0000000,0.0000000,0.0000000); //object(gen_doorext01) (3)
	puertaceldaprision[4] = CreateDynamicObject(1495,2547.9224000,-1304.0996000,1043.1000000,0.0000000,0.0000000,0.0000000); //object(gen_doorext01) (5)
	puertaceldaprision[5] = CreateDynamicObject(1495,2544.0237000,-1304.0996000,1043.1000000,0.0000000,0.0000000,0.0000000); //object(gen_doorext01) (6)
	puertaceldaprision[6] = CreateDynamicObject(1495,2540.1243000,-1304.0996000,1043.1000000,0.0000000,0.0000000,0.0000000); //object(gen_doorext01) (7)
	puertaceldaprision[7] = CreateDynamicObject(1495,2536.2253000,-1304.0996000,1043.1000000,0.0000000,0.0000000,0.0000000); //object(gen_doorext01) (8)
	puertaceldaprision[8] = CreateDynamicObject(1495,2532.3264000,-1304.0996000,1043.1000000,0.0000000,0.0000000,0.0000000); //object(gen_doorext01) (9)
	puertaceldaprision[9] = CreateDynamicObject(1495,2561.6799300,-1283.6899400,1043.0999800,0.0000000,0.0000000,180.0000000); //object(gen_doorext01) (10)
	puertaceldaprision[10] = CreateDynamicObject(1495,2557.7798000,-1283.6895000,1043.1000000,0.0000000,0.0000000,180.0000000); //object(gen_doorext01) (11)
	puertaceldaprision[11] = CreateDynamicObject(1495,2553.8799000,-1283.6895000,1043.1000000,0.0000000,0.0000000,180.0000000); //object(gen_doorext01) (12)
	puertaceldaprision[12] = CreateDynamicObject(1495,2549.9800000,-1283.6895000,1043.1000000,0.0000000,0.0000000,180.0000000); //object(gen_doorext01) (13)
	puertaceldaprision[13] = CreateDynamicObject(1495,2546.0798000,-1283.6895000,1043.1000000,0.0000000,0.0000000,180.0000000); //object(gen_doorext01) (14)
	puertaceldaprision[14] = CreateDynamicObject(1495,2542.1799000,-1283.6895000,1043.1000000,0.0000000,0.0000000,180.0000000); //object(gen_doorext01) (15)
	puertaceldaprision[15] = CreateDynamicObject(1495,2538.2798000,-1283.6895000,1043.1000000,0.0000000,0.0000000,180.0000000); //object(gen_doorext01) (16)
	puertapatioprision = CreateDynamicObject(971,2571.3999000,-1304.8300000,1043.0000000,0.0000000,0.0000000,90.0000000); //object(subwaygate) (1)
	LSNpuerta1 = CreateDynamicObject(969,781.8000000,-1384.8000000,12.7000000,0.0000000,0.0000000,180.2500000); //object(electricgate) (3)
	LSNpuerta2 = CreateDynamicObject(969,781.8000000,-1330.3000000,12.7000000,0.0000000,0.0000000,178.7470000); //object(electricgate) (5)
	puertaGN[0] = CreateDynamicObject(19912, 130.88757, 1939.11035, 20.57796,   0.00000, 0.00000, 180.46609);
	puertaGN[1]= CreateDynamicObject(19912, 164.37537, 1792.10754, 19.28235,   0.00000, 0.00000, 178.21440);
	PressBancaBarraObjeto[0] = CreateObject(2913, barbell_pos[ 0 ][ 0 ], barbell_pos[ 0 ][ 1 ], barbell_pos[ 0 ][ 2 ], barbell_pos[ 0 ][ 3 ], barbell_pos[ 0 ][ 4 ], barbell_pos[ 0 ][ 5 ] );
	PressBancaBarraObjeto[1] = CreateObject(2913, barbell_pos[ 1 ][ 0 ], barbell_pos[ 1 ][ 1 ], barbell_pos[ 1 ][ 2 ], barbell_pos[ 1 ][ 3 ], barbell_pos[ 1 ][ 4 ], barbell_pos[ 1 ][ 5 ] );
	PressBancaBarraObjeto[2] = CreateObject(2913, barbell_pos[ 2 ][ 0 ], barbell_pos[ 2 ][ 1 ], barbell_pos[ 2 ][ 2 ], barbell_pos[ 2 ][ 3 ], barbell_pos[ 2 ][ 4 ], barbell_pos[ 2 ][ 5 ] );
    //----------- Cambios de materiales de objetos ----------------//
	cristal[1] = CreateObject(19325, 239.76820, 112.93750, 1005.29999,   0.00000, 0.00000, 0.00000);
	cristal[2] = CreateObject(19325, 252.99770, 117.04010, 1005.29999,   0.00000, 0.00000, 0.00000);
	cristal[3] = CreateObject(19325, 239.38820, 112.93750, 1005.29999,   0.00000, 0.00000, 0.00000);
	cristal[4] = CreateObject(19325, 253.35770, 117.04010, 1005.29999,   0.00000, 0.00000, 0.00000);
	cristal[5] = CreateObject(19325, 249.66161, 119.21840, 1005.29999,   0.00000, 0.00000, 90.00000);
	cristal[6] = CreateObject(19325, 243.02161, 119.21840, 1005.29999,   0.00000, 0.00000, 90.00000);
	cristal[7] = CreateObject(19325, 243.00160, 119.47840, 1005.29999,   0.00000, 0.00000, 90.00000);
	cristal[8] = CreateObject(19325, 249.64160, 119.47840, 1005.29999,   0.00000, 0.00000, 90.00000);
	SetObjectMaterial(cristal[1], 0, 19341, "egg_texts", "easter_egg01", 0x00FFFFFF);
	SetObjectMaterial(cristal[2], 0, 19341, "egg_texts", "easter_egg01", 0x00FFFFFF);
	SetObjectMaterial(cristal[3], 0, 19341, "egg_texts", "easter_egg01", 0x00FFFFFF);
	SetObjectMaterial(cristal[4], 0, 19341, "egg_texts", "easter_egg01", 0x00FFFFFF);
	SetObjectMaterial(cristal[5], 0, 19341, "egg_texts", "easter_egg01", 0x00FFFFFF);
	SetObjectMaterial(cristal[6], 0, 19341, "egg_texts", "easter_egg01", 0x00FFFFFF);
	SetObjectMaterial(cristal[7], 0, 19341, "egg_texts", "easter_egg01", 0x00FFFFFF);
	SetObjectMaterial(cristal[8], 0, 19341, "egg_texts", "easter_egg01", 0x00FFFFFF);
	//----------- Vehículos del Servidor ----------------//
	/* LSPD */
    Attach3DTextLabelToVehicle(Create3DTextLabel("BUNKER-01", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(427,-1583.839100000,749.419600000,-5.110300000,180.00000000,0,1,3600),0.0,-4,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("BUNKER-02", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(427,-1587.963900000,749.419600000,-5.110300000,180.00000000,0,1,3600),0,-4,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("BUNKER-033", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(427,-1592.269500000,749.419600000,-5.103500000,180.00000000,0,1,3600),0,-4,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("BOOMER-01", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(601,-1573.21190000,742.46300000,-5.48360000,90.00000000,0,1,3600),0,-4,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("BOOMER-02", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(601,-1573.21190000,738.59180000,-5.48340000,90.00000000,0,1,3600),0.0,-4,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("RANCHER-01", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(490,-1572.4979,710.2267,-5.1159,90.0000,0,0,3600),0.0,-4,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("RANCHER-02", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(490,-1572.4979,706.0075,-5.1159,90.0000,0,0,3600),0.0,-4,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("RANCHER-03", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(490,-1572.4979,714.2833,-5.1159,90.0000,0,0,3600),0.0,-4,0);
   	AddStaticVehicleEx(516,-1616.3041,732.1787,-5.4081,0.0000,9,9,3600);
    AddStaticVehicleEx(496,-1612.4601,732.0684,-5.5265,0.0000,3,4,3600);
    AddStaticVehicleEx(467,-1616.4700,749.4939,-5.5019,180.0000,1,6,3600);
    AddStaticVehicleEx(402,-1604.3485,749.9977,-5.4718,180.0000,0,0,3600);
    AddStaticVehicleEx(415,-1608.4899,749.9977,-5.4716,180.0000,0,0,3600);
   	AddStaticVehicleEx(426,-1612.1938,749.1891,-5.4173,180.0000,0,0, 3600);
    Attach3DTextLabelToVehicle(Create3DTextLabel("GHOST-01", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(596,1545.54943848,-1651.02917480,5.71062469,90.00000000,0,0,3600),0.0,-3,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("TANGO-01", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(596,1545.54943848,-1655.07836914,5.71062469,90.00000000,0,1,3600),0.0,-3,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("TANGO-02", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(596,1545.54943848,-1659.02734375,5.71062469,90.00000000,0,1,3600),0.0,-3,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("TANGO-03", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(596,1545.54943848,-1663.03979492,5.71062469,90.00000000,0,1,3600),0.0,-3,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("TANGO-04", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(596,1545.54943848,-1667.89807129,5.71062469,90.00000000,0,1,3600),0.0,-3,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("TANGO-05", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(596,1545.54943848,-1671.97827148,5.71062469,90.00000000,0,1,3600),0.0,-3,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("TANGO-06", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(596,1545.54943848,-1676.07922363,5.71062469,90.00000000,0,1,3600),0.0,-3,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("TANGO-07", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(596,1545.54943848,-1684.37084961,5.74014664,90.00000000,0,1,3600),0.0,-3,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("TANGO-08", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(596,1545.54943848,-1680.22387695,5.74014664,90.00000000,0,1,3600),0.0,-3,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("SHADOW-01", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(523,1557.4336,-1710.5233,5.4525,0.00000000,0,1,3600),0.0,-1,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("SHADOW-02", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(523,1559.8743,-1710.5233,5.4525,0.00000000,0,1,3600),0.0,-1,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("SHADOW-03", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(523,1562.3150,-1710.5233,5.4525,0.00000000,0,1,3600),0.0,-1,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("SHADOW-04", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(523,1564.7557,-1710.5233,5.4525,0.00000000,0,1,3600),0.0,-1,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("SHADOW-05", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(523,1567.1964,-1710.5233,5.4525,0.00000000,0,1,3600),0.0,-1,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("SHADOW-06", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(523,1569.6371,-1710.5233,5.4525,0.00000000,0,1,3600),0.0,-1,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("HALCON-01", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(497,1566.50000000,-1708.06005859,28.70000076,90.00000000,0,1,3600),0.0,-4,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("HALCON-02", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(497,1569.69995117,-1652.80004883,28.70000076,0.00000000,0,1,3600),0.0,-4,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("HALCON-03", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(487,1566.4906,-1694.0710,28.6254,90.00000000,0,0,3600),0.0,-4,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("HALCON-04", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(497,612.1329,-603.9223,22.8830,180.00000000,0,1,3600),0.0,-4,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("ROMEO-01", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(598,1526.49572754,-1643.98303223,6.27575159,180.00000000,0,1,3600),0.0,-3,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("ROMEO-02", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(598,1530.46606445,-1643.98303223,6.27575159,180.00000000,0,1,3600),0.0,-3,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("ROMEO-03", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(598,1534.69177246,-1643.98303223,6.27575159,180.00000000,0,1,3600),0.0,-3,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("ROMEO-04", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(598,1538.71667480,-1643.98303223,6.27575159,180.00000000,0,1,3600),0.0,-3,0);
    AddStaticVehicleEx(525,1591.4323,-1711.0713,5.7688,0.00000000,0,1,3600);
    AddStaticVehicleEx(525,1595.4498,-1711.0713,5.7680,0.00000000,0,1,3600);
    Attach3DTextLabelToVehicle(Create3DTextLabel("HALCON-06", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(497,2280.2578,73.9502,35.1907,180.00000000,0,1,3600),0.0,-4,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("DUMMY41", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(430,2493.2432,-2268.2346,0.0000,90.000000,0,1,3600),0.0,-4,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("DUMMY42", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(430,2529.6113,-2268.2346,0.0000,90.000000,0,1,3600),0.0,-4,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("DUMMY43", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(473,2511.42725,-2267.2346,0.0000,90.000000,1,1,3600),0.0,-4,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("DUMMY44", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(430,2114.0967,-103.7018,-0.1933,120.5044,0,1,3600),0.0,-4,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("BAKER-01", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(599,1602.6211,-1691.9659,6.0790,90.00000000,0,1,3600),0.0,-3,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("BAKER-02", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(599,1602.6211,-1687.8544,6.1430,90.00000000,0,1,3600),0.0,-3,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("BAKER-03", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(599,1602.6211,-1683.9187,6.1060,90.00000000,0,1,3600),0.0,-3,0);
    Attach3DTextLabelToVehicle(Create3DTextLabel("BAKER-04", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(599,1602.6211,-1696.0380,6.1060,90.00000000,0,1,3600),0.0,-3,0);
	Attach3DTextLabelToVehicle(Create3DTextLabel("GHOST-02", 0xFFFFFFAA, 0.0, 0.0, 0.0, PLATEDISTANCE, 0, 0),AddStaticVehicleEx(597,1528.7050,-1688.0760,5.6593,270.00000000,1,1,3600),0.0,-3,0);
	VehiculoPublico[0]=AddStaticVehicleEx(597,1528.7050,-1683.9211,5.6593,270.00000000,1,1,3600);
	Attach3DTextLabelToVehicle(Create3DTextLabel("GHOST-03", 0xFFFFFFAA, 0.0, 0.0, 0.0, 10.0, 0, 0),VehiculoPublico[0],0.0,-3,0);
    /* Gobierno */
    AddStaticVehicleEx(409,1520.9000200,-1829.8000500,13.5000000,180.0000000,1,1,3600);
    AddStaticVehicleEx(421,1526.1999500,-1829.3000500,13.5000000,180.0000000,40,40,3600);
    AddStaticVehicleEx(487,1421.6412400,-1789.4536100,33.6946900,0.0000000,1,1,3600);
   	VehiculoPublico[1]=AddStaticVehicleEx(533,1532.0999800,-1829.5000000,13.3000000,180.0000000,13,13,3600);
    /* CNN */
	AddStaticVehicleEx(582,736.3016357,-1350.6542969,13.6686020,270.0000000,116,1,3600);
	AddStaticVehicleEx(582,736.3227539,-1345.6693115,13.6686020,270.0000000,116,1,3600);
	VehiculoPublico[2]=AddStaticVehicleEx(488,741.9565430,-1373.2150879,25.9572105,0.0000000,-1,-1,3600);
    /* Permiso de Conducción */
    AddStaticVehicleEx(401,2052.5447,-1903.7300,13.3264,180.0000000,1,1,600);
    AddStaticVehicleEx(401,2055.9919,-1903.7300,13.3264,180.0000000,1,1,600);
   	VehiculoPublico[3]=AddStaticVehicleEx(401,2059.4391,-1903.7300,13.3264,180.0000000,1,1,600);
    /* Permiso Aviación */
    VehiculoPublico[4]=AddStaticVehicleEx(593,1991.5916,-2286.5642,14.0084,90.0000000,0,0,600);
    /* Permiso Navegación */
    VehiculoPublico[5]=AddStaticVehicleEx(473,2944.3000000,-1561.9000000,0.0000000,260.0000000,1,1,600);
    /* Trabajo Cosechador */
	AddStaticVehicleEx(532,-371.73156738,-1464.68566895,26.83628082,270.00000000,-1,-1,600);
	AddStaticVehicleEx(532,-372.02117920,-1476.42980957,26.83628082,270.00000000,-1,-1,600);
	VehiculoPublico[6]=AddStaticVehicleEx(532,-369.85134888,-1489.54174805,26.83628082,288.00000000,-1,-1,600);
	/* Trabajo Taxista */
	AddStaticVehicleEx(420,1802.8204,-1903.1697,13.1792,90.0000000,6,1,600);
	AddStaticVehicleEx(420,1802.8204,-1908.2688,13.1762,90.0000000,6,1,600);
	AddStaticVehicleEx(420,1802.8204,-1912.9968,13.1757,90.0000000,6,1,600);
	AddStaticVehicleEx(420,1802.8204,-1918.2117,13.1729,90.2500000,6,1,600);
	AddStaticVehicleEx(420,1802.8204,-1923.2921,13.1717,90.2470000,6,1,600);
	AddStaticVehicleEx(420,1802.8204,-1928.2810,13.1667,90.2470000,6,1,600);
	AddStaticVehicleEx(420,1786.9673,-1931.0642,13.1667,357.7973,6,1,600);
	VehiculoPublico[7]=AddStaticVehicleEx(420,1781.7911,-1930.6821,13.1665,359.1430,6,1,600);
	/* Trabajo Pescador */
	AddStaticVehicleEx(453,2967.8000000,-1525.9000000,0.0000000,260.0000000,1,1,600);
	VehiculoPublico[8]=AddStaticVehicleEx(453,2966.3999000,-1534.0000000,0.0000000,260.0000000,1,1,600);
    /* Facción LSMD */
	AddStaticVehicleEx(416,1180.2253,-1308.2930,13.3804,267.1651,1,16,600);
	AddStaticVehicleEx(416,1192.8120,-1294.5194,13.5316,179.3421,1,16,600);
	AddStaticVehicleEx(416,1181.5643,-1338.4767,13.8523,270.0883,1,16,600);
	AddStaticVehicleEx(416,1192.4161,-1381.3414,13.4860,180.8182,1,16,600);
	AddStaticVehicleEx(416,1209.0096,-1381.5615,13.4080,0.7365,1,16,600);
	AddStaticVehicleEx(416,1209.5402,-1293.7908,13.5310,1.3535,1,16,600);
	VehiculoPublico[9]=AddStaticVehicleEx(416,1209.1156,-1332.6504,13.5466,358.3593,1,16,600);
	/* Grúas Mecánico */
	AddStaticVehicleEx(525,1773.7186,-2071.9082,13.4839,358.3988,6,0,600);
	AddStaticVehicleEx(525,1766.5966,-2071.9607,13.4895,358.8182,6,0,600);
	AddStaticVehicleEx(525,1759.4652,-2071.9194,13.5010,359.8815,6,0,600);
	AddStaticVehicleEx(525,1752.1691,-2071.7297,13.5036,358.4063,6,0,600);
	VehiculoPublico[10]=AddStaticVehicleEx(525,1745.6877,-2072.1392,13.5060,358.5654,6,0,600);
	/* Vehículos Aeropuerto LS */
	AddStaticVehicleEx(485,1946.5103,-2233.0952,13.2068,180.3700,3,6,600);
	AddStaticVehicleEx(485,1953.7277,-2232.5593,13.2062,179.0535,3,6,600);
	AddStaticVehicleEx(485,1962.9532,-2232.5818,13.2065,182.4112,3,6,600);
	AddStaticVehicleEx(485,1974.4479,-2232.6584,13.2025,180.9929,3,6,600);
	VehiculoPublico[11]=AddStaticVehicleEx(485,1982.8790,-2232.4619,13.2043,180.8095,3,6,600);
	/* Aviones Aeropuerto */
	AutosV[0] = AddStaticVehicleEx(593,2003.2958,-2625.2822,14.0060,359.7594,3,6,600);
    AutosVLabel[AutosV[0]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}1", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[0]] , AutosV[0], 0.0, 0.0, 0.0);
	AutosV[1] = AddStaticVehicleEx(593,1951.3646,-2624.5964,14.2486,1.1153,3,6,600);
    AutosVLabel[AutosV[1]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}1", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[1]] , AutosV[1], 0.0, 0.0, 0.0);
	AutosV[2] = AddStaticVehicleEx(593,2054.5732,-2627.2317,14.0060,359.2659,3,6,600);
    AutosVLabel[AutosV[2]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}1", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[2]] , AutosV[2], 0.0, 0.0, 0.0);
	AutosV[3] = AddStaticVehicleEx(593,2104.4063,-2612.5073,14.0071,31.9385,3,6,600);
    AutosVLabel[AutosV[3]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}1", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[3]] , AutosV[3], 0.0, 0.0, 0.0);
	AutosV[4] = AddStaticVehicleEx(519,1871.2645,-2466.6326,14.4761,179.8871,3,6,600);
    AutosVLabel[AutosV[4]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}2", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[4]] , AutosV[4], 0.0, 0.0, 0.0);
	AutosV[5] = AddStaticVehicleEx(519,1811.2905,-2463.4827,14.4730,176.9446,3,6,600);
    AutosVLabel[AutosV[5]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}2", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[5]] , AutosV[5], 0.0, 0.0, 0.0);
	AutosV[6] = AddStaticVehicleEx(519,1727.7557,-2466.4648,14.4768,178.4066,3,6,600);
    AutosVLabel[AutosV[6]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}2", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[6]] , AutosV[6], 0.0, 0.0, 0.0);
	AutosV[7] = AddStaticVehicleEx(519,1633.3419,-2468.2605,14.4767,180.2391,3,6,600);
    AutosVLabel[AutosV[7]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}2", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[7]] , AutosV[7], 0.0, 0.0, 0.0);
	AutosV[8] = AddStaticVehicleEx(553,1473.1786,-2441.0073,14.7858,203.1665,3,6,600);
    AutosVLabel[AutosV[8]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}3", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[8]] , AutosV[8], 0.0, 0.0, 0.0);
	AutosV[9] = AddStaticVehicleEx(553,1428.2627,-2447.4751,14.8967,202.5852,3,6,600);
    AutosVLabel[AutosV[9]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}3", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[9]] , AutosV[9], 0.0, 0.0, 0.0);
	AutosV[10] = AddStaticVehicleEx(553,1388.9917,-2448.9331,14.9003,207.2720,3,6,600);
    AutosVLabel[AutosV[10]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}3", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[10]] , AutosV[10], 0.0, 0.0, 0.0);
	AutosV[11] = AddStaticVehicle(593,1285.3490,1324.4358,11.2827,269.4970,2,1);
    AutosVLabel[AutosV[11]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}1", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[11]] , AutosV[11], 0.0, 0.0, 0.0);
	AutosV[12] = AddStaticVehicle(593,1285.2711,1360.8372,11.2793,274.4966,2,1);
    AutosVLabel[AutosV[12]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}1", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[12]] , AutosV[12], 0.0, 0.0, 0.0);
	AutosV[13] = AddStaticVehicle(519,1506.3104,1279.8203,11.7389,89.5518,1,1);
    AutosVLabel[AutosV[13]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}2", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[13]] , AutosV[13], 0.0, 0.0, 0.0);
	AutosV[14] = AddStaticVehicle(519,1508.7742,1318.0067,11.7882,89.9853,1,1);
    AutosVLabel[AutosV[14]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}2", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[14]] , AutosV[14], 0.0, 0.0, 0.0);
	AutosV[15] = AddStaticVehicle(519,1506.8660,1376.5896,11.7659,86.3912,1,1);
    AutosVLabel[AutosV[15]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}2", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[15]] , AutosV[15], 0.0, 0.0, 0.0);
	AutosV[16] = AddStaticVehicle(519,1507.7737,1430.4242,11.7667,90.6165,1,1);
    AutosVLabel[AutosV[16]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}2", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[16]] , AutosV[16], 0.0, 0.0, 0.0);
	AutosV[17] = AddStaticVehicle(553,1609.2719,1629.2255,12.1479,179.6383,98,114);
    AutosVLabel[AutosV[17]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}3", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[17]] , AutosV[17], 0.0, 0.0, 0.0);
	AutosV[18] = AddStaticVehicle(553,1510.0013,1637.1343,12.1403,88.9885,98,114);
    AutosVLabel[AutosV[18]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}3", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[18]] , AutosV[18], 0.0, 0.0, 0.0);
	AutosV[19] = AddStaticVehicle(553,1507.1420,1708.0482,12.1615,88.2422,98,114);
    AutosVLabel[AutosV[19]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}3", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[19]] , AutosV[19], 0.0, 0.0, 0.0);
	AutosV[20] = AddStaticVehicle(593,-1226.6082,-33.9405,14.6098,134.1428,58,8);
    AutosVLabel[AutosV[20]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}1", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[20]] , AutosV[20], 0.0, 0.0, 0.0);
	AutosV[21] = AddStaticVehicle(593,-1253.5745,-9.4270,14.6104,134.6693,58,8);
    AutosVLabel[AutosV[21]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}1", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[21]] , AutosV[21], 0.0, 0.0, 0.0);
	AutosV[22] = AddStaticVehicle(593,-1282.4586,18.5854,14.6083,133.9823,58,8);
    AutosVLabel[AutosV[22]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}1", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[22]] , AutosV[22], 0.0, 0.0, 0.0);
	AutosV[23] = AddStaticVehicle(519,-1206.2476,-144.7128,15.0668,135.5293,1,1);
    AutosVLabel[AutosV[23]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}2", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[23]] , AutosV[23], 0.0, 0.0, 0.0);
	AutosV[24] = AddStaticVehicle(519,-1242.2065,-93.5251,15.0640,135.1965,1,1);
    AutosVLabel[AutosV[24]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}2", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[24]] , AutosV[24], 0.0, 0.0, 0.0);
	AutosV[25] = AddStaticVehicle(553,-1134.7113,-204.1120,15.4993,106.4314,61,74);
    AutosVLabel[AutosV[25]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}3", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[25]] , AutosV[25], 0.0, 0.0, 0.0);
	AutosV[26] = AddStaticVehicle(553,-1141.7518,-275.5378,15.4732,92.6240,61,74);
    AutosVLabel[AutosV[26]] = Create3DTextLabel( "Trabajo Piloto\nAvión Nivel {FFFF04}3", Blanco, 0.0, 0.0, 0.0, 15.0, 2, 1 );
	Attach3DTextLabelToVehicle(AutosVLabel[AutosV[26]] , AutosV[26], 0.0, 0.0, 0.0);
	VehiculoPublico[12]=AutosV[26];
	/* Vehículos Aeropuerto LV */
	AddStaticVehicleEx(485,1653.6008,1614.3835,10.4775,268.1438,3,6,600);
	AddStaticVehicleEx(485,1653.6838,1624.7206,10.4777,270.9861,3,6,600);
	AddStaticVehicleEx(485,1653.6951,1634.3984,10.4781,272.2432,3,6,600);
	VehiculoPublico[13]=AddStaticVehicleEx(485,1653.4631,1644.3506,10.4801,270.1633,3,6,600);
	/* Vehículos Renta */
	AddStaticVehicleEx(585,1729.9875,-1858.2773,13.0008,269.2092,1,1,600);
	AddStaticVehicleEx(585,1752.3033,-1851.6531,13.0005,268.6224,1,1,600);
	AddStaticVehicleEx(585,1774.8359,-1858.4408,12.9976,270.7035,1,1,600);
	VehiculoPublico[14]=AddStaticVehicleEx(585,1808.6028,-1851.7432,13.0011,270.8742,1,1,600);
	/* Vehículos Mafia Rusa */
	AddStaticVehicleEx(560,659.4377,-1300.1586,13.1687,179.4802,0,0,600);
	AddStaticVehicleEx(560,659.3321,-1282.7073,13.1727,181.2941,0,0,600);
	AddStaticVehicleEx(560,659.3189,-1256.6012,13.1684,178.5203,0,0,600);
    AddStaticVehicleEx(409,670.8686,-1292.1429,13.1687,359.0478,0,0,600);
	AddStaticVehicleEx(579,676.1129,-1228.4711,15.1645,127.3217,0,0,600);
	AddStaticVehicleEx(579,690.6516,-1219.8673,16.2323,119.7823,0,0,600);
	VehiculoPublico[15]=AddStaticVehicleEx(579,710.1381,-1206.5341,17.8095,133.6009,0,0,600);
	/* Vehículos La Cosa Nostra */
	AddStaticVehicleEx(580,1275.2672,-2040.8289,58.6729,88.8678,0,0,600);
	AddStaticVehicleEx(580,1275.4889,-2026.5629,58.6158,89.2407,0,0,600);
	AddStaticVehicleEx(580,1275.5852,-2019.4889,58.5996,90.0246,0,0,600);
	AddStaticVehicleEx(580,1275.6001,-2012.5352,58.5977,89.9287,0,0,600);
	AddStaticVehicleEx(580,1275.9241,-2033.9465,58.8085,90.6215,0,0,600);
	AddStaticVehicleEx(560,1247.0564,-2011.6479,59.4149,270.1408,0,0,600);
	AddStaticVehicleEx(560,1246.9142,-2018.6276,59.4222,269.8424,0,0,600);
	AddStaticVehicleEx(560,1247.3257,-2026.0055,59.4113,271.4808,0,0,600);
	AddStaticVehicleEx(560,1247.0461,-2032.6812,59.4207,269.4915,0,0,600);
	AddStaticVehicleEx(560,1247.3762,-2040.2174,59.4113,269.4637,0,0,600);
	VehiculoPublico[16]=AddStaticVehicleEx(409,1253.3424,-2059.0171,59.2439,268.8586,0,0,600);
	/* Vehículos de Yakuza */
	AddStaticVehicleEx(560,485.5199,-1543.2258,18.5497,204.0290,0,0,600);
	AddStaticVehicleEx(560,479.6409,-1525.3170,19.8448,192.0772,0,0,600);
	AddStaticVehicleEx(560,495.3676,-1537.6400,18.6211,205.3956,0,0,600);
	AddStaticVehicleEx(560,489.2869,-1511.8824,20.2089,182.5495,0,0,600);
	AddStaticVehicleEx(522,475.7274,-1511.0126,20.3404,254.6645,0,0,600);
	AddStaticVehicleEx(522,476.8036,-1507.4644,20.3802,254.3834,0,0,600);
	AddStaticVehicleEx(522,476.1938,-1509.5403,20.3544,255.5438,0,0,600);
	VehiculoPublico[17]=AddStaticVehicleEx(409,485.9212,-1467.2992,18.4021,155.7462,0,0,600);
	MAX_VEHPUBLICO=VehiculoPublico[17];
	/* Cargado Vehículos Privados */
	LoadCar();
	/* Contador Vehículos Totales */
	for(new i = 1; i < MAX_VEHICLES; i++)
	{
	    if(!IsValidVehicle(i)){break;}
	  	TotalVeh++;
	}
    /* Loop Vehículos */
    for(new i = 1; i <= TotalVeh; i++)
    {
	    /* Vehículos en Deposito */
	    if(CarInfo[i][cEnDeposito] == 1) //Desguace
	    {
	        SetVehicleVirtualWorld(i, i+1);
	    }
	    /* Sistema Arranque Vehículos */
	    if(!IsABike(i))
		{
			new alarm,doors,bonnet,boot,objective;
    		SetVehicleParamsEx(i,0,0,alarm,doors,bonnet,boot,objective);
    	}
    	if(IsABike(i))
   	 	{
    		new alarm,doors,bonnet,boot,objective;
    		SetVehicleParamsEx(i,1,0,alarm,doors,bonnet,boot,objective);
    	}
	    /* Vehículos CNN */
	    if(CocheLSN(i)){DirectoLSNCoche[i] = NOEXISTE;}
        /* Combustible 100 Para vehículos programados */
	    if(i <= MAX_VEHPUBLICO)
	    {
			CarInfo[i][cGas] = 100;
	    }
	    /* Matriculas */
	    SetVehicleMatricula(i);
	    /* Maleteros */
	    if(i <= 57)
	    {
			CarInfo[i][cMaxMaletero] = 7;
	    }
    }
    /* Cargado Información de vehículos comprados */
    for(new i = MAX_VEHPUBLICO+1; i <= TotalVeh; i++)
	{
		if(!IsABike(i))
		{
			new engine,lights,alarm,bonnet,boot,objective;
    		SetVehicleParamsEx(i,engine,lights,alarm,CarInfo[i][cCerrado],bonnet,boot,objective);
    	}
    }
    /* Cargado de Casas y Textlabels */
    LoadCasas();
	for(new h = 1; h <= TotalCasas; h++)
	{
	    if(HouseInfo[h][hEntradaX] != 0.0)
	    {
			HouseInfo[h][hPickup] = CreateDynamic3DTextLabel("",Verde,HouseInfo[h][hEntradaX], HouseInfo[h][hEntradaY], HouseInfo[h][hEntradaZ],7.0,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1,HouseInfo[h][hVirtualWorld2],HouseInfo[h][hInterior2]);
			UpdateHouseLabel(h);
		}
	}
	/* Cargado de Negocios y Textlabels */
	LoadNegocios();
	for(new n = 1; n <= TotalNegs; n++)
	{
	    if(NegoInfo[n][nEntradaX] != 0.0)
	    {
			NegoInfo[n][nPickup] = CreateDynamic3DTextLabel("",Verde,NegoInfo[n][nEntradaX], NegoInfo[n][nEntradaY], NegoInfo[n][nEntradaZ],10.0,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1,NegoInfo[n][nVirtualWorld2],NegoInfo[n][nInterior2]);
			UpdateNegocioLabel(n);
		}
	}
	/* Cargado de Turfs */
	LoadTurfs();
	/* Cargado de Facciones */
	LoadFaccs();
	/* Cargado de Plantaciones */
	LoadPlantacion();
    return 1;
}

public OnGameModeExit()
{
    KillTimer(MensajesTimer);
	Delete3DTextLabel( AutosVLabel[AutosV[0]]);
    new cuenta;
    cuenta=0;
	for(new idx=MAX_VEHPUBLICO+1; idx <= TotalVeh; idx++)
	{
		SaveCar(idx);
		cuenta++;
	}
	printf("Coches guardados: %d", cuenta);

	cuenta = 0;
	for(new x=1; x<=TotalCasas; x++)
    {
    	SaveCasa(x); //Guardado de casas
    	cuenta++;
    }
    printf("Casas guardadas: %d (MAX: %d)", cuenta, MAX_HOUSES);

    cuenta = 0;
    for(new x=1; x<=TotalNegs; x++)
    {
    	SaveNegocios(x); //Guardado de negocios
    	cuenta++;
    }
    printf("Negocios guardados: %d (MAX: %d)", cuenta, MAX_NEGS);

    cuenta = 0;
    for(new x=1; x<=TotalTurfs; x++)
    {
    	SaveTurf(x); //Guardado de turfs
    	cuenta++;
    }
    printf("Turfs guardados: %d (MAX: %d)", cuenta, MAX_TURFS);

    cuenta = 0;
    for(new x=1; x<=TotalFaccs; x++)
    {
    	SaveFacc(x); //Guardado de facciones
    	cuenta++;
    }
    printf("Facciones guardadas: %d (MAX: %d)", cuenta, MAX_FACCS);

    cuenta = 0;
    for(new x=0; x<=CodigoPlantacion; x++)
    {
        if(strlen(PlantaInfo[x][plPlantador]))
        {
	    	SavePlantacion(x); //Guardado de plantaciones
	    	cuenta++;
    	}
    }
    printf("Plantaciones guardadas: %d (MAX: %d)", cuenta, MAX_PLANTACIONES);
    return 1;
}

public OnQueryError(errorid, error[], callback[], query[], connectionHandle )
{
	printf("[ERROR] ID: %d - Error: %s - Callback - %s - Query: %s", errorid, error, callback, query);
    return 1;
}
#define REGISTRO_PASSWORD ( 4000 )
public OnPlayerRequestClass(playerid, classid)
{
	if(JugadorRegistrado[playerid] == 1) //Si está registrado, loguear.
	{
		if(JugadorLogueado[playerid] == 0)
		{
			TextDrawShowForPlayer(playerid, Intro[0]);
			TextDrawShowForPlayer(playerid, Intro[1]);
			TextDrawShowForPlayer(playerid, Intro[2]);
			new string[256];
			LimpiarChat(playerid, 12);
			format(string,sizeof(string),"{FFFFFF}¡Bienvenido a Sky RolePlay!\n\nTu cuenta esta registradas en nuestra base de datos introduce tú contraseña:");
			ShowPlayerDialog(playerid,0,DIALOG_STYLE_PASSWORD,"{FFFFFF}Login - {FFFF04}Sky RolePlay",string,"Entrar","Cancelar");
			SetTimerEx("LoginKick", 60000, false, "i", playerid);
			SetPlayerVirtualWorld(playerid, 0);
			SetPlayerInterior(playerid,0);
			TogglePlayerControllable(playerid, 0);
			new Random = random(sizeof(RandLogin));
			SetPlayerCameraPos(playerid, RandLogin[Random][0],RandLogin[Random][1],RandLogin[Random][2]);
			SetPlayerCameraLookAt(playerid, RandLogin[Random][3],RandLogin[Random][4],RandLogin[Random][5]);
			SetPlayerPos(playerid, RandLogin[Random][6],RandLogin[Random][7],RandLogin[Random][8]);
		}
		else SpawnPlayer(playerid); //Si está logueado, spawnear.
	}
	if(JugadorRegistrado[playerid] == 0) //Si no está registrado, expulsar.
	{
		TextDrawShowForPlayer(playerid, Intro[0]);
		TextDrawShowForPlayer(playerid, Intro[1]);
		TextDrawShowForPlayer(playerid, Intro[2]);
		PlayAudioStreamForPlayer(playerid,"http://a.tumblr.com/tumblr_lmhctlpKMN1qjt4kto1.mp3");
	    new sz_message[MAX_PLAYER_NAME + 256];
	    format(sz_message, sizeof(sz_message), "Información: {FFFFFF} Bienvenido {FFFF04}%s{FFFFFF} a Sky RolePlay, comenzará el registro de su personaje.", GetPlayerNameRP(playerid));
		SendClientMessage(playerid, 0xFFFF00AA, sz_message);
		ShowPlayerDialog(playerid, REGISTRO_PASSWORD, DIALOG_STYLE_PASSWORD, "{FFFFFF}Registro - {FFFF04}Sky RolePlay", "{FFFFFF}¡Bienvenido a Sky RolePlay!\n\nTu cuenta no esta en nuestra base de datos para registrarla introduce una contraseña:", "Registrar", "Cancelar");
	}
	return 1;
}

public OnPlayerConnect(playerid)
{
    Update3DTextLabelText(AFK[playerid], 0xFFFF04FF, "");
	if(ConectadoBaseDatos == 0){SendClientMessage(playerid, Amarillo, "El servidor no se encuentra conectado a la base de datos. Contacta con un administrador."); KickL(playerid);}

    Anims_OnPlayerConnect(playerid);

    ResetPlayerVars(playerid); /* Resetea las Variables de los Jugadores */
    new Nombre[MAX_PLAYER_NAME]; /* Comprueba si la cuenta esta registrada */
	GetPlayerName(playerid, Nombre, sizeof(Nombre));
    if(CheckAccountExists(Nombre) != 0){JugadorRegistrado[playerid] = 1;}
    SetPlayerColor(playerid,Blanco2); /* Cambiar Color a Transparente */
    
    
    
	/* Paints y Transfenders */
	RemoveBuildingForPlayer(playerid, 11313, -1935.8594, 239.5313, 35.3516, 0.25);
	RemoveBuildingForPlayer(playerid, 11319, -1904.5313, 277.8984, 42.9531, 0.25);
	RemoveBuildingForPlayer(playerid, 9625, -2425.7266, 1027.9922, 52.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 9093, 2386.6563, 1043.6016, 11.5938, 0.25);
	RemoveBuildingForPlayer(playerid, 7891, 1968.7422, 2162.4922, 12.0938, 0.25);
	RemoveBuildingForPlayer(playerid, 3294, -1420.5469, 2591.1563, 57.7422, 0.25);
	RemoveBuildingForPlayer(playerid, 3294, -100.0000, 1111.4141, 21.6406, 0.25);
	/* Hospital LS */
	RemoveBuildingForPlayer(playerid, 1226, 1771.4453, -2190.3750, 16.3125, 0.25);
	RemoveBuildingForPlayer(playerid, 1440, 1141.9844, -1346.1094, 13.2656, 0.25);
	RemoveBuildingForPlayer(playerid, 1440, 1148.6797, -1385.1875, 13.2656, 0.25);


	/* Oficinas */
	RemoveBuildingForPlayer(playerid, 14604, 1492.9766, 1303.8516, 1093.2656, 0.25);
	RemoveBuildingForPlayer(playerid, 1721, 1491.0078, 1304.1406, 1092.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 1721, 1490.3203, 1304.1406, 1092.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 2002, 1496.3125, 1303.9609, 1092.2734, 0.25);
	RemoveBuildingForPlayer(playerid, 950, 1502.6094, 1304.2813, 1092.8203, 0.25);
	RemoveBuildingForPlayer(playerid, 1721, 1498.1406, 1305.1328, 1092.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 1721, 1499.6484, 1305.1328, 1092.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 1721, 1501.0781, 1305.1328, 1092.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 1721, 1489.7656, 1306.0234, 1092.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 1721, 1489.0078, 1306.2188, 1092.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 2190, 1489.8984, 1306.4141, 1093.0781, 0.25);
	RemoveBuildingForPlayer(playerid, 1721, 1498.1406, 1305.7813, 1092.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 1721, 1498.1406, 1306.4141, 1092.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 1721, 1499.6484, 1305.7813, 1092.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 1721, 1499.6484, 1306.4141, 1092.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 1721, 1501.0781, 1305.7813, 1092.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 1721, 1501.0781, 1306.4141, 1092.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 1721, 1491.1719, 1307.8906, 1092.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 2190, 1491.5000, 1308.3047, 1093.0781, 0.25);
	RemoveBuildingForPlayer(playerid, 2173, 1491.5625, 1308.5313, 1092.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 1721, 1491.2266, 1309.1328, 1092.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 1721, 1498.1406, 1307.0156, 1092.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 1721, 1498.1406, 1307.6719, 1092.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 1721, 1499.6484, 1307.0156, 1092.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 1721, 1499.6484, 1307.6719, 1092.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 1721, 1501.0781, 1307.0156, 1092.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 1721, 1501.0781, 1307.6719, 1092.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 950, 1502.6094, 1309.3828, 1092.8203, 0.25);
    
    
    
    //====================================================================================
	/* RemoveBuildings */
	RemoveBuildingForPlayer(playerid, 14843, 266.3516, 81.1953, 1001.2813, 0.25); //Celdas de LSPD
    RemoveBuildingForPlayer(playerid, 14849, 222.0469, 118.4766, 1007.2734, 0.25); //Lamparas LSPD
    RemoveBuildingForPlayer(playerid, 14896, 257.1094, 117.3047, 1009.3750, 0.25);
    RemoveBuildingForPlayer(playerid, 14897, 243.2031, 117.3047, 1009.1250, 0.25);
    RemoveBuildingForPlayer(playerid, 14903, 269.8047, 117.5234, 1009.1250, 0.25);
    RemoveBuildingForPlayer(playerid, 1231, 1529.2891, -1832.9141, 15.2891, 0.25); //Farola garaje ayuntamiento
    RemoveBuildingForPlayer(playerid, 3769, 1961.4453, -2216.1719, 14.9844, 0.25); //Objetos aeropuerto
	RemoveBuildingForPlayer(playerid, 3780, 1884.1719, -2541.3750, 14.2500, 0.25);
	RemoveBuildingForPlayer(playerid, 3780, 1652.3438, -2541.3750, 14.2500, 0.25);
	RemoveBuildingForPlayer(playerid, 3780, 1381.1172, -2541.3750, 14.2500, 0.25);
	RemoveBuildingForPlayer(playerid, 3665, 1652.3438, -2541.3750, 14.2500, 0.25);
	RemoveBuildingForPlayer(playerid, 3665, 1884.1719, -2541.3750, 14.2500, 0.25);
	RemoveBuildingForPlayer(playerid, 3664, 2042.7734, -2442.1875, 19.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 3664, 1960.6953, -2236.4297, 19.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 3625, 1961.4453, -2216.1719, 14.9844, 0.25);
	RemoveBuildingForPlayer(playerid, 3665, 1381.1172, -2541.3750, 14.2500, 0.25);
	RemoveBuildingForPlayer(playerid, 3664, 1388.0078, -2593.0000, 19.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 3664, 1388.0078, -2494.2656, 19.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 1676, 0.0, 0.0, 0.0, 6000.0); //Surtidores explosivos
	RemoveBuildingForPlayer(playerid, 1686, 0.0, 0.0, 0.0, 6000.0);
	RemoveBuildingForPlayer(playerid, 3631, 2149.1406, -2266.9063, 12.8750, 0.25); //Interior desguace
	RemoveBuildingForPlayer(playerid, 5260, 2161.3438, -2264.9141, 14.0156, 0.25);
	RemoveBuildingForPlayer(playerid, 3631, 2161.8516, -2264.0938, 16.3516, 0.25);
	RemoveBuildingForPlayer(playerid, 3631, 2163.3750, -2262.6875, 16.3516, 0.25);
	RemoveBuildingForPlayer(playerid, 3633, 2142.9141, -2256.3359, 13.9297, 0.25);
	RemoveBuildingForPlayer(playerid, 3632, 2144.2969, -2258.1484, 13.9297, 0.25);
	RemoveBuildingForPlayer(playerid, 3631, 2142.3047, -2255.8984, 12.8750, 0.25);
	RemoveBuildingForPlayer(playerid, 5262, 2152.7109, -2256.7813, 15.2109, 0.25);
	RemoveBuildingForPlayer(playerid, 3633, 2158.0078, -2257.2656, 16.2188, 0.25);
	RemoveBuildingForPlayer(playerid, 3633, 2167.6641, -2256.7813, 12.7500, 0.25);
	RemoveBuildingForPlayer(playerid, 3633, 2167.6641, -2256.7813, 13.7109, 0.25);
	RemoveBuildingForPlayer(playerid, 3633, 2167.6641, -2256.7813, 14.6719, 0.25);
	RemoveBuildingForPlayer(playerid, 3632, 2167.8047, -2257.3516, 16.3828, 0.25);
	RemoveBuildingForPlayer(playerid, 3632, 2167.1719, -2257.1250, 16.4063, 0.25);
	RemoveBuildingForPlayer(playerid, 3577, 2170.0781, -2257.6641, 16.0391, 0.25);
	RemoveBuildingForPlayer(playerid, 3632, 2169.3516, -2258.0703, 17.2422, 0.25);
	RemoveBuildingForPlayer(playerid, 3632, 2168.8281, -2257.5234, 17.2500, 0.25);
	RemoveBuildingForPlayer(playerid, 3633, 2140.3828, -2254.1016, 13.9297, 0.25);
	RemoveBuildingForPlayer(playerid, 3632, 2150.6641, -2251.5547, 12.7656, 0.25);
	RemoveBuildingForPlayer(playerid, 3632, 2150.2813, -2250.8516, 12.7656, 0.25);
	RemoveBuildingForPlayer(playerid, 3633, 2150.6953, -2252.9141, 16.2344, 0.25);
	RemoveBuildingForPlayer(playerid, 3632, 2149.8125, -2253.3672, 16.2344, 0.25);
	RemoveBuildingForPlayer(playerid, 5261, 2152.2578, -2239.4609, 14.5000, 0.25);
	RemoveBuildingForPlayer(playerid, 5269, 2146.3750, -2248.7969, 14.6172, 0.25);
	RemoveBuildingForPlayer(playerid, 3633, 2153.7734, -2253.0859, 14.2031, 0.25);
	RemoveBuildingForPlayer(playerid, 3633, 2154.5078, -2254.4766, 14.2109, 0.25);
	RemoveBuildingForPlayer(playerid, 3632, 2158.5703, -2251.0156, 15.8125, 0.25);
	RemoveBuildingForPlayer(playerid, 3632, 2158.0469, -2250.5078, 15.8125, 0.25);
	RemoveBuildingForPlayer(playerid, 5132, 2163.2891, -2251.6094, 14.1406, 0.25);
	RemoveBuildingForPlayer(playerid, 5259, 2168.8438, -2246.7813, 13.9375, 0.25);
	RemoveBuildingForPlayer(playerid, 3577, 2160.5625, -2234.8047, 14.5625, 0.25);
	RemoveBuildingForPlayer(playerid, 3577, 2160.5781, -2234.8203, 13.0234, 0.25);
    
	/*Taller unity*/
	RemoveBuildingForPlayer(playerid, 4025, 1777.8359, -1773.9063, 12.5234, 0.25);
	RemoveBuildingForPlayer(playerid, 4070, 1719.7422, -1770.7813, 23.4297, 0.25);
	RemoveBuildingForPlayer(playerid, 1531, 1724.7344, -1741.5000, 14.1016, 0.25);
	RemoveBuildingForPlayer(playerid, 4215, 1777.5547, -1775.0391, 36.7500, 0.25);
	RemoveBuildingForPlayer(playerid, 620, 1700.8516, -1778.3984, 12.4922, 0.25);
	RemoveBuildingForPlayer(playerid, 620, 1701.3047, -1794.4297, 12.5469, 0.25);
	RemoveBuildingForPlayer(playerid, 3986, 1719.7422, -1770.7813, 23.4297, 0.25);
	RemoveBuildingForPlayer(playerid, 4019, 1777.8359, -1773.9063, 12.5234, 0.25);
	/* TalerLS */
	RemoveBuildingForPlayer(playerid, 3573, 1798.6484, -2057.9141, 14.9844, 0.25);
	/*Terraza*/
	RemoveBuildingForPlayer(playerid, 4976, 1931.0000, -1871.3906, 15.8438, 0.25);
	RemoveBuildingForPlayer(playerid, 4848, 1931.0000, -1871.3906, 15.8438, 0.25);
	RemoveBuildingForPlayer(playerid, 1226, 2114.7188, -1785.1797, 16.3984, 0.25);
	/*GN - FBI*/
	RemoveBuildingForPlayer(playerid, 705, -2491.5859, -670.7188, 138.4297, 0.25);
	RemoveBuildingForPlayer(playerid, 705, -2506.6328, -582.1719, 131.3516, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2529.2813, -594.3281, 133.2969, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2528.0781, -719.9219, 139.9063, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2524.0156, -594.3281, 133.2969, 0.25);
	RemoveBuildingForPlayer(playerid, 654, -2526.3516, -571.5781, 127.3828, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2522.8125, -719.9219, 139.9063, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2517.5469, -719.9219, 139.9063, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2518.7500, -594.3281, 133.2969, 0.25);
	RemoveBuildingForPlayer(playerid, 654, -2521.0469, -589.3828, 129.2578, 0.25);
	RemoveBuildingForPlayer(playerid, 654, -2516.8203, -578.7734, 129.3750, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2514.8672, -711.8672, 139.9063, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2514.8672, -706.6328, 139.9063, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2514.8672, -701.3984, 139.9063, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2514.8672, -696.1719, 139.9063, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2514.8672, -690.9375, 139.9063, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2514.8672, -717.0938, 139.9063, 0.25);
	RemoveBuildingForPlayer(playerid, 654, -2510.4531, -739.5625, 129.5234, 0.25);
	RemoveBuildingForPlayer(playerid, 1684, -2508.5000, -680.9531, 139.8516, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2513.4844, -594.3281, 133.2969, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2508.2188, -594.3281, 133.2969, 0.25);
	RemoveBuildingForPlayer(playerid, 1684, -2508.4063, -669.0938, 139.8516, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2502.9531, -594.3281, 133.2969, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2497.6875, -594.3281, 133.2969, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2492.4219, -594.3281, 133.2969, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2487.1563, -594.3281, 133.2969, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2484.2969, -597.1641, 133.2969, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2484.2969, -602.4297, 133.2969, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2484.2969, -607.6953, 133.2969, 0.25);
	RemoveBuildingForPlayer(playerid, 654, -2472.1406, -571.6953, 128.5234, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2541.5000, -690.9609, 139.9063, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2541.5000, -696.1875, 139.9063, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2541.5000, -701.4219, 139.9063, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2541.5000, -706.6563, 139.9063, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2541.5000, -711.8828, 139.9063, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2541.5000, -717.1172, 139.9063, 0.25);
	RemoveBuildingForPlayer(playerid, 654, -2541.0547, -592.4453, 130.5469, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2538.6094, -719.9219, 139.9063, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2533.3438, -719.9219, 139.9063, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2539.8125, -594.3281, 133.2969, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, -2534.5469, -594.3281, 133.2969, 0.25);
	RemoveBuildingForPlayer(playerid, 16558, 547.4844, 1932.7578, 39.3906, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, 347.1953, 1799.2656, 18.7578, 0.25);
	RemoveBuildingForPlayer(playerid, 1411, 342.9375, 1796.2891, 18.7578, 0.25);
	RemoveBuildingForPlayer(playerid, 16670, 330.7891, 1813.2188, 17.8281, 0.25);
	RemoveBuildingForPlayer(playerid, 1697, 220.3828, 1835.3438, 23.2344, 0.25);
	RemoveBuildingForPlayer(playerid, 1697, 228.7969, 1835.3438, 23.2344, 0.25);
	RemoveBuildingForPlayer(playerid, 1697, 236.9922, 1835.3438, 23.2344, 0.25);
	RemoveBuildingForPlayer(playerid, 16095, 279.1328, 1829.7813, 16.6328, 0.25);
	RemoveBuildingForPlayer(playerid, 16094, 191.1406, 1870.0391, 21.4766, 0.25);
	RemoveBuildingForPlayer(playerid, 16671, 193.9531, 2051.7969, 20.1797, 0.25);
	RemoveBuildingForPlayer(playerid, 3267, 354.4297, 2028.4922, 22.4141, 0.25);
	RemoveBuildingForPlayer(playerid, 3277, 354.4141, 2028.5000, 22.3750, 0.25);
	RemoveBuildingForPlayer(playerid, 16668, 357.9375, 2049.4219, 16.8438, 0.25);
	RemoveBuildingForPlayer(playerid, 16669, 380.2578, 1914.9609, 17.4297, 0.25);
	RemoveBuildingForPlayer(playerid, 16205, 547.4844, 1932.7578, 39.3906, 0.25);

	//Removes-Mecanica-Dillimore-Gtainlans
	RemoveBuildingForPlayer(playerid, 13248, 811.7109, -551.1328, 15.3359, 0.25);
	RemoveBuildingForPlayer(playerid, 13137, 646.1641, -527.8984, 28.0703, 0.25);
	RemoveBuildingForPlayer(playerid, 1308, 801.1641, -585.1953, 15.4766, 0.25);
	RemoveBuildingForPlayer(playerid, 1294, 822.8203, -586.2656, 19.7031, 0.25);
	RemoveBuildingForPlayer(playerid, 1688, 807.8828, -577.9141, 20.3203, 0.25);
	RemoveBuildingForPlayer(playerid, 1690, 816.4609, -580.6016, 19.0000, 0.25);
	RemoveBuildingForPlayer(playerid, 1440, 820.2422, -566.0313, 15.8359, 0.25);
	RemoveBuildingForPlayer(playerid, 12980, 811.7109, -551.1328, 15.3359, 0.25);
	RemoveBuildingForPlayer(playerid, 1690, 814.7891, -555.6406, 19.9688, 0.25);
	RemoveBuildingForPlayer(playerid, 1294, 800.6953, -539.3047, 19.8125, 0.25);
	RemoveBuildingForPlayer(playerid, 1691, 806.0234, -544.4297, 20.7266, 0.25);
	RemoveBuildingForPlayer(playerid, 1687, 808.2188, -549.3125, 20.1250, 0.25);
	RemoveBuildingForPlayer(playerid, 1308, 822.7422, -539.5469, 15.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 1294, 824.2578, -542.5469, 19.7031, 0.25);
	RemoveBuildingForPlayer(playerid, 705, 838.2969, -515.3750, 14.6328, 0.25);
	RemoveBuildingForPlayer(playerid, 773, 814.5234, -517.5313, 15.3203, 0.25);
	RemoveBuildingForPlayer(playerid, 13452, 915.1641, -525.5781, 40.1797, 0.25);
	/* Prisión Federal */
	RemoveBuildingForPlayer(playerid, 1499, 2522.3516, -1303.4063, 1047.2734, 0.25);
	RemoveBuildingForPlayer(playerid, 1499, 2522.3359, -1300.3984, 1047.2734, 0.25);
	RemoveBuildingForPlayer(playerid, 2605, 2526.1641, -1299.0859, 1047.6875, 0.25);
	RemoveBuildingForPlayer(playerid, 2607, 2527.0156, -1299.0859, 1047.6875, 0.25);
	RemoveBuildingForPlayer(playerid, 1499, 2530.8359, -1304.1484, 1047.2734, 0.25);
	RemoveBuildingForPlayer(playerid, 1499, 2530.8516, -1307.1563, 1047.2734, 0.25);
	RemoveBuildingForPlayer(playerid, 937, 2543.0781, -1304.5000, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 937, 2551.1250, -1304.5000, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 937, 2543.0781, -1302.5625, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 936, 2543.0703, -1301.0000, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 937, 2551.1250, -1302.5625, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 936, 2551.1172, -1301.0000, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 937, 2559.1016, -1304.5000, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 937, 2559.1016, -1302.5625, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 936, 2559.0938, -1301.0000, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 1499, 2571.3359, -1300.3984, 1043.1172, 0.25);
	RemoveBuildingForPlayer(playerid, 1499, 2571.3516, -1303.4063, 1043.1172, 0.25);
	RemoveBuildingForPlayer(playerid, 2608, 2522.8203, -1297.1797, 1048.7344, 0.25);
	RemoveBuildingForPlayer(playerid, 2605, 2526.1641, -1297.1094, 1047.6875, 0.25);
	RemoveBuildingForPlayer(playerid, 2607, 2527.0156, -1297.1094, 1047.6875, 0.25);
	RemoveBuildingForPlayer(playerid, 2200, 2522.7500, -1295.6328, 1047.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 2609, 2530.2188, -1295.2109, 1048.0156, 0.25);
	RemoveBuildingForPlayer(playerid, 2609, 2530.2188, -1295.6797, 1048.0156, 0.25);
	RemoveBuildingForPlayer(playerid, 14451, 2526.5938, -1293.9219, 1051.3516, 0.25);
	RemoveBuildingForPlayer(playerid, 2609, 2530.2188, -1294.7500, 1048.0156, 0.25);
	RemoveBuildingForPlayer(playerid, 2610, 2530.2188, -1294.2578, 1048.1094, 0.25);
	RemoveBuildingForPlayer(playerid, 941, 2544.1484, -1294.9141, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 941, 2541.7578, -1294.9141, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 941, 2553.5625, -1294.9141, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 941, 2558.2891, -1294.9141, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 941, 2555.9141, -1294.9141, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 2607, 2526.1719, -1290.8672, 1047.6875, 0.25);
	RemoveBuildingForPlayer(playerid, 2605, 2527.0234, -1290.8594, 1047.6875, 0.25);
	RemoveBuildingForPlayer(playerid, 2608, 2522.8203, -1290.9375, 1048.7344, 0.25);
	RemoveBuildingForPlayer(playerid, 2609, 2530.2188, -1290.7422, 1048.0156, 0.25);
	RemoveBuildingForPlayer(playerid, 2610, 2530.2188, -1290.2500, 1048.1094, 0.25);
	RemoveBuildingForPlayer(playerid, 2609, 2530.2188, -1289.7656, 1048.0156, 0.25);
	RemoveBuildingForPlayer(playerid, 934, 2543.1953, -1293.4141, 1044.4375, 0.25);
	RemoveBuildingForPlayer(playerid, 941, 2544.1484, -1291.9766, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 941, 2541.7578, -1291.9766, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 934, 2553.4375, -1293.4141, 1044.4375, 0.25);
	RemoveBuildingForPlayer(playerid, 941, 2553.5625, -1291.9766, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 941, 2558.2891, -1291.9766, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 941, 2555.9141, -1291.9766, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 934, 2558.6875, -1293.4141, 1044.4375, 0.25);
	RemoveBuildingForPlayer(playerid, 922, 2565.6250, -1292.9609, 1044.0156, 0.25);
	RemoveBuildingForPlayer(playerid, 2608, 2522.8203, -1289.0313, 1048.7344, 0.25);
	RemoveBuildingForPlayer(playerid, 2609, 2530.2188, -1289.3047, 1048.0156, 0.25);
	RemoveBuildingForPlayer(playerid, 2607, 2527.0156, -1288.8828, 1047.6875, 0.25);
	RemoveBuildingForPlayer(playerid, 2607, 2526.1719, -1288.8906, 1047.6875, 0.25);
	RemoveBuildingForPlayer(playerid, 2200, 2522.7500, -1287.5469, 1047.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 2200, 2522.7500, -1285.2656, 1047.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 2607, 2526.1719, -1282.9063, 1047.6875, 0.25);
	RemoveBuildingForPlayer(playerid, 2605, 2527.0234, -1282.8984, 1047.6875, 0.25);
	RemoveBuildingForPlayer(playerid, 2200, 2530.4453, -1284.3750, 1047.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 2676, 2538.0625, -1281.7969, 1043.2578, 0.25);
	RemoveBuildingForPlayer(playerid, 14435, 2541.0938, -1285.8984, 1052.7188, 0.25);
	RemoveBuildingForPlayer(playerid, 936, 2543.1016, -1286.3125, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 937, 2543.1250, -1284.7500, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 937, 2543.1250, -1282.8125, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 937, 2551.1016, -1282.8125, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 937, 2551.1016, -1284.7500, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 936, 2551.1016, -1286.3125, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 936, 2559.1250, -1286.3125, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 937, 2559.1094, -1284.7500, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 937, 2559.1094, -1282.8125, 1043.6016, 0.25);
	RemoveBuildingForPlayer(playerid, 14445, 2562.8828, -1287.1563, 1049.1875, 0.25);
	RemoveBuildingForPlayer(playerid, 942, 2574.6563, -1306.2266, 1045.5781, 0.25);
	RemoveBuildingForPlayer(playerid, 923, 2576.6016, -1301.7734, 1044.0000, 0.25);
	RemoveBuildingForPlayer(playerid, 922, 2577.0234, -1298.8750, 1044.0156, 0.25);
	RemoveBuildingForPlayer(playerid, 922, 2572.1641, -1296.7891, 1044.0156, 0.25);
	RemoveBuildingForPlayer(playerid, 923, 2572.5156, -1293.9141, 1044.0000, 0.25);
	RemoveBuildingForPlayer(playerid, 1499, 2577.8516, -1291.4063, 1043.1172, 0.25);
	RemoveBuildingForPlayer(playerid, 942, 2572.7031, -1282.5234, 1045.5781, 0.25);
	RemoveBuildingForPlayer(playerid, 939, 2572.7500, -1287.7344, 1045.5781, 0.25);
	RemoveBuildingForPlayer(playerid, 1499, 2577.8359, -1288.3984, 1043.1172, 0.25);
	/* La Cosa Nostra */
	RemoveBuildingForPlayer(playerid, 1689, 745.5859, -1381.1094, 25.8750, 0.25); //Respiraderos helipuerto
	RemoveBuildingForPlayer(playerid, 1689, 751.3359, -1368.0313, 25.8750, 0.25);
	RemoveBuildingForPlayer(playerid, 1226, 778.8594, -1391.1563, 16.3125, 0.25); //Farola parking
    /* PaintSpray y Bomba */
	RemoveBuildingForPlayer(playerid, 5043, 1843.3672, -1856.3203, 13.8750, 0.25);
	RemoveBuildingForPlayer(playerid, 5422, 2071.4766, -1831.4219, 14.5625, 0.25);
	RemoveBuildingForPlayer(playerid, 5856, 1024.9844, -1029.3516, 33.1953, 0.25);
	RemoveBuildingForPlayer(playerid, 5779, 1041.3516, -1025.9297, 32.6719, 0.25);
	RemoveBuildingForPlayer(playerid, 6400, 488.2813, -1734.6953, 12.3906, 0.25);
	RemoveBuildingForPlayer(playerid, 13028, 720.0156, -462.5234, 16.8594, 0.25);
	RemoveBuildingForPlayer(playerid, 5340, 2644.8594, -2039.2344, 14.0391, 0.25);
    /* Motel Jefferson */
	RemoveBuildingForPlayer(playerid, 14511, 2219.7031, -1189.8438, 1029.2969, 0.25);
	RemoveBuildingForPlayer(playerid, 14521, 2247.1641, -1162.1094, 1029.0156, 0.25);
	RemoveBuildingForPlayer(playerid, 2744, 1721.6172, -1655.6641, 21.6641, 0.25);
	RemoveBuildingForPlayer(playerid, 2756, 1712.5938, -1655.6016, 21.1641, 0.25);
	RemoveBuildingForPlayer(playerid, 2756, 1730.5000, -1655.5078, 21.1641, 0.25);
	RemoveBuildingForPlayer(playerid, 2759, 1715.7266, -1655.6016, 21.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 2759, 1727.3672, -1655.5078, 21.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 2757, 1715.6719, -1655.6016, 21.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 2757, 1727.4219, -1655.5078, 21.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 2761, 1716.3438, -1655.6016, 21.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 2761, 1726.7500, -1655.5078, 21.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 2758, 1715.6250, -1655.6016, 21.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 2758, 1727.4688, -1655.5078, 21.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 2760, 1715.8125, -1655.6016, 21.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 2760, 1727.2813, -1655.5078, 21.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 2756, 1730.5469, -1647.6484, 21.1641, 0.25);
	RemoveBuildingForPlayer(playerid, 2759, 1727.4141, -1647.6484, 21.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 2757, 1727.4688, -1647.6484, 21.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 2761, 1726.7969, -1647.6484, 21.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 2758, 1727.5156, -1647.6484, 21.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 2760, 1727.3281, -1647.6484, 21.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 2756, 1712.5469, -1663.4688, 21.1641, 0.25);
	RemoveBuildingForPlayer(playerid, 2757, 1715.6250, -1663.4688, 21.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 2758, 1715.5781, -1663.4688, 21.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 2759, 1715.6797, -1663.4688, 21.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 2760, 1715.7656, -1663.4688, 21.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 2761, 1716.2969, -1663.4688, 21.1563, 0.25);
    /* Mesas Interior Puticlub */
	RemoveBuildingForPlayer(playerid, 2024, 960.2500, -58.0625, 1000.3984, 0.25);
	RemoveBuildingForPlayer(playerid, 2118, 960.8672, -45.6484, 1000.5234, 0.25);
	/* Groove Street */
	RemoveBuildingForPlayer(playerid, 947, 2533.8828, -1667.5781, 16.2891, 0.25);
	RemoveBuildingForPlayer(playerid, 3593, 2437.4844, -1644.1172, 12.9844, 0.25);
    /* Cancha Idlewood */
	RemoveBuildingForPlayer(playerid, 5551, 2140.5156, -1735.1406, 15.8906, 0.25);
	RemoveBuildingForPlayer(playerid, 5410, 2140.5156, -1735.1406, 15.8906, 0.25);
	/* Skatepark */
	RemoveBuildingForPlayer(playerid, 5400, 1913.1328, -1370.5000, 17.7734, 0.25);
	/* Chinatown */
	RemoveBuildingForPlayer(playerid, 1226, 1458.4063, -1876.6875, 16.4219, 0.25);
	RemoveBuildingForPlayer(playerid, 1226, 1450.5547, -1868.0078, 16.4219, 0.25);
	RemoveBuildingForPlayer(playerid, 1226, 1483.4297, -1867.7188, 16.4219, 0.25);
	RemoveBuildingForPlayer(playerid, 1226, 1504.7109, -1876.6875, 16.4219, 0.25);
	RemoveBuildingForPlayer(playerid, 1226, 1547.5391, -1868.0078, 16.4219, 0.25);
	RemoveBuildingForPlayer(playerid, 1226, 1593.9844, -1867.7188, 16.4219, 0.25);
	RemoveBuildingForPlayer(playerid, 642, 1561.7969, -1894.7578, 13.7578, 0.25);
	RemoveBuildingForPlayer(playerid, 643, 1561.8203, -1894.7188, 12.8672, 0.25);
	RemoveBuildingForPlayer(playerid, 625, 1566.1797, -1893.1016, 13.2109, 0.25);
	RemoveBuildingForPlayer(playerid, 625, 1573.4531, -1893.1016, 13.2109, 0.25);
	RemoveBuildingForPlayer(playerid, 642, 1573.9766, -1894.8281, 13.7578, 0.25);
	RemoveBuildingForPlayer(playerid, 643, 1574.0000, -1894.7891, 12.8672, 0.25);
	RemoveBuildingForPlayer(playerid, 642, 1561.7969, -1889.8906, 13.7578, 0.25);
	RemoveBuildingForPlayer(playerid, 643, 1561.8203, -1889.8594, 12.8672, 0.25);
	RemoveBuildingForPlayer(playerid, 625, 1566.1797, -1887.3438, 13.2109, 0.25);
	RemoveBuildingForPlayer(playerid, 642, 1561.6250, -1884.8672, 13.7578, 0.25);
	RemoveBuildingForPlayer(playerid, 643, 1561.6484, -1884.8281, 12.8672, 0.25);
	RemoveBuildingForPlayer(playerid, 625, 1573.4531, -1887.3438, 13.2109, 0.25);
	RemoveBuildingForPlayer(playerid, 643, 1574.0000, -1889.9453, 12.8672, 0.25);
	RemoveBuildingForPlayer(playerid, 642, 1573.9766, -1889.9844, 13.7578, 0.25);
	RemoveBuildingForPlayer(playerid, 642, 1574.0156, -1884.9531, 13.7578, 0.25);
	RemoveBuildingForPlayer(playerid, 643, 1574.0391, -1884.9219, 12.8672, 0.25);
    /* Colinas */
	RemoveBuildingForPlayer(playerid, 3341, 2285.3438, -1044.3438, 48.4375, 0.25);
	RemoveBuildingForPlayer(playerid, 3170, 2285.3438, -1044.3438, 48.4375, 0.25);
	/* Unity Station */
	RemoveBuildingForPlayer(playerid, 1226, 1843.7656, -1875.8672, 16.3984, 0.25);
	RemoveBuildingForPlayer(playerid, 1226, 1724.8750, -1859.5391, 16.3516, 0.25);
    /* Planta Taxis Unity Station */
	RemoveBuildingForPlayer(playerid, 5024, 1748.8438, -1883.0313, 14.1875, 0.25);
    /* Parque Verona */
	RemoveBuildingForPlayer(playerid, 6208, 954.2734, -1720.7969, 20.7734, 0.25);
	RemoveBuildingForPlayer(playerid, 1231, 932.3203, -1751.1172, 15.2188, 0.25);
	RemoveBuildingForPlayer(playerid, 1231, 932.4688, -1709.7266, 15.2188, 0.25);
	RemoveBuildingForPlayer(playerid, 1231, 933.2578, -1731.4844, 15.2188, 0.25);
	RemoveBuildingForPlayer(playerid, 1231, 939.7109, -1761.0000, 15.2188, 0.25);
	RemoveBuildingForPlayer(playerid, 1231, 937.2656, -1696.8359, 15.2188, 0.25);
	RemoveBuildingForPlayer(playerid, 6205, 954.2734, -1720.7969, 20.7734, 0.25);
	RemoveBuildingForPlayer(playerid, 1231, 960.1563, -1764.6953, 15.2188, 0.25);
    /* Urbanización Ayutamiento */
	RemoveBuildingForPlayer(playerid, 4055, 1394.3594, -1620.6641, 32.1484, 0.25);
	RemoveBuildingForPlayer(playerid, 4220, 1370.6406, -1643.4453, 33.1797, 0.25);
	RemoveBuildingForPlayer(playerid, 647, 1378.8125, -1623.3828, 14.4609, 0.25);
	RemoveBuildingForPlayer(playerid, 620, 1379.2422, -1622.4531, 12.8672, 0.25);
	RemoveBuildingForPlayer(playerid, 647, 1375.6406, -1621.8672, 14.5859, 0.25);
	RemoveBuildingForPlayer(playerid, 647, 1382.0469, -1621.8672, 14.4844, 0.25);
	RemoveBuildingForPlayer(playerid, 4006, 1394.3594, -1620.6641, 32.1484, 0.25);
	/* Desguase Fuera LS */
	RemoveBuildingForPlayer(playerid, 1438, -88.1094, -1598.7188, 1.5000, 0.25);
	RemoveBuildingForPlayer(playerid, 1370, -86.5703, -1595.1406, 2.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 3173, -93.0938, -1593.5234, 1.5547, 0.25);
	RemoveBuildingForPlayer(playerid, 1462, -93.6797, -1588.0781, 1.5078, 0.25);
	RemoveBuildingForPlayer(playerid, 3174, -75.1719, -1596.3047, 1.6797, 0.25);
	RemoveBuildingForPlayer(playerid, 1438, -79.2578, -1593.4688, 1.5000, 0.25);
	RemoveBuildingForPlayer(playerid, 1370, -72.4141, -1596.7734, 2.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 1370, -74.1875, -1583.9922, 2.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 3175, -101.8203, -1577.6875, 1.4063, 0.25);
	RemoveBuildingForPlayer(playerid, 1457, -91.0156, -1576.6250, 3.1953, 0.25);
	RemoveBuildingForPlayer(playerid, 1370, -100.8203, -1580.4219, 2.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 1438, -93.2109, -1569.4844, 1.5000, 0.25);
	RemoveBuildingForPlayer(playerid, 3175, -77.9375, -1581.3125, 1.4063, 0.25);
	RemoveBuildingForPlayer(playerid, 1472, -75.5859, -1581.0703, 2.0234, 0.25);
	RemoveBuildingForPlayer(playerid, 727, -73.8203, -1569.1719, 1.3516, 0.25);
	RemoveBuildingForPlayer(playerid, 3173, -90.6406, -1562.9375, 1.5547, 0.25);
	RemoveBuildingForPlayer(playerid, 1438, -77.0625, -1542.6016, 1.6172, 0.25);
	RemoveBuildingForPlayer(playerid, 1457, -71.0000, -1574.0859, 3.1953, 0.25);
	RemoveBuildingForPlayer(playerid, 3175, -64.3828, -1572.2109, 1.4063, 0.25);
	RemoveBuildingForPlayer(playerid, 1438, -62.2734, -1569.2891, 1.5000, 0.25);
	RemoveBuildingForPlayer(playerid, 1370, -61.6641, -1573.4609, 2.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 1438, -56.0625, -1575.6563, 1.5000, 0.25);
	RemoveBuildingForPlayer(playerid, 1370, -64.0000, -1550.2578, 2.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 3175, -55.2813, -1557.4531, 1.4063, 0.25);
	RemoveBuildingForPlayer(playerid, 1370, -56.1563, -1560.4609, 2.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 727, -49.3984, -1560.0078, 1.4609, 0.25);
	RemoveBuildingForPlayer(playerid, 3174, -44.2891, -1561.3125, 1.6797, 0.25);
	RemoveBuildingForPlayer(playerid, 1370, -43.7422, -1563.6875, 2.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 3173, -67.2344, -1544.2188, 1.5547, 0.25);
	/* Coche Groove Street */
	RemoveBuildingForPlayer(playerid, 3594, 2514.3906, -1658.6016, 13.1406, 0.25);
	/* PaySpray Las Venturas */
	RemoveBuildingForPlayer(playerid, 3294, -1420.5469, 2591.1563, 57.7422, 0.25);
    return 1;
}

public OnPlayerDisconnect(playerid, reason)
{
	KillTimer(TCV[playerid]);
	KillTimer(TCV2[playerid]);
	TextDrawHideForPlayer(playerid, Intro[0]);
	TextDrawHideForPlayer(playerid, Intro[1]);
	TextDrawHideForPlayer(playerid, Intro[2]);
	TextDrawHideForPlayer(playerid, Barra[0]);
	TextDrawHideForPlayer(playerid, Barra[1]);
	TextDrawHideForPlayer(playerid, Barra[2]);
	HidePlayerProgressBar(playerid, XP[playerid]);
	new Nombre[MAX_PLAYER_NAME], salida[100 + MAX_PLAYER_NAME];
    format(Nombre, sizeof(Nombre),"%s", GetPlayerNameRP(playerid));
    if(PlayerInfo[playerid][pAdmin] == 0 && GetPlayerState(playerid) != PLAYER_STATE_SPECTATING)
    {
    	if(reason == 0){format(salida, sizeof(salida), "%s se ha desconectado del servidor. (Crash / Caida)", Nombre); ProxDetector(30.0, playerid, salida, Blanco,Blanco,Gris,Gris,GrisOscuro); printf("%s", salida);}
    	else if(reason == 1){format(salida, sizeof(salida), "%s se ha desconectado del servidor. (Voluntariamente)", Nombre); ProxDetector(30.0, playerid, salida, Blanco,Blanco,Gris,Gris,GrisOscuro); printf("%s", salida);}
    	else if(reason == 2){format(salida, sizeof(salida), "%s se ha desconectado del servidor. (Kickeado / Baneado)", Nombre); ProxDetector(30.0, playerid, salida, Blanco,Blanco,Gris,Gris,GrisOscuro); printf("%s", salida);}
	}

	for(new i = 0; i < MAX_LSEDINFORMES; i++) //Informes LSED
	{
	    if(InformeEmergencias[i][ieJugador] == playerid)
		{
			InformeEmergencias[i][ieEstado] = NOEXISTE;
			for(new j = 0; j < MAX_PLAYERS; j++)
			{
			    if(AtendiendoInforme[j] == playerid)
			    {
			        DisablePlayerCheckpoint(j);
			        SendClientMessage(j, Rojo, "(( Informe eliminado. Razón: El jugador se ha desconectado.))");
				}
			}
			break;
		}
	}

    for(new x=0; x<MAX_PLAYERS; x++) //Sistema RECON
    {
        if(GetPlayerState(x) == PLAYER_STATE_SPECTATING && PlayerInfo[x][pSpecID] == playerid)
        AdvanceSpectate(x);
    }

    for(new i=0; i<MAX_PLAYERS; i++) //Sistema multas
    {
        if(Multador[i] == playerid){Multador[i] = NOEXISTE, MultaPrecio[i] = 0;}
    }

    for(new i=0; i<MAX_PLAYERS; i++) //Job taxista
    {
        if(TaxiConductor[i] == playerid){TaxiConductor[i] = NOEXISTE;}
        if(TaxiPasajero[i] == playerid){TaxiPasajero[i] = NOEXISTE;}
    }

    for(new i=0; i<MAX_PLAYERS; i++) //Job mecánico
    {
        if(ReparacionMeca[i] == playerid){ReparacionMeca[i] = NOEXISTE; ReparacionTipo[i] = 0; ReparacionPrecio[i] = 0;}
    }

    for(new i=0; i<MAX_PLAYERS; i++) //Job mecánico
    {
        if(RepintadoMeca[i] == playerid){RepintadoMeca[i] = NOEXISTE; RepintadoColor1[i] = 0; RepintadoColor2[playerid] = 0; RepintadoPrecio[i] = 0;}
    }
    KillTimer(ToqueLlamadaTimer[playerid]); //Sistema teléfono
    if(PersonaEnLlamada[playerid] != NOEXISTE)KillTimer(ToqueLlamadaTimer[PersonaEnLlamada[playerid]]);
    if(EnLlamada[playerid] == 3)
	{
		KillTimer(CostoLlamadaTimer[playerid]);
		PlayerInfo[playerid][pDineroBanco] -= CosteTotalLlamada[playerid];
		CosteTotalLlamada[playerid] = 0;
	}
	if(PersonaEnLlamada[playerid] != NOEXISTE)
	{
	    if(EnLlamada[PersonaEnLlamada[playerid]] == 3)
		{
		    new string[40];
			KillTimer(CostoLlamadaTimer[PersonaEnLlamada[playerid]]);
			format(string, sizeof(string), "Coste de la llamada: %d$", CosteTotalLlamada[PersonaEnLlamada[playerid]]);
			SendClientMessage(PersonaEnLlamada[playerid], RojoIntenso, string);
			PlayerInfo[PersonaEnLlamada[playerid]][pDineroBanco] -= CosteTotalLlamada[PersonaEnLlamada[playerid]];
			CosteTotalLlamada[PersonaEnLlamada[playerid]] = 0;
		}
	}
    for(new i=0; i<MAX_PLAYERS; i++)
    {
        if(PersonaEnLlamada[i] == playerid){SendClientMessage(i, Gris, "Se ha cortado la línea..."); EnLlamada[i] = 0; PersonaEnLlamada[i] = NOEXISTE; break;}
    }

    for(new i=0; i<MAX_PLAYERS; i++) //Sistema venta de vehículos a otras personas
    {
        if(VenderVehAVendedor[i] == playerid){VenderVehAVendedor[i] = NOEXISTE, VenderVehAPrecio[i] = 0, VenderVehALlave[i] = 0;}
    }

    if(PlayerInfo[playerid][pMuerto] > 0) //Sistema muerte
    {
	    KillTimer(MuertoTimer[playerid]);
		KillTimer(MuertoFlashTimer[playerid]);
    }

    if(MatriculasActivadas[playerid] == 1) //Sistema matrículas
    {
	    for(new i; i < MAX_VEHICLES; i++)
		{
			DeletePlayer3DTextLabel(playerid, MatriculasCoches[playerid][i]);
		}
	}

    DestroyPlayerProgressBar(playerid, hambrebar[playerid]);
    DestroyPlayerProgressBar(playerid, sedbar[playerid]);

    PlayerSave(playerid); //Guardar stats
    if(reason == 0) //Si se le cae la conexión
    {
        Anims_OnPlayerConnect(playerid);
	    ResetPlayerVars(playerid); //Resetea todas las variables del jugador
	    SetPlayerColor(playerid,Blanco2); //Cambia el color del jugador a transparente
    }
    return 1;
}

public OnPlayerSpawn(playerid)
{
	SetPlayerSkin(playerid, PlayerInfo[playerid][pSkin]);
	TextDrawHideForPlayer(playerid, Intro[0]);
	TextDrawHideForPlayer(playerid, Intro[1]);
	TextDrawHideForPlayer(playerid, Intro[2]);
	if(PlayerInfo[playerid][pTest] == 0)
	{
        PlayAudioStreamForPlayer(playerid,"http://vol10.music-bazaar.com/samples/vol10/520/520397/preview-76ec14e787.mp3.mp3");
		SetPlayerCameraPos(playerid, 133.2111, -1973.0588, 50.5363);
		SetPlayerCameraLookAt(playerid, 226.8999, -1939.4000, 41.2000);
		SetPlayerPos(playerid, 154.0000, -1952.0000, 11.0000);
		new titulo[180] = "#1: ¿Cuál sería un acto de PG?";
		ShowPlayerDialog(playerid, PREGUNTA1, DIALOG_STYLE_LIST, titulo, "A) Sacar un arma en vía pública\nB) Agredir a alguien en frente de la comisaría\nC) Caer desde una gran altura y no rolear ninguna lesión\nD) Todos se consideran PG", "Aceptar", "");
		Preguntas[playerid] = 1;
		Fallo[playerid] = 0;
		return 1;
	}
    TextDrawShowForPlayer(playerid, Barra[0]);
	TextDrawShowForPlayer(playerid, Barra[1]);
	TextDrawShowForPlayer(playerid, Barra[2]);
    if(JugadorLogueado[playerid] == 0 || !IsPlayerConnected(playerid)){Kick(playerid); return 1;}
    SetPlayerSkillLevel(playerid, WEAPONSKILL_PISTOL, PlayerInfo[playerid][pHabPistola]);
    SetPlayerSkillLevel(playerid, WEAPONSKILL_PISTOL_SILENCED, PlayerInfo[playerid][pHabSD]);
    SetPlayerSkillLevel(playerid, WEAPONSKILL_DESERT_EAGLE, PlayerInfo[playerid][pHabDEagle]);
    SetPlayerSkillLevel(playerid, WEAPONSKILL_SHOTGUN, PlayerInfo[playerid][pHabEscopeta]);
    SetPlayerSkillLevel(playerid, WEAPONSKILL_SAWNOFF_SHOTGUN, PlayerInfo[playerid][pHabSawnoff]);
    SetPlayerSkillLevel(playerid, WEAPONSKILL_SPAS12_SHOTGUN, PlayerInfo[playerid][pHabEscopetaCom]);
    SetPlayerSkillLevel(playerid, WEAPONSKILL_MICRO_UZI, PlayerInfo[playerid][pHabUZI]);
    SetPlayerSkillLevel(playerid, WEAPONSKILL_MP5, PlayerInfo[playerid][pHabMP5]);
    SetPlayerSkillLevel(playerid, WEAPONSKILL_AK47, PlayerInfo[playerid][pHabAK47]);
    SetPlayerSkillLevel(playerid, WEAPONSKILL_M4, PlayerInfo[playerid][pHabM4]);
    SetPlayerSkillLevel(playerid, WEAPONSKILL_SNIPERRIFLE, PlayerInfo[playerid][pHabFranco]);
    CargarAgenda(playerid); //Cargar agenda
 	MostrarTurfs(playerid); //Mostrar turfs
 	//Sistema hambre y sed

    TextDrawShowForPlayer(playerid, hambre[playerid]);
    TextDrawShowForPlayer(playerid, sed[playerid]);

	XP[playerid] = CreatePlayerProgressBar(playerid, 1.00, 446.00, 640.00, 1.50, 2038004223, 100.0);
	ShowPlayerProgressBar(playerid, XP[playerid]);
	SetPlayerProgressBarValue(playerid,XP[playerid],PlayerInfo[playerid][pExp]);
	SetPlayerProgressBarColor(playerid,XP[playerid],0xFFFFFFFF);

    hambrebar[playerid] = CreatePlayerProgressBar(playerid, 540.000000, 433.000000, 63.500000, 5.199999, Naranja, MAX_HAMBRE);
    ShowPlayerProgressBar(playerid, hambrebar[playerid]);
    if(PlayerInfo[playerid][pPrimerLogueo] != 0) ActualizarHambre(playerid); //Actualizar hambre si no es primera vez que loguea

    sedbar[playerid] = CreatePlayerProgressBar(playerid, 429.000000, 433.000000, 63.500000, 5.199999, AguamarinaOscuro, MAX_SED);
    ShowPlayerProgressBar(playerid, sedbar[playerid]);
    if(PlayerInfo[playerid][pPrimerLogueo] != 0)  ActualizarSed(playerid); //Actualizar sed si no es primera vez que loguea

    new hora, minuto; //Da tiempo y hora del servidor
    SetPlayerWeather(playerid, DefaultWeather);
	gettime(hora, minuto);
	SetPlayerTime(playerid, hora+ahora, minuto);

    if(PlayerInfo[playerid][pPrimerLogueo] == 0) //Primera vez que loguea
    {
        TogglePlayerControllable(playerid, 0);
		LimpiarChat(playerid, 100);
		StopAudioStreamForPlayer(playerid);
	    SetPlayerVirtualWorld(playerid, 0);
	    PlayerInfo[playerid][pDineroBanco] = 20000;
	    PlayerInfo[playerid][pNivelPiloto] = 1;
	    PlayerInfo[playerid][pTest] = 1;
	    ResetPlayerMoneyAC(playerid);
	    GivePlayerMoneyAC(playerid, 5000);
	    PlayerInfo[playerid][pPrimerLogueo] = 1;
        new Query[200];
     	format(Query, 200, "UPDATE `usuarios` SET `PrimerLogueo`='1' WHERE `Nombre`='%s'",GetPlayerNameRP(playerid));
		mysql_query(1,Query);
		SendClientMessage(playerid, AmarilloClaro, "Ahora estás en Unity Station, tienes 5000$ en la cartera y 20000$ en tu cuenta bancaria.");
		SetPlayerFacingAngle(playerid, 0);
		SetPlayerPos(playerid,1742.8489,-1860.8014,13.5783);
	    SendClientMessage(playerid, AmarilloClaro, "Necesitas un lugar donde residir y un trabajo, busca en la ciudad para ello.");
    	SendClientMessage(playerid, Verde, "Has recbido 1500$ adicionales en tu cuenta bancaria.");
    	PlayerInfo[playerid][pDineroBanco] += 1500;
	    SetCameraBehindPlayer(playerid);
	    SetPlayerInterior(playerid,0);
	    SetPlayerVirtualWorld(playerid,0);
	    PrimerSpawn[playerid] = 1;
	    SetPlayerSkin(playerid, PlayerInfo[playerid][pSkin]);
	    PlayerInfo[playerid][pNivel] = 1;
        for(new x = 0; x < 8; x++)
	    {
		    PlayerInfo[playerid][pBol][x] = 0;
		    PlayerInfo[playerid][pBolCant][x] = 0;
	    }
	    PlayerInfo[playerid][pManoIzq] = 0;
	    PlayerInfo[playerid][pManoIzqCant] = 0;
	    PlayerInfo[playerid][pManoDer] = 0;
	    PlayerInfo[playerid][pManoDerCant] = 0;
	    PlayerInfo[playerid][pEspalda] = 0;
	    PlayerInfo[playerid][pEspaldaCant] = 0;
	    PlayerInfo[playerid][pHabPistola] = 800;
	    PlayerInfo[playerid][pHabSD] = 1000;
	    PlayerInfo[playerid][pHabDEagle] = 1000;
	    PlayerInfo[playerid][pHabEscopeta] = 1000;
	    PlayerInfo[playerid][pHabSawnoff] = 800;
	    PlayerInfo[playerid][pHabEscopetaCom] = 1000;
	    PlayerInfo[playerid][pHabUZI] = 800;
	    PlayerInfo[playerid][pHabMP5] = 1000;
	    PlayerInfo[playerid][pHabAK47] = 1000;
	    PlayerInfo[playerid][pHabM4] = 1000;
	    PlayerInfo[playerid][pHabFranco] = 1000;
	    SetPlayerSkillLevel(playerid, WEAPONSKILL_PISTOL, PlayerInfo[playerid][pHabPistola]);
	    SetPlayerSkillLevel(playerid, WEAPONSKILL_PISTOL_SILENCED, PlayerInfo[playerid][pHabSD]);
	    SetPlayerSkillLevel(playerid, WEAPONSKILL_DESERT_EAGLE, PlayerInfo[playerid][pHabDEagle]);
	    SetPlayerSkillLevel(playerid, WEAPONSKILL_SHOTGUN, PlayerInfo[playerid][pHabEscopeta]);
	    SetPlayerSkillLevel(playerid, WEAPONSKILL_SAWNOFF_SHOTGUN, PlayerInfo[playerid][pHabSawnoff]);
	    SetPlayerSkillLevel(playerid, WEAPONSKILL_SPAS12_SHOTGUN, PlayerInfo[playerid][pHabEscopetaCom]);
	    SetPlayerSkillLevel(playerid, WEAPONSKILL_MICRO_UZI, PlayerInfo[playerid][pHabUZI]);
	    SetPlayerSkillLevel(playerid, WEAPONSKILL_MP5, PlayerInfo[playerid][pHabMP5]);
	    SetPlayerSkillLevel(playerid, WEAPONSKILL_AK47, PlayerInfo[playerid][pHabAK47]);
	    SetPlayerSkillLevel(playerid, WEAPONSKILL_M4, PlayerInfo[playerid][pHabM4]);
	    SetPlayerSkillLevel(playerid, WEAPONSKILL_SNIPERRIFLE, PlayerInfo[playerid][pHabFranco]);
        PlayerInfo[playerid][pHambre] = 240;
        ActualizarHambre(playerid);
        PlayerInfo[playerid][pSed] = 180;
        ActualizarSed(playerid);
        PlayerSave(playerid);
		SetCameraBehindPlayer(playerid);
		SetTimerEx("SobeitCheck", 4000, 0, "i", playerid);
		SetTimerEx("Descongelar", 5000, false, "i", playerid);
    }
    else if(PlayerInfo[playerid][pPrimerLogueo] != 0) //No es primera vez que loguea
    {
        SetPlayerPos(playerid, 2002.5728, -1445.3669, 13.5616); //Spawnea en hospital de Jefferson
	    if(PrimerSpawn[playerid] == 0) //Primera vez que spawnea tras loguear
	    {
            SetPlayerInterior(playerid, PlayerInfo[playerid][pInterior]);
	        SetPlayerVirtualWorld(playerid, PlayerInfo[playerid][pVirtualWorld]);
	        new Float:PosX, Float:PosY, Float:PosZ;
	        PosX = PlayerInfo[playerid][pPosX]; PosY = PlayerInfo[playerid][pPosY]; PosZ = PlayerInfo[playerid][pPosZ];
	        SetPlayerPos(playerid,PosX, PosY, PosZ);
		    SetPlayerHealth(playerid, PlayerInfo[playerid][pVida]);
	        SetPlayerArmour(playerid, PlayerInfo[playerid][pChaleco]);
	        new ManoDer = PlayerInfo[playerid][pManoDer];
	        new ManoIzq = PlayerInfo[playerid][pManoIzq];
	        new Espalda = PlayerInfo[playerid][pEspalda];
	        if(ManoDer > 0) //Si tiene algo en la mano derecha
			{
				PonerObjeto(playerid, 1, ManoDer);
				if(ObjetoInfo[ManoDer][IDArma] > 0) //Es un arma
				{
					GivePlayerWeapon(playerid, ObjetoInfo[ManoDer][IDArma], PlayerInfo[playerid][pManoDerCant]); //Le da el arma
				}
			}
	        if(ManoIzq > 0){PonerObjeto(playerid, 2, ManoIzq);} //Si tiene algo en la mano izquierda
	        if(Espalda > 0){PonerObjeto(playerid, 3, Espalda);} //Si tiene algo en la espalda
	        PrimerSpawn[playerid] = 1;
	        TogglePlayerControllable(playerid, 0);
	        SetCameraBehindPlayer(playerid);
	        SetTimerEx("SobeitCheck", 4000, 0, "i", playerid);
			SetTimerEx("Descongelar", 5000, false, "i", playerid);
			if(PlayerInfo[playerid][pDrConsumida][0] > 0) SendClientMessage(playerid, Naranja, "Recuerda que aún estás bajo los efectos de la marihuana.");
			if(PlayerInfo[playerid][pDrConsumida][1] > 0) SendClientMessage(playerid, Naranja, "Recuerda que aún estás bajo los efectos de la cocaína.");
			if(PlayerInfo[playerid][pDrConsumida][2] > 0) SendClientMessage(playerid, Naranja, "Recuerda que aún estás bajo los efectos del crack.");
			if(PlayerInfo[playerid][pDrConsumida][3] > 0) SendClientMessage(playerid, Naranja, "Recuerda que aún estás bajo los efectos de la heroína.");
			if(PlayerInfo[playerid][pDrConsumida][4] > 0) SendClientMessage(playerid, Naranja, "Recuerda que aún estás bajo los efectos del LSD.");
	    }
	    if(PlayerInfo[playerid][pEncarcelado] == 3) //Si está jail OOC
		{
		    JailPlayerOOC(playerid);
		}
		if(PlayerInfo[playerid][pMuerto] > 0)
		{
			SetPlayerPos(playerid, MuertoX[playerid], MuertoY[playerid], MuertoZ[playerid]);
   			SetPlayerInterior(playerid, MuertoInt[playerid]), SetPlayerVirtualWorld(playerid, MuertoVW[playerid]);
			TogglePlayerControllable(playerid, 0);
			SendClientMessage(playerid,Blanco,"Te has desmayado debido a las heridas, se avisó a la facción LSMD de tu posición.");
	    	if(PlayerInfo[playerid][pEncarcelado] == 0)SendClientMessage(playerid,Blanco,"{FFFF04}Información:{FFFFFF} Después de un rato si no viene ningún médico serás atendido automaticamente.");
	   	 	SetTimerEx("Congelar", 100, false, "i", playerid);
	    	MuertoTimer[playerid] = SetTimerEx("Muerto", 180000, false, "i", playerid);
	    	MuertoFlashTimer[playerid] = SetTimerEx("MuertoFlash", 153000, false, "i", playerid);
		}
		if(Muerte[playerid] == 1) //Si ha muerto cerca del hospital de Market
		{
			SetPlayerPos(playerid, 1182.8728, -1323.5931, 13.5783);
			SetPlayerFacingAngle(playerid, 270);
			Muerte[playerid] = 0;
		    JailPlayerIC(playerid);
		}
		if(Muerte[playerid] == 2) //Si ha muerto cerca del hospital de Jefferson
		{
			SetPlayerPos(playerid, 2002.5728, -1445.3669, 13.5616);
			SetPlayerFacingAngle(playerid, 135);
			Muerte[playerid] = 0;
		   	JailPlayerIC(playerid);
		}
    }
    PonerUniformeFaccion(playerid);
    //SetTimerEx("SpawnBug", 1000, false, "i", playerid);
    return 1;
}

public OnPlayerDeath(playerid, killerid, reason)
{
    Anims_OnPlayerDeath(playerid);
	new string[256];
	RemovePlayerColorFade(playerid); //Para seifader include
	GivePlayerMoneyAC(playerid, 100); //Le da los 100$ que pierde al morir
	reclutarfaccion[playerid] = 0; //Comando /reclutar
    reclutarlider[playerid] = 0;
    Esposado[playerid] = 0; //Esposas
    RemovePlayerAttachedObject(playerid, 4); //Esposas
    Cosechado[playerid] = 0; //Job cosechador
    TaxiConductor[playerid] = NOEXISTE; //Job taxista
	TaxiPasajero[playerid] = NOEXISTE;
	TaxiCoste[playerid] = 0;
	SolicitaTaxi[playerid] = 0;
	SolicitaMeca[playerid] = 0;

	for(new i=0; i<MAX_PLAYERS; i++) //Job taxista
    {
        if(TaxiConductor[i] == playerid){TaxiConductor[i] = NOEXISTE;}
        if(TaxiPasajero[i] == playerid){TaxiPasajero[i] = NOEXISTE;}
    }

    ReparacionTipo[playerid] = 0; //Job mecánico
	ReparacionMeca[playerid] = NOEXISTE;
	ReparacionPrecio[playerid] = 0;

	for(new i=0; i<MAX_PLAYERS; i++) //Job mecánico
    {
        if(ReparacionMeca[i] == playerid){ReparacionMeca[i] = NOEXISTE; ReparacionTipo[i] = 0; ReparacionPrecio[i] = 0;}
    }
    RepintadoColor1[playerid] = 0; //Job mecánico
    RepintadoColor2[playerid] = 0;
	RepintadoMeca[playerid] = NOEXISTE;
	RepintadoPrecio[playerid] = 0;

    for(new i=0; i<MAX_PLAYERS; i++) //Job mecánico
    {
        if(RepintadoMeca[i] == playerid){RepintadoMeca[i] = NOEXISTE; RepintadoColor1[i] = 0; RepintadoColor2[playerid] = 0; RepintadoPrecio[i] = 0;}
    }
    Robando[playerid] = 0;//Job ladrón
    KillTimer(RoboTimer[playerid]);
    Puenteando[playerid] = 0;
    KillTimer(PuenteTimer[playerid]);

    PescaRecogida[playerid] = 0; //Job pescador
    DineroPesca[playerid] = 0;

    MisionEncargada[playerid] = 0; //Sistema de misiones de pandillas
	RealizandoMision[playerid] = 0;
	MuroAPintar[playerid] = NOEXISTE;

	HaciendoPressBanca[playerid] = 0; //Comando /Entrenar
    RepeticionesPressBanca[playerid] = 0;

    PrestadorCoche[playerid] = NOEXISTE; // /PrestarLlave
    LlavePrestada[playerid] = NOEXISTE;

    EnLlamada[playerid] = 0; //Sistema teléfono
    ToqueLlamada[playerid] = 0;
   	KillTimer(ToqueLlamadaTimer[playerid]);
    if(PersonaEnLlamada[playerid] != NOEXISTE)KillTimer(ToqueLlamadaTimer[PersonaEnLlamada[playerid]]);
    if(EnLlamada[playerid] == 3)
	{
		KillTimer(CostoLlamadaTimer[playerid]);
		format(string, sizeof(string), "Coste de la llamada: %d$", CosteTotalLlamada[playerid]);
		SendClientMessage(playerid, RojoIntenso, string);
		PlayerInfo[playerid][pDineroBanco] -= CosteTotalLlamada[playerid];
		CosteTotalLlamada[playerid] = 0;
	}
	if(PersonaEnLlamada[playerid] != NOEXISTE)
	{
	    if(EnLlamada[PersonaEnLlamada[playerid]] == 3)
		{
			KillTimer(CostoLlamadaTimer[PersonaEnLlamada[playerid]]);
			format(string, sizeof(string), "Coste de la llamada: %d$", CosteTotalLlamada[PersonaEnLlamada[playerid]]);
			SendClientMessage(PersonaEnLlamada[playerid], RojoIntenso, string);
			PlayerInfo[PersonaEnLlamada[playerid]][pDineroBanco] -= CosteTotalLlamada[PersonaEnLlamada[playerid]];
			CosteTotalLlamada[PersonaEnLlamada[playerid]] = 0;
		}
	}
    if(PersonaEnLlamada[playerid] != NOEXISTE)SendClientMessage(playerid, Gris, "Se ha cortado la línea...");
    for(new i=0; i<MAX_PLAYERS; i++)
    {
        if(PersonaEnLlamada[i] == playerid){SendClientMessage(i, Gris, "Se ha cortado la línea..."); EnLlamada[i] = 0; PersonaEnLlamada[i] = NOEXISTE; break;}
    }
    PersonaEnLlamada[playerid] = NOEXISTE;

    if(EnCatalogoVeh[playerid] != NOEXISTE) //catalogo
    {
        TextDrawHideForPlayer(playerid, fila[1]);
		TextDrawHideForPlayer(playerid, fila[2]);
		TextDrawHideForPlayer(playerid, fila[3]);
		TextDrawHideForPlayer(playerid, fila[4]);
	    TextDrawHideForPlayer(playerid, Modelo[EnCatalogoVeh[playerid]]);
		TextDrawHideForPlayer(playerid, CocheNombre[EnCatalogoVeh[playerid]]);
		TextDrawHideForPlayer(playerid, Costo[EnCatalogoVeh[playerid]]);
		TextDrawHideForPlayer(playerid, Id[EnCatalogoVeh[playerid]]);
	    EnCatalogoVeh[playerid] = NOEXISTE;
    }

    for(new x=0; x<MAX_PLAYERS; x++) //Sistema RECON
    {
        if(GetPlayerState(x) == PLAYER_STATE_SPECTATING && PlayerInfo[x][pSpecID] == playerid)
        AdvanceSpectate(x);
    }

    CinturonPuesto[playerid] = 0; //Comando /Cinturón

    for(new x=0; x<5; x++) //Drogas
	{
	    PlayerInfo[playerid][pDrConsumida][x] = 0;
	}
	new Float:pos[3];
    GetPlayerPos(playerid, pos[0], pos[1], pos[2]);
    GenerarInforme(playerid, pos[0], pos[1], pos[2]);
    if(PlayerInfo[playerid][pEncarcelado] == 1) //Prisión LSPD
    {
        for(new x=0; x<MAX_PLAYERS; x++)
        {
            if(PlayerInfo[x][pServicioPD] > 0 && PlayerInfo[x][pFaccion] == 1)
            {
                SendClientMessage(x, TEAM_BLUE_COLOR, "[Radio] -{FFFFFF} Central: Se está reportando violencia en las celdas de comisaría.");
                format(string, sizeof(string), "[Radio] -{FFFFFF} Central: El preso {56C4FF}%s {FFFFFF}ha sufrido daños graves.", GetPlayerNameRP(playerid));
                SendClientMessage(x, TEAM_BLUE_COLOR, string);
            }
        }
    }
    if(PlayerInfo[playerid][pEncarcelado] == 2) //Prisión federal
    {
        for(new x=0; x<MAX_PLAYERS; x++)
        {
            if(PlayerInfo[x][pServicioPD] > 0 && PlayerInfo[x][pFaccion] == 1)
            {
                SendClientMessage(x, TEAM_BLUE_COLOR, "[Radio] -{FFFFFF} Central: Se está reportando violencia en la prisión federal.");
                format(string, sizeof(string), "[Radio] -{FFFFFF} Central: El preso {56C4FF}%s {FFFFFF}ha sufrido daños graves.", GetPlayerNameRP(playerid));
                SendClientMessage(x, TEAM_BLUE_COLOR, string);
            }
        }
    }

    if(PlayerInfo[playerid][pMuerto] > 0) //Sistema muerte
    {
	    KillTimer(MuertoTimer[playerid]);
		KillTimer(MuertoFlashTimer[playerid]);
    }

    if(PlayerInfo[playerid][pMuerto] == 0) //Sistema de muerte
	{
	    GetPlayerPos(playerid, MuertoX[playerid], MuertoY[playerid], MuertoZ[playerid]);
	    MuertoInt[playerid] = GetPlayerInterior(playerid), MuertoVW[playerid] = GetPlayerVirtualWorld(playerid);
	    if(GetDistance(MuertoX[playerid], MuertoY[playerid], MuertoZ[playerid], 1182.8728, -1323.5931, 13.5783) < GetDistance(MuertoX[playerid], MuertoY[playerid], MuertoZ[playerid], 2002.5728, -1445.3669, 13.5616))
	    {
	    	PlayerInfo[playerid][pMuerto] = 1;
	    }
	    else
		{
			PlayerInfo[playerid][pMuerto] = 2;
		}
		if(GetPlayerVehicleID(playerid) == 0)
		{
			if(PlayerInfo[playerid][pManoDer] > 0)
			{
				DropObjeto(PlayerInfo[playerid][pManoDer], PlayerInfo[playerid][pManoDerCant], MuertoX[playerid], MuertoY[playerid]-0.3, MuertoZ[playerid], MuertoVW[playerid], MuertoInt[playerid]);
				PlayerInfo[playerid][pManoDer] = 0, PlayerInfo[playerid][pManoDerCant] = 0, RemovePlayerAttachedObject(playerid, 1);
			}
			if(PlayerInfo[playerid][pManoIzq] > 0)
			{
				DropObjeto(PlayerInfo[playerid][pManoIzq], PlayerInfo[playerid][pManoIzqCant], MuertoX[playerid], MuertoY[playerid]+0.3, MuertoZ[playerid], MuertoVW[playerid], MuertoInt[playerid]);
				PlayerInfo[playerid][pManoIzq] = 0, PlayerInfo[playerid][pManoIzqCant] = 0, RemovePlayerAttachedObject(playerid, 2);
			}
			if(PlayerInfo[playerid][pEspalda] > 0)
			{
				DropObjeto(PlayerInfo[playerid][pEspalda], PlayerInfo[playerid][pEspaldaCant], MuertoX[playerid], MuertoY[playerid], MuertoZ[playerid], MuertoVW[playerid], MuertoInt[playerid]);
				PlayerInfo[playerid][pEspalda] = 0, PlayerInfo[playerid][pEspaldaCant] = 0, RemovePlayerAttachedObject(playerid, 3);
			}
		}
	}
	Streamer_Update(playerid);
    return 1;
}

public OnPlayerWeaponShot(playerid, weaponid, hittype, hitid, Float:fX, Float:fY, Float:fZ)
{
	if(weaponid >= 22 && weaponid <= 34 && weaponid != 23) //Armas de fuego exceptuando la silenciada
	{
	    new string[256];
	    if(TimerSonidoDisparo[playerid] != 1) //Sonidos realistas
	    {
    	    switch(weaponid)
    	    {
    	        case 22: format(string, sizeof(string), "* Oyes disparos de una pistola.", GetPlayerNameRP(playerid)),
     	        ProxDetector(105.0, playerid, string,NaranjaOscuro,NaranjaOscuro,Naranja,Naranja,AmarilloClaro);
     	        case 24: format(string, sizeof(string), "* Oyes disparos de una pistola de gran calibre.", GetPlayerNameRP(playerid)),
     	        ProxDetector(105.0, playerid, string,NaranjaOscuro,NaranjaOscuro,Naranja,Naranja,AmarilloClaro);
     	        case 25: format(string, sizeof(string), "* Oyes disparos de una escopeta.", GetPlayerNameRP(playerid)),
     	        ProxDetector(120.0, playerid, string,NaranjaOscuro,NaranjaOscuro,Naranja,Naranja,AmarilloClaro);
     	        case 26: format(string, sizeof(string), "* Oyes disparos de una escopeta pequeña.", GetPlayerNameRP(playerid)),
     	        ProxDetector(105.0, playerid, string,NaranjaOscuro,NaranjaOscuro,Naranja,Naranja,AmarilloClaro);
     	        case 27: format(string, sizeof(string), "* Oyes disparos de una escopeta automática.", GetPlayerNameRP(playerid)),
     	        ProxDetector(120.0, playerid, string,NaranjaOscuro,NaranjaOscuro,Naranja,Naranja,AmarilloClaro);
     	        case 28: format(string, sizeof(string), "* Oyes disparos de un micro subfusil.", GetPlayerNameRP(playerid)),
     	        ProxDetector(105.0, playerid, string,NaranjaOscuro,NaranjaOscuro,Naranja,Naranja,AmarilloClaro);
     	        case 29: format(string, sizeof(string), "* Oyes disparos de un subfusil.", GetPlayerNameRP(playerid)),
     	        ProxDetector(135.0, playerid, string,NaranjaOscuro,NaranjaOscuro,Naranja,Naranja,AmarilloClaro);
     	        case 30: format(string, sizeof(string), "* Oyes disparos de un fusil de asalto.", GetPlayerNameRP(playerid)),
     	        ProxDetector(150.0, playerid, string,NaranjaOscuro,NaranjaOscuro,Naranja,Naranja,AmarilloClaro);
     	        case 31: format(string, sizeof(string), "* Oyes disparos de un fusil de asalto.", GetPlayerNameRP(playerid)),
     	        ProxDetector(150.0, playerid, string,NaranjaOscuro,NaranjaOscuro,Naranja,Naranja,AmarilloClaro);
     	        case 32: format(string, sizeof(string), "* Oyes disparos de un micro subfusil.", GetPlayerNameRP(playerid)),
     	        ProxDetector(105.0, playerid, string,NaranjaOscuro,NaranjaOscuro,Naranja,Naranja,AmarilloClaro);
     	        case 33: format(string, sizeof(string), "* Oyes disparos de un rifle.", GetPlayerNameRP(playerid)),
     	        ProxDetector(180.0, playerid, string,NaranjaOscuro,NaranjaOscuro,Naranja,Naranja,AmarilloClaro);
     	        case 34: format(string, sizeof(string), "* Oyes disparos de un rifle.", GetPlayerNameRP(playerid)),
     	        ProxDetector(180.0, playerid, string,NaranjaOscuro,NaranjaOscuro,Naranja,Naranja,AmarilloClaro);
     	    }
     	    TimerSonidoDisparo[playerid] = 1;
     	    SetTimerEx("TSonidoDisparo",5000,0,"d",playerid);
 	    }
	}
	if(PlayerInfo[playerid][pManoDer] == 38 && weaponid == 23){TaserRecarga[playerid] = 1; SetTimerEx("RecargarTaser", 5000, false, "i", playerid);} //Sistema de recarga de taser
    return 1;
}

public OnPlayerGiveDamage(playerid, damagedid, Float:amount, weaponid, bodypart)
{
return 1;
}

public OnPlayerTakeDamage(playerid, issuerid, Float:amount, weaponid, bodypart)
{
	if(!IsPlayerConnected(playerid)){return 1;}
	if(PlayerInfo[playerid][pMuerto] != 0){return 1;}
	if(GetPlayerState(playerid) == PLAYER_STATE_WASTED){return 1;}
    if(weaponid == 54) //Caida
    {
    	GivePlayerHealth(playerid, -(amount*2.5));
    }
    if(issuerid != INVALID_PLAYER_ID)
    {
        if(weaponid == 23 && PlayerInfo[issuerid][pManoDer] == 38) //Mensaje de daño por táser
        {
			new string[256];
        	format(string, sizeof(string), "* %s dispara a %s (Pistola táser)", GetPlayerNameRP(issuerid), GetPlayerNameRP(playerid));
            SendClientMessage(playerid, RojoIntenso, string);
        	format(string, sizeof(string), "* %s dispara a %s (Pistola táser)", GetPlayerNameRP(issuerid), GetPlayerNameRP(playerid));
            SendClientMessage(issuerid, Verde, string);
        }
        else if(!((weaponid >= 0) && (weaponid <= 18)) && !((weaponid > 34) && (weaponid <= 201))) //Mensaje de daño por arma
        {
            new weaponname[34], string[80], zona[20];
            switch(bodypart)
            {
                case 3: zona = "el torso";
                case 4: zona = "la entrepierna";
                case 5: zona = "el brazo izquierdo";
                case 6: zona = "el brazo derecho";
                case 7: zona = "la pierna izquierda";
                case 8: zona = "la pierna derecha";
                case 9: zona = "la cabeza";
            }
            GetWeaponNameEx(weaponid,weaponname,sizeof(weaponname));
        	format(string, sizeof(string), "* %s disparó a %s (%s) en %s.", GetPlayerNameRP(issuerid), GetPlayerNameRP(playerid), weaponname, zona);
            //SendClientMessage(playerid, RojoIntenso, string);
        	format(string, sizeof(string), "* %s disparó a %s (%s) en %s.", GetPlayerNameRP(issuerid), GetPlayerNameRP(playerid), weaponname, zona);
            //SendClientMessage(issuerid, Verde, string);
        }
        new Float:chaleco, Float:Dano;
        if(weaponid == 0) //Puños
        {
        	GivePlayerHealth(playerid, -amount*(float(PlayerInfo[issuerid][pFuerza]))/100);
        }
        if(weaponid == 34) //Francotirador
        {
            GetPlayerArmour(playerid, chaleco);
            switch(bodypart)
            {
                case 3: Dano = 2*40;
                case 4: Dano = 2*40;
                case 5: Dano = 1*40;
                case 6: Dano = 1*40;
                case 7: Dano = 1*40;
                case 8: Dano = 1*40;
                case 9: Dano = 3*40;
            }
            if(bodypart == 9){SetPlayerHealth(playerid, 0.0);}
            else if(chaleco <= Dano && chaleco > 0)
           	{
               	SetPlayerArmour(playerid, 0.0);
           	}
           	else if(chaleco > 0)
           	{
                GivePlayerArmour(playerid, -Dano);
           	}
            else if(chaleco <= 0)
            {
                GivePlayerHealth(playerid, -Dano);
            }
        }
        if(weaponid == 8)  //Katana
        {
            GetPlayerArmour(playerid, chaleco);
           	if(chaleco <= 30 && chaleco > 0)
           	{
               	SetPlayerArmour(playerid, 0.0);
           	}
           	else if(chaleco > 0)
           	{
        		GivePlayerArmour(playerid, -30.0);
           	}
            else if(chaleco <= 0)
    		{
                GivePlayerHealth(playerid, -30.0);
            }
        }
        if(weaponid == 22) //M1911
        {
            GetPlayerArmour(playerid, chaleco);
            switch(bodypart)
            {
                case 3: Dano = 2*12;
                case 4: Dano = 2*12;
                case 5: Dano = 1*12;
                case 6: Dano = 1*12;
                case 7: Dano = 1*12;
                case 8: Dano = 1*12;
                case 9: Dano = 3*12;
            }
           	if(chaleco <= Dano && chaleco > 0)
           	{
               	SetPlayerArmour(playerid, 0.0);
           	}
           	else if(chaleco > 0)
           	{
        		GivePlayerArmour(playerid, -Dano);
           	}
            else if(chaleco <= 0)
    		{
                GivePlayerHealth(playerid, -Dano);
            }
        }
        if(weaponid == 23 && PlayerInfo[issuerid][pManoDer] != 38) //M1911 con silenciador
        {
            GetPlayerArmour(playerid, chaleco);
            switch(bodypart)
            {
                case 3: Dano = 2*12;
                case 4: Dano = 2*12;
                case 5: Dano = 1*12;
                case 6: Dano = 1*12;
                case 7: Dano = 1*12;
                case 8: Dano = 1*12;
                case 9: Dano = 3*12;
            }
           	if(chaleco <= Dano && chaleco > 0)
           	{
               	SetPlayerArmour(playerid, 0.0);
           	}
           	else if(chaleco > 0)
           	{
        		GivePlayerArmour(playerid, -Dano);
           	}
            else if(chaleco <= 0)
    		{
                GivePlayerHealth(playerid, -Dano);
            }
        }
        if(weaponid == 23 && PlayerInfo[issuerid][pManoDer] == 38 && !IsPlayerInAnyVehicle(playerid)) //Táser
        {
			if(IsPlayerInAnyVehicle(playerid)){return 1;}
	        new string[256];
            TogglePlayerControllable(playerid, 0);
			Taseado[playerid] = 1;
			SetTimerEx("Destasear", 20000, false, "i", playerid);
            PlayerPlaySound(playerid, 6003, 0.0, 0.0, 0.0);
            PlayerPlaySound(issuerid, 6003, 0.0, 0.0, 0.0);
            format(string, sizeof(string), "* Has sido taseado por %s", GetPlayerNameRP(issuerid));
            SendClientMessage(playerid, AzulClaro, string);
			format(string, sizeof(string), "* Has taseado a %s", GetPlayerNameRP(playerid));
			SendClientMessage(issuerid, AzulClaro, string);
        }
        if(weaponid == 24) //D. Eagle
        {
            GetPlayerArmour(playerid, chaleco);
            switch(bodypart)
            {
                case 3: Dano = 2*40;
                case 4: Dano = 2*40;
                case 5: Dano = 1*40;
                case 6: Dano = 1*40;
                case 7: Dano = 1*40;
                case 8: Dano = 1*40;
                case 9: Dano = 3*40;
            }
            if(chaleco <= Dano && chaleco > 0)
           	{
               	SetPlayerArmour(playerid, 0.0);
           	}
           	else if(chaleco > 0)
           	{
                GivePlayerArmour(playerid, -Dano);
           	}
            else if(chaleco <= 0)
    		{
                GivePlayerHealth(playerid, -Dano);
            }
        }
        if(weaponid == 28) //UZI
        {
            GetPlayerArmour(playerid, chaleco);
            switch(bodypart)
            {
                case 3: Dano = 2*12;
                case 4: Dano = 2*12;
                case 5: Dano = 1*12;
                case 6: Dano = 1*12;
                case 7: Dano = 1*12;
                case 8: Dano = 1*12;
                case 9: Dano = 3*12;
            }
           	if(chaleco <= Dano && chaleco > 0)
           	{
               	SetPlayerArmour(playerid, 0.0);
           	}
           	else if(chaleco > 0)
           	{
        		GivePlayerArmour(playerid, -Dano);
           	}
            else if(chaleco <= 0)
    		{
                GivePlayerHealth(playerid, -Dano);
            }
        }
        if(weaponid == 32) //Tec-9
        {
            GetPlayerArmour(playerid, chaleco);
            switch(bodypart)
            {
                case 3: Dano = 2*10;
                case 4: Dano = 2*10;
                case 5: Dano = 1*10;
                case 6: Dano = 1*10;
                case 7: Dano = 1*10;
                case 8: Dano = 1*10;
                case 9: Dano = 3*10;
            }
       	    if(chaleco <= Dano && chaleco > 0)
       	    {
       	        SetPlayerArmour(playerid, 0.0);
       	    }
       	    else if(chaleco > 0)
       	    {
		        GivePlayerArmour(playerid, -Dano);
       	    }
            else if(chaleco <= 0)
		    {
                GivePlayerHealth(playerid, -Dano);
            }
        }
        if(weaponid == 29) //MP5
        {
            GetPlayerArmour(playerid, chaleco);
            switch(bodypart)
            {
                case 3: Dano = 2*14;
                case 4: Dano = 2*14;
                case 5: Dano = 1*14;
                case 6: Dano = 1*14;
                case 7: Dano = 1*14;
                case 8: Dano = 1*14;
                case 9: Dano = 3*14;
            }
       	    if(chaleco <= Dano && chaleco > 0)
       	    {
       	        SetPlayerArmour(playerid, 0.0);
       	    }
       	    else if(chaleco > 0)
       	    {
		        GivePlayerArmour(playerid, -Dano);
       	    }
            else if(chaleco <= 0)
		    {
                GivePlayerHealth(playerid, -Dano);
            }
        }
        if(weaponid == 30) //Ak-47
        {
            GetPlayerArmour(playerid, chaleco);
            switch(bodypart)
            {
                case 3: Dano = 2*24;
                case 4: Dano = 2*24;
                case 5: Dano = 1*24;
                case 6: Dano = 1*24;
                case 7: Dano = 1*24;
                case 8: Dano = 1*24;
                case 9: Dano = 3*24;
            }
       	    if(chaleco <= Dano && chaleco > 0)
       	    {
       	        SetPlayerArmour(playerid, 0.0);
           	}
       	    else if(chaleco > 0)
       	    {
		        GivePlayerArmour(playerid, -Dano);
       	    }
            else if(chaleco <= 0)
		    {
                GivePlayerHealth(playerid, -Dano);
            }
        }
        if(weaponid == 31) //M4
        {
            GetPlayerArmour(playerid, chaleco);
            switch(bodypart)
            {
                case 3: Dano = 2*21;
                case 4: Dano = 2*21;
                case 5: Dano = 1*21;
                case 6: Dano = 1*21;
                case 7: Dano = 1*21;
                case 8: Dano = 1*21;
                case 9: Dano = 3*21;
            }
       	    if(chaleco <= Dano && chaleco > 0)
       	    {
       	        SetPlayerArmour(playerid, 0.0);
       	    }
       	    else if(chaleco > 0)
       	    {
		        GivePlayerArmour(playerid, -Dano);
       	    }
            else if(chaleco <= 0)
		    {
                GivePlayerHealth(playerid, -Dano);
            }
        }
        if(weaponid == 25) //Escopeta
        {
            GetPlayerArmour(playerid, chaleco);
            switch(bodypart)
            {
                case 3: Dano = 3*amount;
                case 4: Dano = 3*amount;
                case 5: Dano = 2*amount;
                case 6: Dano = 2*amount;
                case 7: Dano = 2*amount;
                case 8: Dano = 2*amount;
                case 9: Dano = 4*amount;
            }
           	if(chaleco <= Dano && chaleco > 0)
           	{
               	SetPlayerArmour(playerid, 0.0);
           	}
           	else if(chaleco > 0)
           	{
        		GivePlayerArmour(playerid, -Dano);
           	}
            else if(chaleco <= 0)
    		{
                GivePlayerHealth(playerid, -Dano);
            }
        }
        if(weaponid == 26) //Escopeta recortada
        {
            GetPlayerArmour(playerid, chaleco);
            switch(bodypart)
            {
                case 3: Dano = 3*amount;
                case 4: Dano = 3*amount;
                case 5: Dano = 2*amount;
                case 6: Dano = 2*amount;
                case 7: Dano = 2*amount;
                case 8: Dano = 2*amount;
                case 9: Dano = 4*amount;
            }
           	if(chaleco <= Dano && chaleco > 0)
           	{
               	SetPlayerArmour(playerid, 0.0);
           	}
           	else if(chaleco > 0)
           	{
        		GivePlayerArmour(playerid, -Dano);
           	}
            else if(chaleco <= 0)
    		{
                GivePlayerHealth(playerid, -Dano);
            }
        }
        if(weaponid == 27) //Escopeta automatica
        {
            GetPlayerArmour(playerid, chaleco);
            switch(bodypart)
            {
                case 3: Dano = 3*amount;
                case 4: Dano = 3*amount;
                case 5: Dano = 2*amount;
                case 6: Dano = 2*amount;
                case 7: Dano = 2*amount;
                case 8: Dano = 2*amount;
                case 9: Dano = 4*amount;
            }
           	if(chaleco <= Dano && chaleco > 0)
           	{
               	SetPlayerArmour(playerid, 0.0);
           	}
           	else if(chaleco > 0)
           	{
        		GivePlayerArmour(playerid, -Dano);
           	}
            else if(chaleco <= 0)
    		{
                GivePlayerHealth(playerid, -Dano);
            }
        }
        if(weaponid == 33) //Rifle de caza
        {
            GetPlayerArmour(playerid, chaleco);
            switch(bodypart)
            {
                case 3: Dano = 2*40;
                case 4: Dano = 2*40;
                case 5: Dano = 1*40;
                case 6: Dano = 1*40;
                case 7: Dano = 1*40;
                case 8: Dano = 1*40;
                case 9: Dano = 3*40;
            }
            if(bodypart == 9){SetPlayerHealth(playerid, 0.0);}
           	else if(chaleco <= Dano && chaleco > 0)
           	{
               	SetPlayerArmour(playerid, 0.0);
           	}
           	else if(chaleco > 0)
           	{
        		GivePlayerArmour(playerid, -Dano);
           	}
            else if(chaleco <= 0)
    		{
                GivePlayerHealth(playerid, -Dano);
            }
        }
        if(weaponid == 5) //Bate
        {
            GetPlayerArmour(playerid, chaleco);
           	if(chaleco <= 15 && chaleco > 0)
           	{
               	SetPlayerArmour(playerid, 0.0);
           	}
           	else if(chaleco > 0)
           	{
        		GivePlayerArmour(playerid, -13.0);
           	}
            else if(chaleco <= 0)
    		{
                GivePlayerHealth(playerid, -13.0);
            }
        }
        if(weaponid == 1) //Puño americano
        {
            GetPlayerArmour(playerid, chaleco);
           	if(chaleco <= 10 && chaleco > 0)
           	{
               	SetPlayerArmour(playerid, 0.0);
           	}
           	else if(chaleco > 0)
           	{
        		GivePlayerArmour(playerid, -10.0);
           	}
            else if(chaleco <= 0)
    		{
                GivePlayerHealth(playerid, -10.0);
            }
        }
        if(weaponid == 2) //Palo de golf
        {
            GetPlayerArmour(playerid, chaleco);
           	if(chaleco <= 15 && chaleco > 0)
           	{
               	SetPlayerArmour(playerid, 0.0);
           	}
           	else if(chaleco > 0)
           	{
        		GivePlayerArmour(playerid, -15.0);
           	}
            else if(chaleco <= 0)
    		{
                GivePlayerHealth(playerid, -15.0);
            }
        }
        if(weaponid == 3) //Porra
        {
            GetPlayerArmour(playerid, chaleco);
           	if(chaleco <= 17 && chaleco > 0)
           	{
               	SetPlayerArmour(playerid, 0.0);
           	}
           	else if(chaleco > 0)
           	{
        		GivePlayerArmour(playerid, -17.0);
           	}
            else if(chaleco <= 0)
    		{
                GivePlayerHealth(playerid, -17.0);
            }
        }
        if(weaponid == 4) //Cuchillo
        {
            GetPlayerArmour(playerid, chaleco);
           	if(chaleco <= 19 && chaleco > 0)
           	{
               	SetPlayerArmour(playerid, 0.0);
           	}
           	else if(chaleco > 0)
           	{
        		GivePlayerArmour(playerid, -19.0);
           	}
            else if(chaleco <= 0)
    		{
                GivePlayerHealth(playerid, -19.0);
            }
        }
        if(weaponid == 6) //Pala
        {
            GetPlayerArmour(playerid, chaleco);
           	if(chaleco <= 15 && chaleco > 0)
           	{
               	SetPlayerArmour(playerid, 0.0);
            }
           	else if(chaleco > 0)
           	{
        		GivePlayerArmour(playerid, -15.0);
           	}
            else if(chaleco <= 0)
    		{
                GivePlayerHealth(playerid, -15.0);
            }
        }
        if(weaponid == 7) //Palo de billar
        {
            GetPlayerArmour(playerid, chaleco);
           	if(chaleco <= 13 && chaleco > 0)
           	{
               	SetPlayerArmour(playerid, 0.0);
           	}
           	else if(chaleco > 0)
           	{
        		GivePlayerArmour(playerid, -13.0);
           	}
            else if(chaleco <= 0)
    		{
                GivePlayerHealth(playerid, -13.0);
            }
        }
        if(weaponid == 15) //Palanca
        {
            GetPlayerArmour(playerid, chaleco);
           	if(chaleco <= 18 && chaleco > 0)
           	{
               	SetPlayerArmour(playerid, 0.0);
           	}
           	else if(chaleco > 0)
           	{
        		GivePlayerArmour(playerid, -13.0);
           	}
            else if(chaleco <= 0)
    		{
                GivePlayerHealth(playerid, -13.0);
            }
        }
    }
    return 1;
}

public OnVehicleSpawn(vehicleid)
{
	if(IsAutoRenta(vehicleid))
	{
		if(VehRentado[vehicleid])
		{
			foreach(Player,i)
  			{
	    	    if(RentoVehID[i] == vehicleid)
	    	    {
	    	        RentoVehID[i] = 0;
	    	        SendClientMessage(i,Amarillo,"El vehículo que habias rentado, fue devuelto.");
					VehRentado[vehicleid] = 0;
				}
			}
		}
	}
	if(vehicleid > MAX_VEHPUBLICO) //Vehículo de compra
	{
	    if(VehExplotado[vehicleid] == 1) //Si ha explotado
	    {
	        SetVehicleVirtualWorld(vehicleid, vehicleid+1);
	        VehExplotado[vehicleid] = 0;
	        if(IsABoat(vehicleid)){SetVehiclePos(vehicleid, 2294.3999,-2447.8005,0.0000);}
	        else{SetVehiclePos(vehicleid, 2274.1028,-2345.5371,13.5469);}
	    }
	}
	DestroyDynamicObject(SirenaCoche[vehicleid]);
    return 1;
}

public OnVehicleDeath(vehicleid, killerid)
{
    if(vehicleid > MAX_VEHPUBLICO) //Vehículo de compra
	{
	    if(CarInfo[vehicleid][cEnDeposito] == 0) //No está en depósito
	    {
	    	if(!IsAPlane(vehicleid)){VehExplotado[vehicleid] = 1; CarInfo[vehicleid][cEnDeposito] = 1;}
	    }
    }
	return 1;
}

public OnPlayerText(playerid, text[])
{
	if(SPAM(text)){SendClientMessage(playerid, Rojo, "* No está permitido el SPAM en nuestro servidor."); return 0;}
    new Nombre[MAX_PLAYER_NAME],string[256];
   	format(Nombre, sizeof(Nombre),"%s", GetPlayerNameRP(playerid));
    printf("%s dice: %s", Nombre, text); //Se guarda en el chatlog
    if(CocheLSN(GetPlayerVehicleID(playerid)) && DirectoLSNCoche[GetPlayerVehicleID(playerid)] != NOEXISTE)
    {
        format(string, sizeof(string), "[Directo] %s: %s", Nombre, text);
        NoticiasLSN(AmarilloClaro, string);
        return 0;
    }
    if(EnLlamada[playerid] == 444) //Anuncios
    {
	    new string2[128];
        anunciotiempo = 1200;
        PlayerInfo[playerid][pDineroBanco] -= 300;
        SendClientMessage(playerid, Amarillo, "CNN: Bien, el anuncio costará 300$. Lo publicaremos en breves.");
		format(string2, sizeof(string2), "Anuncio: %s, Tlf: %d", text, PlayerInfo[playerid][pTelefono]);
        SendClientMessageToAll(Verde, string2);
        format(string, sizeof(string), "Anuncio enviado por '%s' [ID: %d]", GetPlayerNameRP(playerid), playerid);
        SendAdminMessage(Aguamarina, string);
        ColgarTelefono(playerid);
    }
    if(EnLlamada[playerid] == 2 || EnLlamada[playerid] == 3 || EnLlamada[playerid] == 912) //Teléfono llamada normal o emergencias
	{
		format(string, sizeof(string), "(Teléfono): %s", text);
		SendClientMessage(PersonaEnLlamada[playerid], Amarillo, string);
		format(string, sizeof(string), "(Teléfono) %s dice: %s", Nombre, text);
		ProxDetector(8.0, playerid,string,Chat1,Chat2,Chat3,Chat4,Chat5);
		return 0;
	}
    //Sistema de chat general
    if(ChatNormal)
    {
	    new lenguaje[28];
        switch(Idioma[playerid])
        {
            case 0: lenguaje = "";
            case 1: lenguaje = "[Español] ";
            case 2: lenguaje = "[Alemán] ";
            case 3: lenguaje = "[Japonés] ";
            case 4: lenguaje = "[Italiano] ";
            case 5: lenguaje = "[Ruso] ";
            case 6: lenguaje = "[Árabe] ";
            case 7: lenguaje = "[Francés] ";
            case 8: lenguaje = "[Chino] ";
            case 9: lenguaje = "[Portugués] ";
        }
	    if(!IsPlayerInAnyVehicle(playerid)) //Si no está en un vehículo
		{
	        format(string, sizeof(string), "%s %sdice: %s", Nombre, lenguaje, text);
	 	    ProxDetector(15.0, playerid, string,Chat1,Chat2,Chat3,Chat4,Chat5);
	    }
		else
		{
			new carid = GetPlayerVehicleID(playerid);
			if(IsABike(carid) || IsAMBike(carid) || IsAPizzaBike(carid) || IsABoat(carid)) //Si está en un vehiculo sin cabina
	        {
			    format(string, sizeof(string), "%s %sdice: %s", Nombre, lenguaje, text);
			    ProxDetector(15.0, playerid, string,Chat1,Chat2,Chat3,Chat4,Chat5);
			}
			else //Si está en un vehiculo con cabina
			{
	            if(VehicleWindows[GetPlayerVehicleID(playerid)] == 0)
			    {
	                format(string, sizeof(string), "(Ventana Cerrada) %s %sdice: %s", Nombre, lenguaje, text);
			    	ProxDetector(5.0, playerid, string,Chat1,Chat2,Chat3,Chat4,Chat5);
	            }
				else
				{
	                format(string, sizeof(string), "(Ventana Abierta) %s %sdice: %s", Nombre, lenguaje, text);
			    	ProxDetector(15.0, playerid, string,Chat1,Chat2,Chat3,Chat4,Chat5);
				}
			}
		}
		return 0;
	}
    return 1;
}

public OnPlayerCommandText(playerid, cmdtext[])
{
if(Anims_OnPlayerCommandText(playerid, cmdtext)) return 1;
new string[250];
new cmd[128];
new tmp[250];
new idx;
new playerid2;
new Nombre2[MAX_PLAYER_NAME];
new Nombre[MAX_PLAYER_NAME];
cmd = strtok(cmdtext, idx);

/* Comandos Administrativos */

if(strcmp(cmd, "/god", true) == 0){
    new Float: health1;
    if(PlayerInfo[playerid][pAdmin] < 2) return SendClientMessage(playerid, 0xFF0000AA, "You must be Admin to use this command");
    GetPlayerHealth(playerid, health1);
        if (health1==0.0)
        {
        SetPlayerHealth(playerid, 100.0);
        return SendClientMessage(playerid,0x00FF00AA, "Modo dios desactivado.");
        }

        if (health1>0.0)
        {
        SetPlayerHealth(playerid, FLOAT_INFINITY);
        return SendClientMessage(playerid, 0x00FF00AA, "Ahora eres dios!");
        }
}


//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/getnegoid", true) == 0) /* Comando paraconseguir la id de un negocio */
{
    if(PlayerInfo[playerid][pAdmin] < 1){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
    new i = GetPlayerFueraPuertaNego(playerid);
	if(i == 0){SendClientMessage(playerid, Rojo, "* No se ha detectado ningún negocio a tu alrededor."); return 1;}
	format(string, sizeof(string), "Negocio ID: %d", i);
	SendClientMessage(playerid, AzulClaro, string);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------
//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/onDuty", true) == 0) /* Comando para entrar o salir del servicio de admin */
{
    if(PlayerInfo[playerid][pAdmin] < 2){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
	if(PlayerInfo[playerid][pOnDuty]==0){
		PlayerInfo[playerid][pOnDuty]=1;
		SetPlayerColor(playerid,0x00FF0000);
 		format(string, sizeof(string), "Administrador %s de servicio",PlayerInfo[playerid][pNombre]);
		for(new i = 0; i < MAX_PLAYERS; i++)
			{
			if(IsPlayerConnected(i))
				{
				SendMessage(i, Verde , string);
				}
			}
	}else{
		PlayerInfo[playerid][pOnDuty]=0;
		SetPlayerColor(playerid,0xFFFFFF00);
 		format(string, sizeof(string), "Administrador %s fuera de servicio",PlayerInfo[playerid][pNombre]);
		for(new i = 0; i < MAX_PLAYERS; i++)
			{
			if(IsPlayerConnected(i))
				{
				SendMessage(i, Blanco , string);
				}
			}
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------
//---------------------------------------------------------------------------------------------------------------
if(strcmp(cmd, "/cochegratis", true) == 0)
{
	tmp = strtok(cmdtext, idx);
	new EspacioLibre;
	new  Float:pX,
	Float:pY, Float:pZ, Float:pAngle;
	GetPlayerPos(playerid, pX, pY, pZ);
	new Vehicle[32], VehicleID,vehicleSpawn;
	new ColorOne, ColorTwo;
	if(sscanf(tmp, "s[32]D(1)D(1)", Vehicle, ColorOne, ColorTwo))
	{
	    SendClientMessage(playerid, COLOR_GREY, "[USAGE]: /cochegratis[Vehiclename/Vehicleid]");
	    SendClientMessage(playerid, COLOR_GREY, "[USAGE]: Like /cochegratis Turismo , /cochegratis Elegy /cochegratis Nrg /cochegratis 522");
	    return 1;
	}

	if(PlayerInfo[playerid][pAdmin]>=3)
	{
	    VehicleID = GetVehicleModelIDFromName(Vehicle);
	    if(1==1) {
			if(VehicleID == -1 )
			{
				VehicleID = strval(Vehicle);

				if(VehicleID < 400 || VehicleID > 611 )
				{
					return SendClientMessage(playerid, COLOR_GREY, "You entered an invalid vehiclename!");
				}
			}
			for(new x = 0; x < 5; x++)
			{
	    		if(PlayerInfo[playerid][pLlaveCoche][x] == 0){EspacioLibre = 1; break;}
			}
			if(EspacioLibre == 0){SendClientMessage(playerid, Rojo, "* Ya tienes todos los slots de llaves propias ocupados."); return 1;}
			VehicleID=getCocheServerID(VehicleID);
			darCoche(VehicleID,pX,pY,pZ,PlayerInfo[playerid][pNombre],ColorOne,ColorTwo);
				for(new x; x < 5; x++)
				{
				if(PlayerInfo[playerid][pLlaveCoche][x] == 0)
				{
					PlayerInfo[playerid][pLlaveCoche][x] = CodigoLlave-1;
					break;
				}
			}
			SendClientMessage(playerid, 0x00FF00AA, "Tome su coche!");
		} else {
		    SendClientMessage(playerid, COLOR_GREY, "You are not allowed to spawn this vehicle!!");
		}
	} else {
		SendClientMessage(playerid, COLOR_GREY, "You can not spawn vehicles in this zone!");
	}
	return 1;
}
//---------------------------------------------------------------------------------------------------------------
//---------------------------------------------------------------------------------------------------------------
if(strcmp(cmd, "/jetpack", true) == 0) {
	if(PlayerInfo[playerid][pAdmin]<2)
	{
		SendClientMessage(playerid,0xFF0000AA,"Nivel de admin insuficiente.");
		return 1;
	}
	SetPlayerSpecialAction(playerid,SPECIAL_ACTION_USEJETPACK);
	return 1;
}


if(strcmp(cmd, "/almacenes", true) == 0) /* Comando para editar características de un negocio */
{
	for(new x=0; x<=TotalNegs; x++)
	{
	    NegoInfo[x][nMaxAlmacen] = 10;
	    SaveNegocios(x);
	}
}

if(strcmp(cmd, "/editnego", true) == 0) /* Comando para editar características de un negocio */
{
    if(PlayerInfo[playerid][pAdmin] < 4){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
    tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
	{
		SendClientMessage(playerid, Naranja, "* /EditNego [Opcion]");
		SendClientMessage(playerid, Naranja, "Opciones: Entrada, Valor, Interior, VW, Nombre, Comprado, Cerrado, Tipo, MaxAlmacen");
		return 1;
	}
	new i = GetPlayerFueraPuertaNego(playerid);
	if(strcmp(tmp, "Entrada", true) == 0)
	{
	    if(EditNegoPos[playerid] == 0)
	    {
	        if(i == 0){SendClientMessage(playerid, Rojo, "* No se ha detectado ningún negocio a tu alrededor."); return 1;}
		    format(string, sizeof(string), "* Editando la entrada del negocio #%d. Vuelve a escribir este comando para confirmar la posición.", i);
		    SendClientMessage(playerid, Amarillo, string);
		    EditNegoPos[playerid] = i;
		    return 1;
	    }
	    else
	    {
	        i = EditNegoPos[playerid];
	        new Float:ppos[3];
	        GetPlayerPos(playerid, ppos[0], ppos[1], ppos[2]);
	        format(string, sizeof(string), "* Entrada del negocio #%d cambiada a X:%f Y:%f Z:%f.", i, ppos[0], ppos[1], ppos[2]);
		    SendClientMessage(playerid, Amarillo, string);
		    EditNegoPos[playerid] = 0;
			NegoInfo[i][nEntradaX] = ppos[0];
			NegoInfo[i][nEntradaY] = ppos[1];
			NegoInfo[i][nEntradaZ] = ppos[2];
			UpdateNegocioLabel(i);
			SaveNegocios(i);
		    return 1;
	    }
	}
	if(strcmp(tmp, "Comprado", true) == 0)
	{
	    if(i == 0){SendClientMessage(playerid, Rojo, "* No se ha detectado ningún negocio a tu alrededor."); return 1;}
	    tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "/EditNego Comprado [0 En Venta | 1 Comprado]");
			return 1;
		}
		new var;
		var = strval(tmp);
		NegoInfo[i][nComprado] = var;
		UpdateNegocioLabel(i);
		SaveNegocios(i);
	    return 1;
	}
	if(strcmp(tmp, "Cerrado", true) == 0)
	{
	    if(i == 0){SendClientMessage(playerid, Rojo, "* No se ha detectado ningún negocio a tu alrededor."); return 1;}
	    tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "/EditNego Cerrado [0 Abierto | 1 Cerrado]");
			return 1;
		}
		new var;
		var = strval(tmp);
		NegoInfo[i][nCerrado] = var;
		UpdateNegocioLabel(i);
		SaveNegocios(i);
	    return 1;
	}
	if(strcmp(tmp, "MaxAlmacen", true) == 0)
	{
	    if(i == 0){SendClientMessage(playerid, Rojo, "* No se ha detectado ningún negocio a tu alrededor."); return 1;}
	    tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "/EditNego MaxAlmacen [Slots]");
			return 1;
		}
		new var;
		var = strval(tmp);
		if(var < 1 || var > 25){SendClientMessage(playerid, Rojo, "* El máximo de slots debe estar entre 1 y 25."); return 1;}
		NegoInfo[i][nMaxAlmacen] = var;
		SaveNegocios(i);
	    return 1;
	}
	if(strcmp(tmp, "Valor", true) == 0)
	{
	    if(i == 0){SendClientMessage(playerid, Rojo, "* No se ha detectado ningún negocio a tu alrededor."); return 1;}
	    tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "/EditNego Valor [Precio]");
			return 1;
		}
		new precio;
		precio = strval(tmp);
		NegoInfo[i][nValor] = precio;
		UpdateNegocioLabel(i);
		SaveNegocios(i);
		return 1;
	}
	if(strcmp(tmp, "VW", true) == 0)
	{
	    if(i == 0){SendClientMessage(playerid, Rojo, "* No se ha detectado ningún negocio a tu alrededor."); return 1;}
	    tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "/EditNego VW [Virtual World]");
			return 1;
		}
		new vw;
		vw = strval(tmp);
		NegoInfo[i][nVirtualWorld] = vw;
		SaveNegocios(i);
		return 1;
	}
	if(strcmp(tmp, "Nombre", true) == 0)
	{
	    if(i == 0){SendClientMessage(playerid, Rojo, "* No se ha detectado ningún negocio a tu alrededor."); return 1;}
		new length = strlen(cmdtext);
	    while ((idx < length) && (cmdtext[idx] <= ' '))
	    {
	        idx++;
	    }
	    new offset = idx;
	    new result[MAX_PLAYER_NAME];
	    while ((idx < length) && ((idx - offset) < (sizeof(result) - 1)))
	    {
	        result[idx - offset] = cmdtext[idx];
	        idx++;
	    }
	    result[idx - offset] = EOS;
	    if(!strlen(result))
	    {
	        SendClientMessage(playerid, Naranja, "* /EditNego Nombre [Texto]");
	        return 1;
	    }
	    new string2[128];
	    format(NegoInfo[i][nNombre], sizeof(result), "%s", result);
	    format(string2, sizeof(string2), "Nombre negocio %d: %s", i, result);
	    SendClientMessage(playerid, Verde, string2);
	    UpdateNegocioLabel(i);
	    SaveNegocios(i);
		return 1;
	}
 	if(strcmp(tmp, "Tipo", true) == 0)
	{
	    if(i == 0){SendClientMessage(playerid, Rojo, "* No se ha detectado ningún negocio a tu alrededor."); return 1;}
	    tmp = strtok(cmdtext, idx);
 		if(!strlen(tmp))
  		{
  		    SendClientMessage(playerid, Naranja, "/EditNego Tipo [Opción]");
  		    SendClientMessage(playerid, Amarillo, "1 Restaurante | 2 Bar | 3 Comida rápida | 4 Discoteca | 5 Puticlub");
			SendClientMessage(playerid, Amarillo, "8 Tienda de armas | 9 24/7 | 10 Tienda de deportes | 11 Ferretería");
			SendClientMessage(playerid, Amarillo, "12 Tienda de ropa | 13 Tienda electrónica | 14 Almacén (NO INT) | 15 Oficina (NO INT) | 16 Casino (PROH)");
			SendClientMessage(playerid, Amarillo, "17 Casa de apuestas | 18 Casa de empeño (NO INT) | 19 Estanco | 20 Licorería | 21 Gimnasio");
			format(string, sizeof(string), "Tipo de negocio actual: %d", NegoInfo[i][nTipo]);
			SendClientMessage(playerid, Naranja, string);
			return 1;
		}
		new id;
		id = strval(tmp);
		NegoInfo[i][nTipo] = id;
		SaveNegocios(i);
		return 1;
	}
	if(strcmp(tmp, "Interior", true) == 0)
	{
	    if(i == 0){SendClientMessage(playerid, Rojo, "* No se ha detectado ningún negocio a tu alrededor."); return 1;}
	    tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "/EditNego Interior [Opción]");
			SendClientMessage(playerid, Amarillo, "[TIPO 1] 1 Rest A | 2 Rest Chino | 3 Rest B | 4 Rest C (BUG) | 5 Rest Lib City"); // Restaurante
			SendClientMessage(playerid, Amarillo, "[TIPO 2] 1 Bar Sureño | 2 Bar OVNI | 3 Bar Ten Bottles"); // Bar
			SendClientMessage(playerid, Amarillo, "[TIPO 3] 1 Pizzería Idl | 2 Tienda donuts | 3 Burguer Shot | 4 Cucklin Bell"); // Comidas rápidas
			SendClientMessage(playerid, Amarillo, "[TIPO 4] 1 Disco Alhambra"); // Discotecas
			SendClientMessage(playerid, Amarillo, "[TIPO 5] 1 Puti pequeño | 2 Puti grande | 3 Pig Pen | 4 Jizzy club"); // Puticlubs
			SendClientMessage(playerid, Amarillo, "[TIPO 6] 1 Ammu A | 2 Ammu B"); // Ammus
			SendClientMessage(playerid, Amarillo, "[TIPO 7] (1 al 6) 24/7"); // 24-7
			SendClientMessage(playerid, Amarillo, "[TIPO 8] 1 Tienda deportiva"); // Tienda deporte
			SendClientMessage(playerid, Amarillo, "[TIPO 11] 1 Binco | 2 Zip | 3 Didier Sanch | 4 Victim | 5 Suburban | 6 Prolaps"); // Tiendas ropa
			SendClientMessage(playerid, Amarillo, "[TIPO 16] 1 Casa apuestas grande | 2 Casa apuestas pequeña"); // Casa apuestas
			SendClientMessage(playerid, Amarillo, "[TIPO 20] 1 Gym LS | 2 Gym Sf | 3 Gym LV"); // Gimnasios
			return 1;
		}
		new inter;
		inter = strval(tmp);

        if(NegoInfo[i][nTipo] == 1) //Restaurante
        {
            switch(inter)
            {
                case 1:
                {
					NegoInfo[i][nSalidaX] = 459.0624;
		        	NegoInfo[i][nSalidaY] = -110.9772;
		        	NegoInfo[i][nSalidaZ] = 999.4406;
		        	NegoInfo[i][nInterior] = 5;
				}
				case 2:
                {
					NegoInfo[i][nSalidaX] = 2264.8516;
		        	NegoInfo[i][nSalidaY] = 1615.3269;
		        	NegoInfo[i][nSalidaZ] = 1637.9478;
		        	NegoInfo[i][nInterior] = 1;
				}
				case 3:
                {
					NegoInfo[i][nSalidaX] = 460.0901;
		        	NegoInfo[i][nSalidaY] = -88.6293;
		        	NegoInfo[i][nSalidaZ] = 999.5547;
		        	NegoInfo[i][nInterior] = 4;
				}
				case 4:
                {
					NegoInfo[i][nSalidaX] = 442.1236;
		        	NegoInfo[i][nSalidaY] = -50.0158;
		        	NegoInfo[i][nSalidaZ] = 999.7260;
		        	NegoInfo[i][nInterior] = 6;
				}
				case 5:
                {
					NegoInfo[i][nSalidaX] = -795.0060;
		        	NegoInfo[i][nSalidaY] = 489.9904;
		        	NegoInfo[i][nSalidaZ] = 1376.1953;
		        	NegoInfo[i][nInterior] = 1;
				}
            }
        }
        else if(NegoInfo[i][nTipo] == 2) //Bar
        {
            switch(inter)
            {
                case 1: //Bar sureño
                {
					NegoInfo[i][nSalidaX] = 681.4940;
		        	NegoInfo[i][nSalidaY] = -446.8011;
		        	NegoInfo[i][nSalidaZ] = -25.6098;
		        	NegoInfo[i][nInterior] = 1;
				}
                case 2: //Bar ovnis
                {
					NegoInfo[i][nSalidaX] = -228.8182;
		        	NegoInfo[i][nSalidaY] = 1401.2648;
		        	NegoInfo[i][nSalidaZ] = 27.7656;
		        	NegoInfo[i][nInterior] = 18;
				}
				case 3: //Bar ganton
                {
					NegoInfo[i][nSalidaX] = 501.9390;
		        	NegoInfo[i][nSalidaY] = -68.1167;
		        	NegoInfo[i][nSalidaZ] = 998.7578;
		        	NegoInfo[i][nInterior] = 11;
				}
            }
		}
		else if(NegoInfo[i][nTipo] == 3) //Comida rápida
		{
		    switch(inter)
            {
                case 1: //Pizzería idlewood
                {
					NegoInfo[i][nSalidaX] = 372.3232;
		        	NegoInfo[i][nSalidaY] = -133.0604;
		        	NegoInfo[i][nSalidaZ] = 1001.4922;
		        	NegoInfo[i][nInterior] = 5;
				}
				case 2: //Tienda donuts
                {
					NegoInfo[i][nSalidaX] = 377.0908;
		        	NegoInfo[i][nSalidaY] = -192.9837;
		        	NegoInfo[i][nSalidaZ] = 1000.6401;
		        	NegoInfo[i][nInterior] = 17;
				}
				case 3: //Burguer shot
                {
					NegoInfo[i][nSalidaX] = 363.1602;
		        	NegoInfo[i][nSalidaY] = -74.8537;
		        	NegoInfo[i][nSalidaZ] = 1001.5078;
		        	NegoInfo[i][nInterior] = 10;
				}
				case 4: //Cucklin Bell
                {
					NegoInfo[i][nSalidaX] = 364.9234;
		        	NegoInfo[i][nSalidaY] = -11.3165;
		        	NegoInfo[i][nSalidaZ] = 1001.8516;
		        	NegoInfo[i][nInterior] = 9;
				}
            }
		}
		else if(NegoInfo[i][nTipo] == 4) //Discoteca
        {
            switch(inter)
            {
                case 1: //Alhambra
                {
					NegoInfo[i][nSalidaX] = 493.4477;
		        	NegoInfo[i][nSalidaY] = -24.3666;
		        	NegoInfo[i][nSalidaZ] = 1000.6797;
		        	NegoInfo[i][nInterior] = 17;
				}
            }
		}
		else if(NegoInfo[i][nTipo] == 5) //Puticlub
		{
		    switch(inter)
            {
                case 1: //Puti pequeño
                {
					NegoInfo[i][nSalidaX] = 1212.1301;
		        	NegoInfo[i][nSalidaY] = -26.5189;
		        	NegoInfo[i][nSalidaZ] = 1000.9531;
		        	NegoInfo[i][nInterior] = 3;
				}
				case 2: //Puti grande
                {
					NegoInfo[i][nSalidaX] = 965.2302;
		        	NegoInfo[i][nSalidaY] = -53.1638;
		        	NegoInfo[i][nSalidaZ] = 1001.1246;
		        	NegoInfo[i][nInterior] = 3;
				}
				case 3: //Pig pen
                {
					NegoInfo[i][nSalidaX] = 1204.7584;
		        	NegoInfo[i][nSalidaY] = -13.4269;
		        	NegoInfo[i][nSalidaZ] = 1000.9219;
		        	NegoInfo[i][nInterior] = 2;
				}
				case 4: //Jizzy club
                {
					NegoInfo[i][nSalidaX] = -2636.6060;
		        	NegoInfo[i][nSalidaY] = 1402.9683;
		        	NegoInfo[i][nSalidaZ] = 906.4609;
		        	NegoInfo[i][nInterior] = 3;
				}
            }
		}
		else if(NegoInfo[i][nTipo] == 6) //Tienda de armas
		{
		    switch(inter)
            {
                case 1: //Ammu A
                {
					NegoInfo[i][nSalidaX] = 285.6895;
		        	NegoInfo[i][nSalidaY] = -85.9533;
		        	NegoInfo[i][nSalidaZ] = 1001.5229;
		        	NegoInfo[i][nInterior] = 4;
				}
				case 2: //Ammu B
                {
					NegoInfo[i][nSalidaX] = 296.8696;
		        	NegoInfo[i][nSalidaY] = -111.6349;
		        	NegoInfo[i][nSalidaZ] = 1001.5156;
		        	NegoInfo[i][nInterior] = 6;
				}
            }
		}
		else if(NegoInfo[i][nTipo] == 7) //24/7
		{
		    switch(inter)
		    {
		        case 1:
		        {
		            NegoInfo[i][nSalidaX] = 6.0092;
                	NegoInfo[i][nSalidaY] = -31.6645;
                	NegoInfo[i][nSalidaZ] = 1003.55;
                	NegoInfo[i][nInterior] = 10;
                }
                case 2:
                {
                    NegoInfo[i][nSalidaX] = -25.884498;
                	NegoInfo[i][nSalidaY] = -185.868988;
                	NegoInfo[i][nSalidaZ] = 1003.546875;
                	NegoInfo[i][nInterior] = 17;
                }
                case 3:
                {
                    NegoInfo[i][nSalidaX] = -30.946699;
                	NegoInfo[i][nSalidaY] = -89.609596;
                	NegoInfo[i][nSalidaZ] = 1003.546875;
                	NegoInfo[i][nInterior] = 18;
                }
                case 4:
				{
				    NegoInfo[i][nSalidaX] = 663.3172;
					NegoInfo[i][nSalidaY] = -573.3005;
					NegoInfo[i][nSalidaZ] = 16.3359;
					NegoInfo[i][nInterior] = 0;
				}
				case 5:
				{
				    NegoInfo[i][nSalidaX] = -25.132598;
					NegoInfo[i][nSalidaY] = -140.066986;
					NegoInfo[i][nSalidaZ] = 1003.546875;
					NegoInfo[i][nInterior] = 16;
				}
				case 6:
				{
				    NegoInfo[i][nSalidaX] = -26.691598;
				    NegoInfo[i][nSalidaY] = -56.714897;
				    NegoInfo[i][nSalidaZ] = 1003.546875;
				    NegoInfo[i][nInterior] = 6;
				}
			}
		}
		else if(NegoInfo[i][nTipo] == 8) //Tienda de deportes
		{
            switch(inter)
		    {
		        case 1:
		        {
		            NegoInfo[i][nSalidaX] = -1751.5190;
                	NegoInfo[i][nSalidaY] = 775.8152;
                	NegoInfo[i][nSalidaZ] = 167.6844;
                	NegoInfo[i][nInterior] = 1;
                }
			}
		}
		else if(NegoInfo[i][nTipo] == 9) //Ferretería
		{
            switch(inter)
		    {
		        case 1:
		        {
		            NegoInfo[i][nSalidaX] = -2326.8789;
                	NegoInfo[i][nSalidaY] = 921.6152;
                	NegoInfo[i][nSalidaZ] = 59.7178;
                	NegoInfo[i][nInterior] = 1;
                }
			}
		}
		else if(NegoInfo[i][nTipo] == 10) //Tienda de ropa
		{
	 		switch(inter)
			{
				case 1: // Binco
				{
					NegoInfo[i][nSalidaX] = 207.737991;
		        	NegoInfo[i][nSalidaY] = -109.019996;
		        	NegoInfo[i][nSalidaZ] = 1005.132812;
		        	NegoInfo[i][nInterior] = 15;
				}
				case 2: // Zip
				{
					NegoInfo[i][nSalidaX] = 161.6299;
		        	NegoInfo[i][nSalidaY] = -96.1142;
		        	NegoInfo[i][nSalidaZ] = 1001.8047;
		        	NegoInfo[i][nInterior] = 18;
				}
				case 3: // Didier sachs
				{
					NegoInfo[i][nSalidaX] = 	204.332992;
		        	NegoInfo[i][nSalidaY] = -166.694992;
		        	NegoInfo[i][nSalidaZ] = 1000.523437;
		        	NegoInfo[i][nInterior] = 14;
				}
				case 4: // Victim
				{
					NegoInfo[i][nSalidaX] = 226.293991;
		        	NegoInfo[i][nSalidaY] = -7.431529;
		        	NegoInfo[i][nSalidaZ] = 1002.210937;
		        	NegoInfo[i][nInterior] = 5;
				}
				case 5: // Suburban
				{
					NegoInfo[i][nSalidaX] = 203.777999;
		        	NegoInfo[i][nSalidaY] = -48.492397;
		        	NegoInfo[i][nSalidaZ] = 1001.804687;
		        	NegoInfo[i][nInterior] = 1;
				}
				case 6: // Prolaps
				{
					NegoInfo[i][nSalidaX] = 207.054992;
		        	NegoInfo[i][nSalidaY] = -138.80499;
		        	NegoInfo[i][nSalidaZ] = 1003.507812;
		        	NegoInfo[i][nInterior] = 3;
				}
			}
		}
		else if(NegoInfo[i][nTipo] == 11) //Tienda electrónica
		{
			switch(inter)
		    {
		        case 1:
		        {
		            NegoInfo[i][nSalidaX] = 1004.2385;
                	NegoInfo[i][nSalidaY] = 52.1937;
                	NegoInfo[i][nSalidaZ] = 55.3221;
                	NegoInfo[i][nInterior] = 1;
                }
			}
		}
		else if(NegoInfo[i][nTipo] == 12) //Almacén
		{

		}
		else if(NegoInfo[i][nTipo] == 13) //Oficina
		{

		}
		else if(NegoInfo[i][nTipo] == 14) //Casino
		{

		}
		else if(NegoInfo[i][nTipo] == 15) //Casa de apuestas
		{
		    switch(inter)
            {
                case 1: //Casa apuestas grande
                {
					NegoInfo[i][nSalidaX] = 834.0502;
		        	NegoInfo[i][nSalidaY] = 7.4026;
		        	NegoInfo[i][nSalidaZ] = 1004.1797;
		        	NegoInfo[i][nInterior] = 3;
				}
                case 2: //Casa apuestas pequeña
                {
					NegoInfo[i][nSalidaX] = -2158.5920;
		        	NegoInfo[i][nSalidaY] = 642.8459;
		        	NegoInfo[i][nSalidaZ] = 1052.3750;
		        	NegoInfo[i][nInterior] = 1;
				}
            }
		}
		else if(NegoInfo[i][nTipo] == 16) //Casa de empeño
		{

		}
		else if(NegoInfo[i][nTipo] == 17) //Estanco
		{
            switch(inter)
		    {
		        case 1:
		        {
		            NegoInfo[i][nSalidaX] = 682.7808;
                	NegoInfo[i][nSalidaY] = -665.9598;
                	NegoInfo[i][nSalidaZ] = -46.3000;
                	NegoInfo[i][nInterior] = 1;
                }
			}
		}
		else if(NegoInfo[i][nTipo] == 18) //Licorería
		{
            switch(inter)
		    {
		        case 1:
		        {
		            NegoInfo[i][nSalidaX] = 682.7808;
                	NegoInfo[i][nSalidaY] = -665.9598;
                	NegoInfo[i][nSalidaZ] = -46.3000;
                	NegoInfo[i][nInterior] = 1;
                }
			}
		}
		else if(NegoInfo[i][nTipo] == 19) //Gimnasio
		{
		    switch(inter)
            {
                case 1: //Gym LS
                {
					NegoInfo[i][nSalidaX] = 772.3455;
		        	NegoInfo[i][nSalidaY] = -4.6714;
		        	NegoInfo[i][nSalidaZ] = 1000.7290;
		        	NegoInfo[i][nInterior] = 5;
				}
				case 2: //Gym SF
                {
					NegoInfo[i][nSalidaX] = 774.0042;
		        	NegoInfo[i][nSalidaY] = -49.5956;
		        	NegoInfo[i][nSalidaZ] = 1000.5859;
		        	NegoInfo[i][nInterior] = 6;
				}
				case 3: //Gym LV
                {
					NegoInfo[i][nSalidaX] = 773.9090;
		        	NegoInfo[i][nSalidaY] = -77.9487;
		        	NegoInfo[i][nSalidaZ] = 1000.6615;
		        	NegoInfo[i][nInterior] = 7;
				}
			}
		}
		SaveNegocios(i);
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/gotocasa", true) == 0) /* Comando para ir a la entrada de una casa */
{
    if(PlayerInfo[playerid][pAdmin] < 5){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
	{
		SendClientMessage(playerid, Naranja, "* /GotoCasa [ID]");
		return 1;
	}
	new h = strval(tmp);
	if(!strlen(HouseInfo[h][hBarrio])){SendClientMessage(playerid, Rojo, "* Casa no encontrada."); return 1;}
	SetPlayerPos(playerid, HouseInfo[h][hEntradaX], HouseInfo[h][hEntradaY], HouseInfo[h][hEntradaZ]);
	SetPlayerVirtualWorld(playerid, HouseInfo[h][hVirtualWorld2]);
	SetPlayerInterior(playerid, HouseInfo[h][hInterior2]);
	format(string, sizeof(string), "Teleportado a la entrada de la casa %d.", h);
	SendClientMessage(playerid, AzulClaro, string);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/getcasaid", true) == 0) //Comando para conseguir la id de una casa
{
    if(PlayerInfo[playerid][pAdmin] < 1){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
    new i = GetPlayerFueraPuertaCasa(playerid);
	if(i == 0){SendClientMessage(playerid, Rojo, "* No se ha detectado ningúna casa a tu alrededor."); return 1;}
	format(string, sizeof(string), "Casa ID: %d", i);
	SendClientMessage(playerid, AzulClaro, string);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/editcasa", true) == 0) //Comando para editar características de una casa
{
    if(PlayerInfo[playerid][pAdmin] < 4){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
    tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
	{
		SendClientMessage(playerid, Naranja, "* /EditCasa [Opcion]");
		SendClientMessage(playerid, Naranja, "Opciones: Valor, Interior, VW, Barrio, Comprada, PrecioAlquiler");
		return 1;
	}
	new i = GetPlayerFueraPuertaCasa(playerid);
	if(i == 0){SendClientMessage(playerid, Rojo, "* No se ha detectado ninguna casa a tu alrededor."); return 1;}
	if(strcmp(tmp, "Comprada", true) == 0)
	{
	    tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "/EditCasa Comprada [-1 Hotel | 0 En Venta | 1 Comprada]");
			return 1;
		}
		new var;
		var = strval(tmp);
		HouseInfo[i][hComprada] = var;
		UpdateHouseLabel(i);
		SaveCasa(i);
	    return 1;
	}
	if(strcmp(tmp, "Cerrada", true) == 0)
	{
	    tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "/EditCasa Cerrada [0 Abierta | 1 Cerrada]");
			return 1;
		}
		new var;
		var = strval(tmp);
		HouseInfo[i][hCerrada] = var;
		UpdateHouseLabel(i);
		SaveCasa(i);
	    return 1;
	}
	if(strcmp(tmp, "PrecioAlquiler", true) == 0)
	{
	    tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "/EditCasa PrecioAlquiler [Precio]");
			return 1;
		}
		new var;
		var = strval(tmp);
		HouseInfo[i][hPAlquiler] = var;
		UpdateHouseLabel(i);
		SaveCasa(i);
	    return 1;
	}
	if(strcmp(tmp, "Barrio", true) == 0)
	{
		new length = strlen(cmdtext);
	    while ((idx < length) && (cmdtext[idx] <= ' '))
	    {
	        idx++;
	    }
	    new offset = idx;
	    new result[MAX_PLAYER_NAME];
	    while ((idx < length) && ((idx - offset) < (sizeof(result) - 1)))
	    {
	        result[idx - offset] = cmdtext[idx];
	        idx++;
	    }
	    result[idx - offset] = EOS;
	    if(!strlen(result))
	    {
	        SendClientMessage(playerid, Naranja, "* /EditCasa Barrio [Texto]");
	        return 1;
	    }
	    format(HouseInfo[i][hBarrio], sizeof(result), "%s", result);
	    format(string, sizeof(string), "Barrio casa %d: %s", i, result);
	    SendClientMessage(playerid, Verde, string);
	    UpdateHouseLabel(i);
	    SaveCasa(i);
		return 1;
	}
	if(strcmp(tmp, "Valor", true) == 0)
	{
	    tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "/EditCasa Valor [Precio]");
			return 1;
		}
		new precio;
		precio = strval(tmp);
		HouseInfo[i][hValor] = precio;
		UpdateHouseLabel(i);
		SaveCasa(i);
		return 1;
	}
	if(strcmp(tmp, "VW", true) == 0)
	{
	    tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "/EditCasa VW [Virtual World]");
			return 1;
		}
		new vw;
		vw = strval(tmp);
		HouseInfo[i][hVirtualWorld] = vw;
		SaveCasa(i);
		return 1;
	}
	if(strcmp(tmp, "Interior", true) == 0)
	{
	    tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "/EditCasa Interior [P. 1-6 | M. 7-15 | G. 16-28 | Hab. 29-38 | Caravana. 39]");
			return 1;
		}
		new inter;
		inter = strval(tmp);
		switch(inter)
		{
		    //Interiores pequeños
            case 1: HouseInfo[i][hSalidaX]=-68.8769, HouseInfo[i][hSalidaY]=1351.6051, HouseInfo[i][hSalidaZ]=1080.2109, HouseInfo[i][hInterior]= 6;
			case 2: HouseInfo[i][hSalidaX]=-42.5718, HouseInfo[i][hSalidaY]=1405.4707, HouseInfo[i][hSalidaZ]=1084.4297, HouseInfo[i][hInterior]= 8;
			case 3: HouseInfo[i][hSalidaX]=223.1618, HouseInfo[i][hSalidaY]=1287.1193, HouseInfo[i][hSalidaZ]=1082.1406, HouseInfo[i][hInterior]= 1;
			case 4: HouseInfo[i][hSalidaX]=221.8276, HouseInfo[i][hSalidaY]=1140.5168, HouseInfo[i][hSalidaZ]=1082.6094, HouseInfo[i][hInterior]= 4;
			case 5: HouseInfo[i][hSalidaX]=328.1076, HouseInfo[i][hSalidaY]=1477.8431, HouseInfo[i][hSalidaZ]=1084.4375, HouseInfo[i][hInterior]= 15;
			case 6: HouseInfo[i][hSalidaX]=22.9175, HouseInfo[i][hSalidaY]=1403.5530, HouseInfo[i][hSalidaZ]=1084.4297, HouseInfo[i][hInterior]= 5;
			//Interiores medianos
			case 7: HouseInfo[i][hSalidaX]=2365.0168, HouseInfo[i][hSalidaY]=-1135.3094, HouseInfo[i][hSalidaZ]=1050.8750, HouseInfo[i][hInterior]= 8;
			case 8: HouseInfo[i][hSalidaX]=2270.3882, HouseInfo[i][hSalidaY]=-1210.2815, HouseInfo[i][hSalidaZ]=1047.5625, HouseInfo[i][hInterior]= 10;
			case 9: HouseInfo[i][hSalidaX]=-260.5417, HouseInfo[i][hSalidaY]=1456.2577, HouseInfo[i][hSalidaZ]=1084.3672, HouseInfo[i][hInterior]= 4;
			case 10: HouseInfo[i][hSalidaX]=2333.2151, HouseInfo[i][hSalidaY]=-1077.3209, HouseInfo[i][hSalidaZ]=1049.0234, HouseInfo[i][hInterior]= 6;
			case 11: HouseInfo[i][hSalidaX]=260.8665, HouseInfo[i][hSalidaY]=1284.5745, HouseInfo[i][hSalidaZ]=1080.2578, HouseInfo[i][hInterior]= 4;
			case 12: HouseInfo[i][hSalidaX]=260.5428, HouseInfo[i][hSalidaY]=1237.2369, HouseInfo[i][hSalidaZ]=1084.2578, HouseInfo[i][hInterior]= 9;
			case 13: HouseInfo[i][hSalidaX]=386.9386, HouseInfo[i][hSalidaY]=1471.8782, HouseInfo[i][hSalidaZ]=1080.1875, HouseInfo[i][hInterior]= 15;
			case 14: HouseInfo[i][hSalidaX]=226.6141, HouseInfo[i][hSalidaY]=1240.0334, HouseInfo[i][hSalidaZ]=1082.1406, HouseInfo[i][hInterior]= 2;
			case 15: HouseInfo[i][hSalidaX]=23.9293, HouseInfo[i][hSalidaY]=1340.2648, HouseInfo[i][hSalidaZ]=1084.3750, HouseInfo[i][hInterior]= 10;
			//Interiores grandes
			case 16: HouseInfo[i][hSalidaX]=2324.1143, HouseInfo[i][hSalidaY]=-1149.5406, HouseInfo[i][hSalidaZ]=1050.710, HouseInfo[i][hInterior]= 12;
			case 17: HouseInfo[i][hSalidaX]=235.4422, HouseInfo[i][hSalidaY]=1186.7810, HouseInfo[i][hSalidaZ]=1080.2578, HouseInfo[i][hInterior]= 3;
			case 18: HouseInfo[i][hSalidaX]=490.9660, HouseInfo[i][hSalidaY]=1398.7607, HouseInfo[i][hSalidaZ]=1080.2578, HouseInfo[i][hInterior]= 2;
			case 19: HouseInfo[i][hSalidaX]=234.4409, HouseInfo[i][hSalidaY]=1064.2129, HouseInfo[i][hSalidaZ]=1084.2115, HouseInfo[i][hInterior]= 6;
			case 20: HouseInfo[i][hSalidaX]=226.5535, HouseInfo[i][hSalidaY]=1114.1012, HouseInfo[i][hSalidaZ]=1080.9943, HouseInfo[i][hInterior]= 5;
			case 21: HouseInfo[i][hSalidaX]=140.2069, HouseInfo[i][hSalidaY]=1366.1321, HouseInfo[i][hSalidaZ]=1083.8594, HouseInfo[i][hInterior]= 5;
			case 22: HouseInfo[i][hSalidaX]=225.7627, HouseInfo[i][hSalidaY]=1021.7071, HouseInfo[i][hSalidaZ]=1084.0170, HouseInfo[i][hInterior]= 7;
			case 23: HouseInfo[i][hSalidaX]=2317.4592, HouseInfo[i][hSalidaY]=-1026.3820, HouseInfo[i][hSalidaZ]=1050.2178, HouseInfo[i][hInterior]= 9;
			case 24: HouseInfo[i][hSalidaX]=446.8984, HouseInfo[i][hSalidaY]=1397.0696, HouseInfo[i][hSalidaZ]=1084.3047, HouseInfo[i][hInterior]= 2;
			case 25: HouseInfo[i][hSalidaX]=295.2993, HouseInfo[i][hSalidaY]=1472.5591, HouseInfo[i][hSalidaZ]=1080.2578, HouseInfo[i][hInterior]= 15;
			case 26: HouseInfo[i][hSalidaX]=83.3735, HouseInfo[i][hSalidaY]=1322.2920, HouseInfo[i][hSalidaZ]=1083.8662, HouseInfo[i][hInterior]= 9;
			case 27: HouseInfo[i][hSalidaX]=376.7856, HouseInfo[i][hSalidaY]=1417.3190, HouseInfo[i][hSalidaZ]=1081.328, HouseInfo[i][hInterior]= 15;
			case 28: HouseInfo[i][hSalidaX]=2496.3818,HouseInfo[i][hSalidaY]=-1694.3456,HouseInfo[i][hSalidaZ]=1014.7422,HouseInfo[i][hInterior]= 3;
            //Interiores hoteles
            case 29: HouseInfo[i][hSalidaX]=2218.2944, HouseInfo[i][hSalidaY]=-1076.0085, HouseInfo[i][hSalidaZ]=1050.4844, HouseInfo[i][hInterior]=1;
            case 30: HouseInfo[i][hSalidaX]=2233.5474, HouseInfo[i][hSalidaY]=-1114.8636, HouseInfo[i][hSalidaZ]=1050.8828, HouseInfo[i][hInterior]=5;
            case 31: HouseInfo[i][hSalidaX]=2365.2593, HouseInfo[i][hSalidaY]=-1135.2416, HouseInfo[i][hSalidaZ]=1050.8750, HouseInfo[i][hInterior]=8;
            case 32: HouseInfo[i][hSalidaX]=2237.2478, HouseInfo[i][hSalidaY]=-1081.6407, HouseInfo[i][hSalidaZ]=1049.0234, HouseInfo[i][hInterior]=2;
            case 33: HouseInfo[i][hSalidaX]=2282.8762, HouseInfo[i][hSalidaY]=-1140.2819, HouseInfo[i][hSalidaZ]=1050.8984, HouseInfo[i][hInterior]=11;
            case 34: HouseInfo[i][hSalidaX]=243.7287, HouseInfo[i][hSalidaY]=305.4619, HouseInfo[i][hSalidaZ]=999.1484, HouseInfo[i][hInterior]=1;
            case 35: HouseInfo[i][hSalidaX]=2317.8538, HouseInfo[i][hSalidaY]=-1026.7557, HouseInfo[i][hSalidaZ]=1050.2178, HouseInfo[i][hInterior]=9;
            case 36: HouseInfo[i][hSalidaX]=2308.6167, HouseInfo[i][hSalidaY]=-1212.9283, HouseInfo[i][hSalidaZ]=1049.0234, HouseInfo[i][hInterior]=6;
            case 37: HouseInfo[i][hSalidaX]=2270.2515, HouseInfo[i][hSalidaY]=-1210.3717, HouseInfo[i][hSalidaZ]=1047.5625, HouseInfo[i][hInterior]=10;
            case 38: HouseInfo[i][hSalidaX]=266.5029, HouseInfo[i][hSalidaY]=304.8156, HouseInfo[i][hSalidaZ]=999.1484, HouseInfo[i][hInterior]=2;
			case 39: HouseInfo[i][hSalidaX]=2513.2227, HouseInfo[i][hSalidaY]=-1729.0717, HouseInfo[i][hSalidaZ]=778.6371, HouseInfo[i][hInterior]=1;
		}
		UpdateHouseLabel(i);
		SaveCasa(i);
	    return 1;
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/editfacc", true) == 0) //Comando para editar características de una faccion
{
    if(PlayerInfo[playerid][pAdmin] < 4){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
    tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
	{
		SendClientMessage(playerid, Naranja, "* /EditFacc [FaccionID] [Opcion]");
		SendClientMessage(playerid, Naranja, "Opciones: Nombre, Lider, Rango, PuntosExpansion, Tipo, Color, TiempoArmas, TiempoDrogas");
		return 1;
	}
	new faccid = strval(tmp);
	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
	{
		SendClientMessage(playerid, Naranja, "* /EditFacc [FaccionID] [Opcion]");
  		SendClientMessage(playerid, Naranja, "Opciones: Nombre, Lider, Rango, PuntosExpansion, Tipo, Color, TiempoArmas, TiempoDrogas");
		return 1;
	}
	if(!strlen(FaccInfo[faccid][fNombre])){SendClientMessage(playerid, Rojo, "* Facción no encontrada. Utiliza '/ListaFaccs' para ver las facciones actuales."); return 1;}
	if(strcmp(tmp, "Nombre", true) == 0)
	{
	    tmp = strtok(cmdtext, idx);
        new length = strlen(cmdtext);
	    while ((idx < length) && (cmdtext[idx] <= ' '))
	    {
	        idx++;
	    }
	    new offset = idx;
	    new result[MAX_PLAYER_NAME];
	    while ((idx < length) && ((idx - offset) < (sizeof(result) - 1)))
	    {
	        result[idx - offset] = cmdtext[idx];
	        idx++;
	    }
	    result[idx - offset] = EOS;
	    if(!strlen(result))
	    {
	        SendClientMessage(playerid, Naranja, "* /EditFacc [FaccionID] Nombre [Texto]");
	        return 1;
	    }
	    format(FaccInfo[faccid][fNombre], sizeof(result), "%s", result);
	    format(string, sizeof(string), "Nombre facción %d: %s", faccid, result);
	    SendClientMessage(playerid, Verde, string);
	    SaveFacc(faccid);
	    return 1;
	}
	if(strcmp(tmp, "Lider", true) == 0)
	{
	    tmp = strtok(cmdtext, idx);
        new length = strlen(cmdtext);
	    while ((idx < length) && (cmdtext[idx] <= ' '))
	    {
	        idx++;
	    }
	    new offset = idx;
	    new result[MAX_PLAYER_NAME];
	    while ((idx < length) && ((idx - offset) < (sizeof(result) - 1)))
	    {
	        result[idx - offset] = cmdtext[idx];
	        idx++;
	    }
	    result[idx - offset] = EOS;
	    if(!strlen(result))
	    {
	        SendClientMessage(playerid, Naranja, "* /EditFacc [FaccionID] Lider [Nombre]");
	        return 1;
	    }
	    format(FaccInfo[faccid][fLider], sizeof(result), "%s", result);
	    format(string, sizeof(string), "Líder facción %d: %s", faccid, result);
	    SendClientMessage(playerid, Verde, string);
	    SaveFacc(faccid);
	    return 1;
	}
	if(strcmp(tmp, "Rango", true) == 0)
	{
		tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "* /EditFacc [FaccionID] Rango [1-16] [Texto]");
			return 1;
		}
		new rango = strval(tmp);
		if(rango < 1 || rango > 16){SendClientMessage(playerid, Rojo, "* El rango debe estar entre 1 y 16."); return 1;}
	    tmp = strtok(cmdtext, idx);
        new length = strlen(cmdtext);
	    while ((idx < length) && (cmdtext[idx] <= ' '))
	    {
	        idx++;
	    }
	    new offset = idx;
	    new result[MAX_PLAYER_NAME];
	    while ((idx < length) && ((idx - offset) < (sizeof(result) - 1)))
	    {
	        result[idx - offset] = cmdtext[idx];
	        idx++;
	    }
	    result[idx - offset] = EOS;
	    if(!strlen(result))
	    {
	        SendClientMessage(playerid, Naranja, "* /EditFacc [FaccionID] Rango [1-16] [Texto]");
	        return 1;
	    }
	    switch(rango)
	    {
	        case 1: format(FaccInfo[faccid][fRango1], sizeof(result), "%s", result);
	        case 2: format(FaccInfo[faccid][fRango2], sizeof(result), "%s", result);
	        case 3: format(FaccInfo[faccid][fRango3], sizeof(result), "%s", result);
	        case 4: format(FaccInfo[faccid][fRango4], sizeof(result), "%s", result);
	        case 5: format(FaccInfo[faccid][fRango5], sizeof(result), "%s", result);
	        case 6: format(FaccInfo[faccid][fRango6], sizeof(result), "%s", result);
	        case 7: format(FaccInfo[faccid][fRango7], sizeof(result), "%s", result);
	        case 8: format(FaccInfo[faccid][fRango8], sizeof(result), "%s", result);
	        case 9: format(FaccInfo[faccid][fRango9], sizeof(result), "%s", result);
	        case 10: format(FaccInfo[faccid][fRango10], sizeof(result), "%s", result);
	        case 11: format(FaccInfo[faccid][fRango11], sizeof(result), "%s", result);
	        case 12: format(FaccInfo[faccid][fRango12], sizeof(result), "%s", result);
	        case 13: format(FaccInfo[faccid][fRango13], sizeof(result), "%s", result);
	        case 14: format(FaccInfo[faccid][fRango14], sizeof(result), "%s", result);
	        case 15: format(FaccInfo[faccid][fRango15], sizeof(result), "%s", result);
	        case 16: format(FaccInfo[faccid][fRango16], sizeof(result), "%s", result);
	    }
	    format(string, sizeof(string), "Rango %d facción %d: %s", rango, faccid, result);
	    SendClientMessage(playerid, Verde, string);
	    SaveFacc(faccid);
	    return 1;
	}
	if(strcmp(tmp, "PuntosExpansion", true) == 0)
	{
	    if(FaccInfo[faccid][fTipo] != 3){SendClientMessage(playerid, Rojo, "* Solo puedes dar puntos de expansion a facciones que sean pandillas o bandas (tipo 3)."); return 1;}
	    tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "* /EditFacc [FaccionID] PuntosExpansion [Cantidad]");
			return 1;
		}
		new puntos = strval(tmp);
		FaccInfo[faccid][fPuntosExpansion] += puntos;
	    format(string, sizeof(string), "Has dado %d puntos de expansión a la facción %d (%s)", puntos, faccid, FaccInfo[faccid][fNombre]);
	    SendClientMessage(playerid, Verde, string);
	    SaveFacc(faccid);
	    return 1;
	}
	if(strcmp(tmp, "Tipo", true) == 0)
	{
	    tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "* /EditFacc [FaccionID] Tipo [Tipo]");
			return 1;
		}
		new tipo = strval(tmp);
		FaccInfo[faccid][fTipo] = tipo;
	    format(string, sizeof(string), "Tipo facción %d: %d", faccid, tipo);
	    SendClientMessage(playerid, Verde, string);
	    SaveFacc(faccid);
	    return 1;
	}
	if(strcmp(tmp, "Color", true) == 0)
	{
	    tmp = strtok(cmdtext, idx);
        new length = strlen(cmdtext);
	    while ((idx < length) && (cmdtext[idx] <= ' '))
	    {
	        idx++;
	    }
	    new offset = idx;
	    new result[MAX_PLAYER_NAME];
	    while ((idx < length) && ((idx - offset) < (sizeof(result) - 1)))
	    {
	        result[idx - offset] = cmdtext[idx];
	        idx++;
	    }
	    result[idx - offset] = EOS;
	    if(!strlen(result))
	    {
	        SendClientMessage(playerid, Naranja, "* /EditFacc [FaccionID] Color [0xRRGGBB]");
	        return 1;
	    }
	    format(FaccInfo[faccid][fColor], sizeof(result), "%s", result);
	    format(string, sizeof(string), "Color facción %d: %s", faccid, result);
	    SendClientMessage(playerid, Verde, string);
	    SaveFacc(faccid);
	    return 1;
	}
	if(strcmp(tmp, "TiempoArmas", true) == 0)
	{
	    tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "* /EditFacc [FaccionID] TiempoArmas [Tipo]");
			return 1;
		}
		new var = strval(tmp);
		FaccInfo[faccid][fTiempoArmas] = var;
	    format(string, sizeof(string), "TiempoArmas facción %d: %d", faccid, var);
	    SendClientMessage(playerid, Verde, string);
	    SaveFacc(faccid);
	    return 1;
	}
	if(strcmp(tmp, "TiempoDrogas", true) == 0)
	{
	    tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "* /EditFacc [FaccionID] TiempoDrogas [Tipo]");
			return 1;
		}
		new var = strval(tmp);
		FaccInfo[faccid][fTiempoDrogas] = var;
	    format(string, sizeof(string), "TiempoDrogas facción %d: %d", faccid, var);
	    SendClientMessage(playerid, Verde, string);
	    SaveFacc(faccid);
	    return 1;
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/listafaccs", true) == 0) //Ver todas las facciones de la DB
{
    if(PlayerInfo[playerid][pAdmin] < 4){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
    SendClientMessage(playerid, Amarillo, "Facciones en la base de datos:");
    for(new x=1; x<=TotalFaccs; x++)
    {
        format(string, sizeof(string), "ID %d: %s Líder: %s", x, FaccInfo[x][fNombre], FaccInfo[x][fLider]);
        SendClientMessage(playerid, Amarillo, string);
    }
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/editturf", true) == 0) //Comando para editar características de un turf
{
    if(PlayerInfo[playerid][pAdmin] < 4){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
    new turfid = GetPlayerTurf(playerid);
	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
	{
		SendClientMessage(playerid, Naranja, "* /EditFacc [FaccionID] [Opcion]");
  		SendClientMessage(playerid, Naranja, "Opciones: Faccion, Nivel, Atacante, DrogaVendida");
  		format(string, sizeof(string), "Te encuentras en el turf #%d.", turfid);
  		SendClientMessage(playerid, Amarillo, string);
		return 1;
	}
	if(turfid == 0){SendClientMessage(playerid, Rojo, "* No estás en un turf."); return 1;}
	if(strcmp(tmp, "faccion", true) == 0)
	{
	    tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "* /EditTurf Faccion [FaccionID]");
			return 1;
		}
		new faccion = strval(tmp);
		if(!strlen(FaccInfo[faccion][fNombre])){SendClientMessage(playerid, Rojo, "* Facción inválida."); return 1;}
		TurfInfo[turfid][tFaccion] = faccion;
	    format(string, sizeof(string), "Facción del turf %d cambiada al %d.", turfid, faccion);
	    SendClientMessage(playerid, Verde, string);
	    ActualizarTurf(turfid);
	    SaveTurf(turfid);
	    return 1;
	}
	if(strcmp(tmp, "nivel", true) == 0)
	{
	    tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "* /EditTurf Nivel [#Influencia]");
			return 1;
		}
		new nivel = strval(tmp);
		if(nivel < 1 || nivel > 4){SendClientMessage(playerid, Rojo, "* El nivel de influencia debe estar entre 1 y 4."); return 1;}
		TurfInfo[turfid][tNivel] = nivel;
	    format(string, sizeof(string), "Influencia del turf %d cambiada a %d.", turfid, nivel);
	    SendClientMessage(playerid, Verde, string);
	    ActualizarTurf(turfid);
	    SaveTurf(turfid);
	    return 1;
	}
	if(strcmp(tmp, "atacante", true) == 0)
	{
	    tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "* /EditTurf Atacante [FaccionID]");
			return 1;
		}
		new atacante = strval(tmp);
		if(!strlen(FaccInfo[atacante][fNombre])){SendClientMessage(playerid, Rojo, "* Facción inválida."); return 1;}
		TurfInfo[turfid][tAtacante] = atacante;
	    format(string, sizeof(string), "Atacante del turf %d cambiado al %d.", turfid, atacante);
	    SendClientMessage(playerid, Verde, string);
	    ActualizarTurf(turfid);
	    SaveTurf(turfid);
	    return 1;
	}
	if(strcmp(tmp, "drogavendida", true) == 0)
	{
	    tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "* /EditTurf DrogaVendida [#Droga] [Cantidad]");
			return 1;
		}
		new droga = strval(tmp);
		if(droga < 1 || droga > 5){SendClientMessage(playerid, Rojo, "* La droga debe estar entre 1 y 5."); return 1;}
		tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "* /EditTurf DrogaVendida [#Droga] [Cantidad]");
			return 1;
		}
		new cantidad = strval(tmp);
		TurfInfo[turfid][tDrogaVendida][droga-1] = cantidad;
		format(string, sizeof(string), "Droga vendida #%d del turf %d cambiada a %d.", droga, turfid, cantidad);
	    SendClientMessage(playerid, Verde, string);
	    SaveTurf(turfid);
	    return 1;
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/editveh", true) == 0) //Comando para editar características de un vehículo
{
    if(PlayerInfo[playerid][pAdmin] < 4){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
    tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
	{
		SendClientMessage(playerid, Naranja, "* /EditVeh [VehID] [Opcion]");
		SendClientMessage(playerid, Naranja, "Opciones: Llave, Comprado, Dueño, NombreModelo, Valor, Cerrado");
		SendClientMessage(playerid, Naranja, "Opciones: EnDeposito, MaxMaletero, Gas, MaxMaletero, MalAbierto, Pintura");
		return 1;
	}
	new coche = strval(tmp);
	if(!IsValidVehicle(coche)){SendClientMessage(playerid, Rojo, "* ID inválida, vehículo no encontrado."); return 1;}
    tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
	{
		SendClientMessage(playerid, Naranja, "Opciones: Llave, Comprado, Dueño, NombreModelo, Valor, Cerrado");
		SendClientMessage(playerid, Naranja, "Opciones: EnDeposito, MaxMaletero, Gas, MaxMaletero, MalAbierto, Pintura");
		return 1;
	}
	if(strcmp(tmp, "Llave", true) == 0)
	{
	    tmp = strtok(cmdtext, idx);
		if(!strlen(tmp))
		{
			SendClientMessage(playerid, Naranja, "* /EditVeh Llave [Llave]");
			return 1;
		}
		new llave = strval(tmp);
		if(llave < 1000){SendClientMessage(playerid, Rojo, "* La llave no puede estar por debajo de 1000."); return 1;}
		CarInfo[coche][cLlave] = llave;
		format(string,sizeof(string),"'%s' ha seteado la Llave del vehículo %d a %d.", GetPlayerNameRP(playerid), coche, llave);
		SendAdminMessage(Aguamarina,string);
		printf(string);
		SaveCar(coche);
		return 1;
	}
	if(strcmp(tmp, "Comprado", true) == 0)
	{
	    tmp = strtok(cmdtext, idx);
		if(!strlen(tmp))
		{
			SendClientMessage(playerid, Naranja, "* /EditVeh Comprado [Llave]");
			return 1;
		}
		new comprado = strval(tmp);
		if(comprado != 0 && comprado != 1){SendClientMessage(playerid, Rojo, "* El valor debe estar entre 0 y 1."); return 1;}
		CarInfo[coche][cComprado] = comprado;
		format(string,sizeof(string),"'%s' ha seteado el valor Comprado del vehículo %d a %d.", GetPlayerNameRP(playerid), coche, comprado);
		SendAdminMessage(Aguamarina,string);
		printf(string);
		SaveCar(coche);
		return 1;
	}
	if(strcmp(tmp, "Dueño", true) == 0)
	{
    	tmp = strtok(cmdtext, idx);
        new length = strlen(cmdtext);
	    while ((idx < length) && (cmdtext[idx] <= ' '))
	    {
	        idx++;
	    }
	    new offset = idx;
	    new result[MAX_PLAYER_NAME];
	    while ((idx < length) && ((idx - offset) < (sizeof(result) - 1)))
	    {
	        result[idx - offset] = cmdtext[idx];
	        idx++;
	    }
	    result[idx - offset] = EOS;
	    if(!strlen(result))
	    {
	        SendClientMessage(playerid, Naranja, "* /EditVeh Dueño [Texto]");
	        return 1;
	    }
	    format(CarInfo[coche][cDueno], sizeof(result), "%s", result);
	    format(string,sizeof(string),"'%s' ha seteado el valor Dueño del vehículo %d a %s.", GetPlayerNameRP(playerid), coche, result);
		SendAdminMessage(Aguamarina,string);
		printf(string);
		SaveCar(coche);
		return 1;
	}
	if(strcmp(tmp, "NombreModelo", true) == 0)
	{
    	tmp = strtok(cmdtext, idx);
        new length = strlen(cmdtext);
	    while ((idx < length) && (cmdtext[idx] <= ' '))
	    {
	        idx++;
	    }
	    new offset = idx;
	    new result[MAX_PLAYER_NAME];
	    while ((idx < length) && ((idx - offset) < (sizeof(result) - 1)))
	    {
	        result[idx - offset] = cmdtext[idx];
	        idx++;
	    }
	    result[idx - offset] = EOS;
	    if(!strlen(result))
	    {
	        SendClientMessage(playerid, Naranja, "* /EditVeh NombreModelo [Texto]");
	        return 1;
	    }
	    format(CarInfo[coche][cNombreModelo], sizeof(result), "%s", result);
	    format(string,sizeof(string),"'%s' ha seteado el valor NombreModelo del vehículo %d a %s.", GetPlayerNameRP(playerid), coche, result);
		SendAdminMessage(Aguamarina,string);
		printf(string);
		SaveCar(coche);
		return 1;
	}
	if(strcmp(tmp, "Valor", true) == 0)
	{
        tmp = strtok(cmdtext, idx);
		if(!strlen(tmp))
		{
			SendClientMessage(playerid, Naranja, "* /EditVeh Valor [Cantidad]");
			return 1;
		}
		new valor = strval(tmp);
	    if(valor < 0){SendClientMessage(playerid, Rojo, "* La cantidad no puede ser menor a 0."); return 1;}
		CarInfo[coche][cValor] = valor;
		format(string,sizeof(string),"'%s' ha seteado el Valor del vehículo %d a %d.", GetPlayerNameRP(playerid), coche, valor);
		SendAdminMessage(Aguamarina,string);
		printf(string);
		SaveCar(coche);
		return 1;
	}
	if(strcmp(tmp, "Cerrado", true) == 0)
	{
        tmp = strtok(cmdtext, idx);
		if(!strlen(tmp))
		{
			SendClientMessage(playerid, Naranja, "* /EditVeh Cerrado [Cantidad]");
			return 1;
		}
		new cerrado = strval(tmp);
	    if(cerrado != 0 && cerrado != 1){SendClientMessage(playerid, Rojo, "* El valor no puede ser diferente de 0 y 1."); return 1;}
		CarInfo[coche][cCerrado] = cerrado;
		new engine,lights,alarm,doors,bonnet,boot,objective;
	    GetVehicleParamsEx(coche,engine,lights,alarm,doors,bonnet,boot,objective);
		SetVehicleParamsEx(coche,engine,lights,alarm,cerrado,bonnet,boot,objective);
		format(string,sizeof(string),"'%s' ha seteado el Cerrado del vehículo %d a %d.", GetPlayerNameRP(playerid), coche, cerrado);
		SendAdminMessage(Aguamarina,string);
		printf(string);
		SaveCar(coche);
		return 1;
	}
	if(strcmp(tmp, "EnDeposito", true) == 0)
	{
        tmp = strtok(cmdtext, idx);
		if(!strlen(tmp))
		{
			SendClientMessage(playerid, Naranja, "* /EditVeh EnDeposito [Cantidad]");
			return 1;
		}
		new endeposito = strval(tmp);
		CarInfo[coche][cEnDeposito] = endeposito;
		format(string,sizeof(string),"'%s' ha seteado el EnDeposito del vehículo %d a %d.", GetPlayerNameRP(playerid), coche, endeposito);
		SendAdminMessage(Aguamarina,string);
		printf(string);
		SaveCar(coche);
		return 1;
	}
	if(strcmp(tmp, "MaxMaletero", true) == 0)
	{
        tmp = strtok(cmdtext, idx);
		if(!strlen(tmp))
		{
			SendClientMessage(playerid, Naranja, "* /EditVeh MaxMaletero [Cantidad]");
			return 1;
		}
		new maxmaletero = strval(tmp);
		CarInfo[coche][cMaxMaletero] = maxmaletero;
		format(string,sizeof(string),"'%s' ha seteado el MaxMaletero del vehículo %d a %d.", GetPlayerNameRP(playerid), coche, maxmaletero);
		SendAdminMessage(Aguamarina,string);
		printf(string);
		SaveCar(coche);
		return 1;
	}
	if(strcmp(tmp, "MalAbierto", true) == 0)
	{
        tmp = strtok(cmdtext, idx);
		if(!strlen(tmp))
		{
			SendClientMessage(playerid, Naranja, "* /EditVeh MalAbierto [Valor]");
			return 1;
		}
		new valor = strval(tmp);
		if(valor != 0 && valor != 1){SendClientMessage(playerid, Rojo, "* El valor no puede ser diferente de 0 y 1."); return 1;}
		new engine,lights,alarm,doors,bonnet,boot,objective;
	    GetVehicleParamsEx(coche,engine,lights,alarm,doors,bonnet,boot,objective);
	    SetVehicleParamsEx(coche,engine,lights,alarm,doors,bonnet,valor,objective);
        format(string,sizeof(string),"'%s' ha seteado el MalAbierto del vehículo %d a %d.", GetPlayerNameRP(playerid), coche, valor);
		SendAdminMessage(Aguamarina,string);
 	    VehMaletero[coche] = valor;
		printf(string);
		SaveCar(coche);
		return 1;
	}
	if(strcmp(tmp, "Gas", true) == 0)
	{
        tmp = strtok(cmdtext, idx);
		if(!strlen(tmp))
		{
			SendClientMessage(playerid, Naranja, "* /EditVeh Gas [Cantidad]");
			return 1;
		}
		new gas = strval(tmp);
	    if(gas < 0 || gas > 100){SendClientMessage(playerid, Rojo, "* La cantidad de combustible debe estar entre 0 y 100."); return 1;}
		CarInfo[coche][cGas] = gas;
		format(string,sizeof(string),"'%s' ha seteado el combustible del vehículo %d a %dL.", GetPlayerNameRP(playerid), coche, gas);
		SendAdminMessage(Aguamarina,string);
		printf(string);
		SaveCar(coche);
		return 1;
	}
	if(strcmp(tmp, "MaxMaletero", true) == 0)
	{
        tmp = strtok(cmdtext, idx);
		if(!strlen(tmp))
		{
			SendClientMessage(playerid, Naranja, "* /EditVeh MaxMaletero [Cantidad]");
			return 1;
		}
		new maxm = strval(tmp);
		if(maxm < 0 || maxm > 7){SendClientMessage(playerid, Rojo, "* El máximo de slots del maletero debe estar entre 0 y 7."); return 1;}
		CarInfo[coche][cMaxMaletero] = maxm;
		format(string,sizeof(string),"'%s' ha seteado el máximo de slots del maletero del vehículo %d a %d.", GetPlayerNameRP(playerid), coche, maxm);
		SendAdminMessage(Aguamarina,string);
		printf(string);
		SaveCar(coche);
		return 1;
	}
	if(strcmp(tmp, "Pintura", true) == 0)
	{
	    tmp = strtok(cmdtext, idx);
		if(!strlen(tmp))
		{
			SendClientMessage(playerid, Naranja, "* /EditVeh Pintura [Color1] [Color2]");
			return 1;
		}
		new color1 = strval(tmp);
		tmp = strtok(cmdtext, idx);
		if(!strlen(tmp))
		{
			SendClientMessage(playerid, Naranja, "* /EditVeh Pintura [Color1] [Color2]");
			return 1;
		}
		new color2 = strval(tmp);
		ChangeVehicleColor(coche, color1, color2);
		CarInfo[coche][cColor1] = color1;
		CarInfo[coche][cColor2] = color2;
		format(string,sizeof(string),"'%s' ha cambiado los colores del vehículo %d a (%d %d).", GetPlayerNameRP(playerid), coche, color1, color2);
		SendAdminMessage(Aguamarina,string);
		printf(string);
		SaveCar(coche);
		return 1;
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/Haceradmin", true) == 0) //Hacer admin
{
  	new nick[MAX_PLAYER_NAME];
	GetPlayerName(playerid, nick, sizeof(nick));
    if(!strcmp(nick, "Luis_Maro", true) || !strcmp(nick, "Adrian_Winchester", true) || !strcmp(nick, "Dimitri_Molotov", true))
    tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /HacerAdmin [ID] [Nivel 1-6]");
        return 1;
    }
    new level;
    playerid2 = ReturnUser(tmp);
    tmp = strtok(cmdtext, idx);
    level = strval(tmp);
    if(PlayerInfo[playerid][pAdmin] >= 5)
    {
        if(IsPlayerConnected(playerid2))
        {
            if(playerid2 != INVALID_PLAYER_ID)
            {
	            format(Nombre2, sizeof(Nombre2),"%s", GetPlayerNameRP(playerid2));
	            format(Nombre, sizeof(Nombre),"%s", GetPlayerNameRP(playerid));
	            PlayerInfo[playerid2][pAdmin] = level;
	            printf("'%s´ promovió a %s´ para el nivel %d de admin.", Nombre, Nombre2, level);
	            format(string, sizeof(string), "Fuiste promovido al nivel de admin %d por '%s'.", level, Nombre);
	            SendClientMessage(playerid2, Verde, string);
	            format(string, sizeof(string), "Promoviste a '%s' para el nivel %d de admin.", Nombre2,level);
	            SendClientMessage(playerid, Blanco, string);
            }
        }
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------
if (strcmp(cmdtext, "/neon", true)==0)
	{
		if(PlayerInfo[playerid][pAdmin] >= 2){
		 	new cartype = GetPlayerVehicleID(playerid);
			new State=GetPlayerState(playerid);
		    ShowPlayerDialog(playerid, 8899, DIALOG_STYLE_LIST, "Pick Neon Color", "Blue\nRed\nGreen\nWhite\nPink\nYellow\nPolice Strobe\nInterior Lights\nBack Neon\nFront neon\nUndercover Roof Light\nRemove All Neon", "Select", "Cancel");
		    PlayerPlaySound(playerid, 1133, 0.0, 0.0, 10.0);
			return 1;
		}
	return 0;
	}
//---------------------------------------------------------------------------------------------------------------


if(strcmp(cmd, "/adminhelp", true) == 0 || strcmp(cmd, "/ah", true) == 0) //Ayuda admin
{
    if(PlayerInfo[playerid][pAdmin] < 1) { SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1; }
    new pagina;
    if(PlayerInfo[playerid][pAdmin] >= 5) pagina = 5;
    else pagina = PlayerInfo[playerid][pAdmin];
    switch(pagina)
    {
	    case 1:
	    {
            SendClientMessage(playerid, Aguamarina, "Administración: Ayudante"); //Solo /duda
            SendClientMessage(playerid,Blanco, "/slap - /san - /desbug - /kick - /irpos - /ir - /traer - /setint - /setvw - /(con)gelar - /(descon)gelar");
			SendClientMessage(playerid, Blanco, "/(adm)inistracion - /(a)dmin - /darropa - /gotoconce /recon - /reconoff - /check - /checkinv");
			SendClientMessage(playerid,Blanco, "/gotocasa - /getcasaid - /gotonego - /getnegoid - /gotocar - /gotocarllave");
	    }
	    case 2:
	    {
		    SendClientMessage(playerid, Aguamarina, "Administración: Moderador"); //curar y tal
            SendClientMessage(playerid,Blanco, "/slap - /san - /desbug - /kick - /irpos - /ir - /traer - /setint - /setvw - /(con)gelar");
			SendClientMessage(playerid,Blanco, "/(adm)inistracion - /(a)dmin - /recon - /reconoff - /check - /(descon)gelar");
			SendClientMessage(playerid,Blanco, "/checkinv - /darropa  - /gotoconce - /gotocasa - /getcasaid - /gotonego - /getnegoid");
			SendClientMessage(playerid, Blanco, "/gotocar - /gotocarllave - /ban - /sethp - /setarmour - /limpiarchat - /fixveh");
			SendClientMessage(playerid, Blanco, "/repararveh - /repararmotor - /respawncoche (o /rc) - /getcar - /getcarllave");
			SendClientMessage(playerid,Blanco, "/amotor - /acurar");
		}
		case 3:
		{
		    SendClientMessage(playerid, Aguamarina, "Administración: Moderador Global"); //ban
		    SendClientMessage(playerid, Blanco, "/slap - /san - /desbug - /kick - /irpos - /ir - /traer - /setint - /setvw - /(con)gelar");
			SendClientMessage(playerid, Blanco, "/(adm)inistracion - /(a)dmin - /recon - /reconoff - /check - /(descon)gelar");
			SendClientMessage(playerid, Blanco, "/checkinv - /darropa  - /gotoconce - /gotocasa - /getcasaid - /gotonego - /getnegoid");
			SendClientMessage(playerid, Blanco, "/gotocar - /gotocarllave - /getcar - /getcarllave - /ban - /sethp - /setarmour - /limpiarchat - /fixveh");
			SendClientMessage(playerid, Blanco, "/repararveh - /repararmotor - /desban - /desbanip - /respawncoche (o /rc)");
			SendClientMessage(playerid, Blanco, "/getcar - /getcarllave - /amotor - /acurar - /hacerlider - /hacermiembro");
			SendClientMessage(playerid, Blanco, "/darrango - /forzarfaccion - /darpuntorol - /quitarpuntorol - /jetpack - /onDuty");
		}
		case 4:
		{
		    SendClientMessage(playerid, Aguamarina, "Administración: Administrador");
		    SendClientMessage(playerid, Blanco, "/slap - /san - /desbug - /kick - /irpos - /ir - /traer - /setint - /setvw - /(con)gelar");
			SendClientMessage(playerid, Blanco, "/(descon)gelar - /(adm)inistracion - /(a)dmin - /recon - /reconoff - /check");
			SendClientMessage(playerid, Blanco, "/checkinv - /darropa  - /gotoconce - /gotocasa - /getcasaid - /gotonego - /getnegoid");
			SendClientMessage(playerid, Blanco, "/gotocar - /gotocarllave - /getcar - /getcarllave - /ban - /sethp - /setarmour - /limpiarchat - /fixveh");
			SendClientMessage(playerid, Blanco, "/repararveh - /repararmotor - /desban - /desbanip - /respawncoche (o /rc)");
			SendClientMessage(playerid, Blanco, "/getcar - /getcarllave - /amotor - /acurar - /hacerlider - /hacermiembro");
			SendClientMessage(playerid, Blanco, "/darrango - /forzarfaccion - /darpuntorol - /quitarpuntorol - /payday");
			SendClientMessage(playerid, Blanco, "/ahora - /editcasa - /editnego - /cambiarnombre - /editveh - /editfacc");
			SendClientMessage(playerid, Blanco, "/listafaccs - /editturf - /ahora - /tiempo - /darmision - /jetpack - /onDuty");
		}
		case 5: //forzarfaccion
		{
		    SendClientMessage(playerid, Aguamarina, "Administración: Dueño");
		    SendClientMessage(playerid, Blanco, "/slap - /san - /desbug - /kick - /irpos - /ir - /traer - /setint - /setvw - /(con)gelar");
			SendClientMessage(playerid, Blanco, "/(descon)gelar - /(adm)inistracion - /(a)dmin - /recon - /reconoff - /check");
			SendClientMessage(playerid, Blanco, "/checkinv - /darropa  - /gotoconce - /gotocasa - /getcasaid - /gotonego - /getnegoid");
			SendClientMessage(playerid, Blanco, "/gotocar - /gotocarllave - /getcar - /getcarllave - /ban - /sethp - /setarmour - /limpiarchat - /fixveh");
			SendClientMessage(playerid, Blanco, "/repararveh - /repararmotor - /desban - /desbanip - /respawncoche (o /rc)");
			SendClientMessage(playerid, Blanco, "/getcar - /getcarllave - /amotor - /acurar - /hacerlider - /hacermiembro");
			SendClientMessage(playerid, Blanco, "/darrango - /forzarfaccion - /darpuntorol - /quitarpuntorol - /payday");
			SendClientMessage(playerid, Blanco, "/ahora - /editcasa - /editnego - /cambiarnombre - /editveh - /editfacc");
			SendClientMessage(playerid, Blanco, "/listafaccs - /editturf - /ahora - /tiempo - /darmision");
			SendClientMessage(playerid, Blanco, "/restart - /haceradmin - /jetpack - /onDuty");
		}
		case 6:
		{
		    SendClientMessage(playerid, Aguamarina, "Administración: Mapper");
		    SendClientMessage(playerid, Blanco, "/slap - /san - /desbug - /kick - /irpos - /ir - /traer - /setint - /setvw - /(con)gelar");
			SendClientMessage(playerid, Blanco, "/(descon)gelar - /(adm)inistracion - /(a)dmin - /recon - /reconoff - /check");
			SendClientMessage(playerid, Blanco, "/checkinv - /darropa  - /gotoconce - /gotocasa - /getcasaid - /gotonego - /getnegoid");
			SendClientMessage(playerid, Blanco, "/gotocar - /gotocarllave - /getcar - /getcarllave -  /ban - /sethp - /setarmour - /limpiarchat - /fixveh");
			SendClientMessage(playerid, Blanco, "/repararveh - /repararmotor - /desban - /desbanip - /respawncoche (o /rc)");
			SendClientMessage(playerid, Blanco, "/getcar - /getcarllave - /amotor - /acurar - /hacerlider - /hacermiembro");
			SendClientMessage(playerid, Blanco, "/darrango - /forzarfaccion - /darpuntorol - /quitarpuntorol - /payday");
			SendClientMessage(playerid, Blanco, "/ahora - /editcasa - /editnego - /cambiarnombre - /editveh - /editfacc");
			SendClientMessage(playerid, Blanco, "/listafaccs - /editturf - /ahora - /tiempo - /darmision");
			SendClientMessage(playerid, Blanco, "/restart - /haceradmin");
		}
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/ahora", true) == 0) //Cambiar la hora del servidor
{
	if(PlayerInfo[playerid][pAdmin] < 4) { SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1; }
	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
	{
		SendClientMessage(playerid, Naranja, "* /Ahora [Horas]");
		return 1;
	}
	ahora = strval(tmp);
	new hora, minuto, segundo;
	gettime(hora, minuto, segundo);
	SetPlayerTime(playerid, hora+ahora, minuto);
	SetWorldTime(hora+ahora);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/tiempo", true) == 0) //Cambiar el tiempo del servidor
{
	if(PlayerInfo[playerid][pAdmin] < 4) { SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1; }
	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
	{
		SendClientMessage(playerid, Naranja, "* /Tiempo [TiempoID]");
		return 1;
	}
	new tiempo = strval(tmp);
	SetPlayerWeather(playerid, tiempo);
	SetWeather(tiempo);
	DefaultWeather = tiempo;
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/gotoconce", true) == 0) //Ir a un concesionario
{
	if(PlayerInfo[playerid][pAdmin] < 1) { SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1; }
	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
	{
		SendClientMessage(playerid, Naranja, "* /Gotoconce [IDConcesionario]");
		return 1;
	}
	new conce = strval(tmp);
	SetPlayerPos(playerid, Concesionarios[conce][cX], Concesionarios[conce][cY], Concesionarios[conce][cZ]);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/amotor", true) == 0) //Encender un vehiculo por admin
{
	if(PlayerInfo[playerid][pAdmin] < 2) { SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1; }
	if(GetPlayerState(playerid) != PLAYER_STATE_DRIVER){SendClientMessage(playerid, Rojo, "* No estás en un vehículo como conductor."); return 1;}
	new car = GetPlayerVehicleID(playerid);
	new engine,lights,alarm,doors,bonnet,boot,objective;
    GetVehicleParamsEx(car,engine,lights,alarm,doors,bonnet,boot,objective);
    SetVehicleParamsEx(car,1,lights,alarm,doors,bonnet,boot,objective);
    SendClientMessage(playerid, AzulClaro, "Motor encendido.");
    format(string, sizeof(string), "'%s' ha encendido el motor del vehículo %d.", GetPlayerNameRP(playerid), car);
    SendAdminMessage(Aguamarina, string);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/restart", true) == 0) //Hace un restart del servidor
{
    if(PlayerInfo[playerid][pAdmin] < 5){return 1;}
	SendClientMessageToAll(Amarillo, "Se va a realizar un restart del servidor.");
	SendClientMessageToAll(Amarillo, "Has sido desconectado para guardar tus stats. Vuelve a entrar en unos minutos por favor.");
	for(new i = 0; i < MAX_PLAYERS; i++) //Guarda stats al reiniciar o cerrar el GM
	{
		KickL(i);
	}
	SetTimer("RestartServidor",2000,0); //Reiniciar en 2 segundos
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/crearobjeto", true) == 0) //Crea un objeto (sistema de inventario)
{
    new nick[MAX_PLAYER_NAME];
	GetPlayerName(playerid, nick, sizeof(nick));
    if(!strcmp(nick, "Luis_Maro", true) || !strcmp(nick, "Adrian_Winchester", true) || !strcmp(nick, "Dimitri_Molotov", true))
    tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
	    SendClientMessage(playerid, Naranja, "* /Crearobjeto [ObjetoID] [Cantidad]");
		return 1;
    }
    new item = strval(tmp);
    if(item <= 0){SendClientMessage(playerid, Rojo, "* La ID del objeto no puede ser nula o negativa."); return 1;}
    if(!strlen(ObjetoInfo[item][NombreObjeto])){SendClientMessage(playerid, Rojo, "* No existe un objeto con esa ID."); return 1;}
    tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
	    SendClientMessage(playerid, Naranja, "* /Crearobjeto [ObjetoID] [Cantidad]");
		return 1;
    }
    new cant = strval(tmp);
    if(cant <= 0){SendClientMessage(playerid, Rojo, "* La cantidad no puede ser nula o negativa."); return 1;}
    if(PlayerInfo[playerid][pManoDer] > 0 && PlayerInfo[playerid][pManoIzq] > 0){SendClientMessage(playerid, Rojo, "* Debes tener una mano vacía."); return 1;}
    if(PlayerInfo[playerid][pManoDer] == 0)
    {
	    PlayerInfo[playerid][pManoDer] = item;
	    PlayerInfo[playerid][pManoDerCant] = cant;
	    PonerObjeto(playerid, 1, item);
	    if(ObjetoInfo[item][IDArma] > 0){GivePlayerWeapon(playerid, ObjetoInfo[item][IDArma], cant);}
    }
    else if(PlayerInfo[playerid][pManoDer] != 0)
    {
        PlayerInfo[playerid][pManoIzq] = item;
	    PlayerInfo[playerid][pManoIzqCant] = cant;
	    PonerObjeto(playerid, 2, item);
    }
    format(string, sizeof(string), "Objeto %s (%d) Cantidad: %d creado.", ObjetoInfo[item][NombreObjeto], item, cant);
    SendClientMessage(playerid, AzulClaro, string);
    format(string, sizeof(string), "'%s' ha creado un/a %s (%d) Cantidad: %d", GetPlayerNameRP(playerid), ObjetoInfo[item][NombreObjeto], item, cant);
    printf(string);
    SendAdminMessage(Aguamarina, string);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/limpiarchat", true) == 0) //Limpia el chat general
{
    if(PlayerInfo[playerid][pAdmin] < 2){ SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1; }
	for(new i; i < MAX_PLAYERS; i++)
	{
		LimpiarChat(i, 100);
		SendClientMessage(i, AzulClaro, "Un administrador ha limpiado el chat.");
	}
	printf("%s ha limpiado el chat general de todos los jugadores.", GetPlayerNameRP(playerid));
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/check", true) == 0) //Inspecciona los stats de un jugador
{
    if(PlayerInfo[playerid][pAdmin] < 1){ SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1; }
    tmp = strtok(cmdtext, idx);
   	if(!strlen(tmp))
    {
	    SendClientMessage(playerid, Naranja, "* /Check [ID]");
	    return 1;
	}
    playerid2 = ReturnUser(tmp);
    if(IsPlayerConnected(playerid2) && playerid2 != INVALID_PLAYER_ID)
    {
		ShowStats(AzulClaro, playerid, playerid2);
	}
	else
	{
        SendClientMessage(playerid,Rojo,"* ID inválida.");
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/checkinv", true) == 0) //Inspecciona el inventario de un jugador
{
    if(PlayerInfo[playerid][pAdmin] < 1){ SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1; }
    tmp = strtok(cmdtext, idx);
   	if(!strlen(tmp))
    {
	    SendClientMessage(playerid, Naranja, "* /CheckInv [ID]");
	    return 1;
	}
    playerid2 = ReturnUser(tmp);
    if(IsPlayerConnected(playerid2) && playerid2 != INVALID_PLAYER_ID)
    {
        format(string, sizeof(string), "Objetos de %s:", GetPlayerNameRP(playerid2));
        SendClientMessage(playerid, Amarillo, string);
        format(string, sizeof(string), "Mano derecha: %s (Cant: %d)", ObjetoInfo[PlayerInfo[playerid2][pManoDer]][NombreObjeto], PlayerInfo[playerid2][pManoDerCant]);
		SendClientMessage(playerid, Blanco, string);
		format(string, sizeof(string), "Mano izquierda: %s (Cant: %d)", ObjetoInfo[PlayerInfo[playerid2][pManoIzq]][NombreObjeto], PlayerInfo[playerid2][pManoIzqCant]);
		SendClientMessage(playerid, Blanco, string);
		if(PlayerInfo[playerid2][pServicioPD] == 0)
		{
			for(new x=0; x<8; x++)
			{
			    format(string, sizeof(string), "Bol #%d: %s (Cant: %d)", x+1, ObjetoInfo[PlayerInfo[playerid2][pBol][x]][NombreObjeto], PlayerInfo[playerid2][pBolCant][x]);
			    SendClientMessage(playerid, Blanco, string);
			}
		}
		else
		{
		    for(new x=0; x<8; x++)
			{
			    format(string, sizeof(string), "Cint #%d: %s (Cant: %d)", x+1, ObjetoInfo[PlayerInfo[playerid2][pCint][x]][NombreObjeto], PlayerInfo[playerid2][pCintCant][x]);
			    SendClientMessage(playerid, Blanco, string);
			}
		}
	}
	else
	{
        SendClientMessage(playerid,Rojo,"* ID inválida.");
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/slap", true) == 0) //Dar hostias a los jugadores
{
    if(PlayerInfo[playerid][pAdmin] < 1){ SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1; }
    tmp = strtok(cmdtext, idx);
   	if(!strlen(tmp))
    {
	    SendClientMessage(playerid, Naranja, "* /Slap [ID] [Razón]");
	    return 1;
	}
    playerid2 = ReturnUser(tmp);
    if(IsPlayerConnected(playerid2) && playerid2 != INVALID_PLAYER_ID)
    {
        new length = strlen(cmdtext);
        while ((idx < length) && (cmdtext[idx] <= ' '))
	    {
	        idx++;
	    }
	    new offset = idx;
	    new result[128];
	    while ((idx < length) && ((idx - offset) < (sizeof(result) - 1)))
	    {
	        result[idx - offset] = cmdtext[idx];
    	    idx++;
    	}
    	result[idx - offset] = EOS;
    	if(!strlen(result))
    	{
	        SendClientMessage(playerid, Naranja, "* /Slap [ID] [Razón]");
			return 1;
	    }
        new Float:Health;
	    new Float:x, Float:y, Float:z;
		GetPlayerHealth(playerid2,Health);
		SetPlayerHealth(playerid2,Health-10);
		GetPlayerPos(playerid2,x,y,z);
		SetPlayerPos(playerid2,x,y,z+5);
		PlayerPlaySound(playerid,1190,0.0,0.0,0.0);
		PlayerPlaySound(playerid2,1190,0.0,0.0,0.0);
		format(Nombre, sizeof(Nombre),"%s", GetPlayerNameRP(playerid));
		format(Nombre2, sizeof(Nombre2),"%s", GetPlayerNameRP(playerid2));
		format(string,sizeof(string),"Has sido abofeteado por '%s'. Motivo: %s", Nombre, (result));
		SendClientMessage(playerid2,AzulClaro,string);
		format(string,sizeof(string),"Has abofeteado a '%s'. Motivo: %s", Nombre2, (result));
		SendClientMessage(playerid,AzulClaro,string);
	}
	else
	{
        SendClientMessage(playerid,Rojo,"* ID inválida.");
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/sethp", true) == 0) //Setear vida
{
    if(PlayerInfo[playerid][pAdmin] < 2){ SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1; }
    tmp = strtok(cmdtext, idx);
   	if(!strlen(tmp))
    {
	    SendClientMessage(playerid, Naranja, "* /Sethp [ID] [Cantidad]");
	    return 1;
	}
    playerid2 = ReturnUser(tmp);
    if(IsPlayerConnected(playerid2) && playerid2 != INVALID_PLAYER_ID)
    {
        tmp = strtok(cmdtext, idx);
    	if(!IsNumeric(tmp) || !strlen(tmp))
    	{
	        SendClientMessage(playerid, Naranja, "* /Sethp [ID] [Cantidad]");
			return 1;
	    }
        new Health = strval(tmp);
		SetPlayerHealth(playerid2,Health);
		format(Nombre, sizeof(Nombre),"%s", GetPlayerNameRP(playerid));
		format(Nombre2, sizeof(Nombre2),"%s", GetPlayerNameRP(playerid2));
		format(string,sizeof(string),"'%s' ha seteado tu vida a %d.", Nombre, Health);
		SendClientMessage(playerid2,AzulClaro,string);
		format(string,sizeof(string),"Has seteado la vida de '%s' a %d.", Nombre2, Health);
		SendClientMessage(playerid,AzulClaro,string);
		format(string,sizeof(string),"'%s' ha seteado la vida de '%s' a %d.", Nombre, Nombre2, Health);
		SendAdminMessage(Aguamarina,string);
		printf(string);
	}
	else
	{
        SendClientMessage(playerid,Rojo,"* ID inválida.");
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/setarmour", true) == 0) //Setear armadura
{
    if(PlayerInfo[playerid][pAdmin] < 2){ SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1; }
    tmp = strtok(cmdtext, idx);
   	if(!strlen(tmp))
    {
	    SendClientMessage(playerid, Naranja, "* /Setarmour [ID] [Cantidad]");
	    return 1;
	}
    playerid2 = ReturnUser(tmp);
    if(IsPlayerConnected(playerid2) && playerid2 != INVALID_PLAYER_ID)
    {
        tmp = strtok(cmdtext, idx);
    	if(!IsNumeric(tmp) || !strlen(tmp))
    	{
	        SendClientMessage(playerid, Naranja, "* /Setarmour [ID] [Cantidad]");
			return 1;
	    }
        new Armour = strval(tmp);
		SetPlayerArmour(playerid2,Armour);
		format(Nombre, sizeof(Nombre),"%s", GetPlayerNameRP(playerid));
		format(Nombre2, sizeof(Nombre2),"%s", GetPlayerNameRP(playerid2));
		format(string,sizeof(string),"'%s' ha seteado tu armadura a %d.", Nombre, Armour);
		SendClientMessage(playerid2,AzulClaro,string);
		format(string,sizeof(string),"Has seteado la armadura de '%s' a %d.", Nombre2, Armour);
		SendClientMessage(playerid,AzulClaro,string);
		format(string,sizeof(string),"'%s' ha seteado la armadura de '%s' a %d.", Nombre, Nombre2, Armour);
		SendAdminMessage(Aguamarina,string);
		printf(string);
	}
	else
	{
        SendClientMessage(playerid,Rojo,"* ID inválida.");
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/hacerlider", true) == 0) //Hacer a un jugador líder de una facción
{
  	new nick[MAX_PLAYER_NAME];
	GetPlayerName(playerid, nick, sizeof(nick));
    if(!strcmp(nick, "Luis_Maro", true) || !strcmp(nick, "Dimitri_Molotov", true) || !strcmp(nick, "Adrian_Winchester", true))
    tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Hacerlider [ID] [Facción (0-36)]");
		return 1;
	}
	playerid2 = ReturnUser(tmp);
	new lider;
	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Hacerlider [ID] [Facción (0-36)]");
		return 1;
	}
	lider = strval(tmp);
	if(lider > 36 || lider < 1) { SendClientMessage(playerid, Rojo, "* La facción debe estar entre 1 y 36."); return 1; }
    if(IsPlayerConnected(playerid2) && playerid2 != INVALID_PLAYER_ID)
	{
        if(PlayerInfo[playerid2][pLider] > 0)
		{
			SendClientMessage(playerid, Rojo, "* No puedes hacer líder a un jugador que ya es líder de una facción.");
			return 1;
		}
		if(PlayerInfo[playerid2][pFaccion] > 0)
		{
			SendClientMessage(playerid, Rojo, "* No puedes hacer líder a un jugador que ya es miembro de una facción.");
			return 1;
		}
		PlayerInfo[playerid2][pLider] = lider;
		PlayerInfo[playerid2][pFaccion] = lider;
		PlayerInfo[playerid2][pRango] = 1;
		if(lider == 0){PlayerInfo[playerid2][pRango] = 0;}
		format(string, sizeof(string), "'%s' te ha hecho líder de la facción número %d.", GetPlayerNameRP(playerid), lider);
		SendClientMessage(playerid2, AzulClaro, string);
		format(string, sizeof(string), "Has hecho a '%s' líder de la facción número %d.", GetPlayerNameRP(playerid2), lider);
		SendClientMessage(playerid, AzulClaro, string);
	}
	else
	{
        SendClientMessage(playerid,Rojo,"* ID inválida.");
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/hacermiembro", true) == 0) //Hacer a un jugador miembro de una facción
{
    tmp = strtok(cmdtext, idx);
    if(PlayerInfo[playerid][pAdmin] < 3){ SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1; }
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Hacermiembro [ID] [Facción (1-36)] [Rango]");
		return 1;
	}
	playerid2 = ReturnUser(tmp);
	new faccion, rango;
	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Hacermiembro [ID] [Facción (1-36)] [Rango]");
		return 1;
	}
	faccion = strval(tmp);
	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Hacermiembro [ID] [Facción (1-36)] [Rango]");
		return 1;
	}
	rango = strval(tmp);
	if(faccion > 36 || faccion < 1) { SendClientMessage(playerid, Rojo, "* La facción debe estar entre 1 y 36."); return 1; }
	if(rango > 16 || rango < 1) { SendClientMessage(playerid, Rojo, "* El rango debe estar entre 1 y 16."); return 1; }
    if(IsPlayerConnected(playerid2) && playerid2 != INVALID_PLAYER_ID)
	{
		if(PlayerInfo[playerid2][pLider] > 0)
		{
			SendClientMessage(playerid, Rojo, "* No puedes hacer miembro a un jugador que ya es líder de una facción.");
            return 1;
		}
		PlayerInfo[playerid2][pFaccion] = faccion;
		PlayerInfo[playerid2][pRango] = rango;
		format(string, sizeof(string), "'%s' te ha hecho miembro de la facción número %d con rango %d.", GetPlayerNameRP(playerid), faccion, rango);
		SendClientMessage(playerid2, AzulClaro, string);
		format(string, sizeof(string), "Has hecho a '%s' miembro de la facción número %d con rango %d.", GetPlayerNameRP(playerid2), faccion, rango);
		SendClientMessage(playerid, AzulClaro, string);
	}
	else
	{
        SendClientMessage(playerid,Rojo,"* ID inválida.");
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/darrango", true) == 0) //Dar rango de facción a un jugador
{
    tmp = strtok(cmdtext, idx);
    if(PlayerInfo[playerid][pAdmin] < 3){ SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1; }
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Darrango [ID] [Rango]");
		return 1;
	}
	playerid2 = ReturnUser(tmp);
	new rango;
	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Darrango [ID] [Rango]");
		return 1;
	}
	rango = strval(tmp);
	if(rango > 16 || rango < 1) { SendClientMessage(playerid, Rojo, "* El rango debe estar entre 1 y 16."); return 1; }
    if(IsPlayerConnected(playerid2) && playerid2 != INVALID_PLAYER_ID)
	{
        if(PlayerInfo[playerid2][pLider] > 0)
		{
			SendClientMessage(playerid, Rojo, "* No puedes modificar el rango de un jugador que es líder de facción, que se lo cambie él.");
			return 1;
		}
		if(PlayerInfo[playerid2][pFaccion] < 1)
		{
			SendClientMessage(playerid, Rojo, "* Este jugador no forma parte de ninguna facción.");
			return 1;
		}
		PlayerInfo[playerid2][pRango] = rango;
		format(string, sizeof(string), "'%s' te ha dado rango %d de tu facción.", GetPlayerNameRP(playerid), rango);
		SendClientMessage(playerid2, AzulClaro, string);
		format(string, sizeof(string), "Has dado a '%s' rango %d de su facción.", GetPlayerNameRP(playerid2), rango);
		SendClientMessage(playerid, AzulClaro, string);
	}
	else
	{
        SendClientMessage(playerid,Rojo,"* ID inválida.");
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/forzarfaccion", true) == 0) //Dar líder, miembro y rango 0 a un jugador
{
    tmp = strtok(cmdtext, idx);
    if(PlayerInfo[playerid][pAdmin] < 3){ SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1; }
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Forzarfaccion [ID]");
		return 1;
	}
	playerid2 = ReturnUser(tmp);
    if(IsPlayerConnected(playerid2) && playerid2 != INVALID_PLAYER_ID)
	{
        PlayerInfo[playerid2][pFaccion] = 0;
		PlayerInfo[playerid2][pRango] = 0;
		PlayerInfo[playerid2][pLider] = 0;
		PlayerInfo[playerid2][pServicioPD] = 0;
		PlayerInfo[playerid2][pServicioWCST] = 0;
		PlayerInfo[playerid2][pServicioLSMD] = 0;
		PlayerInfo[playerid2][pServicioCNN] = 0;
		SetPlayerSkin(playerid2, PlayerInfo[playerid2][pSkin]);
        SetPlayerColor(playerid2,Blanco2);
		format(string, sizeof(string), "'%s' ha forzado tu facción, rango y líder a 0.", GetPlayerNameRP(playerid));
		SendClientMessage(playerid2, AzulClaro, string);
		format(string, sizeof(string), "Has forzado la facción, rango y líder de '%s' a 0.", GetPlayerNameRP(playerid2));
		SendClientMessage(playerid, AzulClaro, string);
	}
	else
	{
        SendClientMessage(playerid,Rojo,"* ID inválida.");
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/fixveh", true) == 0) //Repara un vehículo
{
    if(PlayerInfo[playerid][pAdmin] < 2){ SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1; }
    tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Fixveh [ID]");
		return 1;
	}
	playerid2 = ReturnUser(tmp);
    if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid, Rojo, "* ID inválida"); return 1;}
    if(IsPlayerInAnyVehicle(playerid2) && GetPlayerVehicleSeat(playerid2) == 0)
    {
		new coche = GetPlayerVehicleID(playerid2);
		RepairVehicle(coche);
		format(string, sizeof(string), "'%s' ha reparado el vehículo %d a '%s'.", GetPlayerNameRP(playerid), coche, GetPlayerNameRP(playerid2));
		SendAdminMessage(Aguamarina, string);
		SendClientMessage(playerid2, AzulClaro, string);
		printf("%s", string);
	}
	else
	{
        SendClientMessage(playerid,Rojo,"* Ese jugador no está en un vehículo como conductor.");
	}
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/respawncoche", true) == 0 || strcmp(cmd, "/rc", true) == 0) //Respawnea un vehículo
{
    if(PlayerInfo[playerid][pAdmin] < 2){ SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1; }
    if(IsPlayerInAnyVehicle(playerid) && GetPlayerVehicleSeat(playerid) == 0)
    {
		new coche = GetPlayerVehicleID(playerid);
		SetVehicleToRespawn(coche);
		SendClientMessage(playerid, AzulClaro, "Vehículo respawneado.");
		format(string, sizeof(string), "'%s' ha respawneado el vehículo %d.", GetPlayerNameRP(playerid), coche);
		SendAdminMessage(Aguamarina, string);
		printf("%s", string);
	}
	else
	{
        SendClientMessage(playerid,Rojo,"* No estás en un vehículo como conductor.");
	}
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/repararveh", true) == 0) //Repara la carrocería de un vehículo
{
    if(PlayerInfo[playerid][pAdmin] < 2){ SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1; }
    if(IsPlayerInAnyVehicle(playerid) && GetPlayerVehicleSeat(playerid) == 0)
    {
		new coche = GetPlayerVehicleID(playerid), Float:vida;
		GetVehicleHealth(coche, vida);
		RepairVehicle(coche);
		SetVehicleHealth(coche, vida);
		SendClientMessage(playerid, AzulClaro, "Carrocería del vehículo reparada.");
		format(string, sizeof(string), "'%s' ha reparado la carrocería del vehículo %d.", GetPlayerNameRP(playerid), coche);
		SendAdminMessage(Aguamarina, string);
		printf("%s", string);
	}
	else
	{
        SendClientMessage(playerid,Rojo,"* No estás en un vehículo como conductor.");
	}
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/repararmotor", true) == 0) //Repara el motor de un vehículo
{
    if(PlayerInfo[playerid][pAdmin] < 2){ SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1; }
    if(IsPlayerInAnyVehicle(playerid) && GetPlayerVehicleSeat(playerid) == 0)
    {
		new coche = GetPlayerVehicleID(playerid);
		SetVehicleHealth(coche, 1000);
		SendClientMessage(playerid, AzulClaro, "Motoría del vehículo reparado.");
		format(string, sizeof(string), "'%s' ha reparado el motor del vehículo %d.", GetPlayerNameRP(playerid), coche);
		SendAdminMessage(Aguamarina, string);
		printf("%s", string);
	}
	else
	{
        SendClientMessage(playerid,Rojo,"* No estás en un vehículo como conductor.");
	}
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/darpuntorol", true) == 0) //Dar un punto de rol
{
    tmp = strtok(cmdtext, idx);
    if(PlayerInfo[playerid][pAdmin] < 3){ SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1; }
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Darpuntorol [ID]");
		return 1;
	}
	playerid2 = ReturnUser(tmp);
    if(IsPlayerConnected(playerid2) && playerid2 != INVALID_PLAYER_ID)
	{
        PlayerInfo[playerid2][pPuntosRol] ++;
		format(string, sizeof(string), "'%s' te ha dado un punto de rol, enhorabuena.", GetPlayerNameRP(playerid));
		SendClientMessage(playerid2, Verde, string);
		format(string, sizeof(string), "Has dado un punto de rol a '%s'.", GetPlayerNameRP(playerid2));
		SendClientMessage(playerid, AzulClaro, string);
		format(string, sizeof(string), "'%s' ha dado un punto de rol a '%s'.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2));
		SendAdminMessage(Aguamarina, string);
		printf("%s", string);
	}
	else
	{
        SendClientMessage(playerid,Rojo,"* ID inválida.");
	}
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/quitarpuntorol", true) == 0) //Quitar un punto de rol
{
    tmp = strtok(cmdtext, idx);
    if(PlayerInfo[playerid][pAdmin] < 3){ SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1; }
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Quitarpuntorol [ID]");
		return 1;
	}
	playerid2 = ReturnUser(tmp);
    if(IsPlayerConnected(playerid2) && playerid2 != INVALID_PLAYER_ID)
	{
        PlayerInfo[playerid2][pPuntosRol] --;
		format(string, sizeof(string), "'%s' te ha quitado un punto de rol, algo habrás hecho.", GetPlayerNameRP(playerid));
		SendClientMessage(playerid2, Rojo, string);
		format(string, sizeof(string), "Has quitado un punto de rol a '%s'.", GetPlayerNameRP(playerid2));
		SendClientMessage(playerid, AzulClaro, string);
		format(string, sizeof(string), "'%s' ha quitado un punto de rol a '%s'.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2));
		SendAdminMessage(Aguamarina, string);
		printf("%s", string);
	}
	else
	{
        SendClientMessage(playerid,Rojo,"* ID inválida.");
	}
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/rotz", true) == 0) //Desvuelca un vehículo
{
	if(PlayerInfo[playerid][pAdmin] < 1){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
	if(!IsPlayerInAnyVehicle(playerid)){SendClientMessage(playerid, Rojo, "* No estás en un vehículo."); return 1;}
	new carid = GetPlayerVehicleID(playerid);
	new Float:RotZ;
	GetVehicleZAngle(carid, RotZ);
	SetVehicleZAngle(carid, RotZ + 30);
	format(string, sizeof(string), "'%s' ha usado el comando '/RotZ' en el vehículo %d.", GetPlayerNameRP(playerid), GetPlayerVehicleID(playerid));
	SendAdminMessage(Aguamarina, string);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/darmision", true) == 0) //Asigna una misión a un jugador
{
	if(PlayerInfo[playerid][pAdmin] < 4){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /DarMision [ID] [Tipo]");
		return 1;
	}
	playerid2 = ReturnUser(tmp);
	if(FaccInfo[PlayerInfo[playerid2][pFaccion]][fTipo] != 3){SendClientMessage(playerid, Rojo, "* Ese jugador no es un pandillero."); return 1;}
	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /DarMision [ID] [Tipo]");
		return 1;
	}
	new tipo = strval(tmp);
	if(tipo < 1 || tipo > 3){SendClientMessage(playerid, Rojo, "* El tipo de misión debe estar entre el 1 y el 3."); return 1;}
	DarMisionPandilla(playerid2, tipo);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/cambiarnombre", true) == 0) //Cambia el nombre de un jugador
{
    if(PlayerInfo[playerid][pAdmin] < 4){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
    tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /CambiarNombre [ID] [Nombre]");
		return 1;
	}
	playerid2 = ReturnUser(tmp);

	new length = strlen(cmdtext);
    while ((idx < length) && (cmdtext[idx] <= ' '))
    {
        idx++;
    }
    new offset = idx;
    new result[MAX_PLAYER_NAME];
    while ((idx < length) && ((idx - offset) < (sizeof(result) - 1)))
    {
        result[idx - offset] = cmdtext[idx];
        idx++;
    }
    result[idx - offset] = EOS;
    if(!strlen(result))
    {
        SendClientMessage(playerid, Naranja, "* /CambiarNombre [ID] [Nombre]");
        SendClientMessage(playerid, Naranja, "Nota: Solo puedes usar letras.");
        return 1;
    }
    if(SetPlayerName(playerid2, (result)) == -1)
	{
	    SendClientMessage(playerid, Rojo, "* No puedes darle ese nombre a ese usuario.");
	    return 1;
	}
	new nombre[MAX_PLAYER_NAME];
	GetPlayerName(playerid2, nombre, sizeof(nombre));
	format(string, sizeof(string), "'%s' ha cambiado del nombre del ID '%d' a '%s'.", GetPlayerNameRP(playerid), playerid2, (result));
	SendAdminMessage(Aguamarina, string);
	SendClientMessage(playerid2, AzulClaro, string);

	new query[170];
	format(query, sizeof(query), "UPDATE usuarios SET Nombre = '%s' WHERE Nombre = '%s'", (result), PlayerInfo[playerid2][pNombre]);
	mysql_query(1, query);

	SetPlayerName(playerid2, (result));
    format(PlayerInfo[playerid2][pNombre], sizeof((result)), (result));
	PlayerSave(playerid2);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/setstat", true) == 0) //Modificar los parámetros de un jugador
{
  	new nick[MAX_PLAYER_NAME];
	GetPlayerName(playerid, nick, sizeof(nick));
    if(!strcmp(nick, "Luis_Maro", true) || !strcmp(nick, "Adrian_Winchester", true) || !strcmp(nick, "Dimitri_Molotov", true))
    tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Setstat [ID] [Variable] [Cantidad]");
		return 1;
	}
	playerid2 = ReturnUser(tmp);

    new opcion[128];
	opcion = strtok(cmdtext, idx);
	if(!strlen(opcion))
	{
		SendClientMessage(playerid, Naranja, "* /Setstat [ID] [Variable] [Cantidad]");
		SendClientMessage(playerid, Amarillo, "Edad, Sexo, Nivel, Exp, Telefono, Trabajo, EsperaTrabajar");
		SendClientMessage(playerid, NaranjaOscuro, "DineroBanco, Encarcelado, TiempoCarcel, HabPistola, HabSD");
		SendClientMessage(playerid, Amarillo, "HabDEagle, HabEscopeta, HabSawnoff, HabEscopetaCom, HabUZI");
		SendClientMessage(playerid, NaranjaOscuro, "HabMP5, HabAK47, HabM4, HabFranco, ServicioPD");
		SendClientMessage(playerid, Amarillo, "LlaveCoche[0-4], LlaveCochePrestado[0-4, Premium]");
		SendClientMessage(playerid, NaranjaOscuro, "MinPayDay, LicConduccion, LicNavegacion, LicAviacion, LicArmas,");
		SendClientMessage(playerid, Amarillo, "Casa, CasaAlq, Negocio, HabLad, TiempoRobo");
		SendClientMessage(playerid, NaranjaOscuro, "Hambre, Sed, Adiccion[0-4], DrConsumida[0-4], Fuerza, CansancioEntrenar");
		return 1;
	}

	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Setstat [ID] [Variable] [Cantidad]");
		return 1;
	}
	new cantidad = strval(tmp);

	if(strcmp(opcion,"Edad",true) == 0)
	{
	    PlayerInfo[playerid2][pEdad] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'Edad' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"Sexo",true) == 0)
	{
	    PlayerInfo[playerid2][pSexo] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'Sexo' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"Nivel",true) == 0)
	{
	    PlayerInfo[playerid2][pNivel] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'Nivel' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"Exp",true) == 0)
	{
	    PlayerInfo[playerid2][pExp] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'Exp' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"Telefono",true) == 0)
	{
	    PlayerInfo[playerid2][pTelefono] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'Telefono' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"Trabajo",true) == 0)
	{
	    PlayerInfo[playerid2][pTrabajo] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'Trabajo' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"DineroBanco",true) == 0)
	{
	    PlayerInfo[playerid2][pDineroBanco] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'DineroBanco' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"Encarcelado",true) == 0)
	{
	    PlayerInfo[playerid2][pEncarcelado] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'Encarcelado' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"TiempoCarcel",true) == 0)
	{
	    PlayerInfo[playerid2][pTiempoCarcel] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'TiempoCarcel' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"HabPistola",true) == 0)
	{
	    PlayerInfo[playerid2][pHabPistola] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'HabPistola' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	    SetPlayerSkillLevel(playerid2, WEAPONSKILL_PISTOL, cantidad);
	}
	else if(strcmp(opcion,"HabSD",true) == 0)
	{
	    PlayerInfo[playerid2][pHabSD] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'HabSD' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	    SetPlayerSkillLevel(playerid2, WEAPONSKILL_PISTOL_SILENCED, cantidad);
	}
	else if(strcmp(opcion,"HabDEagle",true) == 0)
	{
	    PlayerInfo[playerid2][pHabDEagle] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'HabDEagle' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	    SetPlayerSkillLevel(playerid2, WEAPONSKILL_DESERT_EAGLE, cantidad);
	}
	else if(strcmp(opcion,"HabEscopeta",true) == 0)
	{
	    PlayerInfo[playerid2][pHabEscopeta] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'HabEscopeta' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	    SetPlayerSkillLevel(playerid2, WEAPONSKILL_SHOTGUN, cantidad);
	}
	else if(strcmp(opcion,"HabSawnoff",true) == 0)
	{
	    PlayerInfo[playerid2][pHabSawnoff] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'HabSawnoff' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	    SetPlayerSkillLevel(playerid2, WEAPONSKILL_SAWNOFF_SHOTGUN, cantidad);
	}
	else if(strcmp(opcion,"HabEscopetaCom",true) == 0)
	{
	    PlayerInfo[playerid2][pHabEscopetaCom] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'HabEscopetaCom' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	    SetPlayerSkillLevel(playerid2, WEAPONSKILL_SPAS12_SHOTGUN, cantidad);
	}
	else if(strcmp(opcion,"HabUZI",true) == 0)
	{
	    PlayerInfo[playerid2][pHabUZI] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'HabUZI' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	    SetPlayerSkillLevel(playerid2, WEAPONSKILL_MICRO_UZI, cantidad);
	}
	else if(strcmp(opcion,"HabMP5",true) == 0)
	{
	    PlayerInfo[playerid2][pHabMP5] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'HabMP5' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	    SetPlayerSkillLevel(playerid2, WEAPONSKILL_MP5, cantidad);
	}
	else if(strcmp(opcion,"HabAK47",true) == 0)
	{
	    PlayerInfo[playerid2][pHabAK47] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'HabAK47' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	    SetPlayerSkillLevel(playerid2, WEAPONSKILL_AK47, cantidad);
	}
	else if(strcmp(opcion,"HabM4",true) == 0)
	{
	    PlayerInfo[playerid2][pHabM4] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'HabM4' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	    SetPlayerSkillLevel(playerid2, WEAPONSKILL_M4, cantidad);
	}
	else if(strcmp(opcion,"HabFranco",true) == 0)
	{
	    PlayerInfo[playerid2][pHabFranco] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'HabFranco' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	    SetPlayerSkillLevel(playerid2, WEAPONSKILL_SNIPERRIFLE, cantidad);
	}
	else if(strcmp(opcion,"ServicioPD",true) == 0)
	{
	    PlayerInfo[playerid2][pServicioPD] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'ServicioPD' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"LlaveCoche0",true) == 0)
	{
	    PlayerInfo[playerid2][pLlaveCoche][0] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'LlaveCoche0' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"LlaveCoche1",true) == 0)
	{
	    PlayerInfo[playerid2][pLlaveCoche][1] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'LlaveCoche1' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"LlaveCoche2",true) == 0)
	{
	    PlayerInfo[playerid2][pLlaveCoche][2] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'LlaveCoche2' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"LlaveCoche3",true) == 0)
	{
	    PlayerInfo[playerid2][pLlaveCoche][3] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'LlaveCoche3' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"LlaveCoche4",true) == 0)
	{
	    PlayerInfo[playerid2][pLlaveCoche][4] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'LlaveCoche4' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"LlaveCochePrestado0",true) == 0)
	{
	    PlayerInfo[playerid2][pLlaveCochePrestado][0] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'LlaveCochePrestado0' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"LlaveCochePrestado1",true) == 0)
	{
	    PlayerInfo[playerid2][pLlaveCochePrestado][1] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'LlaveCochePrestado1' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"LlaveCochePrestado2",true) == 0)
	{
	    PlayerInfo[playerid2][pLlaveCochePrestado][2] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'LlaveCochePrestado2' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"LlaveCochePrestado3",true) == 0)
	{
	    PlayerInfo[playerid2][pLlaveCochePrestado][3] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'LlaveCochePrestado3' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"LlaveCochePrestado4",true) == 0)
	{
	    PlayerInfo[playerid2][pLlaveCochePrestado][4] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'LlaveCochePrestado4' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"MinPayDay",true) == 0)
	{
	    PlayerInfo[playerid2][pMinPayDay] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'LlaveCoche4' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"LicConduccion",true) == 0)
	{
	    PlayerInfo[playerid2][pLicConduccion] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'LicConduccion' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"LicNavegacion",true) == 0)
	{
	    PlayerInfo[playerid2][pLicNavegacion] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'LicNavegacion' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"LicAviacion",true) == 0)
	{
	    PlayerInfo[playerid2][pLicAviacion] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'LicAviacion' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"LicArmas",true) == 0)
	{
	    PlayerInfo[playerid2][pLicArmas] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'LicArmas' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"Casa",true) == 0)
	{
	    PlayerInfo[playerid2][pCasa] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'Casa' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"CasaAlq",true) == 0)
	{
	    PlayerInfo[playerid2][pCasaAlq] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'CasaAlq' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"Negocio",true) == 0)
	{
	    PlayerInfo[playerid2][pNegocio] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'Negocio' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"HabLad",true) == 0)
	{
	    PlayerInfo[playerid2][pHabLad] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'HabLad' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"NivelPiloto",true) == 0)
	{
	    PlayerInfo[playerid2][pNivelPiloto] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'NivelPiloto' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"TiempoRobo",true) == 0)
	{
	    PlayerInfo[playerid2][pTiempoRobo] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'TiempoRobo' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"Hambre",true) == 0)
	{
	    PlayerInfo[playerid2][pHambre] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'Hambre' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	    ActualizarHambre(playerid2);
	}
	else if(strcmp(opcion,"Sed",true) == 0)
	{
	    PlayerInfo[playerid2][pSed] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'Sed' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	    ActualizarSed(playerid2);
	}
	else if(strcmp(opcion,"Adiccion0",true) == 0)
	{
	    PlayerInfo[playerid2][pAdiccion][0] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'Adiccion0' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"Adiccion1",true) == 0)
	{
	    PlayerInfo[playerid2][pAdiccion][1] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'Adiccion1' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"Adiccion2",true) == 0)
	{
	    PlayerInfo[playerid2][pAdiccion][2] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'Adiccion2' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"Adiccion3",true) == 0)
	{
	    PlayerInfo[playerid2][pAdiccion][3] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'Adiccion3' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"Adiccion4",true) == 0)
	{
	    PlayerInfo[playerid2][pAdiccion][4] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'Adiccion4' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"DrConsumida0",true) == 0)
	{
	    PlayerInfo[playerid2][pDrConsumida][0] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'DrConsumida0' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"DrConsumida1",true) == 0)
	{
	    PlayerInfo[playerid2][pDrConsumida][1] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'DrConsumida1' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"DrConsumida2",true) == 0)
	{
	    PlayerInfo[playerid2][pDrConsumida][2] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'DrConsumida02' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"DrConsumida3",true) == 0)
	{
	    PlayerInfo[playerid2][pDrConsumida][3] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'DrConsumida3' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"DrConsumida4",true) == 0)
	{
	    PlayerInfo[playerid2][pDrConsumida][4] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'DrConsumida4' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"Fuerza",true) == 0)
	{
	    PlayerInfo[playerid2][pFuerza] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'Fuerza' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"Premium",true) == 0)
	{
	    PlayerInfo[playerid2][pPremium] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'Premium' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
	else if(strcmp(opcion,"CansancioEntrenar",true) == 0)
	{
	    PlayerInfo[playerid2][pCansancioEntrenar] = cantidad;
	    format(string, sizeof(string), "* '%s' ha seteado 'CansancioEntrenar' a '%s' a %d.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), cantidad);
	    SendAdminMessage(Aguamarina, string);
	    SendClientMessage(playerid2, AzulClaro, string);
	    printf(string);
	}
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/adm", true) == 0 || strcmp(cmd, "/administracion", true) == 0) //Dar mensajes generales como admin.
{
	if(IsPlayerConnected(playerid))
	{
		if(PlayerInfo[playerid][pAdmin] < 1){ SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1; }
		format(Nombre, sizeof(Nombre),"%s", GetPlayerNameRP(playerid));
		new length = strlen(cmdtext);
		while ((idx < length) && (cmdtext[idx] <= ' ')){idx++;}
		new offset = idx;
		new result[128];
		while ((idx < length) && ((idx - offset) < (sizeof(result) - 1))){result[idx - offset] = cmdtext[idx]; idx++;}
		result[idx - offset] = EOS;
		if(!strlen(result))
		{
			SendClientMessage(playerid, Naranja, "* /(Adm)inistracion [Texto]");
			return 1;
		}
		format(string, sizeof(string), "Administración: %s",result);
		SendClientMessageToAll(Aguamarina,string);
		printf("Mensaje por admin global %s: %s", Nombre, result);
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/duda", true) == 0 || strcmp(cmd, "/d", true) == 0) //Comando Duda...
{
  new string2[128];
  if(NewbieTimer[playerid] > 0)
  {
     format(string2, sizeof(string2), "* Debes esperar %d segundos para volver a hablar por el canal de ayuda.", NewbieTimer[playerid]);
     SendClientMessage(playerid, Rojo, string2);
     return 1;
  }
  new length = strlen(cmdtext);
  while ((idx < length) && (cmdtext[idx] <= ' ')){idx++;}
  new offset = idx;
  new result[128];
  while ((idx < length) && ((idx - offset) < (sizeof(result) - 1))){result[idx - offset] = cmdtext[idx]; idx++;}
  result[idx - offset] = EOS;
  if(!strlen(result))
  {
     SendClientMessage(playerid, Naranja, "* /duda [Pregunta]");
     return 1;
  }
  if(SPAM(result)){SendClientMessage(playerid, Rojo, "* No está permitido el SPAM en nuestro servidor."); return 0;}
  if(PlayerInfo[playerid][pAdmin]<1)
  {
     NewbieTimer[playerid] = 50;
  }
  else if(PlayerInfo[playerid][pAdmin]==1)
  {
     NewbieTimer[playerid] = 15;
  }
  else if(PlayerInfo[playerid][pAdmin] == 1)
  {
     NewbieTimer[playerid] = 15;
  }
  else if(PlayerInfo[playerid][pAdmin] >= 2 && PlayerInfo[playerid][pAdmin] < 2)
  {
     NewbieTimer[playerid] = 10;
  }
  if(PlayerInfo[playerid][pAdmin]<1&&PlayerInfo[playerid][pAdmin]<1)
  {
     format(string2, sizeof(string2), "(Canal Dudas) [Nivel: %d] %s(%d): {FFFFFF}%s", PlayerInfo[playerid][pNivel],GetPlayerNameRP(playerid),playerid, result);
  }
  if(PlayerInfo[playerid][pAdmin] == 1&& PlayerInfo[playerid][pAdmin]<2)
  {
     format(string2, sizeof(string2), "(Canal Dudas) [Ayudante] %s(%d): {FFFFFF}%s", GetPlayerNameRP(playerid),playerid, result);
  }
  if(PlayerInfo[playerid][pAdmin] == 1)
  {
     format(string2, sizeof(string2), "(Canal Dudas) [Moderador] %s(%d): {FFFFFF}%s", GetPlayerNameRP(playerid),playerid, result);
  }
  if(PlayerInfo[playerid][pAdmin] >= 2)
  {
     format(string2, sizeof(string2), "(Canal Dudas) [Moderador G.] %s(%d): {FFFFFF}%s", GetPlayerNameRP(playerid),playerid, result);
  }
  if(PlayerInfo[playerid][pAdmin] >= 3)
  {
     format(string2, sizeof(string2), "(Canal Dudas) [Administrador] %s(%d): {FFFFFF}%s", GetPlayerNameRP(playerid),playerid, result);

   }
  if(PlayerInfo[playerid][pAdmin] >= 5)
  {
     format(string2, sizeof(string2), "(Canal Dudas) [Dueño] %s(%d): {FFFFFF}%s", GetPlayerNameRP(playerid),playerid, result);
  }
  if(PlayerInfo[playerid][pAdmin] >= 6)
  {
     format(string2, sizeof(string2), "(Canal Dudas) [Mapper] %s(%d): {FFFFFF}%s", GetPlayerNameRP(playerid),playerid, result);
  }
  foreach(Player, n)
  {
        SendClientMessage(n, AzulClaro, string2);
  }
  return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/admin", true) == 0 || strcmp(cmd, "/a", true) == 0) //Chat admin
{
    if(IsPlayerConnected(playerid))
    {
        if(PlayerInfo[playerid][pAdmin] < 1){SendClientMessage(playerid,Rojo,"* Nivel de admin insuficiente."); return 1;}
		format(Nombre, sizeof(Nombre),"%s", GetPlayerNameRP(playerid));
		new length = strlen(cmdtext);
		while ((idx < length) && (cmdtext[idx] <= ' ')){idx++;}
		new offset = idx;
		new result[90];
		while ((idx < length) && ((idx - offset) < (sizeof(result) - 1))){result[idx - offset] = cmdtext[idx]; idx++;}
		result[idx - offset] = EOS;
		if(!strlen(result))
		{
	    	SendClientMessage(playerid, Naranja, "* /(A)dmin [Texto]");
	    	return 1;
		}
		format(string, sizeof(string), "[N%d] %s: %s", PlayerInfo[playerid][pAdmin], Nombre, result);
		SendAdminMessage(Celeste, string);
		printf("Admin %s: %s", Nombre, result);
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/kick", true) == 0) //Kickear
{
    if(PlayerInfo[playerid][pAdmin] < 1){SendClientMessage(playerid,Rojo,"* Nivel de admin insuficiente."); return 1;}
    tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Kick [ID] [Razón]");
        return 1;
    }
    playerid2 = ReturnUser(tmp);
    if(IsPlayerConnected(playerid2))
    {
        if(playerid2 != INVALID_PLAYER_ID)
        {
            format(Nombre2, sizeof(Nombre2),"%s", GetPlayerNameRP(playerid2));
            format(Nombre, sizeof(Nombre),"%s", GetPlayerNameRP(playerid));
            new length = strlen(cmdtext);
            while ((idx < length) && (cmdtext[idx] <= ' '))
            {
                idx++;
            }
            new offset = idx;
            new result[80];
            while ((idx < length) && ((idx - offset) < (sizeof(result) - 1)))
            {
                result[idx - offset] = cmdtext[idx];
                idx++;
            }
            result[idx - offset] = EOS;
            if(!strlen(result))
            {
                SendClientMessage(playerid, Naranja, "* /Kick [ID] [Razón]");
                return 1;
            }
            new ano, mes, dia;
            getdate(ano, mes, dia);
            format(string, sizeof(string), "'%s' fue kickeado del servidor. Motivo: %s (%d/%d/%d)", Nombre2, (result), dia, mes, ano);
            SendClientMessageToAll(Rojo, string);
            printf(string);
            TogglePlayerControllable(playerid2,0);
            KickL(playerid2);
            return 1;
        }
    }
    else
    {
        SendClientMessage(playerid, Rojo, "* ID inválida.");
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/ban", true) == 0) //Banear
{
    if(PlayerInfo[playerid][pAdmin] < 4){SendClientMessage(playerid,Rojo,"* Nivel de admin insuficiente."); return 1;}
    if(PlayerInfo[playerid][pAdmin] < PlayerInfo[playerid2][pAdmin]) return SendClientMessage(playerid, Rojo,"* No puedes banear a un administrador superior a tu nivel") ;
    tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Ban [ID] [Razón]");
        return 1;
    }
    playerid2 = ReturnUser(tmp);
    if(IsPlayerConnected(playerid2))
    {
        if(playerid2 != INVALID_PLAYER_ID)
        {
            format(Nombre2, sizeof(Nombre2),"%s", GetPlayerNameRP(playerid2));
            format(Nombre, sizeof(Nombre),"%s", GetPlayerNameRP(playerid));
            new length = strlen(cmdtext);
            while ((idx < length) && (cmdtext[idx] <= ' '))
            {
                idx++;
            }
            new offset = idx;
            new result[80];
            while ((idx < length) && ((idx - offset) < (sizeof(result) - 1)))
            {
                result[idx - offset] = cmdtext[idx];
                idx++;
            }
            result[idx - offset] = EOS;
            if(!strlen(result))
            {
                SendClientMessage(playerid, Naranja, "* /Ban [ID] [Razón]");
                return 1;
            }
            new ano, mes, dia;
            getdate(ano, mes, dia);
            format(string, sizeof(string), "%s fue baneado del servidor. Motivo: %s (%d/%d/%d)", Nombre2, (result), dia, mes, ano);
            SendClientMessageToAll(Rojo, string);
            printf(string);
            format(string, sizeof(string), "Has sido baneado por '%s'.", Nombre);
            SendClientMessage(playerid2, Amarillo, string);
            SendClientMessage(playerid2, Amarillo, "Si crees que ha sido un error, toma foto con F8 y pide tu desbán en el foro.");
            TogglePlayerControllable(playerid2,0);
            BanL(playerid2);
            return 1;
        }
    }
    else
    {
        SendClientMessage(playerid, Rojo, "* ID inválida.");
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/desban", true) == 0) //Banear
{
    if(PlayerInfo[playerid][pAdmin] < 3){SendClientMessage(playerid,Rojo,"* Nivel de admin insuficiente."); return 1;}
    new length = strlen(cmdtext);
    while ((idx < length) && (cmdtext[idx] <= ' '))
    {
        idx++;
    }
    new offset = idx;
    new result[MAX_PLAYER_NAME];
    while ((idx < length) && ((idx - offset) < (sizeof(result) - 1)))
    {
        result[idx - offset] = cmdtext[idx];
        idx++;
    }
    result[idx - offset] = EOS;
    if(!strlen(result))
    {
        SendClientMessage(playerid, Naranja, "* /Desban [Nombre_Apellido]");
        return 1;
    }
	new query[250];
	format(query, sizeof(query), "UPDATE usuarios SET Bloqueado = 0 WHERE Nombre = '%s'", result);
	mysql_query(1, query);
	format(string, sizeof(string), "'%s' ha desbaneado la cuenta de '%s'.", GetPlayerNameRP(playerid), result);
	SendAdminMessage(Aguamarina, string);
	printf(string);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/desbanip", true) == 0) //Banear
{
    if(PlayerInfo[playerid][pAdmin] < 3){SendClientMessage(playerid,Rojo,"* Nivel de admin insuficiente."); return 1;}
    new length = strlen(cmdtext);
    while ((idx < length) && (cmdtext[idx] <= ' '))
    {
        idx++;
    }
    new offset = idx;
    new result[MAX_PLAYER_NAME];
    while ((idx < length) && ((idx - offset) < (sizeof(result) - 1)))
    {
        result[idx - offset] = cmdtext[idx];
        idx++;
    }
    result[idx - offset] = EOS;
    if(!strlen(result))
    {
        SendClientMessage(playerid, Naranja, "* /DesbanIP [IP]");
        return 1;
    }
    format(string, sizeof(string), "unbanip %s", result);
    SendRconCommand(string);
    SendRconCommand("reloadbans");
	format(string, sizeof(string), "'%s' ha desbaneado la IP [%s].", GetPlayerNameRP(playerid), result);
	SendAdminMessage(Aguamarina, string);
	printf(string);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/setvw", true) == 0) //Dar un Virual World a un jugador.
{
    if(PlayerInfo[playerid][pAdmin] < 1){SendClientMessage(playerid,Rojo,"* Nivel de admin insuficiente."); return 1;}
    tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /SetVW [ID] [VW]");
        return 1;
    }
    playerid2 = ReturnUser(tmp);
    if(IsPlayerConnected(playerid2))
    {
        if(playerid2 != INVALID_PLAYER_ID)
        {
            tmp = strtok(cmdtext, idx);
            new VW = strval(tmp);
			if(!strlen(tmp))
			{
                SendClientMessage(playerid, Naranja, "* /SetVW [ID] [VW]");
                return 1;
			}
            format(Nombre2, sizeof(Nombre2),"%s", GetPlayerNameRP(playerid2));
            format(Nombre, sizeof(Nombre),"%s", GetPlayerNameRP(playerid));
            format(string, sizeof(string), "'%s' ha cambiado tu Virtual World al %d.", Nombre, VW);
            SendClientMessage(playerid2, AzulClaro, string);
            format(string, sizeof(string), "Has cambiado el Virtual World de '%s' al %d.", Nombre2, VW);
            SendClientMessage(playerid, AzulClaro, string);
            SetPlayerVirtualWorld(playerid2, VW);
            return 1;
        }
    }
    else
    {
        SendClientMessage(playerid, Rojo, "* ID inválida.");
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/setint", true) == 0) //Dar un interior a un jugador.
{
    if(PlayerInfo[playerid][pAdmin] < 1){SendClientMessage(playerid,Rojo,"* Nivel de admin insuficiente."); return 1;}
    tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /SetInt [ID] [Int]");
        return 1;
    }
    playerid2 = ReturnUser(tmp);
    if(IsPlayerConnected(playerid2))
    {
        if(playerid2 != INVALID_PLAYER_ID)
        {
            tmp = strtok(cmdtext, idx);
            new Int = strval(tmp);
			if(!strlen(tmp))
			{
                SendClientMessage(playerid, Naranja, "* /SetInt [ID] [Int]");
                return 1;
			}
            format(Nombre2, sizeof(Nombre2),"%s", GetPlayerNameRP(playerid2));
            format(Nombre, sizeof(Nombre),"%s", GetPlayerNameRP(playerid));
            format(string, sizeof(string), "'%s' ha cambiado tu interior al %d.", Nombre, Int);
            SendClientMessage(playerid2, AzulClaro, string);
            format(string, sizeof(string), "Has cambiado el interior de '%s' al %d.", Nombre2, Int);
            SendClientMessage(playerid, AzulClaro, string);
            SetPlayerInterior(playerid2, Int);
            return 1;
        }
    }
    else
    {
        SendClientMessage(playerid, Rojo, "* ID inválida.");
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/irpos", true) == 0) //Ir a unas coordenadas
{
	if(PlayerInfo[playerid][pAdmin] < 1) { SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1; }
	tmp = strtok(cmdtext,idx);
	if(!strlen(tmp))
	{
	    SendClientMessage(playerid, Naranja, "* /irpos [Coor:x] [Coor:y] [Coor:z]");
	    return 1;
	}
	new Float:int_x;
	int_x = floatstr(tmp);
	tmp = strtok(cmdtext,idx);
	if(!strlen(tmp))
    {
	    SendClientMessage(playerid, Naranja, "* /irpos [Coor:x] [Coor:y] [Coor:z]");
	    return 1;
    }
	new Float:int_y;
	int_y = floatstr(tmp);
	tmp = strtok(cmdtext,idx);
	if(!strlen(tmp))
    {
	    SendClientMessage(playerid, Naranja, "* /irpos [Coor:x] [Coor:y] [Coor:z]");
	    return 1;
    }
	new Float:int_z;
	int_z = floatstr(tmp);
	format(string, sizeof(string), "Teleportado a las coordenadas X: %1.5f, Y: %1.5f, Z: %1.5f",int_x, int_y, int_z);
	SendClientMessage(playerid, AzulClaro, string);
	SetPlayerPos(playerid, int_x, int_y, int_z);
	return 1;
}
//---------------------------------------------------------------------------------------------------------------
if(strcmp(cmd, "/getPos", true) == 0) //Obtiene tu posición actual
{
    if(PlayerInfo[playerid][pAdmin] < 1){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
    new Float:x, Float:y, Float:z;
	GetPlayerPos(playerid, x, y, z);
	format(string, sizeof(string), "Tu posicion es %f , %f , %f", x,y,z);
	SendClientMessage(playerid, AzulClaro, string);
	printf(string);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/ir", true) == 0) //Teleportarse a la posición de un jugador
{
    tmp = strtok(cmdtext, idx);
    if(PlayerInfo[playerid][pAdmin] < 1){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Ir [ID]");
        return 1;
    }
    new Float:x, Float:y, Float:z;
    playerid2 = ReturnUser(tmp);
    format(Nombre2, sizeof(Nombre2),"%s", GetPlayerNameRP(playerid2));
    if(IsPlayerConnected(playerid2))
    {
        if(playerid2 != INVALID_PLAYER_ID)
        {
            GetPlayerPos(playerid2, x, y, z);
            SetPlayerInterior(playerid,GetPlayerInterior(playerid2));
            SetPlayerVirtualWorld(playerid,GetPlayerVirtualWorld(playerid2));
            if(GetPlayerState(playerid) == 2)
            {
                new tmpcar = GetPlayerVehicleID(playerid);
                SetVehiclePos(tmpcar, x, y+2, z);
            }
            else
            {
                SetPlayerPos(playerid, x, y+0.5, z+2);
            }
            format(string, sizeof(string), "Teleportado a la posición de '%s'.", Nombre2);
            SendClientMessage(playerid, AzulClaro, string);
        }
    }
    else  {  SendClientMessage(playerid, Rojo, "* ID inválida.");  }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/traer", true) == 0) //Traer un jugador a tu posición
{
    tmp = strtok(cmdtext, idx);
    if(PlayerInfo[playerid][pAdmin] < 1){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Traer [ID]");
        return 1;
    }
    new Float:x, Float:y, Float:z;
    playerid2 = ReturnUser(tmp);
    format(Nombre2, sizeof(Nombre2),"%s", GetPlayerNameRP(playerid2));
    format(Nombre, sizeof(Nombre),"%s", GetPlayerNameRP(playerid));
    if(IsPlayerConnected(playerid2))
    {
        if(playerid2 != INVALID_PLAYER_ID)
        {
            GetPlayerPos(playerid, x, y, z);
            SetPlayerInterior(playerid2,GetPlayerInterior(playerid));
            SetPlayerVirtualWorld(playerid2,GetPlayerVirtualWorld(playerid));
            if(GetPlayerState(playerid2) == 2)
            {
                new tmpcar = GetPlayerVehicleID(playerid2);
                SetVehiclePos(tmpcar, x, y+2, z);
            }
            else
            {
                SetPlayerPos(playerid2, x, y+0.5, z+1);
            }
            format(string, sizeof(string), "Has traido a '%s' a tu posición.", Nombre2);
            SendClientMessage(playerid, AzulClaro, string);
            format(string, sizeof(string), "'%s' te ha llevado a su posición.", Nombre);
            SendClientMessage(playerid2, AzulClaro, string);
        }
    }
    else  {  SendClientMessage(playerid, Rojo, "* ID inválida.");  }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/gotocar", true) == 0) //Teleportarse a la posición de un vehículo
{
    tmp = strtok(cmdtext, idx);
    if(PlayerInfo[playerid][pAdmin] < 1){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
	if(!strlen(tmp) || !IsNumeric(tmp))
	{
        SendClientMessage(playerid, Naranja, "* /Gotocar [ID]");
        return 1;
	}
	new carid = strval(tmp);
	if(!IsValidVehicle(carid))
	{
    	SendClientMessage(playerid, Rojo, "* ID inválida, vehículo no encontrado.");
    	return 1;
	}
    new Float:cx,Float:cy,Float:cz;
    GetVehiclePos(carid, cx, cy, cz);
	if(GetPlayerState(playerid) == 2)
	{
        SetVehiclePos(GetPlayerVehicleID(playerid), cx, cy, cz);
	}
	else
	{
        SetPlayerPos(playerid, cx, cy, (cz + 4.0));
	}
	SetPlayerVirtualWorld(playerid, CarInfo[carid][cVirtualWorld]);
	SetPlayerInterior(playerid, CarInfo[carid][cInterior]);
	format(string, sizeof(string), "Teleportado a la posición del vehículo %d.", carid);
    SendClientMessage(playerid, AzulClaro, string);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/getcar", true) == 0) //Traer un vehículo
{
    tmp = strtok(cmdtext, idx);
    if(PlayerInfo[playerid][pAdmin] < 2){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
	if(!strlen(tmp) || !IsNumeric(tmp))
	{
        SendClientMessage(playerid, Naranja, "* /Getcar [ID]");
        return 1;
	}
	new carid = strval(tmp);
	if(!IsValidVehicle(carid))
	{
    	SendClientMessage(playerid, Rojo, "* ID inválida, vehículo no encontrado.");
    	return 1;
	}
    new Float:cx,Float:cy,Float:cz;
    GetPlayerPos(playerid, cx, cy, cz);
    SetVehiclePos(carid, cx, cy, cz);
    SetVehicleVirtualWorld(carid, GetPlayerVirtualWorld(playerid));
    LinkVehicleToInteriorEx(carid, GetPlayerInterior(playerid));
    SetPlayerPos(playerid, cx, cy, (cz + 4.0));
	format(string, sizeof(string), "Has traido a tu posición el vehículo %d.", carid);
    SendClientMessage(playerid, AzulClaro, string);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/gotocarllave", true) == 0) //Teleportarse a la posición de un vehículo mediante su llave
{
    tmp = strtok(cmdtext, idx);
    if(PlayerInfo[playerid][pAdmin] < 1){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
	if(!strlen(tmp) || !IsNumeric(tmp))
	{
        SendClientMessage(playerid, Naranja, "* /Gotocarllave [Llave]");
        return 1;
	}
	new llave = strval(tmp);
	new VehEncontrado;
	for(new x=0; x<=TotalVeh; x++)
	{
    	if(CarInfo[x][cLlave] == llave){VehEncontrado = x; break;}
	}
	if(VehEncontrado == 0){SendClientMessage(playerid, Rojo, "* Llave inválida, vehículo no encontrado."); return 1;}
    new Float:cx,Float:cy,Float:cz;
    GetVehiclePos(VehEncontrado, cx, cy, cz);
	if(GetPlayerState(playerid) == 2)
	{
        SetVehiclePos(GetPlayerVehicleID(playerid), cx, cy, cz);
	}
	else
	{
        SetPlayerPos(playerid, cx, cy, (cz + 2.0));
	}
	SetPlayerVirtualWorld(playerid, CarInfo[VehEncontrado][cVirtualWorld]);
	SetPlayerInterior(playerid, CarInfo[VehEncontrado][cInterior]);
	format(string, sizeof(string), "Teleportado a la posición del vehículo con llave %d.", llave);
    SendClientMessage(playerid, AzulClaro, string);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/getcarllave", true) == 0) //Traer un vehículo mediante su llave
{
    tmp = strtok(cmdtext, idx);
    if(PlayerInfo[playerid][pAdmin] < 2){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
	if(!strlen(tmp) || !IsNumeric(tmp))
	{
        SendClientMessage(playerid, Naranja, "* /Getcarllave [Llave]");
        return 1;
	}
	new llave = strval(tmp);
	new VehEncontrado;
	for(new x=0; x<=TotalVeh; x++)
	{
    	if(CarInfo[x][cLlave] == llave){VehEncontrado = x; break;}
	}
	if(VehEncontrado == 0){SendClientMessage(playerid, Rojo, "* Llave inválida, vehículo no encontrado."); return 1;}
    new Float:px,Float:py,Float:pz;
    GetPlayerPos(playerid, px, py, pz);
    SetVehiclePos(VehEncontrado, px, py, pz);
    SetVehicleVirtualWorld(VehEncontrado, GetPlayerVirtualWorld(playerid));
    LinkVehicleToInteriorEx(VehEncontrado, GetPlayerInterior(playerid));
    SetPlayerPos(playerid, px, py, (pz + 2.0));
	format(string, sizeof(string), "Has traido a tu posición el vehículo con llave %d.", llave);
    SendClientMessage(playerid, AzulClaro, string);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/congelar", true) == 0 || strcmp(cmd, "/con", true) == 0) //Congelar a un jugador
{
    tmp = strtok(cmdtext, idx);
    if(PlayerInfo[playerid][pAdmin] < 1){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /(Con)gelar [ID]");
        return 1;
    }
    playerid2 = ReturnUser(tmp);
    format(Nombre2, sizeof(Nombre2),"%s", GetPlayerNameRP(playerid2));
    format(Nombre, sizeof(Nombre),"%s", GetPlayerNameRP(playerid));
    if(IsPlayerConnected(playerid2))
    {
        if(playerid2 != INVALID_PLAYER_ID)
        {
			TogglePlayerControllable(playerid2, 0);
            format(string, sizeof(string), "Has congelado a '%s'.", Nombre2);
            SendClientMessage(playerid, AzulClaro, string);
            format(string, sizeof(string), "Has sido congelado por '%s'.", Nombre);
            SendClientMessage(playerid2, AzulClaro, string);
        }
    }
    else  {  SendClientMessage(playerid, Rojo, "* ID inválida.");  }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/descongelar", true) == 0 || strcmp(cmd, "/descon", true) == 0) //Descongelar a un jugador
{
    tmp = strtok(cmdtext, idx);
    if(PlayerInfo[playerid][pAdmin] < 1){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /(Descon)gelar [ID]");
        return 1;
    }
    playerid2 = ReturnUser(tmp);
    format(Nombre2, sizeof(Nombre2),"%s", GetPlayerNameRP(playerid2));
    format(Nombre, sizeof(Nombre),"%s", GetPlayerNameRP(playerid));
    if(IsPlayerConnected(playerid2))
    {
        if(playerid2 != INVALID_PLAYER_ID)
        {
			TogglePlayerControllable(playerid2, 1);
            format(string, sizeof(string), "Has descongelado a '%s'.", Nombre2);
            SendClientMessage(playerid, AzulClaro, string);
            format(string, sizeof(string), "Has sido descongelado por '%s'.", Nombre);
            SendClientMessage(playerid2, AzulClaro, string);
        }
    }
    else  {  SendClientMessage(playerid, Rojo, "* ID inválida.");  }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/recon", true) == 0) //Reconear a alguien
{
    if(PlayerInfo[playerid][pAdmin] <= 0 && !IsPlayerAdmin(playerid)){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
    {
        tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp)){SendClientMessage(playerid, Naranja, "* /Recon [ID]"); return 1;}
    	new specplayerid;
        specplayerid = ReturnUser(tmp);
        if(IsPlayerConnected(specplayerid) && specplayerid != INVALID_PLAYER_ID)
		{
		    if(specplayerid == playerid)
			{ SendClientMessage(playerid, Rojo, "* No te puedes reconear a tí mismo."); return 1; }
            if(GetPlayerState(specplayerid) == PLAYER_STATE_SPECTATING && PlayerInfo[playerid][pSpecID] != INVALID_PLAYER_ID)
			{ SendClientMessage(playerid, Rojo, "* Este jugador está reconeando."); return 1; }
			if(GetPlayerState(specplayerid) != 1 && GetPlayerState(specplayerid) != 2 && GetPlayerState(specplayerid) != 3)
			{ SendClientMessage(playerid, Rojo, "* ID inválida."); return 1; }
			if(GetPlayerState(playerid) != PLAYER_STATE_SPECTATING && PlayerInfo[playerid][pSpecID] == INVALID_PLAYER_ID)
			{
				GetPlayerPos(playerid,RecPos[playerid][0],RecPos[playerid][1],RecPos[playerid][2]);
				GetPlayerPos(playerid,PlayerInfo[playerid][pPosX],PlayerInfo[playerid][pPosY],PlayerInfo[playerid][pPosZ]);
				GetPlayerFacingAngle(playerid,RecPos[playerid][3]);
				IntRec[playerid] = (GetPlayerInterior(playerid));
				VwRec[playerid] = (GetPlayerVirtualWorld(playerid));
				PlayerInfo[playerid][pInterior] = IntRec[playerid];
	            PlayerInfo[playerid][pVirtualWorld] = VwRec[playerid];
			}
            StartSpectate(playerid, specplayerid);
			format(Nombre, sizeof(Nombre),"%s", GetPlayerNameRP(playerid));
			format(Nombre2, sizeof(Nombre2),"%s", GetPlayerNameRP(specplayerid));
			printf("%s esta reconeando a %s.", Nombre, Nombre2);
			format(string,sizeof(string),"Estás reconeando a '%s', para parar usa /reconoff.", Nombre2);
	 	    SendClientMessage(playerid,AzulClaro,string);
	 	    SendClientMessage(playerid,AzulClaro,"<< Shift | Espacio >>");
		}
		else { SendClientMessage(playerid,Rojo,"* ID inválida."); }
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------


if(strcmp(cmd, "/reconoff", true) == 0) //Dejar de reconear
{
    if(PlayerInfo[playerid][pAdmin] < 1){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
	if(PlayerInfo[playerid][pSpecType] != ADMIN_SPEC_TYPE_NONE)
	{
		StopSpectate(playerid);
		TogglePlayerControllable(playerid, 0);
		SetTimerEx("ReturnPosition",500,0,"d",playerid);
		SendClientMessage(playerid,AzulClaro,"* Has dejado de reconear.");
		SetPlayerSkin(playerid, PlayerInfo[playerid][pSkin]); PonerUniformeFaccion(playerid);
	}
	else { SendClientMessage(playerid,Rojo,"* No estás reconeando a nadie."); }
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/san", true) == 0) //Jailear jugadores
{
    if(PlayerInfo[playerid][pAdmin] < 1){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
    tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /San [ID] [Tiempo] [Razón]");
        return 1;
    }
    playerid2 = ReturnUser(tmp);
    tmp = strtok(cmdtext, idx);
    new time = strval(tmp);
    if(!IsNumeric(tmp) && !strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /San [ID] [Tiempo] [Razón]");
        return 1;
    }
    if(time < 0){SendClientMessage(playerid, Rojo, "* No puedes poner un tiempo negativo."); return 1;}
    if(IsPlayerConnected(playerid2) && playerid2 != INVALID_PLAYER_ID)
    {
        new length = strlen(cmdtext);
        while ((idx < length) && (cmdtext[idx] <= ' '))
        {
            idx++;
        }
        new offset = idx;
        new result[128];
        while ((idx < length) && ((idx - offset) < (sizeof(result) - 1)))
        {
            result[idx - offset] = cmdtext[idx];
            idx++;
        }
        result[idx - offset] = EOS;
        if(!strlen(result))
        {
            SendClientMessage(playerid, Naranja, "* /San [ID] [Tiempo] [Razón]");
            return 1;
        }
        format(Nombre2, sizeof(Nombre2),"%s", GetPlayerNameRP(playerid2));
        format(Nombre, sizeof(Nombre),"%s", GetPlayerNameRP(playerid));
        format(string, sizeof(string), "%s fue sancionado por %d minuto(s). Motivo: %s.", Nombre2, time, (result));
        SendClientMessageToAll(Rojo, string);
        format(string, sizeof(string), "Has encarcelado a '%s'.", Nombre2);
        SendClientMessage(playerid, AzulClaro, string);
        format(string, sizeof(string), "Has sido encarcelado por '%s'.", Nombre);
        SendClientMessage(playerid2, AzulClaro, string);
        printf("%s ha encarcelado a %s %d minutos por: %s", Nombre, Nombre2, time, (result));
        PlayerInfo[playerid2][pEncarcelado] = 3;
        PlayerInfo[playerid2][pTiempoCarcel] = time;
        if(time <= 0){UnJailPlayerOOC(playerid2); return 1;}
        SetTimerEx("JailPlayerOOC",100,0,"d",playerid2);
    }
    else
    {
        SendClientMessage(playerid,Rojo,"* ID inválida.");
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/desbug", true) == 0) //Desbuguear jugadores
{
    if(PlayerInfo[playerid][pAdmin] < 1){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
    tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Desbug [ID]");
        return 1;
    }
    playerid2 = ReturnUser(tmp);
    if(IsPlayerConnected(playerid2) && playerid2 != INVALID_PLAYER_ID)
    {
        format(Nombre2, sizeof(Nombre2),"%s", GetPlayerNameRP(playerid2));
        format(Nombre, sizeof(Nombre),"%s", GetPlayerNameRP(playerid));
        format(string, sizeof(string), "'%s' ha sido desbugueado por '%s'.", Nombre2, Nombre);
        SendClientMessageToAll(Rojo, string);
        format(string, sizeof(string), "Has desbugueado a '%s'.", Nombre2);
        SendClientMessage(playerid, AzulClaro, string);
        format(string, sizeof(string), "Has sido desbugueado por '%s'.", Nombre);
        SendClientMessage(playerid2, AzulClaro, string);
        printf("%s ha desbugueado a %s", Nombre, Nombre2);
		SetPlayerFacingAngle(playerid2, 0);
		SetPlayerVirtualWorld(playerid2, 0);
		SetPlayerInterior(playerid2, 0);
		SetPlayerPos(playerid2, 1479.1301,-1742.1343,13.5469);
		SetCameraBehindPlayer(playerid2);
		PlayerPlaySound(playerid2,1057,0.0,0.0,0.0);
	}
	else
    {
        SendClientMessage(playerid,Rojo,"* ID inválida.");
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/payday", true) == 0) //Fuerza el payday
{
    if(PlayerInfo[playerid][pAdmin] < 4){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
    for(new i = 0; i < MAX_PLAYERS; i++)
    {
        PlayerInfo[i][pMinPayDay] = 21;
		PayDay(i);
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/listaobjetos", true) == 0) //Lista de nombre de objetos
{
    new nick[MAX_PLAYER_NAME];
	GetPlayerName(playerid, nick, sizeof(nick));
    if(!strcmp(nick, "Luis_Maro", true) || !strcmp(nick, "Adrian_Winchester", true) || !strcmp(nick, "Dimitri_Molotov", true))
    tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
	{
    	SendClientMessage(playerid, Naranja, "* /ListaObjetos [1: 0-50 | 2: 50-100 | 3: 100-150 | 4: 150-200]");
		return 1;
	}
	new indice = strval(tmp);
	switch(indice)
	{
	    case 1:
	    {
	        for(new i = 0; i <= 50; i++)
		    {
				format(string, sizeof(string), "%d: %s", i, ObjetoInfo[i][NombreObjeto]);
		        SendClientMessage(playerid, Amarillo, string);
		    }
	    }
	    case 2:
	    {
	        for(new i = 50; i <= 100; i++)
		    {
				format(string, sizeof(string), "%d: %s", i, ObjetoInfo[i][NombreObjeto]);
		        SendClientMessage(playerid, Amarillo, string);
		    }
	    }
	    case 3:
	    {
	        for(new i = 100; i <= 150; i++)
		    {
				format(string, sizeof(string), "%d: %s", i, ObjetoInfo[i][NombreObjeto]);
		        SendClientMessage(playerid, Amarillo, string);
		    }
	    }
	    case 4:
	    {
	        for(new i = 150; i <= sizeof(ObjetoInfo); i++)
		    {
				format(string, sizeof(string), "%d: %s", i, ObjetoInfo[i][NombreObjeto]);
		        SendClientMessage(playerid, Amarillo, string);
		    }
	    }
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/acurar", true) == 0)
{
	if(PlayerInfo[playerid][pAdmin] < 2){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
	{
    	SendClientMessage(playerid, Naranja, "* /ACurar [ID]");
		return 1;
	}
	playerid2 = ReturnUser(tmp);
	if((playerid2 == INVALID_PLAYER_ID) || !IsPlayerConnected(playerid2))
	{
		SendClientMessage(playerid, Rojo, "* ID inválida.");
		return 1;
	}
	if(PlayerInfo[playerid2][pMuerto] == 0){SendClientMessage(playerid, Rojo, "* Este jugador no necesita ser reanimado."); return 1;}
    RemovePlayerFromVehicle(playerid2);
    SetCameraBehindPlayer(playerid2);
	format(string, sizeof(string), "El administrador '%s' ha reanimado a '%s'.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2));
    ProxDetector(15.0, playerid2, string, VerdeClaro,VerdeClaro,VerdeClaro,VerdeClaro,VerdeClaro);
    format(string, sizeof(string), "Has salvado a '%s' de su estado de desmayo.", GetPlayerNameRP(playerid2));
    SendClientMessage(playerid, AzulClaro, string);
    format(string, sizeof(string), "'%s' ha salvado a '%s' de su estado de desmayo.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2));
    SendAdminMessage(Aguamarina, string);
    printf(string);
	PlayerInfo[playerid2][pMuerto] = 0;
	KillTimer(MuertoTimer[playerid2]);
	KillTimer(MuertoFlashTimer[playerid2]);
	ClearAnimations(playerid2, 1);
	TogglePlayerControllable(playerid2, 1);
	RemovePlayerColorFade(playerid2);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/darropa", true) == 0) //Dar un skin a un jugador
{
    if(PlayerInfo[playerid][pAdmin] < 1){SendClientMessage(playerid, Rojo, "* Nivel de admin insuficiente."); return 1;}
    tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Darropa [ID] [Skin]");
        return 1;
    }
    playerid2 = ReturnUser(tmp);
    if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid,Rojo,"* ID inválida."); return 1;}
    tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Darropa [ID] [Skin]");
        return 1;
    }
    new SkinID = strval(tmp);
    if(SkinID < 1 || SkinID > 299){SendClientMessage(playerid, Rojo, "* El skin debe estar entre 1 y 299."); return 1;}
    SetPlayerSkin(playerid2, SkinID);
    PlayerInfo[playerid2][pSkin] = SkinID;
	format(string, sizeof(string), "'%s' te ha dado el skin %d.", GetPlayerNameRP(playerid), SkinID);
	SendClientMessage(playerid2, AzulClaro, string);
	format(string, sizeof(string), "Has dado el skin %d a '%s'.", SkinID, GetPlayerNameRP(playerid2));
	SendClientMessage(playerid, AzulClaro, string);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

//----------COMANDOS VEHÍCULOS----------//

if(strcmp(cmd, "/carid", true) == 0) //Retorna la ID del vehículo
{
	if(!IsPlayerInAnyVehicle(playerid)){SendClientMessage(playerid, Rojo, "* No estás en un vehículo."); return 1;}
	new carid = GetPlayerVehicleID(playerid);
	format(string, sizeof(string), "ID vehículo: %d.", carid);
	SendClientMessage(playerid, Naranja, string);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/oldcar", true) == 0) //Retorna la ID del vehículo en el que subió
{
	format(string, sizeof(string), "ID último vehículo en el que montaste: %d.", oldcarid[playerid]);
	SendClientMessage(playerid, Naranja, string);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/cinturon", true) == 0) //Pone/quita cinturón de seguridad
{
    if(!GetPlayerVehicleID(playerid)){SendClientMessage(playerid, Rojo, "* No estás en un vehículo."); return 1;}
    new car = GetPlayerVehicleID(playerid);
    if(IsABike(car) || IsAMBike(car) || IsABoat(car)){SendClientMessage(playerid, Rojo, "* Este vehículo no tiene cinturón."); return 1;}
    if(CinturonPuesto[playerid] == 0) //Ponerse cinturón
    {
        CinturonPuesto[playerid] = 1;
        format(string, sizeof(string), "* %s se coloca el cinturón de seguridad.", GetPlayerNameRP(playerid));
 	    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
    }
    else //Quitarse cinturón
    {
        format(string, sizeof(string), "* %s se quita el cinturón de seguridad.", GetPlayerNameRP(playerid));
 	    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
        CinturonPuesto[playerid] = 0;
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/motor", true) == 0) //Encender motor de un vehículo
{
	if(GetPlayerState(playerid) != PLAYER_STATE_DRIVER){SendClientMessage(playerid, Rojo, "* No estás en un vehículo como conductor."); return 1;}
	new car = GetPlayerVehicleID(playerid);
	if(IsABike(car)){SendClientMessage(playerid, Rojo, "* Este vehículo no tiene motor."); return 1;}
	EncenderMotorF(playerid, car);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/luces", true) == 0) //Encender luces de un vehículo
{
	if(GetPlayerState(playerid) != PLAYER_STATE_DRIVER){SendClientMessage(playerid, Rojo, "* No estás en un vehículo como conductor."); return 1;}
    new car = GetPlayerVehicleID(playerid);
	new engine,lights,alarm,doors,bonnet,boot,objective;
    GetVehicleParamsEx(car,engine,lights,alarm,doors,bonnet,boot,objective);
    if(lights == 0)SetVehicleParamsEx(car,engine,1,alarm,doors,bonnet,boot,objective);
    else SetVehicleParamsEx(car,engine,0,alarm,doors,bonnet,boot,objective);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/prestarllave", true) == 0) //Prestar llave
{
	tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /PrestarLlave [ID] [1/2/3/4/5]");
        return 1;
    }
    playerid2 = ReturnUser(tmp);
    if(playerid2 == playerid){SendClientMessage(playerid,Rojo,"* No te puedes prestar la llave a tí mismo."); return 1;}
    if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid,Rojo,"* ID inválida."); return 1;}
    tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /PrestarLlave [ID] [1/2/3/4/5]");
        return 1;
    }
    new slot = strval(tmp);
    if(slot < 1 || slot > 5){SendClientMessage(playerid, Rojo, "* El slot debe estar entre 1 y 5."); return 1;}
	if(!GetPlayersProx(5.0, playerid, playerid2)){SendClientMessage(playerid, Rojo, "* Demasiado lejos."); return 1;}
	if(PlayerInfo[playerid][pLlaveCoche][slot-1] == 0){SendClientMessage(playerid, Rojo, "* No tienes ninguna llave en ese slot."); return 1;}
	new tieneslotlibre = -1;
	for(new x=0; x<5; x++)
	{
	    if(PlayerInfo[playerid2][pLlaveCochePrestado][x] == 0){tieneslotlibre = x; break;}
	}
	if(tieneslotlibre == -1){SendClientMessage(playerid, Rojo, "* Ese jugador tiene todas las llaves de vehículos prestados ocupados."); return 1;}

	new yatienellave = -1;
	for(new x=0; x<5; x++)
	{
	    if(PlayerInfo[playerid][pLlaveCoche][slot-1] != PlayerInfo[playerid2][pLlaveCochePrestado][x]){yatienellave = x;break;}
	}
	if(yatienellave == -1){SendClientMessage(playerid, Rojo, "* Ese jugador ya tiene una llave prestada de ese vehículo."); return 1;}

	PrestadorCoche[playerid2] = playerid; // /PrestarLlave
    LlavePrestada[playerid2] = PlayerInfo[playerid][pLlaveCoche][slot-1];

	format(string, sizeof(string), "Has ofrecido la llave de tu vehículo LS-%d a %s. Espera una respuesta.", PlayerInfo[playerid][pLlaveCoche][slot-1], GetPlayerNameRP(playerid2));
	SendClientMessage(playerid, Amarillo, string);
	format(string, sizeof(string), "%s te ha ofrecido la llave de tu vehículo LS-%d. Escribe '/Aceptar Llave' para aceptarla.", GetPlayerNameRP(playerid), PlayerInfo[playerid][pLlaveCoche][slot-1]);
	SendClientMessage(playerid2, Amarillo, string);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/tirarllave", true) == 0) //Tirar llave prestada
{
    tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /TirarLlave [6/7/8/9/10]");
        return 1;
    }
    new slot = strval(tmp);
    if(slot < 6 || slot > 10){SendClientMessage(playerid, Rojo, "* El slot debe estar entre 6 y 10."); return 1;}
	if(PlayerInfo[playerid][pLlaveCochePrestado][slot-6] == 0){SendClientMessage(playerid, Rojo, "* No tienes ninguna llave en ese slot."); return 1;}

    format(string, sizeof(string), "* %s tira la llave del vehículo LS-%d.", GetPlayerNameRP(playerid), PlayerInfo[playerid][pLlaveCochePrestado][slot-6]);
 	ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
	format(string, sizeof(string), "Has tirado la llave del vehículo LS-%d.", PlayerInfo[playerid][pLlaveCochePrestado][slot-6]);
	SendClientMessage(playerid, Amarillo, string);

	PlayerInfo[playerid][pLlaveCochePrestado][slot-6] = 0;
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/ventanilla", true) == 0) //Subir bajar la ventanilla de un vehículo
{
	if(GetPlayerState(playerid) != PLAYER_STATE_DRIVER){SendClientMessage(playerid, Rojo, "* No estás en un vehículo como conductor."); return 1;}
	new carid = GetPlayerVehicleID(playerid);
	if(IsABike(carid) || IsAMBike(carid) || IsAPizzaBike(carid) || IsABoat(carid) || IsAPlane(carid)){SendClientMessage(playerid, Rojo, "* Este vehículo no tiene ventanillas."); return 1;}
 	if(VehicleWindows[carid] == 0)
 	{
 	    format(string, sizeof(string), "* %s baja la ventanilla de su vehículo.", GetPlayerNameRP(playerid));
 	    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
 	    VehicleWindows[carid] = 1;
 	}
 	else
 	{
 	    format(string, sizeof(string), "* %s sube la ventanilla de su vehículo.", GetPlayerNameRP(playerid));
 	    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
 	    VehicleWindows[carid] = 0;
 	}
 	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/bloqueo", true) == 0) //Abrir o cerrar vehículo
{
    tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Bloqueo [1/2/3/4/5|6/7/8/9/10]");
        return 1;
    }
    new slot = strval(tmp);
    if(slot < 1 || slot > 10){SendClientMessage(playerid, Rojo, "* El número del slot debe estar entre 1 y 10."); return 1;}
    if(slot < 6)
    {
    	if(PlayerInfo[playerid][pLlaveCoche][slot-1] == 0){SendClientMessage(playerid, Rojo, "* No tienes ninguna llave en ese slot."); return 1;}
     
    }
    else if(slot < 11)
    {
    	if(PlayerInfo[playerid][pLlaveCochePrestado][slot-6] == 0){SendClientMessage(playerid, Rojo, "* No tienes ninguna llave en ese slot."); return 1;}
    }
	new car;
	if(slot < 6)
	{
		for(new x=MAX_VEHPUBLICO+1; x <= TotalVeh; x++)
		{
			//printf("Iteraccion: %i , Vehiculo ID: %i , clave ID: %i , Modelo: %s",x,CarInfo[x][cID],CarInfo[x][cLlave],CarInfo[x][cNombreModelo]);
		    if(CarInfo[x][cLlave] == PlayerInfo[playerid][pLlaveCoche][slot-1]){car = x; break;}
		}
	}
	else if(slot < 11)
	{
		for(new x=MAX_VEHPUBLICO+1; x <= TotalVeh; x++)
		{
		    if(CarInfo[x][cLlave] == PlayerInfo[playerid][pLlaveCochePrestado][slot-6]){car = x; break;}
		}
	}
	
	new Float:vX, Float:vY, Float:vZ;
	GetVehiclePos(car, vX, vY, vZ);
	//printf("Vehiculo ID: %i , clave ID: %i , Modelo: %s",CarInfo[car][cID],CarInfo[car][cLlave],CarInfo[car][cNombreModelo]);
	if(!IsPlayerInRangeOfPoint(playerid, 20, vX, vY, vZ)){SendClientMessage(playerid, Rojo, "* Debes estar a menos de 20 metros."); return 1;}
	new engine,lights,alarm,doors,bonnet,boot,objective;
    GetVehicleParamsEx(car,engine,lights,alarm,doors,bonnet,boot,objective);
    //printf("2 Vehiculo ID: %i , clave ID: %i , Modelo: %s",CarInfo[car][cID],CarInfo[car][cLlave],CarInfo[car][cNombreModelo]);
	if(CarInfo[car][cCerrado] == 0)
	{
		SetVehicleParamsEx(car,engine,lights,alarm,1,bonnet,boot,objective);
		CarInfo[car][cCerrado] = 1;
		GameTextForPlayer(playerid, "~w~Coche ~r~Cerrado", 1000, 3);
		PlayerPlaySound(playerid, 1147, 0, 0, 0);
	}
    else
	{
		SetVehicleParamsEx(car,engine,lights,alarm,0,bonnet,boot,objective);
		CarInfo[car][cCerrado] = 0;
		GameTextForPlayer(playerid, "~w~Coche ~g~Abierto", 1000, 3);
		PlayerPlaySound(playerid, 1147, 0, 0, 0);
	}
    return 1;
}
// Facciones

if(strcmp(cmd, "/bloqueof", true) == 0) //
{
	if(!IsPlayerInAnyVehicle(playerid))
    	return SendClientMessage(playerid, Rojo, "* Tienes que estar en un vehículo de facción.");

	if(PlayerInfo[playerid][pFaccion] == 0 || PlayerInfo[playerid][pFaccion] > TotalFaccs){SendClientMessage(playerid,Rojo,"* No formas parte de una facción pública."); return 1;}
	new Float:vX, Float:vY, Float:vZ,car;
	car = GetPlayerVehicleID(playerid);
	GetVehiclePos(car, vX, vY, vZ);
	if(!IsPlayerInRangeOfPoint(playerid, 20, vX, vY, vZ)){SendClientMessage(playerid, Rojo, "* Debes estar a menos de 20 metros."); return 1;}
	if(CarInfo[car][cCerrado] == 0)
	{
		CarInfo[car][cCerrado] = 1;
		for(new x=MAX_VEHPUBLICO+1; x <= TotalVeh; x++)
		{
    	   SetVehicleParamsForPlayer(car, playerid, false, true);
		}
		format(string, sizeof(string), "Vehículo cerrado.");
		SendClientMessage(playerid, Amarillo, string);
		PlayerPlaySound(playerid, 1147, 0, 0, 0);
	}
    else
	{
		CarInfo[car][cCerrado] = 0;
		for(new x=MAX_VEHPUBLICO+1; x <= TotalVeh; x++)
		{
    	   SetVehicleParamsForPlayer(car, playerid, false, false);
		}
		format(string, sizeof(string), "Vehículo abierto.");
		SendClientMessage(playerid, Amarillo, string);
		PlayerPlaySound(playerid, 1147, 0, 0, 0);
	}
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/gas", true) == 0) //Mirar combustible del vehículo
{
    if(!GetPlayerVehicleID(playerid)){SendClientMessage(playerid, Rojo, "* No estás en un vehículo."); return 1;}
    new carid = GetPlayerVehicleID(playerid);
    if(carid <= MAX_VEHPUBLICO){return 1;}
    format(string, sizeof(string), "Cantidad de combustible en el depósito: %dL.", CarInfo[carid][cGas]);
    SendClientMessage(playerid, Amarillo, string);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/rellenar", true) == 0) //Llenar depósito de un vehículo
{
	if(LlenandoDeposito[playerid] == 1){SendClientMessage(playerid, Rojo, "* Ya estás rellenando el depósito."); return 1;}
    if(GetPlayerState(playerid) != PLAYER_STATE_DRIVER){SendClientMessage(playerid, Rojo, "* No estás en un vehículo como conductor."); return 1;}
    new carid = GetPlayerVehicleID(playerid);
    if(carid <= MAX_VEHPUBLICO || IsABike(carid)){SendClientMessage(playerid, Rojo, "* Este vehículo no puede ser llenado."); return 1;}
    if(CarInfo[carid][cGas] >= 100){SendClientMessage(playerid, Rojo, "* Este vehículo tiene el depósito lleno."); return 1;}
    if(IsPlayerInRangeOfPoint(playerid, 8.0, 1942.3715,-1772.8678,13.6406)){} //Si no está en una gasolinera
    else if(IsPlayerInRangeOfPoint(playerid, 8.0, 1004.0308,-937.5370,42.3281)){}
    else if(IsPlayerInRangeOfPoint(playerid, 8.0, 655.8026,-564.9006,16.3359)){}
    else if(IsPlayerInRangeOfPoint(playerid, 8.0, 1382.3381,460.1285,20.3452)){}
    else if(IsPlayerInRangeOfPoint(playerid, 8.0, -90.7019,-1168.8009,2.4183)){}
    else if(IsPlayerInRangeOfPoint(playerid, 8.0, 1789.1157,-2042.0454,13.5370)){}
    else if(IsPlayerInRangeOfPoint(playerid, 8.0, 813.817932 , -573.802307 , 16.321636)){}
    else if(IsPlayerInRangeOfPoint(playerid, 8.0, 804.723632 , -573.470947 , 16.321636)){}
    else{SendClientMessage(playerid, Rojo, "* No estás en una gasolinera."); return 1;}
    tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Rellenar [Cantidad]");
        return 1;
    }
    new cantidad = strval(tmp);
    if(cantidad < 0 || cantidad > 100){SendClientMessage(playerid, Rojo, "* La cantidad debe estar entre 1 y 100."); return 1;}
    new precio = (cantidad*1);
    if(GetPlayerMoney(playerid) < precio){format(string, sizeof(string), "* No tienes suficiente dinero (%d$).", precio); SendClientMessage(playerid, Rojo, string); return 1;}
    TogglePlayerControllable(playerid, 0);
    if((100-CarInfo[carid][cGas]) < cantidad)cantidad = (100-CarInfo[carid][cGas]), precio = cantidad*1; //Si cantidad es mayor a capacidad del depósito, hacer la resta y ajustar precio
    CarInfo[carid][cGas] += cantidad; //Dar combustible al coche
    format(string, sizeof(string), "* Un operario se acerca al vehículo de %s y comienza a rellenarle el depósito.", GetPlayerNameRP(playerid));
 	ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
    format(string, sizeof(string), "FACTURA: %dL | %d$.", cantidad, precio);
    SendClientMessage(playerid, AmarilloClaro, string);
    format(string, sizeof(string), "Depósito: %dL.", CarInfo[carid][cGas]);
	SendClientMessage(playerid, AmarilloClaro, string);
	GivePlayerMoneyAC(playerid, -precio);
	LlenandoDeposito[playerid] = 1;
	SetTimerEx("LlenarDeposito", 7000, false, "i", playerid);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/venderveh", true) == 0) //Vender vehículo al desguace
{
	if(GetPlayerState(playerid) != PLAYER_STATE_DRIVER){SendClientMessage(playerid, Rojo, "* No estás en un vehículo como conductor."); return 1;}
	if(GetPlayerVehicleID(playerid) <= MAX_VEHPUBLICO){SendClientMessage(playerid, Rojo, "* No eres dueño de este vehículo."); return 1;}
	new EsPropietario;
	for(new x=0; x<5; x++)
	{
	    if(CarInfo[GetPlayerVehicleID(playerid)][cLlave] == PlayerInfo[playerid][pLlaveCoche][x])EsPropietario = 1;
	}
    if(EsPropietario == 0){SendClientMessage(playerid, Rojo, "* No eres dueño de este vehículo."); return 1;}
    new carid = GetPlayerVehicleID(playerid);
    if(IsAPlane(carid)){SendClientMessage(playerid, Rojo, "* Para vender aviones habla con un admin."); return 1;}
	if(!PlayerInfo[playerid][pAdmin] >= 5 && !IsPlayerInRangeOfPoint(playerid, 5.0, 2274.1028,-2345.5371,13.5469) && !IsPlayerInRangeOfPoint(playerid, 8.0, 2294.3999000,-2447.8000500,0.0000000))
	{
		if(!IsABoat(carid)){SetPlayerCheckpoint(playerid, 2274.1028,-2345.5371,13.5469, 4.0);}
		if(IsABoat(carid)){SetPlayerCheckpoint(playerid, 2294.3999,-2447.8000,0.0000, 4.0);}
		SendClientMessage(playerid, Rojo, "* No estás en el desguace.");
		return 1;
	}
	new precio = (3*CarInfo[carid][cValor]/5);
	if(VenderVeh[playerid] == 0)
	{
	    format(string, sizeof(string), "¿Estás seguro de que deseas vender tu %s al desguace? Recibirás 3/5 de su valor por él (%d$).", CarInfo[carid][cNombreModelo], precio);
		SendClientMessage(playerid, Amarillo, string);
		SendClientMessage(playerid, Amarillo, "Escribe '/VenderVeh' de nuevo para realizar la venta.");
		VenderVeh[playerid] = 1;
	}
	else
	{
	    for(new x=0; x<5; x++)
		{
		    if(CarInfo[carid][cLlave] == PlayerInfo[playerid][pLlaveCoche][x])PlayerInfo[playerid][pLlaveCoche][x] = 0;
		}
	    format(string, sizeof(string), "Recibes %d$ por tu %s.", precio, CarInfo[carid][cNombreModelo]);
		SendClientMessage(playerid, Verde, string);
		DestroyVehicle(carid);
		CarInfo[carid][cLlave] = 0;
		CarInfo[carid][cModelo] = 0;
		CarInfo[carid][cPosX] = 0;
		CarInfo[carid][cPosY] = 0;
		CarInfo[carid][cPosZ] = 0;
		CarInfo[carid][cZAngle] = 0;
		CarInfo[carid][cColor1] = 0;
		CarInfo[carid][cColor2] = 0;
		CarInfo[carid][cComprado] = 0;
		CarInfo[carid][cDueno] = 0;
		CarInfo[carid][cNombreModelo] = 0;
		CarInfo[carid][cValor] = 0;
		CarInfo[carid][cCerrado] = 0;
		CarInfo[carid][cGas] = 0;
		CarInfo[carid][cEnDeposito] = 0;
		for(new x=0; x<7; x++)
		{
			CarInfo[idx][cMaletero][x] = 0;
		}

		for(new x=0; x<7; x++)
		{
			CarInfo[idx][cMaleteroCant][x] = 0;
		}
		CarInfo[idx][cMaxMaletero] = 0;
		GivePlayerMoneyAC(playerid, precio);
	    VenderVeh[playerid] = 0;
        PlayerSave(playerid);
        SaveCar(carid);
	}
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/venderveha", true) == 0) //Vender vehículo a otro jugador
{
	if(GetPlayerState(playerid) != PLAYER_STATE_DRIVER){SendClientMessage(playerid, Rojo, "* No estás en un vehículo como conductor."); return 1;}
	if(GetPlayerVehicleID(playerid) <= MAX_VEHPUBLICO){SendClientMessage(playerid, Rojo, "* No eres dueño de este vehículo."); return 1;}
	new EsPropietario;
	for(new x=0; x<5; x++)
	{
	    if(CarInfo[GetPlayerVehicleID(playerid)][cLlave] == PlayerInfo[playerid][pLlaveCoche][x])EsPropietario = 1;
	}
    if(EsPropietario == 0){SendClientMessage(playerid, Rojo, "* No eres dueño de este vehículo."); return 1;}
    new carid = GetPlayerVehicleID(playerid);
	tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /VenderVehA [ID] [Precio]");
        return 1;
    }
    playerid2 = ReturnUser(tmp);
    if(playerid2 == playerid){SendClientMessage(playerid,Rojo,"* No te puedes vender el vehículo a tí mismo."); return 1;}
    if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid,Rojo,"* ID inválida."); return 1;}
    if(!GetPlayersProx(5.0, playerid, playerid2)){SendClientMessage(playerid, Rojo, "* Demasiado lejos."); return 1;}
    new SlotDisponible = NOEXISTE;
    for(new x=0; x<5; x++)
    {
        if(PlayerInfo[playerid2][pLlaveCoche][x] == 0){SlotDisponible = x; break;}
    }
    if(SlotDisponible == NOEXISTE){SendClientMessage(playerid, Rojo, "* Este jugador tiene todos los huecos de llaves ocupados."); return 1;}
    tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /VenderVehA [ID] [Precio]");
        return 1;
    }
    new precio = strval(tmp);
    if(precio < 1 || precio > CarInfo[carid][cValor]){SendClientMessage(playerid, Rojo, "* El precio debe estar entre 1$ y el valor neto del propio vehículo."); return 1;}
    format(string, sizeof(string), "* %s te ofrece su %s por %d$. Escribe '/Aceptar CompraVeh' para comprárselo.", GetPlayerNameRP(playerid), CarInfo[carid][cNombreModelo], precio);
    SendClientMessage(playerid2, Amarillo, string);
    format(string, sizeof(string), "* Has ofrecido tu %s a %s por %d$. Espera a que responda.", CarInfo[carid][cNombreModelo], GetPlayerNameRP(playerid2), precio);
    SendClientMessage(playerid, Amarillo, string);
    VenderVehAPrecio[playerid2] = precio;
	VenderVehAVendedor[playerid2] = playerid;
	VenderVehALlave[playerid2] = CarInfo[carid][cLlave];
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/localizarveh", true) == 0) //Localizar un vehículo
{
    tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /LocalizarVeh [1/2/3/4/5]");
        SendClientMessage(playerid, Naranja, "Precio: 50$.");
        return 1;
    }
    new slot = strval(tmp);
    if(slot < 1 || slot > 5){SendClientMessage(playerid, Rojo, "* El número del slot debe estar entre 1 y 5."); return 1;}
    if(PlayerInfo[playerid][pLlaveCoche][slot-1] == 0){SendClientMessage(playerid, Rojo, "* No tienes ninguna llave en ese slot."); return 1;}
	new car;
	for(new x=MAX_VEHPUBLICO+1; x <= TotalVeh; x++)
	{
	    if(CarInfo[x][cLlave] == PlayerInfo[playerid][pLlaveCoche][slot-1]){car = x; break;}
	}
	if(!IsValidVehicle(car)){SendClientMessage(playerid, Rojo, "* Vehículo no encontrado."); return 1;}
	if(CarInfo[car][cEnDeposito] == 1) //Si está en desguace
	{
	    if(IsABoat(car)){SetPlayerCheckpoint(playerid, 2294.3999,-2447.8000,0.0000, 4.0);}
	    if(!IsABoat(car)){SetPlayerCheckpoint(playerid, 2274.1028,-2345.5371,13.5469, 4.0);}
	    SendClientMessage(playerid, Amarillo, "* Tu vehículo se encuentra en el depósito de Ocean Docks.");
	    LocalizarVeh[playerid] = 1;
	    return 1;
	}
	if(CarInfo[car][cEnDeposito] == 2) //Si está en depósito LSPD
	{
	    SetPlayerCheckpoint(playerid, 1621.5406,-1866.9160,13.5469, 4.0);
	    SendClientMessage(playerid, Amarillo, "* Tu vehículo se encuentra en el depósito de LSPD.");
	    LocalizarVeh[playerid] = 1;
	    return 1;
	}
	new Float:vX, Float:vY, Float:vZ;
	GetVehiclePos(car, vX, vY, vZ);
	SetPlayerCheckpoint(playerid, vX,vY,vZ, 4.0);
	SendClientMessage(playerid, Amarillo, "* Vehículo localizado por 50$.");
	PlayerInfo[playerid][pDineroBanco] -= 50;
	LocalizarVeh[playerid] = 1;
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/desembargar", true) == 0) //Sacar vehículo del depósito LSPD
{
    tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Desembargar [1/2/3/4/5]");
        return 1;
    }
    new slot = strval(tmp);
    if(slot < 1 || slot > 5){SendClientMessage(playerid, Rojo, "* El número del slot debe estar entre 1 y 5."); return 1;}
    if(PlayerInfo[playerid][pLlaveCoche][slot-1] == 0){SendClientMessage(playerid, Rojo, "* No tienes ninguna llave en ese slot."); return 1;}
	new car;
	for(new x=MAX_VEHPUBLICO+1; x <= TotalVeh; x++)
	{
	    if(CarInfo[x][cLlave] == PlayerInfo[playerid][pLlaveCoche][slot-1]){car = x; break;}
	}

	if(CarInfo[car][cEnDeposito] != 2){SendClientMessage(playerid, Rojo, "* Este vehículo no se encuentra en el depósito de LSPD."); return 1;}

	if(!IsPlayerInRangeOfPoint(playerid, 7.0, 1621.5406,-1866.9160,13.5469))
	{
		SendClientMessage(playerid, Rojo, "* No estás en el depósito de LSPD.");
		return 1;
	}

	new precio = (CarInfo[car][cValor]/30);

	if(GetPlayerMoney(playerid) < precio)
	{
	    format(string, sizeof(string), "* Necesitas %d$ para sacar este vehículo del depósito.", precio);
	    SendClientMessage(playerid, Rojo, string);
	    return 1;
	}

	for(new i=0; i <= TotalVeh; i++)
	{
		if(IsVehicleInRangeOfPoint(4.0, i, 1621.5406,-1866.9160,13.5469))
		{
			SendClientMessage(playerid, Rojo, "* Hay un vehículo en el punto de entrega.");
			return 1;
		}
	}

 	GivePlayerMoneyAC(playerid, -precio);
	format(string, sizeof(string), "* Has retirado tu %s del depósito de LSPD por %d$.", CarInfo[car][cNombreModelo], precio);
    SendClientMessage(playerid, Amarillo, string);
    format(string, sizeof(string), "'%s' ha sacado su %s del depósito de LSPD por %d$.", GetPlayerNameRP(playerid), CarInfo[car][cNombreModelo], precio);
    SendAdminMessage(Aguamarina, string);
    printf(string);
    CarInfo[car][cEnDeposito] = 0;
    CarInfo[car][cGas] = 15;
    SetVehiclePos(car, 1621.5406,-1866.9160,13.5469);
	SetVehicleZAngle(car, 90);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/sacardeposito", true) == 0) //Sacar vehículo del desguace
{
    tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /SacarDeposito [1/2/3/4/5]");
        return 1;
    }
    new slot = strval(tmp);
    if(slot < 1 || slot > 5){SendClientMessage(playerid, Rojo, "* El número del slot debe estar entre 1 y 5."); return 1;}
    if(PlayerInfo[playerid][pLlaveCoche][slot-1] == 0){SendClientMessage(playerid, Rojo, "* No tienes ninguna llave en ese slot."); return 1;}
	new car;
	for(new x=MAX_VEHPUBLICO+1; x <= TotalVeh; x++)
	{
	    if(CarInfo[x][cLlave] == PlayerInfo[playerid][pLlaveCoche][slot-1]){car = x; break;}
	}

	if(CarInfo[car][cEnDeposito] != 1){SendClientMessage(playerid, Rojo, "* Este vehículo no se encuentra en el depósito de Ocean Docks."); return 1;}

	if(!IsPlayerInRangeOfPoint(playerid, 4.0, 2274.1028,-2345.5371,13.5469) && !IsPlayerInRangeOfPoint(playerid, 8.0, 2286.8096,-2423.5090,3.0000))
	{
		SendClientMessage(playerid, Rojo, "* No estás en el depósito de Ocean Docks.");
		return 1;
	}

	new precio = (CarInfo[car][cValor]/12);

	if(GetPlayerMoney(playerid) < precio)
	{
	    format(string, sizeof(string), "* Necesitas %d$ para sacar este vehículo del depósito.", precio);
	    SendClientMessage(playerid, Rojo, string);
	    return 1;
	}

	if(IsABoat(car) && !IsPlayerInRangeOfPoint(playerid, 4.0, 2286.8096,-2423.5090,3.0000))
	{
		SendClientMessage(playerid, Rojo, "* Este vehículo es un barco. Ve al muelle de carga del depósito.");
		SetPlayerCheckpoint(playerid, 2286.8096,-2423.5090,3.0000, 4.0);
		return 1;
	}
	if(!IsABoat(car) && !IsPlayerInRangeOfPoint(playerid, 4.0, 2274.1028,-2345.5371,13.5469))
	{
	    SendClientMessage(playerid, Rojo, "* Este vehículo no es un barco. Ve a la entrada principal del depósito.");
		SetPlayerCheckpoint(playerid, 2274.1028,-2345.5371,13.5469, 4.0);
		return 1;
 	}

 	for(new i=0; i <= TotalVeh; i++)
	{
		if(!IsABoat(car) && IsVehicleInRangeOfPoint(4.0, i, 2274.1028,-2345.5371,13.5469) && GetVehicleVirtualWorld(i) == 0)
		{
			SendClientMessage(playerid, Rojo, "* Hay un vehículo en el punto de entrega.");
			return 1;
		}
		if(IsABoat(car) && IsVehicleInRangeOfPoint(4.0, i, 2294.3999,-2447.8000,0.0000) && GetVehicleVirtualWorld(i) == 0)
		{
			SendClientMessage(playerid, Rojo, "* Hay un vehículo en el punto de entrega.");
			return 1;
		}
	}

 	GivePlayerMoneyAC(playerid, -precio);
	format(string, sizeof(string), "* Has retirado tu %s del depósito de Ocean Docks por %d$.", CarInfo[car][cNombreModelo], precio);
    SendClientMessage(playerid, Amarillo, string);
    format(string, sizeof(string), "'%s' ha sacado su %s del depósito de Ocean Docks por %d$.", GetPlayerNameRP(playerid), CarInfo[car][cNombreModelo], precio);
    SendAdminMessage(Aguamarina, string);
    printf(string);
    SetVehicleVirtualWorld(car, 0);
    LinkVehicleToInteriorEx(car, 0);
    CarInfo[car][cEnDeposito] = 0;
    CarInfo[car][cGas] = 15;
    if(IsABoat(car)){SetVehiclePos(car, 2294.3999,-2447.8000,0.0000);}
    if(!IsABoat(car)){SetVehiclePos(car, 2274.1028,-2345.5371,13.5469);}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/capo", true) == 0) //Abrir capó del vehículo
{
	if(!IsPlayerInAnyVehicle(playerid) || GetPlayerState(playerid) != 2){SendClientMessage(playerid, Rojo, "* No estás en un vehículo como conductor."); return 1;}
	new car = GetPlayerVehicleID(playerid);
	if(IsABike(car) || IsAMBike(car) || IsABoat(car) || IsAPlane(car)){SendClientMessage(playerid, Rojo, "* Este vehículo no tiene capó."); return 1;}
    new engine,lights,alarm,doors,bonnet,boot,objective;
    GetVehicleParamsEx(car,engine,lights,alarm,doors,bonnet,boot,objective);
    if(VehCapo[car] == 1)
    {
        SetVehicleParamsEx(car,engine,lights,alarm,doors,0,boot,objective);
        format(string, sizeof(string), "* %s cierra el capó de su vehículo.", GetPlayerNameRP(playerid));
 	    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
 	    VehCapo[car] = 0;
    }
    else
    {
        SetVehicleParamsEx(car,engine,lights,alarm,doors,1,boot,objective);
        format(string, sizeof(string), "* %s abre el capó de su vehículo.", GetPlayerNameRP(playerid));
 	    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
 	    VehCapo[car] = 1;
    }
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/maletero", true) == 0 || strcmp(cmd, "/mal", true) == 0) //Abrir maletero del vehículo
{
    new opcion[128];
	opcion = strtok(cmdtext, idx);
	if(!strlen(opcion))
	{
		SendClientMessage(playerid, Naranja, "* /(Mal)etero [Abrir/Ver/Cerrar]");
		return 1;
	}

 	if(IsPlayerInAnyVehicle(playerid)){SendClientMessage(playerid, Rojo, "* No puedes abrir el maletero desde dentro de un vehículo."); return 1;}

	if(strcmp(opcion,"abrir",true) == 0) //Abrir maletero
	{
	    new car, Float:distancia = 4.0, Float:vX, Float:vY, Float:vZ;
		for(new x=0; x <= TotalVeh; x++)
		{
		    GetVehiclePos(x, vX, vY, vZ);
		    if(IsPlayerInRangeOfPoint(playerid, 3.5, vX, vY, vZ) && !IsABike(x) && VehMaletero[x] == 0 && (PlayerTieneLlaveVeh(playerid, x) || PlayerEsFaccionVeh(playerid, x)))
		    {
		        if(GetPlayerDistanceFromPoint(playerid, vX, vY, vZ) <= distancia)distancia = GetPlayerDistanceFromPoint(playerid, vX, vY, vZ), car = x;
		    }
		}
		if(car == 0){SendClientMessage(playerid, Rojo, "* No se ha detectado ningún vehículo a tu alrededor que puedas abrir."); return 1;}
		new engine,lights,alarm,doors,bonnet,boot,objective;
	    GetVehicleParamsEx(car,engine,lights,alarm,doors,bonnet,boot,objective);
	    SetVehicleParamsEx(car,engine,lights,alarm,doors,bonnet,1,objective);
        format(string, sizeof(string), "* %s abre el maletero de un vehículo.", GetPlayerNameRP(playerid));
 	    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
 	    VehMaletero[car] = 1;
 	    MostrarMaletero(playerid, car);
	    VehMaleteroPlayer[playerid] = car;
 	    return 1;
	}
	else if(strcmp(opcion,"ver",true) == 0) //Mostrar maletero
	{
	    new car, Float:distancia = 3.5, Float:vX, Float:vY, Float:vZ;
		for(new x=0; x <= TotalVeh; x++)
		{
		    GetVehiclePos(x, vX, vY, vZ);
		    if(IsPlayerInRangeOfPoint(playerid, 4.0, vX, vY, vZ) && !IsABike(x) && VehMaletero[x] == 1)
		    {
		        if(GetPlayerDistanceFromPoint(playerid, vX, vY, vZ) <= distancia)distancia = GetPlayerDistanceFromPoint(playerid, vX, vY, vZ), car = x;
		    }
		}
		if(car == 0){SendClientMessage(playerid, Rojo, "* No se ha detectado ningún vehículo a tu alrededor con el maletero abierto."); return 1;}
	    MostrarMaletero(playerid, car);
	    VehMaleteroPlayer[playerid] = car;
	    return 1;
	}
	else if(strcmp(opcion,"cerrar",true) == 0) //Cerrar maletero
	{
	    new car, Float:distancia = 3.5, Float:vX, Float:vY, Float:vZ;
		for(new x=0; x <= TotalVeh; x++)
		{
		    GetVehiclePos(x, vX, vY, vZ);
		    if(IsPlayerInRangeOfPoint(playerid, 4.0, vX, vY, vZ) && !IsABike(x) && VehMaletero[x] == 1)
		    {
		        if(GetPlayerDistanceFromPoint(playerid, vX, vY, vZ) <= distancia)distancia = GetPlayerDistanceFromPoint(playerid, vX, vY, vZ), car = x;
		    }
		}
		if(car == 0){SendClientMessage(playerid, Rojo, "* No se ha detectado ningún vehículo a tu alrededor con el maletero abierto."); return 1;}
		new engine,lights,alarm,doors,bonnet,boot,objective;
    	GetVehicleParamsEx(car,engine,lights,alarm,doors,bonnet,boot,objective);
	    SetVehicleParamsEx(car,engine,lights,alarm,doors,bonnet,0,objective);
        format(string, sizeof(string), "* %s cierra el maletero de un vehículo.", GetPlayerNameRP(playerid));
 	    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
 	    VehMaletero[car] = 0;
 	    return 1;
	}
	else{SendClientMessage(playerid, Naranja, "* /(Mal)etero [Abrir/Ver/Cerrar]"); return 1;}
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/remolcar", true) == 0) //Remolcar un vehículo
{
	if(PlayerInfo[playerid][pFaccion] != 1 && PlayerInfo[playerid][pFaccion] != 5 && PlayerInfo[playerid][pRango] < 3){SendClientMessage(playerid, Rojo, "* No eres mecánico o policía."); return 1;}
	if((PlayerInfo[playerid][pFaccion] == 1 && PlayerInfo[playerid][pServicioPD] == 0)){SendClientMessage(playerid, Rojo, "* No estás de servicio como policía."); return 1;}
	if(PlayerInfo[playerid][pServicioWCST] == 0){SendClientMessage(playerid,Rojo,"* No estás de servicio como mecánico."); return 1;}
	if(GetVehicleModel(GetPlayerVehicleID(playerid)) != 525 || GetPlayerState(playerid) != 2){SendClientMessage(playerid, Rojo, "* No estás en una grúa como conductor."); return 1;}
	new Float:vX,Float:vY,Float:vZ;
	new car, Float:distancia = 7.0;
	new IDGrua = GetPlayerVehicleID(playerid);
	for(new x=0; x <= TotalVeh; x++)
	{
	    GetVehiclePos(x, vX, vY, vZ);
	    if(IsVehicleInRangeOfPoint(7.0,IDGrua, vX, vY, vZ) && x != IDGrua && !IsABike(x))
	    {
	        if(GetVehicleDistanceFromPoint(IDGrua, vX, vY, vZ) <= distancia)distancia = GetVehicleDistanceFromPoint(IDGrua, vX, vY, vZ), car = x;
	    }
	}
	if(car == 0){SendClientMessage(playerid, Rojo, "* No se ha detectado ningún vehículo alrededor de la grúa."); return 1;}
	if(IsTrailerAttachedToVehicle(IDGrua))
	{
    	DetachTrailerFromVehicle(IDGrua);
    	SendClientMessage(playerid, Amarillo, "Vehículo desenganchado.");
   	}
   	else
   	{
		AttachTrailerToVehicle(car,IDGrua);
		SendClientMessage(playerid, Amarillo, "Vehículo enganchado.");
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

//----------COMANDOS LÍDER----------//

if(strcmp(cmd, "/reclutar", true) == 0) //Invitar gente a una facción
{
	if(PlayerInfo[playerid][pLider] <= 0){SendClientMessage(playerid,Rojo,"* No eres líder de una facción."); return 1;}
	tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Reclutar [ID]");
        return 1;
    }
    playerid2 = ReturnUser(tmp);
    if(playerid2 == playerid){SendClientMessage(playerid,Rojo,"* No te puedes reclutar a tí mismo."); return 1;}
    if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid,Rojo,"* ID inválida."); return 1;}
    if(PlayerInfo[playerid][pFaccion] == PlayerInfo[playerid2][pFaccion]){SendClientMessage(playerid,Rojo,"* Este jugador ya forma parte de tu facción."); return 1;}
    if(PlayerInfo[playerid2][pFaccion] != 0){SendClientMessage(playerid,Rojo,"* Este jugador ya forma parte de una facción."); return 1;}
    if(!GetPlayersProx(5.0, playerid, playerid2)){SendClientMessage(playerid, Rojo, "* Demasiado lejos."); return 1;}
    reclutarfaccion[playerid2] = PlayerInfo[playerid][pFaccion];
    reclutarlider[playerid2] = playerid;
	format(string, sizeof(string), "* %s te ha invitado a su facción. Escribe '/Aceptar Faccion' para unirte", GetPlayerNameRP(playerid));
	SendClientMessage(playerid2, Amarillo, string);
	format(string, sizeof(string), "* Has invitado a %s a tu facción, espera a que responda.", GetPlayerNameRP(playerid2));
	SendClientMessage(playerid, Amarillo, string);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/promover", true) == 0) //Dar rangos a miembros de una facción
{
	if(PlayerInfo[playerid][pLider] <= 0){SendClientMessage(playerid,Rojo,"* No eres líder de una facción."); return 1;}
	tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Promover [ID] [Rango]");
        return 1;
    }
    playerid2 = ReturnUser(tmp);
    if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid,Rojo,"* ID inválida."); return 1;}
    if(PlayerInfo[playerid][pFaccion] != PlayerInfo[playerid2][pFaccion]){SendClientMessage(playerid,Rojo,"* Este jugador no forma parte de tu facción."); return 1;}
    tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Promover [ID] [Rango]");
        return 1;
    }
    new rango = strval(tmp);
    if(rango < 1 || rango > 16){SendClientMessage(playerid,Rojo,"* El rango debe estar entre 1 y 16."); return 1;}
    PlayerInfo[playerid2][pRango] = rango;
	format(string, sizeof(string), "* %s te ha promovido a rango %d.", GetPlayerNameRP(playerid), rango);
	SendClientMessage(playerid2, Amarillo, string);
	format(string, sizeof(string), "* Has promovido a rango %d a %s.", rango, GetPlayerNameRP(playerid2));
	SendClientMessage(playerid, Amarillo, string);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/expulsar", true) == 0) //Expulsar miembros de una facción
{
	if(PlayerInfo[playerid][pLider] <= 0){SendClientMessage(playerid,Rojo,"* No eres líder de una facción."); return 1;}
	tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Expulsar [ID]");
        return 1;
    }
    playerid2 = ReturnUser(tmp);
    if(playerid == playerid2){SendClientMessage(playerid,Rojo,"* No te puedes expulsar a tí mismo, si quieres dejar la facción habla con un administrador."); return 1;}
    if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid,Rojo,"* ID inválida."); return 1;}
    if(PlayerInfo[playerid][pFaccion] != PlayerInfo[playerid2][pFaccion]){SendClientMessage(playerid,Rojo,"* Este jugador no forma parte de tu facción."); return 1;}
    PlayerInfo[playerid2][pRango] = 0;
    PlayerInfo[playerid2][pFaccion] = 0;
    PlayerInfo[playerid2][pServicioPD] = 0;
	PlayerInfo[playerid2][pServicioCNN] = 0;
	PlayerInfo[playerid2][pServicioLSMD] = 0;
	PlayerInfo[playerid2][pServicioWCST] = 0;
    SetPlayerColor(playerid2,Blanco2);
    SetPlayerSkin(playerid2,PlayerInfo[playerid][pSkin]);
	format(string, sizeof(string), "* %s te ha expulsado de su facción.", GetPlayerNameRP(playerid));
	SendClientMessage(playerid2, Amarillo, string);
	format(string, sizeof(string), "* Has expulsado a %s de tu facción.", GetPlayerNameRP(playerid2));
	SendClientMessage(playerid, Amarillo, string);
    return 1;
}

//----------COMANDOS FACCIONES----------//

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/sir", true) == 0) //Sirena LSPD
{
    if(PlayerInfo[playerid][pFaccion] != 1) return SendClientMessage(playerid, Rojo, "* No eres policía.");
    new coche = GetPlayerVehicleID(playerid);
    if(coche == 0) return SendClientMessage(playerid, Rojo, "* No estás en un coche.");
    if(PlayerInfo[playerid][pServicioPD] == 0) return SendClientMessage(playerid, Rojo, "* No estás de servicio.");
    if(!IsValidDynamicObject(SirenaCoche[coche]))
    {
    	SirenaCoche[coche] = CreateDynamicObject(18646,0, 0, 0, 0.0, 0.0, 96.0);
		AttachDynamicObjectToVehicle(SirenaCoche[coche], coche, -0.2083, -0.03, 0.77, 0.0, 0.0, 0.0);
		format(string, sizeof(string), "* %s coloca una sirena de policía en su vehículo.", GetPlayerNameRP(playerid));
 	    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
	}
	else
	{
		DestroyDynamicObject(SirenaCoche[coche]);
		format(string, sizeof(string), "* %s quita una sirena de policía de su vehículo.", GetPlayerNameRP(playerid));
 	    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/informes", true) == 0) //Informes LSED
{
	if(PlayerInfo[playerid][pFaccion] != 2) return SendClientMessage(playerid, Rojo, "* No perteneces a LSMD.");
	if(PlayerInfo[playerid][pServicioLSMD] == 0){SendClientMessage(playerid,Rojo,"* No estás de servicio."); return 1;}
	new contador, linea[256], dialog[1024], estado[10];
	for(new i = 0; i < MAX_LSEDINFORMES; i++)
	{
        if(InformeEmergencias[i][ieEstado] != NOEXISTE)
        {
            contador ++;
            if(InformeEmergencias[i][ieEstado] == 0) estado = "en espera";
            else estado = "en camino";
            format(linea, sizeof(linea), "{FFFFFF}[#%d] Estado: %s", contador, estado);
	    	strcat(dialog, linea);
		}
	}
	if(contador == 0){SendClientMessage(playerid, Rojo, "* Actualmente no hay informes para LSMD."); return 1;}
	ShowPlayerDialog(playerid, 33, DIALOG_STYLE_LIST, "{FFFFFF}Informes de emergencia", dialog, "Atender", "Cancelar");
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/ap", true) == 0) //Comando para abrir puertas
{
	AbrirPuerta(playerid);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(!strcmp(cmdtext, "/apatio", true)) //Comando para abrir puerta partio prisión
{
    if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
    if(IsPlayerInRangeOfPoint(playerid, 5, 2571.3999000,-1304.8300000,1043.0000000))
    {
        MoveDynamicObject(puertapatioprision, 2571.4004000,-1307.7000000,1043.0000000, 3.0);
    }
    else{SendClientMessage(playerid,Rojo,"* No estás cerca de la puerta del patio de la prisión federal."); return 1;}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(!strcmp(cmdtext, "/cpatio", true)) //Comando para cerrar puerta partio prisión
{
    if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
    if(IsPlayerInRangeOfPoint(playerid, 5, 2571.3999000,-1304.8300000,1043.0000000))
    {
        MoveDynamicObject(puertapatioprision, 2571.3999000,-1304.8300000,1043.0000000, 3.0);
    }
    else{SendClientMessage(playerid,Rojo,"* No estás cerca de la puerta del patio de la prisión federal."); return 1;}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(!strcmp(cmdtext, "/celda", true)) //Comando para abrir celdas de LSPD
{
    if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
    if(IsPlayerInRangeOfPoint(playerid, 3, 266.31, 76.71, 1001.2900))
    {
        MoveDynamicObject(Celda[1], 266.2500, 76.9000, 1001.2900, 3.0);
        SetTimerEx("CerrarPuerta",3000,0,"p",Celda[1]);
    }
    else if(IsPlayerInRangeOfPoint(playerid, 3, 266.25, 82.95, 1001.29))
    {
        MoveDynamicObject(Celda[2], 266.25, 81.39, 1001.29, 3.0);
        SetTimerEx("CerrarPuerta",3000,0,"p",Celda[2]);
    }
	else if(IsPlayerInRangeOfPoint(playerid, 3, 266.25, 87.46, 1001.29))
    {
        MoveDynamicObject(Celda[3], 266.25, 85.9, 1001.29, 3.0);
        SetTimerEx("CerrarPuerta",3000,0,"p",Celda[3]);
    }
    else if(IsPlayerInRangeOfPoint(playerid, 2, 2555.7200000,-1304.1000000,1043.1000000)) //Prisión federal
    {
        SetDynamicObjectRot(puertaceldaprision[1], 0.0000000,0.0000000,90.0000000);
        SetTimerEx("CerrarPuerta",3000,0,"p",puertaceldaprision[1]);
    }
    else if(IsPlayerInRangeOfPoint(playerid, 2, 2559.6199000,-1304.0996000,1043.1000000))
    {
        SetDynamicObjectRot(puertaceldaprision[2], 0.0000000,0.0000000,90.0000000);
        SetTimerEx("CerrarPuerta",3000,0,"p",puertaceldaprision[2]);
    }
    else if(IsPlayerInRangeOfPoint(playerid, 2, 2551.8210000,-1304.0996000,1043.1000000))
    {
        SetDynamicObjectRot(puertaceldaprision[3], 0.0000000,0.0000000,90.0000000);
        SetTimerEx("CerrarPuerta",3000,0,"p",puertaceldaprision[3]);
    }
    else if(IsPlayerInRangeOfPoint(playerid, 2, 2547.9224000,-1304.0996000,1043.1000000))
    {
        SetDynamicObjectRot(puertaceldaprision[4], 0.0000000,0.0000000,90.0000000);
        SetTimerEx("CerrarPuerta",3000,0,"p",puertaceldaprision[4]);
    }
    else if(IsPlayerInRangeOfPoint(playerid, 2, 2544.0237000,-1304.0996000,1043.1000000))
    {
        SetDynamicObjectRot(puertaceldaprision[5], 0.0000000,0.0000000,90.0000000);
        SetTimerEx("CerrarPuerta",3000,0,"p",puertaceldaprision[5]);
    }
    else if(IsPlayerInRangeOfPoint(playerid, 2, 2540.1243000,-1304.0996000,1043.1000000))
    {
        SetDynamicObjectRot(puertaceldaprision[6], 0.0000000,0.0000000,90.0000000);
        SetTimerEx("CerrarPuerta",3000,0,"p",puertaceldaprision[6]);
    }
    else if(IsPlayerInRangeOfPoint(playerid, 2, 2536.2253000,-1304.0996000,1043.1000000))
    {
        SetDynamicObjectRot(puertaceldaprision[7], 0.0000000,0.0000000,90.0000000);
        SetTimerEx("CerrarPuerta",3000,0,"p",puertaceldaprision[7]);
    }
    else if(IsPlayerInRangeOfPoint(playerid, 2, 2532.3264000,-1304.0996000,1043.1000000))
    {
        SetDynamicObjectRot(puertaceldaprision[8], 0.0000000,0.0000000,90.0000000);
        SetTimerEx("CerrarPuerta",3000,0,"p",puertaceldaprision[8]);
    }
    else if(IsPlayerInRangeOfPoint(playerid, 2, 2561.6799300,-1283.6899400,1043.0999800))
    {
        SetDynamicObjectRot(puertaceldaprision[9], 0.0000000,0.0000000,270.0000000);
        SetTimerEx("CerrarPuerta",3000,0,"p",puertaceldaprision[9]);
    }
    else if(IsPlayerInRangeOfPoint(playerid, 2, 2557.7798000,-1283.6895000,1043.1000000))
    {
        SetDynamicObjectRot(puertaceldaprision[10], 0.0000000,0.0000000,270.0000000);
        SetTimerEx("CerrarPuerta",3000,0,"p",puertaceldaprision[10]);
    }
    else if(IsPlayerInRangeOfPoint(playerid, 2, 2553.8799000,-1283.6895000,1043.1000000))
    {
        SetDynamicObjectRot(puertaceldaprision[11], 0.0000000,0.0000000,270.0000000);
        SetTimerEx("CerrarPuerta",3000,0,"p",puertaceldaprision[11]);
    }
    else if(IsPlayerInRangeOfPoint(playerid, 2, 2549.9800000,-1283.6895000,1043.1000000))
    {
        SetDynamicObjectRot(puertaceldaprision[12], 0.0000000,0.0000000,270.0000000);
        SetTimerEx("CerrarPuerta",3000,0,"p",puertaceldaprision[12]);
    }
    else if(IsPlayerInRangeOfPoint(playerid, 2, 2546.0798000,-1283.6895000,1043.1000000))
    {
        SetDynamicObjectRot(puertaceldaprision[13], 0.0000000,0.0000000,270.0000000);
        SetTimerEx("CerrarPuerta",3000,0,"p",puertaceldaprision[13]);
    }
    else if(IsPlayerInRangeOfPoint(playerid, 2, 2542.1799000,-1283.6895000,1043.1000000))
    {
        SetDynamicObjectRot(puertaceldaprision[14], 0.0000000,0.0000000,270.0000000);
        SetTimerEx("CerrarPuerta",3000,0,"p",puertaceldaprision[14]);
    }
    else if(IsPlayerInRangeOfPoint(playerid, 2, 2538.2798000,-1283.6895000,1043.1000000))
    {
        SetDynamicObjectRot(puertaceldaprision[15], 0.0000000,0.0000000,270.0000000);
        SetTimerEx("CerrarPuerta",3000,0,"p",puertaceldaprision[15]);
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(!strcmp(cmdtext, "/embargar", true)) //Comando para meter vehículo en depósito de LSPD
{
    if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
    if(PlayerInfo[playerid][pServicioPD] <= 0){SendClientMessage(playerid,Rojo,"* No estás de servicio."); return 1;}
    if(PlayerInfo[playerid][pRango] < 3){SendClientMessage(playerid,Rojo,"* Necesitas tener al menos rango 3 para usar este comando."); return 1;}
    if(!IsPlayerInDynamicArea(playerid, AreaDepositoLSPD)){SendClientMessage(playerid,Rojo,"* No estás en el depósito de vehículos de LSPD."); return 1;}
    if(!GetPlayerVehicleID(playerid)){SendClientMessage(playerid,Rojo,"* No estás en un vehículo."); return 1;}
    new carid = GetPlayerVehicleID(playerid);
    if(carid <= MAX_VEHPUBLICO){SendClientMessage(playerid,Rojo,"* No puedes embargar vehículos públicos."); return 1;}
    if(CarInfo[carid][cEnDeposito] == 2){SendClientMessage(playerid,Rojo,"* Este vehículo ya está embargado."); return 1;}

    CarInfo[carid][cEnDeposito] = 2;
	SaveCar(carid);

	new engine,lights,alarm,doors,bonnet,boot,objective;
    GetVehicleParamsEx(carid,engine,lights,alarm,doors,bonnet,boot,objective);
   	SetVehicleParamsEx(carid,0,lights,alarm,doors,bonnet,boot,objective);
   	RemovePlayerFromVehicle(playerid);

	format(string, sizeof(string), "Has embargado el vehículo #%d.", carid);
    SendClientMessage(playerid, Amarillo, string);
    if(strlen(CarInfo[carid][cDueno]))
    {
        format(string, sizeof(string), "Ahora su dueño, '%s', tendrá que pagar una multa de %d$ para sacarlo del depósito.", CarInfo[carid][cDueno], CarInfo[carid][cValor]/30);
    	SendClientMessage(playerid, Amarillo, string);
    }
    format(string, sizeof(string), "El agente '%s' ha estacionado el vehículo #%d en el depósito de LSPD.", GetPlayerNameRP(playerid), carid);
    SendAdminMessage(Aguamarina, string);
    printf(string);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(!strcmp(cmdtext, "/deposito", true)) //Comando para abrir deposito de LSPD
{
    if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
    if(PlayerInfo[playerid][pServicioPD] <= 0){SendClientMessage(playerid,Rojo,"* No estás de servicio."); return 1;}
    if(IsPlayerInRangeOfPoint(playerid, 10, 1620.6500,-1861.5996,15.3000))
    {
        MoveDynamicObject(lspddeposito, 1612.0996,-1861.5996,15.3000, 2.5);
        SetTimerEx("CerrarPuerta",4000,0,"p",lspddeposito);
        format(string, sizeof(string), "* %s abre la puerta del depósito.", GetPlayerNameRP(playerid));
    	ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
    	return 1;
    }
    else{SendClientMessage(playerid,Rojo,"* No estás en la entrada al depósito del LSPD.");}
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(!strcmp(cmdtext, "/vestuario", true)) //Vestuario de LSPD
{
    if(PlayerInfo[playerid][pFaccion] != 1 && PlayerInfo[playerid][pFaccion] != 2 && PlayerInfo[playerid][pFaccion] != 4 && PlayerInfo[playerid][pFaccion] != 5){SendClientMessage(playerid, Rojo, "* No formas parte de ninguna facción pública."); return 1;}
	if(PlayerInfo[playerid][pServicioPD] == 0 && (PlayerInfo[playerid][pManoDer] > 0 || PlayerInfo[playerid][pManoIzq] > 0 || PlayerInfo[playerid][pEspalda] > 0)){SendClientMessage(playerid,Rojo,"* Debes guardar antes tus objetos (manos y espalda)."); return 1;}
	if(SolicitaRefuerzos[playerid] == 1){SendClientMessage(playerid,Rojo,"* No puedes cambiarte mientras solicitas refuerzos. Escribe '/NoRef'."); return 1;}
	if(MascaraGas[playerid] == 1){MascaraGas[playerid] = 0; RemovePlayerAttachedObject(playerid, 8);}
	if(IsPlayerInRangeOfPoint(playerid, 3, 267.6066,118.4081,1004.6172))
	{
		new cadena[300];
		strcat(cadena, "Uniforme de cadete\n");
		strcat(cadena, "Uniforme de motero\n");
		strcat(cadena, "Uniforme de oficial 1\n");
		strcat(cadena, "Uniforme de oficial 2\n");
		strcat(cadena, "Uniforme de oficial 3\n");
		strcat(cadena, "Uniforme de oficial 4\n");
		strcat(cadena, "Uniforme de oficial 5\n");
		strcat(cadena, "Paisano (5)\n");
		strcat(cadena, "Traje de SWAT\n");
		strcat(cadena, "Uniforme de superior\n");
		strcat(cadena, "Uniforme de comisario\n");
		strcat(cadena, "Skin de mujer\n");
		strcat(cadena, "Ropa normal");
		ShowPlayerDialog(playerid, 3, 2, "Taquilla", cadena,"Seleccionar", "Cancelar");
	}
	else if(IsPlayerInRangeOfPoint(playerid, 3, 1085.0271,-803.6704,1088.3669))
	{
		new cadena[300];
		strcat(cadena, "Uniforme de carcelero\n");
		strcat(cadena, "Ropa normal");
		ShowPlayerDialog(playerid, 31, 2, "Taquilla", cadena,"Seleccionar", "Cancelar");
	}
	if(IsPlayerInRangeOfPoint(playerid, 3, -213.0010,-1760.6923,675.7687))
	{
		if(PlayerInfo[playerid][pFaccion] != 2){SendClientMessage(playerid,Rojo,"* No eres médico."); return 1;}
		new cadena[300];
		strcat(cadena, "Uniforme de paramédico\n");
		strcat(cadena, "Uniforme de enfermero\n");
		strcat(cadena, "Uniforme de sub director\n");
		strcat(cadena, "Uniforme de director\n");
	    strcat(cadena, "Skin de mujer\n");
		strcat(cadena, "Ropa normal");
		ShowPlayerDialog(playerid, UniformeLSMD, 2, "Taquilla", cadena,"Seleccionar", "Cancelar");
	}
	if(IsPlayerInRangeOfPoint(playerid, 3, 1589.9855,-2493.0557,13.5547) || IsPlayerInRangeOfPoint(playerid, 3, 807.671447 , -545.271301 , 16.321636))
	{
		if(PlayerInfo[playerid][pFaccion] != 5){SendClientMessage(playerid,Rojo,"* No eres Mecánico."); return 1;}
		new cadena[300];
		strcat(cadena, "Uniforme de Mecánico Novato\n");
		strcat(cadena, "Uniforme de Mecánico Avanzado\n");
		strcat(cadena, "Uniforme de Trucker\n");
		strcat(cadena, "Uniforme de Encargado\n");
	    strcat(cadena, "Uniforme de Empresario\n");
	    strcat(cadena, "Skin de mujer\n");
		strcat(cadena, "Ropa normal");
		ShowPlayerDialog(playerid, UniformeWCST, 2, "Taquilla", cadena,"Seleccionar", "Cancelar");
	}
	if(IsPlayerInRangeOfPoint(playerid, 3, 759.6329,-1331.5673,13.8953))
	{
		if(PlayerInfo[playerid][pFaccion] != 4){SendClientMessage(playerid,Rojo,"* No eres CNN."); return 1;}
		new cadena[300];
		strcat(cadena, "Uniforme de Reportero\n");
		strcat(cadena, "Uniforme de Periodista\n");
		strcat(cadena, "Uniforme de Jefe de edición\n");
		strcat(cadena, "Uniforme de Sub Director\n");
	    strcat(cadena, "Uniforme de Director\n");
	    strcat(cadena, "Skin de mujer\n");
		strcat(cadena, "Ropa normal");
		ShowPlayerDialog(playerid, UniformeCNN, 2, "Taquilla", cadena,"Seleccionar", "Cancelar");
	}
	return 1;
	}

//---------------------------------------------------------------------------------------------------------------

if(!strcmp(cmdtext, "/armeria", true)) //Armeria de LSPD
{
    if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
    if(PlayerInfo[playerid][pServicioPD] == 0){SendClientMessage(playerid, Rojo, "* No estás de servicio."); return 1;}
    if(IsPlayerInRangeOfPoint(playerid, 3, 220.0135,79.7864,1005.0391) || IsPlayerInRangeOfPoint(playerid, 3, 1086.6472,-807.9135,1088.3669))
    {
        new cadena[450];
		strcat(cadena, "Chaleco antibalas\n"); //Lista 1
		strcat(cadena, "|--------------------------------------|\n");
		strcat(cadena, "Porra\n");
		strcat(cadena, "Spray\n");
		strcat(cadena, "Táser\n");
		strcat(cadena, "|--------------------------------------|\n");
		strcat(cadena, "M1911\n");
		strcat(cadena, "Cargador M1911\n");
		strcat(cadena, "|--------------------------------------|\n");
		strcat(cadena, "D. Eagle\n");
		strcat(cadena, "Cargador D. Eagle\n");
		strcat(cadena, "|--------------------------------------|\n");
		strcat(cadena, "Winchester 1200\n");
		strcat(cadena, "Cartuchos 12GA\n");
		strcat(cadena, "|--------------------------------------|\n");
		strcat(cadena, "MP5A4\n");
		strcat(cadena, "Cargador MP5A4\n");
		strcat(cadena, "|--------------------------------------|\n");
		strcat(cadena, "SIGUIENTE >>");
		ShowPlayerDialog(playerid, 34, 2, "Armería", cadena,"Seleccionar", "Cancelar");
    }
    else{SendClientMessage(playerid,Rojo,"* No estás en la armería de comisaría o de la prisión federal."); return 1;}
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/recogerprueba",true) == 0) //Recoger pruebas del suelo
{
    if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT || PlayerInfo[playerid][pMuerto] > 0){SendClientMessage(playerid, Rojo, "* No puedes usar este comando en esta situación."); return 1;}
	new ObjetoRecogido;
	for(new i = 0; i < sizeof(DropInfo); i++)
	{
		if(IsPlayerInRangeOfPoint(playerid, 2.0,DropInfo[i][DropPosX],DropInfo[i][DropPosY],DropInfo[i][DropPosZ]))
		{
			if(GetPlayerVirtualWorld(playerid) == DropInfo[i][DropVWorld] && GetPlayerInterior(playerid) == DropInfo[i][DropInterior])
			{
			    if(DropInfo[i][DropID] == 0) break;
				DestroyDynamicObject(DropObject[i]);
				format(string, sizeof(string), "* Recoges un/a {fce80c}%s (%d) {fdfe8b}del suelo como prueba de algún delito.", ObjetoInfo[DropInfo[i][DropID]][NombreObjeto], DropInfo[i][DropCantidad]);
				SendClientMessage(playerid, AmarilloClaro, string);
				format(string, sizeof(string), "* %s recoge un/a %s del suelo como prueba de algún delito.", GetPlayerNameRP(playerid), ObjetoInfo[DropInfo[i][DropID]][NombreObjeto]);
 	    		ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
				DropInfo[i][DropPosX] = 0.0;
				DropInfo[i][DropPosY] = 0.0;
				DropInfo[i][DropPosZ] = 0.0;
				DropInfo[i][DropID] = 0;
				DropInfo[i][DropCantidad] = 0;
				Streamer_Update(playerid);
				ObjetoRecogido = 1;
				break;
			}
		}
	}
	if(ObjetoRecogido == 0){SendClientMessage(playerid, Rojo, "* No estás cerca de ningún objeto."); return 1;}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/esposar", true) == 0) //Esposar a un jugador
{
	if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
	if(PlayerInfo[playerid][pServicioPD] == 0){SendClientMessage(playerid,Rojo,"* No estás de servicio."); return 1;}
    tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
 	{
		SendClientMessage(playerid, Naranja, "* /Esposar [ID]");
		return 1;
	}
	playerid2 = ReturnUser(tmp);
    if(playerid == playerid2){SendClientMessage(playerid,Rojo,"* No te puedes esposar a tí mismo."); return 1;}
    if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid,Rojo,"* ID inválida."); return 1;}
    if(!GetPlayersProx(3.0, playerid, playerid2)){SendClientMessage(playerid, Rojo, "* Demasiado lejos."); return 1;}
	if(IsPlayerInAnyVehicle(playerid2)){SendClientMessage(playerid, Rojo, "* No puedes esposar a alguien que está en un vehículo. Prueba /Retener."); return 1;}
	if(IsPlayerInAnyVehicle(playerid) && GetPlayerVehicleID(playerid2) == 0){SendClientMessage(playerid, Rojo, "* No puedes esposar a alguien desde un vehículo."); return 1;}
    if(PlayerInfo[playerid2][pServicioPD] > 0){SendClientMessage(playerid,Rojo,"* No puedes esposar a un policía de servicio."); return 1;}
    format(string, sizeof(string), "* Has sido esposado por %s. No trates de correr o saltar.", GetPlayerNameRP(playerid));
    SendClientMessage(playerid2, AzulClaro, string);
    format(string, sizeof(string), "* Has esposado a %s. Escribe '/Desesposar' para desesposarlo.", GetPlayerNameRP(playerid2));
    SendClientMessage(playerid, AzulClaro, string);
    format(string, sizeof(string), "* %s coloca unas esposas a %s.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2));
    ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
    ClearAnimations(playerid2, 1);
    SetPlayerSpecialAction(playerid2, SPECIAL_ACTION_CUFFED);
    SetPlayerAttachedObject(playerid2, 4, 19418, 6, -0.011000, 0.028000, -0.022000, -15.600012, -33.699977,-81.700035, 0.891999, 1.000000, 1.168000);
    Esposado[playerid2] = 1;
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/desesposar", true) == 0) //Desesposar a un jugador
{
	if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
	if(PlayerInfo[playerid][pServicioPD] == 0){SendClientMessage(playerid,Rojo,"* No estás de servicio."); return 1;}
    tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
 	{
		SendClientMessage(playerid, Naranja, "* /Desesposar [ID]");
		return 1;
	}
	playerid2 = ReturnUser(tmp);
    if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid,Rojo,"* ID inválida."); return 1;}
    if(!GetPlayersProx(3.0, playerid, playerid2)){SendClientMessage(playerid, Rojo, "* Demasiado lejos."); return 1;}
	if(IsPlayerInAnyVehicle(playerid2)){SendClientMessage(playerid, Rojo, "* No puedes desesposar a alguien que está en un vehículo. Prueba /Soltar."); return 1;}
	if(Esposado[playerid2] != 1){SendClientMessage(playerid, Rojo, "* Esta persona no está esposada."); return 1;}
    format(string, sizeof(string), "* Has sido desesposado por %s.", GetPlayerNameRP(playerid));
    SendClientMessage(playerid2, AzulClaro, string);
    format(string, sizeof(string), "* Has desesposado a %s.", GetPlayerNameRP(playerid2));
    SendClientMessage(playerid, AzulClaro, string);
    format(string, sizeof(string), "* %s quita las esposas a %s.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2));
    ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
    ClearAnimations(playerid2, 1);
    SetPlayerSpecialAction(playerid2, SPECIAL_ACTION_NONE);
    RemovePlayerAttachedObject(playerid2, 4);
    Esposado[playerid2] = 0;
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/retener", true) == 0) //Retener a un jugador a un vehículo
{
	if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
	if(PlayerInfo[playerid][pServicioPD] == 0){SendClientMessage(playerid,Rojo,"* No estás de servicio."); return 1;}
    tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
 	{
		SendClientMessage(playerid, Naranja, "* /Retener [ID]");
		return 1;
	}
	playerid2 = ReturnUser(tmp);
	if(!IsPlayerInAnyVehicle(playerid)){SendClientMessage(playerid,Rojo,"* No estás en ningún vehículo."); return 1;}
    if(playerid == playerid2){SendClientMessage(playerid,Rojo,"* No te puedes retener a tí mismo."); return 1;}
    if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid,Rojo,"* ID inválida."); return 1;}
	if(GetPlayerVehicleID(playerid2) != GetPlayerVehicleID(playerid)){SendClientMessage(playerid, Rojo, "* Esta persona no está dentro de tu vehículo."); return 1;}
    if(PlayerInfo[playerid2][pServicioPD] > 0){SendClientMessage(playerid,Rojo,"* No puedes retener a un policía de servicio."); return 1;}
    format(string, sizeof(string), "* Has sido esposado al vehículo por %s.", GetPlayerNameRP(playerid));
    SendClientMessage(playerid2, AzulClaro, string);
    format(string, sizeof(string), "* Has esposado a %s al vehículo. Escribe '/Soltar' para desesposarlo.", GetPlayerNameRP(playerid2));
    SendClientMessage(playerid, AzulClaro, string);
    format(string, sizeof(string), "* %s retiene a %s en el vehículo.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2));
    ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
    TogglePlayerControllable(playerid2, 0);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/soltar", true) == 0) //Soltar a un jugador del vehículo
{
	if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
	if(PlayerInfo[playerid][pServicioPD] == 0){SendClientMessage(playerid,Rojo,"* No estás de servicio."); return 1;}
    tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
 	{
		SendClientMessage(playerid, Naranja, "* /Soltar [ID]");
		return 1;
	}
	playerid2 = ReturnUser(tmp);
	if(!IsPlayerInAnyVehicle(playerid)){SendClientMessage(playerid,Rojo,"* No estás en ningún vehículo."); return 1;}
    if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid,Rojo,"* ID inválida."); return 1;}
	if(GetPlayerVehicleID(playerid2) != GetPlayerVehicleID(playerid)){SendClientMessage(playerid, Rojo, "* Esta persona no está en tu vehículo."); return 1;}
    format(string, sizeof(string), "* Has sido desesposado del vehículo.", GetPlayerNameRP(playerid));
    SendClientMessage(playerid2, AzulClaro, string);
    format(string, sizeof(string), "* Has desesposado del vehículo a %s.", GetPlayerNameRP(playerid2));
    SendClientMessage(playerid, AzulClaro, string);
    format(string, sizeof(string), "* %s desesposa a %s del vehículo.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2));
    ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
    TogglePlayerControllable(playerid2, 1);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/refuerzos", true) == 0 || strcmp(cmd,"/ref",true) ==0 ) //Solicitar refuerzos
{
	if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
	if(PlayerInfo[playerid][pServicioPD] == 0){SendClientMessage(playerid,Rojo,"* No estás de servicio."); return 1;}
	if(SolicitaRefuerzos[playerid] == 1){SendClientMessage(playerid,Rojo,"* Ya estás solicitando refuerzos."); return 1;}
	SolicitaRefuerzos[playerid] = 1;
	format(string, sizeof(string), "[Radio] -{FFFFFF} Central: A todas las unidades, el agente {FFFF04}%s {FFFFFF}solicita refuerzos en su posición.", GetPlayerNameRP(playerid));
	for(new i = 0; i < MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
			if(PlayerInfo[i][pFaccion] == 1 && PlayerInfo[i][pServicioPD] > 0)
			{
				SetPlayerMarkerForPlayer(i, playerid, 0x1229FAFF);
				SendClientMessage(i, TEAM_BLUE_COLOR, string);
			}
		}
	}
	SendClientMessage(playerid, Naranja, "* Escribe '/NoRef' para cancelar la petición de refuerzos.");
	NoRefAuto[playerid] = SetTimerEx("NoRefAutoF", 600000, false, "i", playerid);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/noref", true) == 0) //Dejar de solicitar refuerzos
{
	if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
	if(SolicitaRefuerzos[playerid] == 0){SendClientMessage(playerid,Rojo,"* No estás solicitando refuerzos."); return 1;}
	SolicitaRefuerzos[playerid] = 0;
	format(string, sizeof(string), "[Radio] -{FFFFFF} Central: El agente {FFFF04}%s {FFFFFF}ya no solicita refuerzos.", GetPlayerNameRP(playerid));
	for(new i = 0; i < MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
			if(PlayerInfo[i][pFaccion] == 1 && PlayerInfo[i][pServicioPD] > 0)
			{
				SetPlayerMarkerForPlayer(i, playerid, Blanco2);
				SendClientMessage(i, TEAM_BLUE_COLOR, string);
			}
		}
	}
	KillTimer(NoRefAuto[playerid]);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/mascara", true) == 0) //Ponerse o quitarse una mascara antigas
{
	if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
	if(PlayerInfo[playerid][pServicioPD] != 9){SendClientMessage(playerid,Rojo,"* No estás de servicio como SWAT."); return 1;}
	if(MascaraGas[playerid] == 0)
	{
		MascaraGas[playerid] = 1;
		SetPlayerAttachedObject(playerid, 8, 19472, 2, 0.001, 0.147, 0.004, -77.8998, -131.2999, 15.7999, 0.9549, 0.697, 0.7739);
		format(string, sizeof(string), "* %s se coloca una máscara antigas.", GetPlayerNameRP(playerid));
	 	ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
	 	ApplyAnimation(playerid, "goggles", "goggles_put_on",4.1,0,1,1,0,0);
 	}
	else if(MascaraGas[playerid] == 1)
	{
		MascaraGas[playerid] = 0;
		RemovePlayerAttachedObject(playerid, 8);
		format(string, sizeof(string), "* %s se quita su máscara antigas.", GetPlayerNameRP(playerid));
	 	ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
	 	ApplyAnimation(playerid, "goggles", "goggles_put_on",4.1,0,1,1,0,0);
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/forzarvehiculo", true) == 0) //Forzar la apertura de un vehículo
{
    if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
	if(PlayerInfo[playerid][pServicioPD] == 0){SendClientMessage(playerid,Rojo,"* No estás de servicio como policía."); return 1;}
	if(PlayerInfo[playerid][pRango] < 3){SendClientMessage(playerid,Rojo,"* Rango insuficiente."); return 1;}
	new car, Float:distancia = 4.0, Float:vX, Float:vY, Float:vZ;
	for(new x=0; x <= TotalVeh; x++)
	{
	    GetVehiclePos(x, vX, vY, vZ);
	    if(IsPlayerInRangeOfPoint(playerid, 3.5, vX, vY, vZ) && !IsABike(x) && CarInfo[x][cCerrado] == 1)
	    {
	        if(GetPlayerDistanceFromPoint(playerid, vX, vY, vZ) <= distancia)distancia = GetPlayerDistanceFromPoint(playerid, vX, vY, vZ), car = x;
	    }
	}
	if(car == 0){SendClientMessage(playerid, Rojo, "* No se ha detectado ningún vehículo a tu alrededor que puedas abrir."); return 1;}
	new engine,lights,alarm,doors,bonnet,boot,objective;
    GetVehicleParamsEx(car,engine,lights,alarm,doors,bonnet,boot,objective);
    SetVehicleParamsEx(car,engine,lights,alarm,0,bonnet,boot,objective);
    CarInfo[car][cCerrado] = 0;
    format(string, sizeof(string), "* %s fuerza la puerta de un vehículo con unas tenazas.", GetPlayerNameRP(playerid));
    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/forzarmaletero", true) == 0) //Forzar la apertura de un maletero
{
	if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
	if(PlayerInfo[playerid][pServicioPD] == 0){SendClientMessage(playerid,Rojo,"* No estás de servicio como policía."); return 1;}
	if(PlayerInfo[playerid][pRango] < 3){SendClientMessage(playerid,Rojo,"* Rango insuficiente."); return 1;}
	new car, Float:distancia = 4.0, Float:vX, Float:vY, Float:vZ;
	for(new x=0; x <= TotalVeh; x++)
	{
	    GetVehiclePos(x, vX, vY, vZ);
	    if(IsPlayerInRangeOfPoint(playerid, 3.5, vX, vY, vZ) && !IsABike(x) && VehMaletero[x] == 0)
	    {
	        if(GetPlayerDistanceFromPoint(playerid, vX, vY, vZ) <= distancia)distancia = GetPlayerDistanceFromPoint(playerid, vX, vY, vZ), car = x;
	    }
	}
	if(car == 0){SendClientMessage(playerid, Rojo, "* No se ha detectado ningún vehículo a tu alrededor que puedas abrir."); return 1;}
	new engine,lights,alarm,doors,bonnet,boot,objective;
    GetVehicleParamsEx(car,engine,lights,alarm,doors,bonnet,boot,objective);
    SetVehicleParamsEx(car,engine,lights,alarm,doors,bonnet,1,objective);
    format(string, sizeof(string), "* %s fuerza el maletero de un vehículo con unas tenazas.", GetPlayerNameRP(playerid));
    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
    VehMaletero[car] = 1;
    MostrarMaletero(playerid, car);
    VehMaleteroPlayer[playerid] = car;
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/laser", true) == 0) //Ponero o quitar laser en armas LSPD
{
	if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
	if(PlayerInfo[playerid][pServicioPD] == 0){SendClientMessage(playerid,Rojo,"* No estás de servicio como policía."); return 1;}
	if(LaserON[playerid] == 0)
	{
		LaserON[playerid] = 1;
		SetPlayerAttachedObject(playerid, 0, 19472, 2, 0.001, 0.147, 0.004, -77.8998, -131.2999, 15.7999, 0.9549, 0.697, 0.7739);
		SendClientMessage(playerid, Amarillo, "* Laser en armas activado.");
 	}
	else if(LaserON[playerid] == 1)
	{
		LaserON[playerid] = 0;
		RemovePlayerAttachedObject(playerid, 0);
		SendClientMessage(playerid, Amarillo, "* Laser en armas desactivado.");
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/encarcelar", true) == 0) //Encarcelar a un delincuente (meter en jail)
{
	if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
	if(PlayerInfo[playerid][pServicioPD] == 0){SendClientMessage(playerid,Rojo,"* No estás de servicio."); return 1;}
	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
 	{
		SendClientMessage(playerid, Naranja, "* /Encarcelar [ID] [Tiempo (min)]");
		return 1;
	}
	playerid2 = ReturnUser(tmp);
    if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid,Rojo,"* ID inválida."); return 1;}
    if(playerid == playerid2){SendClientMessage(playerid,Rojo,"* No te puedes encarcelar a tí mismo."); return 1;}
    if(!IsPlayerInRangeOfPoint(playerid, 15.0, 266.25, 82.95, 1001.29) && !IsPlayerInRangeOfPoint(playerid, 15.0, 2529.6387,-1281.9346,1048.2891)){SendClientMessage(playerid,Rojo,"* No estás en las celdas de comisaría o la prisión federal."); return 1;}
	if(PlayerInfo[playerid2][pFaccion] == 1){SendClientMessage(playerid,Rojo,"* No puedes arrestar a un policía."); return 1;}
	if(!GetPlayersProx(5.0, playerid, playerid2)){SendClientMessage(playerid, Rojo,"* Debe estar más cerca de tí."); return 1;}
	if(PlayerInfo[playerid2][pEncarcelado] > 0){SendClientMessage(playerid, Rojo,"* Esta persona ya está encarcelada. Para sacarla de prisión utiliza /DesEncarcelar."); return 1;}
	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
 	{
		SendClientMessage(playerid, Naranja, "* /Encarcelar [ID] [Tiempo (min)]");
		return 1;
	}
	new tiempo = strval(tmp);
	if(tiempo < 5){SendClientMessage(playerid,Rojo,"* El tiempo no puede ser menor que 5 minuto."); return 1;}
	else if(tiempo > 20 && IsPlayerInRangeOfPoint(playerid, 15.0, 266.25, 82.95, 1001.29)){SendClientMessage(playerid,Rojo,"* Para tiempos mayores a 20 minutos encarcelar en la prisión."); return 1;}
	else if(tiempo <= 20 && IsPlayerInRangeOfPoint(playerid, 15.0, 2529.6387,-1281.9346,1048.2891)){SendClientMessage(playerid,Rojo,"* Para tiempos menores a 20 minutos encarcelar en la comisaría."); return 1;}

	new string2[128];
	if(IsPlayerInRangeOfPoint(playerid, 15.0, 266.25, 82.95, 1001.29))
	{
		if(IsPlayerInRangeOfPoint(playerid, 2.0, 266.25, 78.46, 1001.29)){SetPlayerPos(playerid2, 264.1901,77.6065,1001.0391);}
		else if(IsPlayerInRangeOfPoint(playerid, 2.0, 266.25, 82.95, 1001.29)){SetPlayerPos(playerid2, 264.1901,82.1493,1001.0391);}
		else if(IsPlayerInRangeOfPoint(playerid, 2.0, 266.25, 87.46, 1001.29)){SetPlayerPos(playerid2, 264.1901,86.6467,1001.0391);}
		else{SendClientMessage(playerid, Rojo, "* Debes estar frente a una de las celdas."); return 1;}
		PlayerInfo[playerid2][pEncarcelado] = 1, PlayerInfo[playerid2][pTiempoCarcel] = tiempo;

		format(string2, sizeof(string2), "* Has sido encarcelado en comisaría %d minutos por %s.", tiempo, GetPlayerNameRP(playerid));
	    SendClientMessage(playerid2, Amarillo, string2);
	    format(string2, sizeof(string2), "* Has encarcelado a %s durante %d minutos.", GetPlayerNameRP(playerid2), tiempo);
	    SendClientMessage(playerid, Amarillo, string2);
	    format(string2, sizeof(string2), "[Radio] -{FFFFFF} Central: El agente {FFFF04}%s {FFFFFF}ha encarcelado al delincuente {56C4FF}%s {FFFFFF}en comisaría.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2));
	    SendRadioMessage(1, TEAM_BLUE_COLOR, string2);
	    printf("El policía %s ha encarcelado a %s %d minutos en comisaría.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), tiempo);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 15.0, 2529.6387,-1281.9346,1048.2891))
	{
	    SetPlayerPos(playerid2, 2532.8345,-1291.8160,1044.1250);
	    PlayerInfo[playerid2][pEncarcelado] = 2, PlayerInfo[playerid2][pTiempoCarcel] = tiempo;
	    format(string2, sizeof(string2), "* Has sido encarcelado en la prisión federal %d minutos por %s.", tiempo, GetPlayerNameRP(playerid));
	    SendClientMessage(playerid2, Amarillo, string2);
	    format(string2, sizeof(string2), "* Has encarcelado a %s durante %d minutos.", GetPlayerNameRP(playerid2), tiempo);
	    SendClientMessage(playerid, Amarillo, string2);
	    format(string2, sizeof(string2), "[Radio] -{FFFFFF} Central: El agente {FFFF04}%s {FFFFFF}ha encarcelado al delincuente {56C4FF}%s {FFFFFF}en la prisión federal.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2));
	    SendRadioMessage(1, TEAM_BLUE_COLOR, string2);
	    printf("El policía %s ha encarcelado a %s %d minutos en la prisión federal.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), tiempo);
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/desencarcelar", true) == 0) //Desencarcelar a un delincuente (sacar de jail)
{
	if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
	if(PlayerInfo[playerid][pServicioPD] == 0){SendClientMessage(playerid,Rojo,"* No estás de servicio."); return 1;}
	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
 	{
		SendClientMessage(playerid, Naranja, "* /Desencarcelar [ID]");
		return 1;
	}
	playerid2 = ReturnUser(tmp);
    if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid,Rojo,"* ID inválida."); return 1;}
    if(playerid == playerid2){SendClientMessage(playerid,Rojo,"* No te puedes desencarcelar a tí mismo."); return 1;}
    if(!IsPlayerInRangeOfPoint(playerid, 15.0, 266.25, 82.95, 1001.29) && !IsPlayerInRangeOfPoint(playerid, 15.0, 2529.6387,-1281.9346,1048.2891)){SendClientMessage(playerid,Rojo,"* No estás en las celdas de comisaría ni en la prisión federal."); return 1;}
	if(!GetPlayersProx(3.0, playerid, playerid2)){SendClientMessage(playerid, Rojo,"* Debes estar más cerca de él."); return 1;}
	if(PlayerInfo[playerid2][pEncarcelado] == 0){SendClientMessage(playerid, Rojo,"* Esta persona no está encarcelada."); return 1;}
	if(PlayerInfo[playerid2][pEncarcelado] == 1)SetPlayerPos(playerid2, 268.25, 82.95, 1001.29);
	if(PlayerInfo[playerid2][pEncarcelado] == 2)SetPlayerPos(playerid2, 2529.6387,-1281.9346,1048.2891);
	PlayerInfo[playerid2][pEncarcelado] = 0, PlayerInfo[playerid2][pTiempoCarcel] = 0;
    format(string, sizeof(string), "* Has sido desencarcelado por %s.", GetPlayerNameRP(playerid));
    SendClientMessage(playerid2, Amarillo, string);
    format(string, sizeof(string), "* Has desencarcelado a %s.", GetPlayerNameRP(playerid2));
    SendClientMessage(playerid, Amarillo, string);
    format(string, sizeof(string), "[Radio] - {FFFFFF}Central: El agente {FFFF04}%s {FFFFFF}ha liberado al preso {56C4FF}%s.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2));
    SendRadioMessage(1, TEAM_BLUE_COLOR, string);
    printf("El policía %s ha desencarcelado a %s.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2));
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/cachear", true) == 0) //Cachear a alguien
{
	if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
	if(PlayerInfo[playerid][pServicioPD] == 0){SendClientMessage(playerid,Rojo,"* No estás de servicio."); return 1;}
	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
 	{
		SendClientMessage(playerid, Naranja, "* /Cachear [ID]");
		return 1;
	}
	playerid2 = ReturnUser(tmp);
    if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid,Rojo,"* ID inválida."); return 1;}
    if(playerid == playerid2){SendClientMessage(playerid,Rojo,"* No te puedes cachear a tí mismo."); return 1;}
	if(!GetPlayersProx(1.5, playerid, playerid2)){SendClientMessage(playerid, Rojo,"* Debes estar a su lado para cachearle."); return 1;}
	if(PlayerInfo[playerid2][pServicioPD] > 0){SendClientMessage(playerid,Rojo,"* No puedes cachear a un policía de servicio."); return 1;}
	if(IsPlayerInAnyVehicle(playerid) && GetPlayerVehicleID(playerid2) != GetPlayerVehicleID(playerid)){SendClientMessage(playerid, Rojo, "* No puedes cachear a alguien desde un vehículo."); return 1;}
    format(string, sizeof(string), "* Has sido cacheado por %s.", GetPlayerNameRP(playerid));
    SendClientMessage(playerid2, AzulClaro, string);
    format(string, sizeof(string), "* Has cacheado a %s.", GetPlayerNameRP(playerid2));
    SendClientMessage(playerid, AzulClaro, string);
	for(new x=0; x < 8; x++)
	{
	    format(string, sizeof(string), "Bolsillo %d: %s (%d).", x+1, ObjetoInfo[PlayerInfo[playerid2][pBol][x]][NombreObjeto], PlayerInfo[playerid2][pBolCant][x]);
	    SendClientMessage(playerid, AmarilloClaro, string);
	}
	format(string, sizeof(string), "* %s cachea a %s en busca de objetos ilegales.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2));
 	ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/requisar", true) == 0) //Requisar objetos a alguien
{
	if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
	if(PlayerInfo[playerid][pServicioPD] == 0){SendClientMessage(playerid,Rojo,"* No estás de servicio."); return 1;}
	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
 	{
		SendClientMessage(playerid, Naranja, "* /Requisar [ID] [Armas/Municion/Drogas]");
		return 1;
	}
	playerid2 = ReturnUser(tmp);
    if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid,Rojo,"* ID inválida."); return 1;}
    if(playerid == playerid2){SendClientMessage(playerid,Rojo,"* No te puedes requisar objetos a tí mismo."); return 1;}
	if(!GetPlayersProx(1.5, playerid, playerid2)){SendClientMessage(playerid, Rojo,"* Debes estar a su lado."); return 1;}
	if(PlayerInfo[playerid2][pServicioPD] > 0){SendClientMessage(playerid,Rojo,"* No puedes requisar objetos a un policía."); return 1;}
	if(IsPlayerInAnyVehicle(playerid)){SendClientMessage(playerid, Rojo, "* No puedes requisar objetos a alguien desde un vehículo."); return 1;}
	if(IsPlayerInAnyVehicle(playerid2)){SendClientMessage(playerid, Rojo, "* No puedes requisar objetos a alguien que está en un vehículo."); return 1;}
    new objetos[20];
	objetos = strtok(cmdtext, idx);
	if(!strlen(objetos))
	{
		SendClientMessage(playerid, Naranja, "* /Requisar [ID] [Armas/Municion/Drogas]");
		return 1;
	}
	if(strcmp(objetos,"armas",true) == 0)
	{
	    format(string, sizeof(string), "* %s te ha requisado todas sus armas.", GetPlayerNameRP(playerid));
	    SendClientMessage(playerid2, AzulClaro, string);
	    format(string, sizeof(string), "* Has requisado a %s todas sus armas.", GetPlayerNameRP(playerid2));
	    SendClientMessage(playerid, AzulClaro, string);
	    new TieneObjeto;
		for(new x=0; x < 8; x++)
		{
		    if(ObjetoInfo[PlayerInfo[playerid2][pBol][x]][IDArma] > 0)
		    {
			    format(string, sizeof(string), "* Un/a %s (%d) requisado.", ObjetoInfo[PlayerInfo[playerid2][pBol][x]][NombreObjeto], PlayerInfo[playerid2][pBolCant][x]);
			    SendClientMessage(playerid, AmarilloClaro, string);
			    PlayerInfo[playerid2][pBol][x] = 0, PlayerInfo[playerid2][pBolCant][x] = 0;
			    TieneObjeto = 1;
		    }
		}
		if(TieneObjeto == 0)SendClientMessage(playerid, AmarilloClaro, "* Nada.");
		format(string, sizeof(string), "* %s requisa a %s sus armas.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2));
	 	ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
	 	printf(string);
		return 1;
	}
	if(strcmp(objetos,"municion",true) == 0)
	{
	    format(string, sizeof(string), "* %s te ha requisado tus municiones.", GetPlayerNameRP(playerid));
	    SendClientMessage(playerid2, AzulClaro, string);
	    format(string, sizeof(string), "* Has requisado a %s sus municiones.", GetPlayerNameRP(playerid2));
	    SendClientMessage(playerid, AzulClaro, string);
	    new TieneObjeto;
		for(new x=0; x < 8; x++)
		{
		    if(PlayerInfo[playerid2][pBol][x] <= 53 && PlayerInfo[playerid2][pBol][x] >= 39)
		    {
			    format(string, sizeof(string), "* Un/a %s (%d) requisado.", ObjetoInfo[PlayerInfo[playerid2][pBol][x]][NombreObjeto], PlayerInfo[playerid2][pBolCant][x]);
			    SendClientMessage(playerid, AmarilloClaro, string);
			    PlayerInfo[playerid2][pBol][x] = 0, PlayerInfo[playerid2][pBolCant][x] = 0;
				TieneObjeto = 1;
		    }
		}
		if(TieneObjeto == 0)SendClientMessage(playerid, AmarilloClaro, "* Nada.");
		format(string, sizeof(string), "* %s requisa a %s sus municiones.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2));
	 	ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
	 	printf(string);
		return 1;
	}
	else if(strcmp(objetos,"drogas",true) == 0)
	{
	    format(string, sizeof(string), "* %s te ha requisado tus drogas.", GetPlayerNameRP(playerid));
	    SendClientMessage(playerid2, AzulClaro, string);
	    format(string, sizeof(string), "* Has requisado a %s sus drogas.", GetPlayerNameRP(playerid2));
	    SendClientMessage(playerid, AzulClaro, string);
	    new TieneObjeto;
		for(new x=0; x < 8; x++)
		{
		    if(PlayerInfo[playerid2][pBol][x] <= 86 && PlayerInfo[playerid2][pBol][x] >= 75)
		    {
			    format(string, sizeof(string), "* Un/a %s (%d) requisado.", ObjetoInfo[PlayerInfo[playerid2][pBol][x]][NombreObjeto], PlayerInfo[playerid2][pBolCant][x]);
			    SendClientMessage(playerid, AmarilloClaro, string);
			    PlayerInfo[playerid2][pBol][x] = 0, PlayerInfo[playerid2][pBolCant][x] = 0;
				TieneObjeto = 1;
		    }
		}
		if(TieneObjeto == 0)SendClientMessage(playerid, AmarilloClaro, "* Nada.");
		format(string, sizeof(string), "* %s requisa a %s sus drogas.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2));
	 	ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
	 	printf(string);
	}
	else
	{
		SendClientMessage(playerid, Rojo, "* Opción inválida.");
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/irrumpir", true) == 0) //Abrir una puerta por la fuerza
{
    if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
	if(PlayerInfo[playerid][pServicioPD] == 0){SendClientMessage(playerid,Rojo,"* No estás de servicio."); return 1;}
	if(PlayerInfo[playerid][pRango] < 2){SendClientMessage(playerid,Rojo,"* Rango insuficiente."); return 1;}
	if(!GetPlayerFueraPuertaCasa(playerid)){SendClientMessage(playerid,Rojo,"* No estás en la puerta de una casa o de un local."); return 1;}
	if(GetPlayerFueraPuertaCasa(playerid)) //Está en la puerta de una casa
	{
		new casa = GetPlayerFueraPuertaCasa(playerid);
		if(HouseInfo[casa][hCerrada] == 0){SendClientMessage(playerid,Rojo,"* Esta puerta ya está abierta."); return 1;}
		HouseInfo[casa][hCerrada] = 0;
		UpdateHouseLabel(casa);
		SendClientMessage(playerid, AzulClaro, "Has irrumpido en una casa en nombre de la ley.");
		format(string, sizeof(string), "* %s abre la puerta de una casa por la fuerza.", GetPlayerNameRP(playerid));
	    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
		printf("%s (Casa: %d)", string, casa);
		PlayerPlaySound(playerid, 1009, 0.0, 0.0, 0.0);
		new Float:EX, Float:EY, Float:EZ;
		EX = HouseInfo[casa][hEntradaX], EY = HouseInfo[casa][hEntradaY], EZ = HouseInfo[casa][hEntradaZ];
		for(new i=0; i<MAX_PLAYERS; i++)
		{
		    if(GetPlayerDentroCasa(i) == casa || IsPlayerInRangeOfPoint(i, 10.0, EX, EY, EZ))PlayerPlaySound(i, 1009, 0.0, 0.0, 0.0);
		}
	}
	else if(GetPlayerFueraPuertaNego(playerid)) //Está en la puerta de un negocio
	{
		new nego = GetPlayerFueraPuertaNego(playerid);
		if(NegoInfo[nego][nCerrado] == 0){SendClientMessage(playerid,Rojo,"* Esta puerta ya está abierta."); return 1;}
		NegoInfo[nego][nCerrado] = 0;
		UpdateNegocioLabel(nego);
		SendClientMessage(playerid, AzulClaro, "Has irrumpido en una local en nombre de la ley.");
		format(string, sizeof(string), "* %s abre la puerta de un local por la fuerza.", GetPlayerNameRP(playerid));
	    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
		printf("%s (Negocio: %d)", string, nego);
		PlayerPlaySound(playerid, 1009, 0.0, 0.0, 0.0);
		new Float:EX, Float:EY, Float:EZ;
		EX = NegoInfo[nego][nEntradaX], EY = NegoInfo[nego][nEntradaY], EZ = NegoInfo[nego][nEntradaZ];
		for(new i=0; i<MAX_PLAYERS; i++)
		{
		    if(GetPlayerDentroNego(i) == nego || IsPlayerInRangeOfPoint(i, 10.0, EX, EY, EZ))PlayerPlaySound(i, 1009, 0.0, 0.0, 0.0);
		}
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/registrar", true) == 0) //Registrar una casa o local
{
    if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
	if(PlayerInfo[playerid][pServicioPD] == 0){SendClientMessage(playerid,Rojo,"* No estás de servicio."); return 1;}
	if(PlayerInfo[playerid][pRango] < 2){SendClientMessage(playerid,Rojo,"* Rango insuficiente."); return 1;}
	if(!GetPlayerDentroCasa(playerid) && !GetPlayerDentroNego(playerid)){SendClientMessage(playerid,Rojo,"* No estás en una casa o un local."); return 1;}
	if(GetPlayerDentroCasa(playerid)) //Está en una casa
	{
		new casa = GetPlayerDentroCasa(playerid);
		format(string, sizeof(string), "* %s registra la casa en busca de objetos ilegales.", GetPlayerNameRP(playerid));
	    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
		printf("%s (Casa: %d)", string, casa);
		for(new x=0; x < 10; x++)
		{
		    format(string, sizeof(string), "Hueco %d: %s (%d).", x+1, ObjetoInfo[HouseInfo[casa][hArmario][x]][NombreObjeto], HouseInfo[casa][hArmarioCant][x]);
		    SendClientMessage(playerid, AmarilloClaro, string);
		}
		format(string, sizeof(string), "Dinero: %d$", HouseInfo[casa][hDineroGuardado]);
		SendClientMessage(playerid, AmarilloClaro, string);
	}
	else if(GetPlayerDentroNego(playerid)) //Está en un local
	{
		new nego = GetPlayerDentroCasa(playerid);
		format(string, sizeof(string), "* %s registra el local en busca de objetos ilegales.", GetPlayerNameRP(playerid));
	    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
		printf("%s (Local: %d)", string, nego);
		for(new x=0; x < NegoInfo[nego][nMaxAlmacen]; x++)
		{
		    format(string, sizeof(string), "Hueco %d: %s (%d).", x+1, ObjetoInfo[NegoInfo[nego][nAlmacen][x]][NombreObjeto], NegoInfo[nego][nAlmacenCant][x]);
		    SendClientMessage(playerid, AmarilloClaro, string);
		}
		format(string, sizeof(string), "Dinero: %d$", NegoInfo[nego][nDineroGuardado]);
		SendClientMessage(playerid, AmarilloClaro, string);
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/confiscar", true) == 0) //Confiscar objetos de una casa o local
{
	if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
	if(PlayerInfo[playerid][pServicioPD] == 0){SendClientMessage(playerid,Rojo,"* No estás de servicio."); return 1;}
	if(PlayerInfo[playerid][pRango] < 2){SendClientMessage(playerid,Rojo,"* Rango insuficiente."); return 1;}
	if(!GetPlayerDentroCasa(playerid) && !GetPlayerDentroNego(playerid)){SendClientMessage(playerid,Rojo,"* No estás en una casa o un local."); return 1;}
    new objetos[20];
	objetos = strtok(cmdtext, idx);
	if(!strlen(objetos))
	{
		SendClientMessage(playerid, Naranja, "* /Confiscar [Armas/Municion/Drogas]");
		return 1;
	}
	if(strcmp(objetos,"armas",true) == 0)
	{
	    if(GetPlayerDentroCasa(playerid)) //Está en una casa
		{
		    new TieneObjeto;
		    new casa = GetPlayerDentroCasa(playerid);
			for(new x=0; x < 10; x++)
			{
			    if(ObjetoInfo[HouseInfo[casa][hArmario][x]][IDArma] > 0)
			    {
				    format(string, sizeof(string), "* Un/a %s (%d) requisado.", ObjetoInfo[HouseInfo[casa][hArmario][x]][NombreObjeto], HouseInfo[casa][hArmarioCant][x]);
				    SendClientMessage(playerid, AmarilloClaro, string);
				    HouseInfo[casa][hArmario][x] = 0, HouseInfo[casa][hArmarioCant][x] = 0;
				    TieneObjeto = 1;
			    }
			}
			if(TieneObjeto == 0)SendClientMessage(playerid, AmarilloClaro, "* Nada.");
			format(string, sizeof(string), "* %s confisca las armas de la casa.", GetPlayerNameRP(playerid));
		 	ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
		 	printf("%s (Casa: %d)", string, casa);
			return 1;
		}
		if(GetPlayerDentroNego(playerid)) //Está en un local
		{
		    new TieneObjeto;
		    new nego = GetPlayerDentroNego(playerid);
			for(new x=0; x < NegoInfo[nego][nMaxAlmacen]; x++)
			{
			    if(ObjetoInfo[NegoInfo[nego][nAlmacen][x]][IDArma] > 0)
			    {
				    format(string, sizeof(string), "* Un/a %s (%d) requisado.", ObjetoInfo[NegoInfo[nego][nAlmacen][x]][NombreObjeto], NegoInfo[nego][nAlmacenCant][x]);
				    SendClientMessage(playerid, AmarilloClaro, string);
				    NegoInfo[nego][nAlmacen][x] = 0, NegoInfo[nego][nAlmacenCant][x] = 0;
				    TieneObjeto = 1;
			    }
			}
			if(TieneObjeto == 0)SendClientMessage(playerid, AmarilloClaro, "* Nada.");
			format(string, sizeof(string), "* %s confisca las armas del local.", GetPlayerNameRP(playerid));
		 	ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
		 	printf("%s (Local: %d)", string, nego);
			return 1;
		}
	}
	if(strcmp(objetos,"municion",true) == 0)
	{
	    if(GetPlayerDentroCasa(playerid)) //Está en una casa
		{
		    new TieneObjeto;
		    new casa = GetPlayerDentroCasa(playerid);
			for(new x=0; x < 10; x++)
			{
			    if((HouseInfo[casa][hArmario][x] <= 53 && HouseInfo[casa][hArmario][x] >= 39) || (HouseInfo[casa][hArmario][x] <= 124 && HouseInfo[casa][hArmario][x] >= 102)) //Municiones y cajas de armamento
			    {
				    format(string, sizeof(string), "* Un/a %s (%d) requisado.", ObjetoInfo[HouseInfo[casa][hArmario][x]][NombreObjeto], HouseInfo[casa][hArmarioCant][x]);
				    SendClientMessage(playerid, AmarilloClaro, string);
				    HouseInfo[casa][hArmario][x] = 0, HouseInfo[casa][hArmarioCant][x] = 0;
					TieneObjeto = 1;
			    }
			}
			if(TieneObjeto == 0)SendClientMessage(playerid, AmarilloClaro, "* Nada.");
			format(string, sizeof(string), "* %s confisca las municiones de la casa.", GetPlayerNameRP(playerid));
		 	ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
		 	printf("%s (Casa: %d)", string, casa);
			return 1;
		}
		if(GetPlayerDentroNego(playerid)) //Está en un local
		{
		    new TieneObjeto;
		    new nego = GetPlayerDentroNego(playerid);
			for(new x=0; x < NegoInfo[nego][nMaxAlmacen]; x++)
			{
			    if((NegoInfo[nego][nAlmacen][x] <= 53 && NegoInfo[nego][nAlmacen][x] >= 39) || (NegoInfo[nego][nAlmacen][x] <= 124 && NegoInfo[nego][nAlmacen][x] >= 102)) //Municiones y cajas de armamento
			    {
				    format(string, sizeof(string), "* Un/a %s (%d) requisado.", ObjetoInfo[NegoInfo[nego][nAlmacen][x]][NombreObjeto], NegoInfo[nego][nAlmacenCant][x]);
				    SendClientMessage(playerid, AmarilloClaro, string);
				    NegoInfo[nego][nAlmacen][x] = 0, NegoInfo[nego][nAlmacen][x] = 0;
					TieneObjeto = 1;
			    }
			}
			if(TieneObjeto == 0)SendClientMessage(playerid, AmarilloClaro, "* Nada.");
			format(string, sizeof(string), "* %s confisca las municiones del local.", GetPlayerNameRP(playerid));
		 	ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
		 	printf("%s (Local: %d)", string, nego);
			return 1;
		}
	}
	else if(strcmp(objetos,"drogas",true) == 0)
	{
        if(GetPlayerDentroCasa(playerid)) //Está en una casa
		{
		    new TieneObjeto;
		    new casa = GetPlayerDentroCasa(playerid);
			for(new x=0; x < 10; x++)
			{
			    if(HouseInfo[casa][hArmario][x] <= 86 && HouseInfo[casa][hArmario][x] >= 75)
			    {
				    format(string, sizeof(string), "* Un/a %s (%d) requisado.", ObjetoInfo[HouseInfo[casa][hArmario][x]][NombreObjeto], HouseInfo[casa][hArmarioCant][x]);
				    SendClientMessage(playerid, AmarilloClaro, string);
				    HouseInfo[casa][hArmario][x] = 0, HouseInfo[casa][hArmarioCant][x] = 0;
					TieneObjeto = 1;
			    }
			}
			if(TieneObjeto == 0)SendClientMessage(playerid, AmarilloClaro, "* Nada.");
			format(string, sizeof(string), "* %s confisca las drogas de la casa.", GetPlayerNameRP(playerid));
		 	ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
		 	printf("%s (Casa: %d)", string, casa);
			return 1;
		}
		if(GetPlayerDentroNego(playerid)) //Está en un local
		{
		    new TieneObjeto;
		    new nego = GetPlayerDentroNego(playerid);
			for(new x=0; x < NegoInfo[nego][nMaxAlmacen]; x++)
			{
			    if(NegoInfo[nego][nAlmacen][x] <= 86 && NegoInfo[nego][nAlmacen][x] >= 75)
			    {
				    format(string, sizeof(string), "* Un/a %s (%d) requisado.", ObjetoInfo[NegoInfo[nego][nAlmacen][x]][NombreObjeto], NegoInfo[nego][nAlmacenCant][x]);
				    SendClientMessage(playerid, AmarilloClaro, string);
				    NegoInfo[nego][nAlmacen][x] = 0, NegoInfo[nego][nAlmacen][x] = 0;
					TieneObjeto = 1;
			    }
			}
			if(TieneObjeto == 0)SendClientMessage(playerid, AmarilloClaro, "* Nada.");
			format(string, sizeof(string), "* %s confisca las drogas del local.", GetPlayerNameRP(playerid));
		 	ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
		 	printf("%s (Local: %d)", string, nego);
			return 1;
		}
	}
	else
	{
		SendClientMessage(playerid, Rojo, "* Opción inválida.");
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/multar", true) == 0) //Multar a alguien
{
	if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
	if(PlayerInfo[playerid][pServicioPD] == 0){SendClientMessage(playerid,Rojo,"* No estás de servicio."); return 1;}
	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
 	{
		SendClientMessage(playerid, Naranja, "* /Multar [ID] [Coste]");
		return 1;
	}
	playerid2 = ReturnUser(tmp);
    if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid,Rojo,"* ID inválida."); return 1;}
    if(playerid == playerid2){SendClientMessage(playerid,Rojo,"* No te puedes multar a tí mismo."); return 1;}
	if(PlayerInfo[playerid2][pFaccion] == 1){SendClientMessage(playerid,Rojo,"* No puedes multar a un policía."); return 1;}
	if(!GetPlayersProx(3.0, playerid, playerid2)){SendClientMessage(playerid, Rojo,"* Debe estar más cerca de tí."); return 1;}
	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
 	{
		SendClientMessage(playerid, Naranja, "* /Multar [ID] [Coste]");
		return 1;
	}
	new coste = strval(tmp);
	if(coste < 1 || coste > 10000){SendClientMessage(playerid,Rojo,"* El coste debe estar entre 1$ y 10000$."); return 1;}
	format(string, sizeof(string), "* Has entregado a %s una multa de %d$. Espera a que la pague.", GetPlayerNameRP(playerid2), coste);
	SendClientMessage(playerid, Amarillo, string);
	format(string, sizeof(string), "* %s te ha entregado una multa de %d$. Escribe '/Aceptar Multa' para pagarla.", GetPlayerNameRP(playerid), coste);
	SendClientMessage(playerid2, Amarillo, string);
	MultaPrecio[playerid2] = coste, Multador[playerid2] = playerid;
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/reanimar", true) == 0) //Reanimar a alguien
{
	if(PlayerInfo[playerid][pFaccion] != 2){SendClientMessage(playerid,Rojo,"* No eres Médico"); return 1;}
	if(PlayerInfo[playerid][pServicioLSMD] == 0){SendClientMessage(playerid,Rojo,"* No estás de servicio."); return 1;}
	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
 	{
		SendClientMessage(playerid, Naranja, "* /Reanimar [ID]");
		return 1;
	}
	playerid2 = ReturnUser(tmp);
    if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid,Rojo,"* ID inválida."); return 1;}
    if(playerid == playerid2){SendClientMessage(playerid,Rojo,"* No te puedes reanimar a tí mismo."); return 1;}
	if(!GetPlayersProx(3.0, playerid, playerid2)){SendClientMessage(playerid, Rojo,"* Debes estar más cerca de él."); return 1;}
	if(IsPlayerInAnyVehicle(playerid)){SendClientMessage(playerid, Rojo, "* No puedes reanimar a alguien desde un vehículo."); return 1;}
	if(PlayerInfo[playerid2][pMuerto] == 0){SendClientMessage(playerid, Rojo, "* Esta persona no necesita ser reanimada."); return 1;}
	TogglePlayerControllable(playerid, 0);
	TogglePlayerControllable(playerid2, 0);
	SetTimerEx("Descongelar", 8000, false, "i", playerid);
	SetTimerEx("Descongelar", 8000, false, "i", playerid2);
	PlayerInfo[playerid2][pMuerto] = 0;
	KillTimer(MuertoTimer[playerid2]);
	KillTimer(MuertoFlashTimer[playerid2]);
	RemovePlayerColorFade(playerid2);
	SetPlayerHealth(playerid2, 15);
	ApplyAnimation(playerid,"MEDIC","CPR",4.1,0,1,1,0,0,1);
	ApplyAnimation(playerid2,"CRACK","crckidle2",4.1,1,1,1,0,0,1);
	format(string, sizeof(string), "* %s ha reanimado a %s mediante primeros auxilios.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2));
    ProxDetector(20.0, playerid, string,Verde,Verde,Verde,Verde,Verde);
    format(string, sizeof(string), "* Has reanimado a %s.", GetPlayerNameRP(playerid2));
    SendClientMessage(playerid, AzulClaro, string);
    SendClientMessage(playerid2, AmarilloClaro, "Te han reanimado, pero sigues estando demasiado débil. Espera a que te atiendan en el hospital.");
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/trafponer", true) == 0) //Poner objetos de trafico
{
	if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
	if(PlayerInfo[playerid][pServicioPD] == 0){SendClientMessage(playerid,Rojo,"* No estás de servicio."); return 1;}
	if(IsPlayerInAnyVehicle(playerid)){SendClientMessage(playerid, Rojo, "* No puedes usar este comando desde un vehículo."); return 1;}
	if(PlayerInfo[playerid][pRango] < 2){SendClientMessage(playerid, Rojo, "* Rango insuficiente."); return 1;}
	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
 	{
		SendClientMessage(playerid, Naranja, "* /Trafico [Opción]");
		SendClientMessage(playerid, Naranja, "1 Clavos 2 Cono 3 Valla 4 Barrera");
		return 1;
	}
	switch(strval(tmp))
	{
		case 1:
		{
			new Float:plocx,Float:plocy,Float:plocz,Float:ploca;
			GetPlayerPos(playerid, plocx, plocy, plocz);
			GetPlayerFacingAngle(playerid,ploca);
			CreateCopObject(1,plocx,plocy,plocz,ploca);
		}
		case 2:
		{
		    new Float:plocx,Float:plocy,Float:plocz,Float:ploca;
			GetPlayerPos(playerid, plocx, plocy, plocz);
			GetPlayerFacingAngle(playerid,ploca);
			CreateCopObject(2,plocx,plocy,plocz-0.2,ploca);
		}
		case 3:
		{
		    new Float:plocx,Float:plocy,Float:plocz,Float:ploca;
			GetPlayerPos(playerid, plocx, plocy, plocz);
			GetPlayerFacingAngle(playerid,ploca);
			CreateCopObject(3,plocx,plocy,plocz-0.2,ploca);
		}
		case 4:
		{
		    new Float:plocx,Float:plocy,Float:plocz,Float:ploca;
			GetPlayerPos(playerid, plocx, plocy, plocz);
			GetPlayerFacingAngle(playerid,ploca);
			CreateCopObject(4,plocx,plocy,plocz-0.2,ploca);
		}
	}
 	Streamer_Update(playerid);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if (strcmp(cmd,"/trafquitar",true) == 0)
{
	if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
	if(PlayerInfo[playerid][pServicioPD] == 0){SendClientMessage(playerid,Rojo,"* No estás de servicio."); return 1;}
	if(IsPlayerInAnyVehicle(playerid)){SendClientMessage(playerid, Rojo, "* No puedes usar este comando desde un vehículo."); return 1;}
	if(PlayerInfo[playerid][pRango] < 2){SendClientMessage(playerid, Rojo, "* Rango insuficiente."); return 1;}
    DeleteClosestObject(playerid);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if (strcmp(cmd,"/traflimpiar",true) == 0)
{
	if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
	if(PlayerInfo[playerid][pServicioPD] == 0){SendClientMessage(playerid,Rojo,"* No estás de servicio."); return 1;}
	if(PlayerInfo[playerid][pRango] < 5){SendClientMessage(playerid, Rojo, "* Rango insuficiente."); return 1;}
    DeleteAllObjects();
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/noticia",true) == 0 || strcmp(cmd,"/n",true) == 0) //Comando noticias LSN
{
	new rango[33];
	if(PlayerInfo[playerid][pFaccion] != 4){SendClientMessage(playerid,Rojo,"* No eres CNN."); return 1;}
	if(!CocheLSN(GetPlayerVehicleID(playerid))){SendClientMessage(playerid, Rojo, "* No estás en un vehículo de CNN."); return 1;}
	new length = strlen(cmdtext);
	while ((idx < length) && (cmdtext[idx] <= ' '))
	{
		idx++;
	}
	new offset = idx;
	new result[80];
	while ((idx < length) && ((idx - offset) < (sizeof(result) - 1)))
	{
		result[idx - offset] = cmdtext[idx];
		idx++;
	}
	result[idx - offset] = EOS;
	if(!strlen(result))
	{
		SendClientMessage(playerid, Naranja, "* /(N)oticia [Texto]");
		return 1;
	}
	switch(PlayerInfo[playerid][pRango])
	{
		case 1: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango1]);
		case 2: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango2]);
		case 3: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango3]);
		case 4: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango4]);
		case 5: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango5]);
		case 6: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango6]);
		case 7: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango7]);
		case 8: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango8]);
	}
	format(string, sizeof(string), "[Noticias] %s %s: %s", rango,GetPlayerNameRP(playerid), result);
	NoticiasLSN(AmarilloClaro,string);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/gobierno",true) == 0 || strcmp(cmd,"/gob",true) == 0) //
{
	new rango[33];
	if(PlayerInfo[playerid][pFaccion] != 3){SendClientMessage(playerid,Rojo,"* No eres del Gobierno."); return 1;}
	if(PlayerInfo[playerid][pRango] < 3){SendClientMessage(playerid,Rojo,"* Rango insuficiente."); return 1;}
	new length = strlen(cmdtext);
	while ((idx < length) && (cmdtext[idx] <= ' '))
	{
		idx++;
	}
	new offset = idx;
	new result[80];
	while ((idx < length) && ((idx - offset) < (sizeof(result) - 1)))
	{
		result[idx - offset] = cmdtext[idx];
		idx++;
	}
	result[idx - offset] = EOS;
	if(!strlen(result))
	{
		SendClientMessage(playerid, Naranja, "* /Gob [Texto]");
		return 1;
	}
	switch(PlayerInfo[playerid][pRango])
	{
		case 1: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango1]);
		case 2: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango2]);
		case 3: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango3]);
		case 4: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango4]);
		case 5: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango5]);
		case 6: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango6]);
		case 7: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango7]);
		case 8: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango8]);
	}
	format(string, sizeof(string), "* %s %s: %s", rango,GetPlayerNameRP(playerid), result);
	NoticiasLSN(0x005FFFFF,string);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/directo",true) == 0) //Comando en vivo LSN
{
    if(PlayerInfo[playerid][pFaccion] != 4){SendClientMessage(playerid,Rojo,"* No eres CNN."); return 1;}
	if(!CocheLSN(GetPlayerVehicleID(playerid))){SendClientMessage(playerid, Rojo, "* No estás en un vehículo de CNN."); return 1;}
	new coche = GetPlayerVehicleID(playerid);
	if(DirectoLSNCoche[coche] != NOEXISTE){SendClientMessage(playerid, Rojo, "* Este vehículo ya está emitiendo en directo."); return 1;}
	DirectoLSNCoche[coche] = playerid;
	for(new i=0; i<MAX_PLAYERS; i++)
	{
	    if(GetPlayerVehicleID(i) == coche)SendClientMessage(i, NaranjaOscuro, "Este vehículo emite en directo ahora. Todo el que hable dentro de él saldrá en la radio.");
	}
	SendClientMessage(playerid, Naranja, "Para parar el directo utiliza '/DirectoOff' o baja del vehículo.");
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/directooff",true) == 0) //Comando en vivo LSN
{
    if(PlayerInfo[playerid][pFaccion] != 4){SendClientMessage(playerid,Rojo,"* No eres CNN."); return 1;}
	if(!CocheLSN(GetPlayerVehicleID(playerid))){SendClientMessage(playerid, Rojo, "* No estás en un vehículo de CNN."); return 1;}
	new coche = GetPlayerVehicleID(playerid);
	if(DirectoLSNCoche[coche] == NOEXISTE){SendClientMessage(playerid, Rojo, "* Este vehículo no está emitiendo en directo."); return 1;}
	for(new i=0; i<MAX_PLAYERS; i++)
	{
	    if(GetPlayerVehicleID(i) == coche)SendClientMessage(i, NaranjaOscuro, "Este vehículo ya no emite en directo.");
	}
	DirectoLSNCoche[coche] = NOEXISTE;
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/distribuir", true) == 0) //Comando para distribuir drogas en turfs
{
    new faccion = PlayerInfo[playerid][pFaccion];
    if(faccion == 0){SendClientMessage(playerid, Rojo, "* No formas parte de una facción."); return 1;}
    if(FaccInfo[faccion][fTipo] != 3){SendClientMessage(playerid, Rojo, "* No formas parte de una banda o pandilla."); return 1;}
    if(PlayerInfo[playerid][pRango] < 5){SendClientMessage(playerid, Rojo, "* Necesitas tener rango igual o superior a 5 en tu facción para utilizar este comando."); return 1;}
    if(!GetPlayerTurf(playerid)){SendClientMessage(playerid, Rojo, "* No estás en ningún turf."); return 1;}
 	new turf = GetPlayerTurf(playerid);
 	if(TurfInfo[turf][tFaccion] != faccion){SendClientMessage(playerid, Rojo, "* Este turf no es de tu facción."); return 1;}
 	if(!IsPlayerInRangeOfPoint(playerid, 1.0, TurfInfo[turf][tDistrbuirDrogaX], TurfInfo[turf][tDistrbuirDrogaY], TurfInfo[turf][tDistrbuirDrogaZ]))
	{
		SendClientMessage(playerid, Rojo, "* No estás en el punto de reunión con el camello. Se te ha marcado en el minimapa.");
		SetPlayerCheckpoint(playerid, TurfInfo[turf][tDistrbuirDrogaX], TurfInfo[turf][tDistrbuirDrogaY], TurfInfo[turf][tDistrbuirDrogaZ], 0.5);
		return 1;
	}
	if(IsPlayerInAnyVehicle(playerid)){SendClientMessage(playerid, Rojo, "* Debes bajar del vehículo."); return 1;}

	new opcion[30];
	opcion = strtok(cmdtext, idx);
	if(!strlen(opcion))
	{
		SendClientMessage(playerid, Naranja, "* /Distribuir [Opción] [Cantidad]");
		SendClientMessage(playerid, Naranja, "Marihuana (15$/gr), Cocaina (60$/gr), Crack (25$/gr), Heroina (75$/gr)");
		SendClientMessage(playerid, Naranja, "Nota: El valor varía según el nivel de influencia del turf.");
		SendClientMessage(playerid, Naranja, "Nota: Nivel 4 (100/100), Nivel 3 (80/100), Nivel 2 (60/100), Nivel 1 (40/100)");
		return 1;
	}

	new porcentaje;
 	switch(TurfInfo[turf][tNivel])
	{
	    case 1: porcentaje = 400;
	    case 2: porcentaje = 600;
		case 3: porcentaje = 800;
		case 4: porcentaje = 1000;
	}

	if(strcmp(opcion,"marihuana",true) == 0) //Vende marihuana en el turf
	{
	    if(TurfInfo[turf][tDrogaVendida][0] > 0)
	    {
	        format(string, sizeof(string), "* Ya han vendido este tipo de droga aquí recientemente. Debes esperar %d horas.", TurfInfo[turf][tDrogaVendida][0]);
	        SendClientMessage(playerid, Rojo, string);
	        return 1;
	    }
	    if(PlayerInfo[playerid][pManoDer] != 75 && PlayerInfo[playerid][pManoIzq] != 75){SendClientMessage(playerid, Rojo, "* No tienes un fardo de marihuana en ninguna mano."); return 1;}
	    tmp = strtok(cmdtext, idx);
		if(!strlen(tmp))
	 	{
			SendClientMessage(playerid, Naranja, "* /Distribuir Marihuana [Cantidad]");
			return 1;
		}
		new cantidad = strval(tmp);
		if(cantidad < 1){SendClientMessage(playerid, Rojo, "* La cantidad no puede ser nula o negativa."); return 1;}
		if(cantidad > PlayerInfo[playerid][pManoDerCant] && cantidad > PlayerInfo[playerid][pManoIzqCant]){SendClientMessage(playerid, Rojo, "* No hay tanta cantidad de droga en el fardo."); return 1;}

		if(PlayerInfo[playerid][pManoDer] == 75 && cantidad <= PlayerInfo[playerid][pManoDerCant])
		{
		    PlayerInfo[playerid][pManoDerCant] -= cantidad;
		}
		else if(PlayerInfo[playerid][pManoIzq] == 75 && cantidad <= PlayerInfo[playerid][pManoIzqCant])
		{
		    PlayerInfo[playerid][pManoIzqCant] -= cantidad;
		}
		new dinero = 15*cantidad*porcentaje/100;
		GivePlayerMoneyAC(playerid, dinero);
		switch(TurfInfo[turf][tNivel])
		{
		    case 1: format(string, sizeof(string), "Camello: No creo que se vaya a vender bien... Toma %d pavos.", dinero);
		    case 2: format(string, sizeof(string), "Camello: Tengo familia a la que alimentar tío, solo te puedo dar %d$.", dinero);
			case 3: format(string, sizeof(string), "Camello: Sigue trayéndome mierda de esta, se vende bien, toma %d$ por ella.", dinero);
			case 4: format(string, sizeof(string), "Camello: Aquí mandas tú, toma %d$.", dinero);
		}
		ProxDetector(15.0, playerid,string,Chat1,Chat2,Chat3,Chat4,Chat5);
		TurfInfo[turf][tDrogaVendida][0] += cantidad;
		return 1;
	}

	if(strcmp(opcion,"cocaina",true) == 0) //Vende cocaina en el turf
	{
	    if(TurfInfo[turf][tDrogaVendida][1] > 0)
	    {
	        format(string, sizeof(string), "* Ya han vendido este tipo de droga aquí recientemente. Debes esperar %d horas.", TurfInfo[turf][tDrogaVendida][1]);
	        SendClientMessage(playerid, Rojo, string);
	        return 1;
	    }
	    if(PlayerInfo[playerid][pManoDer] != 76 && PlayerInfo[playerid][pManoIzq] != 76){SendClientMessage(playerid, Rojo, "* No tienes un fardo de marihuana en ninguna mano."); return 1;}
	    tmp = strtok(cmdtext, idx);
		if(!strlen(tmp))
	 	{
			SendClientMessage(playerid, Naranja, "* /Distribuir Cocaina [Cantidad]");
			return 1;
		}
		new cantidad = strval(tmp);
		if(cantidad < 1){SendClientMessage(playerid, Rojo, "* La cantidad no puede ser nula o negativa."); return 1;}
		if(cantidad > PlayerInfo[playerid][pManoDerCant] && cantidad > PlayerInfo[playerid][pManoIzqCant]){SendClientMessage(playerid, Rojo, "* No hay tanta cantidad de droga en el fardo."); return 1;}

		if(PlayerInfo[playerid][pManoDer] == 76 && cantidad <= PlayerInfo[playerid][pManoDerCant])
		{
		    PlayerInfo[playerid][pManoDerCant] -= cantidad;
		}
		else if(PlayerInfo[playerid][pManoIzq] == 76 && cantidad <= PlayerInfo[playerid][pManoIzqCant])
		{
		    PlayerInfo[playerid][pManoIzqCant] -= cantidad;
		}
		new dinero = 60*cantidad*porcentaje/100;
		GivePlayerMoneyAC(playerid, dinero);
		switch(TurfInfo[turf][tNivel])
		{
		    case 1: format(string, sizeof(string), "Camello: No creo que se vaya a vender bien... Toma %d pavos.", dinero);
		    case 2: format(string, sizeof(string), "Camello: Tengo familia a la que alimentar tío, solo te puedo dar %d$.", dinero);
			case 3: format(string, sizeof(string), "Camello: Sigue trayéndome mierda de esta, se vende bien, toma %d$ por ella.", dinero);
			case 4: format(string, sizeof(string), "Camello: Aquí mandas tú, toma %d$.", dinero);
		}
		ProxDetector(15.0, playerid,string,Chat1,Chat2,Chat3,Chat4,Chat5);
		TurfInfo[turf][tDrogaVendida][1] += cantidad;
		return 1;
	}

	if(strcmp(opcion,"crack",true) == 0) //Vende crack en el turf
	{
	    if(TurfInfo[turf][tDrogaVendida][2] > 0)
	    {
	        format(string, sizeof(string), "* Ya han vendido este tipo de droga aquí recientemente. Debes esperar %d horas.", TurfInfo[turf][tDrogaVendida][2]);
	        SendClientMessage(playerid, Rojo, string);
	        return 1;
	    }
	    if(PlayerInfo[playerid][pManoDer] != 77 && PlayerInfo[playerid][pManoIzq] != 77){SendClientMessage(playerid, Rojo, "* No tienes un fardo de marihuana en ninguna mano."); return 1;}
	    tmp = strtok(cmdtext, idx);
		if(!strlen(tmp))
	 	{
			SendClientMessage(playerid, Naranja, "* /Distribuir Crack [Cantidad]");
			return 1;
		}
		new cantidad = strval(tmp);
		if(cantidad < 1){SendClientMessage(playerid, Rojo, "* La cantidad no puede ser nula o negativa."); return 1;}
		if(cantidad > PlayerInfo[playerid][pManoDerCant] && cantidad > PlayerInfo[playerid][pManoIzqCant]){SendClientMessage(playerid, Rojo, "* No hay tanta cantidad de droga en el fardo."); return 1;}

		if(PlayerInfo[playerid][pManoDer] == 77 && cantidad <= PlayerInfo[playerid][pManoDerCant])
		{
		    PlayerInfo[playerid][pManoDerCant] -= cantidad;
		}
		else if(PlayerInfo[playerid][pManoIzq] == 77 && cantidad <= PlayerInfo[playerid][pManoIzqCant])
		{
		    PlayerInfo[playerid][pManoIzqCant] -= cantidad;
		}
		new dinero = 25*cantidad*porcentaje/100;
		GivePlayerMoneyAC(playerid, dinero);
		switch(TurfInfo[turf][tNivel])
		{
		    case 1: format(string, sizeof(string), "Camello: No creo que se vaya a vender bien... Toma %d pavos.", dinero);
		    case 2: format(string, sizeof(string), "Camello: Tengo familia a la que alimentar tío, solo te puedo dar %d$.", dinero);
			case 3: format(string, sizeof(string), "Camello: Sigue trayéndome mierda de esta, se vende bien, toma %d$ por ella.", dinero);
			case 4: format(string, sizeof(string), "Camello: Aquí mandas tú, toma %d$.", dinero);
		}
		ProxDetector(15.0, playerid,string,Chat1,Chat2,Chat3,Chat4,Chat5);
		TurfInfo[turf][tDrogaVendida][2] += cantidad;
		return 1;
	}

	if(strcmp(opcion,"heroina",true) == 0) //Vende heroina en el turf
	{
		if(TurfInfo[turf][tDrogaVendida][3] > 0)
	    {
	        format(string, sizeof(string), "* Ya han vendido este tipo de droga aquí recientemente. Debes esperar %d horas.", TurfInfo[turf][tDrogaVendida][3]);
	        SendClientMessage(playerid, Rojo, string);
	        return 1;
	    }
	    if(PlayerInfo[playerid][pManoDer] != 78 && PlayerInfo[playerid][pManoIzq] != 78){SendClientMessage(playerid, Rojo, "* No tienes un fardo de marihuana en ninguna mano."); return 1;}
	    tmp = strtok(cmdtext, idx);
		if(!strlen(tmp))
	 	{
			SendClientMessage(playerid, Naranja, "* /Distribuir Heroina [Cantidad]");
			return 1;
		}
		new cantidad = strval(tmp);
		if(cantidad < 1){SendClientMessage(playerid, Rojo, "* La cantidad no puede ser nula o negativa."); return 1;}
		if(cantidad > PlayerInfo[playerid][pManoDerCant] && cantidad > PlayerInfo[playerid][pManoIzqCant]){SendClientMessage(playerid, Rojo, "* No hay tanta cantidad de droga en el fardo."); return 1;}

		if(PlayerInfo[playerid][pManoDer] == 78 && cantidad <= PlayerInfo[playerid][pManoDerCant])
		{
		    PlayerInfo[playerid][pManoDerCant] -= cantidad;
		}
		else if(PlayerInfo[playerid][pManoIzq] == 78 && cantidad <= PlayerInfo[playerid][pManoIzqCant])
		{
		    PlayerInfo[playerid][pManoIzqCant] -= cantidad;
		}
		new dinero = 75*cantidad*porcentaje/100;
		GivePlayerMoneyAC(playerid, dinero);
		switch(TurfInfo[turf][tNivel])
		{
		    case 1: format(string, sizeof(string), "Camello: No creo que se vaya a vender bien... Toma %d pavos.", dinero);
		    case 2: format(string, sizeof(string), "Camello: Tengo familia a la que alimentar tío, solo te puedo dar %d$.", dinero);
			case 3: format(string, sizeof(string), "Camello: Sigue trayéndome mierda de esta, se vende bien, toma %d$ por ella.", dinero);
			case 4: format(string, sizeof(string), "Camello: Aquí mandas tú, toma %d$.", dinero);
		}
		ProxDetector(15.0, playerid,string,Chat1,Chat2,Chat3,Chat4,Chat5);
		TurfInfo[turf][tDrogaVendida][3] += cantidad;
		return 1;
	}
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/dpintar", true) == 0) //Deja pintar (misión pandillas pintar)
{
	if(MuroAPintar[playerid] == NOEXISTE){SendClientMessage(playerid, Rojo, "* No estás pintando ningún graffiti."); return 1;}
	if(MuroAPintar[playerid] != NOEXISTE && RealizandoMision[playerid] != 0){SendClientMessage(playerid, Rojo, "* No estás pintando ningún graffiti."); return 1;}
	MuroAPintar[playerid] = NOEXISTE;
	ClearAnimations(playerid, 1);
	TogglePlayerControllable(playerid, 1);
	SendClientMessage(playerid, Amarillo, "SMS de Nº oculto: Vaya cagada... Recuérdame que te no te vuelva a llamar para estas cosas.");
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/turf", true) == 0) //Comando para pandillas/bandas para gangzones
{
	new faccion = PlayerInfo[playerid][pFaccion];
    if(faccion == 0){SendClientMessage(playerid, Rojo, "* No formas parte de una facción."); return 1;}
    if(FaccInfo[faccion][fTipo] != 3){SendClientMessage(playerid, Rojo, "* No formas parte de una banda o pandilla."); return 1;}
    if(PlayerInfo[playerid][pRango] < 5){SendClientMessage(playerid, Rojo, "* Necesitas tener rango igual o superior a 5 en tu facción para utilizar este comando."); return 1;}

	new opcion[30];
	opcion = strtok(cmdtext, idx);
	if(!strlen(opcion))
	{
		SendClientMessage(playerid, Naranja, "* /Turf [Opción] ");
		SendClientMessage(playerid, Naranja, "Influenciar (-12 pts), Conquistar (-36 pts), Atacar (-24 pts), Desinfluenciar (+8 pts)");
		format(string, sizeof(string), "Puntos de expansión de tu facción: %d pts.", FaccInfo[faccion][fPuntosExpansion]);
		SendClientMessage(playerid, Amarillo, string);
		return 1;
	}

	if(!GetPlayerTurf(playerid)){SendClientMessage(playerid, Rojo, "* No estás en ningún turf."); return 1;}
 	new turfid = GetPlayerTurf(playerid);

	for(new x = 0; x<=TotalTurfs; x++)
	{
	    if(TurfInfo[x][tAtacante] == faccion){SendClientMessage(playerid,Rojo,"* No usar este comando si tu facción está atacando o conquistando un turf."); return 1;}
	}

	for(new x = 0; x<=TotalTurfs; x++)
	{
	    if(TurfInfo[x][tFaccion] == faccion && TurfInfo[x][tAtacante] != 0){SendClientMessage(playerid,Rojo,"* No usar este comando si están atacando o conquistando un turf de tu facción."); return 1;}
	}


	if(strcmp(opcion,"influenciar",true) == 0) //Colonizar un turf o subirlo de nivel
	{
 		if(FaccInfo[faccion][fPuntosExpansion] < 12){SendClientMessage(playerid, Rojo ,"* Tu facción necesita tener al menos 12 puntos de expansión para aumentar su influencia. Espera unas horas."); return 1;}
	    if(TurfInfo[turfid][tFaccion] != 0 && TurfInfo[turfid][tFaccion] != faccion) //Si el turf ya pertenece a una facción
		{
			SendClientMessage(playerid,Rojo,"* Este turf ya pertenece a una facción.");
			SendClientMessage(playerid,Rojo,"* Utiliza '/Turf Conquistar' o '/Turf Atacar' si quieres anexionarlo.");
			return 1;
		}
		if(TurfInfo[turfid][tAtacante] != 0){SendClientMessage(playerid,Rojo,"* No puedes usar este comando en un turf que está siendo atacado o conquistado."); return 1;}
		if(TurfInfo[turfid][tFaccion] == 0) //Si el turf no tiene dueño
		{
			new turfadyacente;
		    for(new x = 0; x<=TotalTurfs; x++)
		    {
		        if(x != turfid && TurfInfo[x][tFaccion] == faccion && TurfInfo[x][tNivel] >= 2)
		        {
		        	if( ((TurfInfo[turfid][tMinX] > TurfInfo[x][tMinX] && TurfInfo[turfid][tMinX] < TurfInfo[x][tMaxX]) || (TurfInfo[turfid][tMaxX] < TurfInfo[x][tMaxX] && TurfInfo[turfid][tMaxX] > TurfInfo[x][tMinX]) || (TurfInfo[turfid][tMinX] <= TurfInfo[x][tMinX] && TurfInfo[turfid][tMaxX] >= TurfInfo[x][tMaxX])) && (TurfInfo[turfid][tMinY] == TurfInfo[x][tMaxY] || TurfInfo[turfid][tMaxY] == TurfInfo[x][tMinY]) ){turfadyacente = x; break;}
		        	else if( ((TurfInfo[turfid][tMinY] > TurfInfo[x][tMinY] && TurfInfo[turfid][tMinY] < TurfInfo[x][tMaxY]) || (TurfInfo[turfid][tMaxY] < TurfInfo[x][tMaxY] && TurfInfo[turfid][tMaxY] > TurfInfo[x][tMinY]) || (TurfInfo[turfid][tMinY] <= TurfInfo[x][tMinY] && TurfInfo[turfid][tMaxY] >= TurfInfo[x][tMaxY])) && (TurfInfo[turfid][tMinX] == TurfInfo[x][tMaxX] || TurfInfo[turfid][tMaxX] == TurfInfo[x][tMinX]) ){turfadyacente = x; break;}
		        }
		    }
		    if(turfadyacente == 0){SendClientMessage(playerid,Rojo,"* Este turf no es adyacente a un turf de tu facción con influencia igual o superior a 2."); return 1;}
		    new cuentaturf;
		    for(new x = 0; x<=TotalTurfs; x++)
		    {
		        if(TurfInfo[x][tFaccion] == faccion) cuentaturf ++;
		    }
		    if(cuentaturf >= 6){SendClientMessage(playerid,Rojo,"* Actualmente solo se permiten 6 turfs por facción."); return 1;}
		    TurfInfo[turfid][tFaccion] = faccion;
		    TurfInfo[turfid][tNivel] = 1;
		    ActualizarTurf(turfid);
		    SendClientMessage(playerid, Amarillo, "* Tu facción ha expandido su influencia a este turf.");
		    SendClientMessage(playerid, Amarillo, "* Tu facción pierde 12 puntos de expansión por esta acción.");
		    FaccInfo[faccion][fPuntosExpansion] -= 12;
		    return 1;
		}
		if(TurfInfo[turfid][tFaccion] == faccion) //Si el turf ya pertenece a la facción del jugador
		{
		    if(TurfInfo[turfid][tNivel] >= 3){SendClientMessage(playerid,Rojo,"* Solo puedes tener un turf de influencia superior a 3 (tu turf principal)."); return 1;}
		    TurfInfo[turfid][tNivel] ++;
		    ActualizarTurf(turfid);
		    format(string, sizeof(string), "* Tu facción ha aumentado su influencia en este turf al nivel %d.", TurfInfo[turfid][tNivel]);
			SendClientMessage(playerid, Amarillo, string);
			SendClientMessage(playerid, Amarillo, "* Tu facción pierde 12 puntos de expansión por esta acción.");
			FaccInfo[faccion][fPuntosExpansion] -= 12;
		    return 1;
		}
	}

	if(strcmp(opcion,"conquistar",true) == 0) //Conquistar un turf
	{
 		if(FaccInfo[faccion][fPuntosExpansion] < 36){SendClientMessage(playerid, Rojo ,"* Tu facción necesita tener al menos 36 puntos de expansión para conquistar un turf. Espera unas horas."); return 1;}
	    if(TurfInfo[turfid][tFaccion] == faccion) //Si el turf pertenece a su facción
		{
			SendClientMessage(playerid,Rojo,"* No puedes conquistar un turf que ya pertenece a tu facción.");
			SendClientMessage(playerid,Rojo,"* Utiliza '/Turf Influenciar' si quieres aumentar la influencia de tu facción sobre él.");
			return 1;
		}
		else if(TurfInfo[turfid][tFaccion] == 0) //Si el turf no tiene dueño
		{
			SendClientMessage(playerid,Rojo,"* No puedes conquistar un turf que no pertenece a ninguna facción.");
			SendClientMessage(playerid,Rojo,"* Utiliza '/Turf Influenciar' si quieres aumentar la influencia de tu facción sobre él.");
			return 1;
		}
		else //El turf pertenece a otra facción
		{
			new turfadyacente;
		    for(new x = 0; x<=TotalTurfs; x++)
		    {
		        if(x != turfid && TurfInfo[x][tFaccion] == faccion)
		        {
		        	if( ((TurfInfo[turfid][tMinX] > TurfInfo[x][tMinX] && TurfInfo[turfid][tMinX] < TurfInfo[x][tMaxX]) || (TurfInfo[turfid][tMaxX] < TurfInfo[x][tMaxX] && TurfInfo[turfid][tMaxX] > TurfInfo[x][tMinX]) || (TurfInfo[turfid][tMinX] <= TurfInfo[x][tMinX] && TurfInfo[turfid][tMaxX] >= TurfInfo[x][tMaxX])) && (TurfInfo[turfid][tMinY] == TurfInfo[x][tMaxY] || TurfInfo[turfid][tMaxY] == TurfInfo[x][tMinY]) ){turfadyacente = x; break;}
		        	else if( ((TurfInfo[turfid][tMinY] > TurfInfo[x][tMinY] && TurfInfo[turfid][tMinY] < TurfInfo[x][tMaxY]) || (TurfInfo[turfid][tMaxY] < TurfInfo[x][tMaxY] && TurfInfo[turfid][tMaxY] > TurfInfo[x][tMinY]) || (TurfInfo[turfid][tMinY] <= TurfInfo[x][tMinY] && TurfInfo[turfid][tMaxY] >= TurfInfo[x][tMaxY])) && (TurfInfo[turfid][tMinX] == TurfInfo[x][tMaxX] || TurfInfo[turfid][tMaxX] == TurfInfo[x][tMinX]) ){turfadyacente = x; break;}
		        }
		    }
		    if(turfadyacente == 0){SendClientMessage(playerid,Rojo,"* Este turf no es adyacente a un turf de tu facción."); return 1;}
		    new cuentaturf;
		    for(new x = 0; x<=TotalTurfs; x++)
		    {
		        if(TurfInfo[x][tFaccion] == faccion) cuentaturf ++;
		    }
		    if(cuentaturf >= 6){SendClientMessage(playerid,Rojo,"* Actualmente solo se permiten 6 turfs por facción."); return 1;}
		    if(TurfInfo[turfid][tNivel] > 1)
			{
				SendClientMessage(playerid,Rojo,"* Solo puedes conquistar turfs de otras facciones con nivel de influencia 1.");
				SendClientMessage(playerid,Rojo,"* Utiliza '/Turf Atacar' para reducir la influencia de esa facción en este turf.");
				return 1;
			}
			new miembrocuenta;
			for(new i = 0; i<MAX_PLAYERS; i++)
			{
			    if(PlayerInfo[i][pFaccion] == TurfInfo[turfid][tFaccion] && PlayerInfo[i][pEncarcelado] == 0) miembrocuenta++;
			}
			if(miembrocuenta < 3){SendClientMessage(playerid,Rojo,"* Deben estar conectados al menos 3 miembros de la facción de este turf para poder conquistarlo."); return 1;}

			new atacantesenturf;
			for(new i = 0; i<MAX_PLAYERS; i++)
			{
				if(IsPlayerInDynamicArea(i, TurfInfo[turfid][tArea])) atacantesenturf ++;
			}
            if(atacantesenturf < 3){SendClientMessage(playerid,Rojo,"* Deben estar al menos 3 miembros de tu facción en este turf para poder conquistarlo."); return 1;}

            SendFaccionMessage(TurfInfo[turfid][tFaccion], Amarillo, "SMS de Nº oculto: Están intentando conquistar nuestro territorio.");
            SendFaccionMessage(TurfInfo[turfid][tFaccion], Amarillo, "SMS de Nº oculto: No podemos permitir que nos echen de allí.");
            for(new i = 0; i<MAX_PLAYERS; i++)
			{
			    if(PlayerInfo[i][pFaccion] == TurfInfo[turfid][tFaccion])
			    {
			        SetPlayerMapIcon(i, 1, (TurfInfo[turfid][tMinX]+TurfInfo[turfid][tMaxX])/2, (TurfInfo[turfid][tMinY]+TurfInfo[turfid][tMaxY])/2, 0, 18, 0xFFFFFFFF, MAPICON_GLOBAL);
			    }
			}

		    format(string, sizeof(string), "SMS de Nº oculto: Estamos conquistando un turf de %s.", FaccInfo[TurfInfo[turfid][tFaccion]][fNombre]);
			SendFaccionMessage(faccion, Amarillo, string);
			SendFaccionMessage(faccion, Amarillo, "SMS de Nº oculto: Tenemos que aguantar allí el máximo tiempo posible.");
		    TurfInfo[turfid][tAtacante] = faccion;
		    ActualizarTurf(turfid);

		    SetTimerEx("AtacarTurf", 240000, false, "d, d", turfid, 2);

		    SendClientMessage(playerid, Amarillo, "* Tu facción pierde 36 puntos de expansión por esta acción.");
		    FaccInfo[faccion][fPuntosExpansion] -= 36;
		    return 1;
		}
	}

	if(strcmp(opcion,"atacar",true) == 0) //Atacar un turf
	{
 		if(FaccInfo[faccion][fPuntosExpansion] < 24){SendClientMessage(playerid, Rojo ,"* Tu facción necesita tener al menos 24 puntos de expansión para conquistar un turf. Espera unas horas."); return 1;}
	    if(TurfInfo[turfid][tFaccion] == faccion) //Si el turf pertenece a su facción
		{
			SendClientMessage(playerid,Rojo,"* No puedes atacar un turf que ya pertenece a tu facción.");
			SendClientMessage(playerid,Rojo,"* Utiliza '/Turf Influenciar' si quieres aumentar la influencia de tu facción sobre él.");
			return 1;
		}
		else if(TurfInfo[turfid][tFaccion] == 0) //Si el turf no tiene dueño
		{
			SendClientMessage(playerid,Rojo,"* No puedes atacar un turf que no pertenece a ninguna facción.");
			SendClientMessage(playerid,Rojo,"* Utiliza '/Turf Influenciar' si quieres aumentar la influencia de tu facción sobre él.");
			return 1;
		}
		else //El turf pertenece a otra facción
		{
		    if(TurfInfo[turfid][tNivel] >= 4){SendClientMessage(playerid,Rojo,"* No puedes atacar el turf principal de una facción."); return 1;}
			if(TurfInfo[turfid][tNivel] <= 1){SendClientMessage(playerid,Rojo,"* No puedes atacar un turf de influencia nivel 1."); return 1;}
			new miembrocuenta;
			for(new i = 0; i<MAX_PLAYERS; i++)
			{
			    if(PlayerInfo[i][pFaccion] == TurfInfo[turfid][tFaccion] && PlayerInfo[i][pEncarcelado] == 0) miembrocuenta++;
			}
			if(miembrocuenta < 3){SendClientMessage(playerid,Rojo,"* Deben estar conectados al menos 3 miembros de la facción de este turf para poder atacarlo."); return 1;}

			new atacantesenturf;
			for(new i = 0; i<MAX_PLAYERS; i++)
			{
				if(IsPlayerInDynamicArea(i, TurfInfo[turfid][tArea])) atacantesenturf ++;
			}
            if(atacantesenturf < 3){SendClientMessage(playerid,Rojo,"* Deben estar al menos 3 miembros de tu facción en este turf para comenzar un ataque."); return 1;}

            SendFaccionMessage(TurfInfo[turfid][tFaccion], Amarillo, "SMS de Nº oculto: Están atacando nuestro territorio.");
            SendFaccionMessage(TurfInfo[turfid][tFaccion], Amarillo, "SMS de Nº oculto: Moved el culo hasta allí y defendedlo como sea.");
            for(new i = 0; i<MAX_PLAYERS; i++)
			{
			    if(PlayerInfo[i][pFaccion] == TurfInfo[turfid][tFaccion])
			    {
			        SetPlayerMapIcon(i, 1, (TurfInfo[turfid][tMinX]+TurfInfo[turfid][tMaxX])/2, (TurfInfo[turfid][tMinY]+TurfInfo[turfid][tMaxY])/2, 0, 18, 0xFFFFFFFF, MAPICON_GLOBAL);
			    }
			}

			format(string, sizeof(string), "SMS de Nº oculto: Estamos atacando un turf de %s.", FaccInfo[TurfInfo[turfid][tFaccion]][fNombre]);
			SendFaccionMessage(faccion, Amarillo, string);
			SendFaccionMessage(faccion, Amarillo, "SMS de Nº oculto: Tenemos que aguantar allí el máximo tiempo posible.");
		    TurfInfo[turfid][tAtacante] = faccion;
		    ActualizarTurf(turfid);

		    SetTimerEx("AtacarTurf", 240000, false, "d, d", turfid, 1);

		    SendClientMessage(playerid, Amarillo, "* Tu facción pierde 24 puntos de expansión por esta acción.");
		    FaccInfo[faccion][fPuntosExpansion] -= 24;
		    return 1;
		}
	}

	if(strcmp(opcion,"desinfluenciar",true) == 0) //Colonizar un turf o subirlo de nivel
	{
		if(TurfInfo[turfid][tFaccion] != faccion){SendClientMessage(playerid,Rojo,"* Este turf no es de tu facción."); return 1;}
		if(TurfInfo[turfid][tNivel] >= 4){SendClientMessage(playerid,Rojo,"* No puedes desinfluenciar tu turf principal."); return 1;}
		if(TurfInfo[turfid][tAtacante] != 0){SendClientMessage(playerid,Rojo,"* No puedes usar este comando en un turf que está siendo atacado o conquistado."); return 1;}
		if(TurfInfo[turfid][tNivel] == 1)
		{
		    TurfInfo[turfid][tFaccion] = 0;
		    ActualizarTurf(turfid);
		    SendClientMessage(playerid, Amarillo, "* Tu facción ha abandonado por completo este turf.");
		    SendClientMessage(playerid, Amarillo, "* Tu facción gana 8 puntos de expansión por esta acción.");
			FaccInfo[faccion][fPuntosExpansion] += 8;
		    return 1;
		}
		TurfInfo[turfid][tNivel] --;
		if(TurfInfo[turfid][tNivel] < 1) TurfInfo[turfid][tNivel] = 1;
		ActualizarTurf(turfid);
        format(string, sizeof(string), "* Tu facción ha reducido su influencia en este turf al nivel %d.", TurfInfo[turfid][tNivel]);
		SendClientMessage(playerid, Amarillo, string);
		SendClientMessage(playerid, Amarillo, "* Tu facción gana 8 puntos de expansión por esta acción.");
		FaccInfo[faccion][fPuntosExpansion] += 8;
        return 1;
	}

	else
	{
		SendClientMessage(playerid, Naranja, "* /Turf [Opción] ");
		SendClientMessage(playerid, Naranja, "Influenciar, Conquistar, Atacar, Desinfluenciar");
	}
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/contactodrogas", true) == 0) //Comando para comprar drogas
{
    if(FaccInfo[PlayerInfo[playerid][pFaccion]][fTipo] != 4){SendClientMessage(playerid,Rojo,"* No formas parte de una mafia."); return 1;}
    if(PlayerInfo[playerid][pRango] < 5){SendClientMessage(playerid,Rojo,"* Debes tener al menos rango 5 para usar este comando."); return 1;}
    if(FaccInfo[PlayerInfo[playerid][pFaccion]][fTiempoDrogas] > 0)
    {
        format(string, sizeof(string), "* Tu facción ya ha comprado drogas recientemente. Debes esperar %d horas.", FaccInfo[PlayerInfo[playerid][pFaccion]][fTiempoDrogas]);
        SendClientMessage(playerid, Rojo, string);
        return 1;
    }
    new policonectado;
    for(new x=0; x<MAX_PLAYERS; x++)
    {
        if(IsPlayerConnected(x) && x != INVALID_PLAYER_ID && PlayerInfo[x][pFaccion] == 1){policonectado ++;}
	}
    if(policonectado < 2){SendClientMessage(playerid, Rojo, "* Debe haber al menos dos policías conectado de servicio para usar este comando."); return 1;}
    if(!IsPlayerInRangeOfPoint(playerid, 25.0, -1744.2081,161.1686,3.2562)){SendClientMessage(playerid,Rojo,"* No estás en el puerto de San Fierro."); return 1;}
	new opcion[30];
	opcion = strtok(cmdtext, idx);
	if(!strlen(opcion))
	{
		SendClientMessage(playerid, Naranja, "* /ContactoDrogas [Droga] [Cantidad]");
  		SendClientMessage(playerid, Naranja, "Cocaina (30$/gr), Heroina (40$/gr), LSD (10$/gr)");
		return 1;
	}

	if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid,Rojo,"* Tienes ambas manos ocupadas."); return 1;}

	if(strcmp(opcion,"cocaina",true) == 0) //Compra cocaína
	{
	    tmp = strtok(cmdtext, idx);
		if(!strlen(tmp))
	 	{
			SendClientMessage(playerid, Naranja, "* /ContactoDrogas Cocaina [Cantidad]");
			return 1;
		}
		new cantidad = strval(tmp);
		if(cantidad < 20 || cantidad > 70){SendClientMessage(playerid,Rojo,"* La cantidad debe estar entre 20 y 70."); return 1;}
		new dinero = 30*cantidad;
		if(GetPlayerMoney(playerid) < dinero){SendClientMessage(playerid,Rojo,"* No tienes suficiente dinero."); return 1;}
		if(PlayerInfo[playerid][pManoDer] == 0)
		{
		    PlayerInfo[playerid][pManoDer] = 76, PlayerInfo[playerid][pManoDerCant] = cantidad;
		    PonerObjeto(playerid, 1, 76);
		}
		else if(PlayerInfo[playerid][pManoIzq] == 0)
		{
		    PlayerInfo[playerid][pManoIzq] = 76, PlayerInfo[playerid][pManoIzqCant] = cantidad;
		    PonerObjeto(playerid, 2, 76);
		}
		GivePlayerMoneyAC(playerid, -dinero);
		format(string, sizeof(string), "Desconocido: %d gramos de cocaína por %d$. Recuerda no meterte tu propia mierda.", cantidad, dinero);
		ProxDetector(15.0, playerid,string,Chat1,Chat2,Chat3,Chat4,Chat5);

		if(AvisoLSPDCompraDrogas <= 0)
		{
		    SendRadioMessage(1, TEAM_BLUE_COLOR, "[Radio] -{FFFFFF} Central: Hay rumores de que intentan introducir un cargamento de drogas en la ciudad.");
		    AvisoLSPDCompraDrogas = 15;
		}

		SetTimerEx("AsignarTiempoCompraMafias", 600000, false, "d, d", PlayerInfo[playerid][pFaccion], 2);
		return 1;
	}

	if(strcmp(opcion,"heroina",true) == 0) //Compra heroina
	{
	    tmp = strtok(cmdtext, idx);
		if(!strlen(tmp))
	 	{
			SendClientMessage(playerid, Naranja, "* /ContactoDrogas Heroina [Cantidad]");
			return 1;
		}
		new cantidad = strval(tmp);
		if(cantidad < 20 || cantidad > 70){SendClientMessage(playerid,Rojo,"* La cantidad debe estar entre 20 y 70."); return 1;}
		new dinero = 40*cantidad;
		if(GetPlayerMoney(playerid) < dinero){SendClientMessage(playerid,Rojo,"* No tienes suficiente dinero."); return 1;}
		if(PlayerInfo[playerid][pManoDer] == 0)
		{
		    PlayerInfo[playerid][pManoDer] = 78, PlayerInfo[playerid][pManoDerCant] = cantidad;
		    PonerObjeto(playerid, 1, 78);
		}
		else if(PlayerInfo[playerid][pManoIzq] == 0)
		{
		    PlayerInfo[playerid][pManoIzq] = 78, PlayerInfo[playerid][pManoIzqCant] = cantidad;
		    PonerObjeto(playerid, 2, 78);
		}
		GivePlayerMoneyAC(playerid, -dinero);
		format(string, sizeof(string), "Desconocido: %d gramos de heroina por %d$. Recuerda no meterte tu propia mierda.", cantidad, dinero);
		ProxDetector(15.0, playerid,string,Chat1,Chat2,Chat3,Chat4,Chat5);

		if(AvisoLSPDCompraDrogas <= 0)
		{
		    SendRadioMessage(1, TEAM_BLUE_COLOR, "[Radio] -{FFFFFF} Central: Hay rumores de que intentan introducir un cargamento de drogas en la ciudad.");
		    AvisoLSPDCompraDrogas = 15;
		}

		SetTimerEx("AsignarTiempoCompraMafias", 600000, false, "d, d", PlayerInfo[playerid][pFaccion], 2);
		return 1;
	}

	if(strcmp(opcion,"lsd",true) == 0) //Compra LSD
	{
	    tmp = strtok(cmdtext, idx);
		if(!strlen(tmp))
	 	{
			SendClientMessage(playerid, Naranja, "* /ContactoDrogas LSD [Cantidad]");
			return 1;
		}
		new cantidad = strval(tmp);
		if(cantidad < 20 || cantidad > 70){SendClientMessage(playerid,Rojo,"* La cantidad debe estar entre 20 y 70."); return 1;}
		new dinero = 10*cantidad;
		if(GetPlayerMoney(playerid) < dinero){SendClientMessage(playerid,Rojo,"* No tienes suficiente dinero."); return 1;}
		if(PlayerInfo[playerid][pManoDer] == 0)
		{
		    PlayerInfo[playerid][pManoDer] = 79, PlayerInfo[playerid][pManoDerCant] = cantidad;
		    PonerObjeto(playerid, 1, 79);
		}
		else if(PlayerInfo[playerid][pManoIzq] == 0)
		{
		    PlayerInfo[playerid][pManoIzq] = 79, PlayerInfo[playerid][pManoIzqCant] = cantidad;
		    PonerObjeto(playerid, 2, 79);
		}
		GivePlayerMoneyAC(playerid, -dinero);
		format(string, sizeof(string), "Desconocido: %d gramos de LSD por %d$. Espero que no den malos viajes.", cantidad, dinero);
		ProxDetector(15.0, playerid,string,Chat1,Chat2,Chat3,Chat4,Chat5);

		if(AvisoLSPDCompraDrogas <= 0)
		{
		    SendRadioMessage(1, TEAM_BLUE_COLOR, "[Radio] -{FFFFFF} Central: Hay rumores de que intentan introducir un cargamento de drogas en la ciudad.");
		    AvisoLSPDCompraDrogas = 15;
		}

		SetTimerEx("AsignarTiempoCompraMafias", 600000, false, "d, d", PlayerInfo[playerid][pFaccion], 2);
		return 1;
	}
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/contactoarmas", true) == 0) //Comando para comprar armamento
{
	if(FaccInfo[PlayerInfo[playerid][pFaccion]][fTipo] != 4){SendClientMessage(playerid,Rojo,"* No formas parte de una mafia."); return 1;}
    if(PlayerInfo[playerid][pRango] < 5){SendClientMessage(playerid,Rojo,"* Debes tener al menos rango 5 para usar este comando."); return 1;}
    if(FaccInfo[PlayerInfo[playerid][pFaccion]][fTiempoArmas] > 0)
    {
        format(string, sizeof(string), "* Tu facción ya ha comprado armas recientemente. Debes esperar %d horas.", FaccInfo[PlayerInfo[playerid][pFaccion]][fTiempoArmas]);
        SendClientMessage(playerid, Rojo, string);
        return 1;
    }
    new policonectado;
    for(new x=0; x<MAX_PLAYERS; x++)
    {
        if(IsPlayerConnected(x) && x != INVALID_PLAYER_ID && PlayerInfo[x][pFaccion] == 1){policonectado ++;}
    }
    if(policonectado < 2){SendClientMessage(playerid, Rojo, "* Debe haber al menos dos policías conectado de servicio para usar este comando."); return 1;}
    if(!IsPlayerInRangeOfPoint(playerid, 25.0, -1744.2081,161.1686,3.2562) && !IsPlayerInRangeOfPoint(playerid, 25.0, 2803.7034,970.4707,10.7500)){SendClientMessage(playerid,Rojo,"* No estás en el puerto de San Fierro ni en el almacén de Las Venturas."); return 1;}
    if(!GetPlayerVehicleID(playerid)){SendClientMessage(playerid,Rojo,"* Debes conducir un vehículo privado para usar este comando."); return 1;}
    if(GetPlayerState(playerid) != PLAYER_STATE_DRIVER){SendClientMessage(playerid,Rojo,"* Debes conducir un vehículo privado para usar este comando."); return 1;}
	if(GetPlayerVehicleID(playerid) <= MAX_VEHPUBLICO){SendClientMessage(playerid,Rojo,"* Debes conducir un vehículo privado para usar este comando."); return 1;}
	new carid = GetPlayerVehicleID(playerid), maleterolibre;
	if(!PlayerTieneLlaveVeh(playerid, carid)){SendClientMessage(playerid,Rojo,"* No puedes abrir el maletero de este vehículo."); return 1;}
	for(new x=0; x<CarInfo[carid][cMaxMaletero]; x++)
	{
	    if(CarInfo[carid][cMaletero][x] == 0){maleterolibre = 1; break;}
	}
	if(maleterolibre == 0){SendClientMessage(playerid,Rojo,"* No queda espacio en el maletero de este vehículo."); return 1;}
	ProxDetector(15.0, playerid,"Desconocido: ¿Qué necesitas esta vez?",Chat1,Chat2,Chat3,Chat4,Chat5);
	new dialog[1024];
	format(string, sizeof(string), "\nKatana x3 (%d$)", PreciosContactoArmas[0]);
	strcat(dialog, string);
	format(string, sizeof(string), "\nM1911 x7 (%d$)", PreciosContactoArmas[1]);
	strcat(dialog, string);
	format(string, sizeof(string), "\nCargador M1911 x7 (%d$)", PreciosContactoArmas[2]);
	strcat(dialog, string);
	format(string, sizeof(string), "\nMunición .45 ACP x4 (%d$)", PreciosContactoArmas[3]);
	strcat(dialog, string);
 	format(string, sizeof(string), "\nD. Eagle x5 (%d$)", PreciosContactoArmas[4]);
	strcat(dialog, string);
	format(string, sizeof(string), "\nCargador D. Eagle x5 (%d$)", PreciosContactoArmas[5]);
	strcat(dialog, string);
	format(string, sizeof(string), "\nMunición .50 AE x2 (%d$)", PreciosContactoArmas[6]);
	strcat(dialog, string);
	format(string, sizeof(string), "\nTec-9 x5 (%d$)", PreciosContactoArmas[7]);
	strcat(dialog, string);
	format(string, sizeof(string), "\nCargador Tec-9 x5 (%d$)", PreciosContactoArmas[8]);
	strcat(dialog, string);
	format(string, sizeof(string), "\nUZI x5 (%d$)", PreciosContactoArmas[9]);
	strcat(dialog, string);
	format(string, sizeof(string), "\nCargador UZI x5 (%d$)", PreciosContactoArmas[10]);
	strcat(dialog, string);
	format(string, sizeof(string), "\nMP5 x5 (%d$)", PreciosContactoArmas[11]);
	strcat(dialog, string);
	format(string, sizeof(string), "\nCargador MP5 x5 (%d$)", PreciosContactoArmas[12]);
	strcat(dialog, string);
	format(string, sizeof(string), "\nMunición SMG x3 (%d0$)", PreciosContactoArmas[13]);
	strcat(dialog, string);
	format(string, sizeof(string), "\nEscopeta x3 (%d$)", PreciosContactoArmas[14]);
	strcat(dialog, string);
	format(string, sizeof(string), "\nEscopeta recortada x4 (%d$)", PreciosContactoArmas[15]);
	strcat(dialog, string);
	format(string, sizeof(string), "\nMunición 12GA x2 (%d$)", PreciosContactoArmas[16]);
	strcat(dialog, string);
	format(string, sizeof(string), "\nAk-47 x3 (%d$)", PreciosContactoArmas[17]);
	strcat(dialog, string);
	format(string, sizeof(string), "\nCargador Ak-47 x3 (%d$)", PreciosContactoArmas[18]);
	strcat(dialog, string);
	format(string, sizeof(string), "\nMunición Ak-47 x2 (%d$)", PreciosContactoArmas[19]);
	strcat(dialog, string);
	format(string, sizeof(string), "\nRifle x3 (%d$)", PreciosContactoArmas[20]);
	strcat(dialog, string);
	format(string, sizeof(string), "\nCargador Rifle x3 (%d$)", PreciosContactoArmas[21]);
	strcat(dialog, string);
	format(string, sizeof(string), "\nMunición Rifle x2 (%d$)", PreciosContactoArmas[22]);
	strcat(dialog, string);

	ShowPlayerDialog(playerid, 23, DIALOG_STYLE_LIST, "Contacto de armas", dialog, "Seleccionar", "Cerrar");

	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/miembros", true) == 0) //Comando para ver los miembros online de tu facción
{
	if(PlayerInfo[playerid][pFaccion] == 0){SendClientMessage(playerid,Rojo,"* No formas parte de una facción."); return 1;}
	format(string, sizeof(string), "SELECT Nombre FROM facciones WHERE ID = %d", PlayerInfo[playerid][pFaccion]);
 	mysql_query(1, string);
	new faccion[30];
	mysql_fetch_field_row(faccion, "Nombre");
	mysql_free_result();
    format(string, sizeof(string), "Miembros conectados de %s:", faccion);
	SendClientMessage(playerid, Amarillo, string);
	for(new i = 0; i < MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i) && i != INVALID_PLAYER_ID)
		{
			if(PlayerInfo[i][pFaccion] == PlayerInfo[playerid][pFaccion])
			{
				format(string, sizeof(string), "- %s [ID: %d] (%d)", PlayerInfo[i][pNombre], i, PlayerInfo[i][pRango]);
				SendClientMessage(playerid, Blanco, string);
			}
		}
	}
    return 1;
}

//----------COMANDOS CANALES----------//

if(strcmp(cmd, "/faccion", true) == 0 || strcmp(cmd, "/f", true) == 0) //Chat facciones públicas OOC
{
    if(IsPlayerConnected(playerid))
    {
        if(PlayerInfo[playerid][pFaccion] == 0 || PlayerInfo[playerid][pFaccion] > TotalFaccs){SendClientMessage(playerid,Rojo,"* No formas parte de una facción pública."); return 1;}
		new length = strlen(cmdtext);
		while ((idx < length) && (cmdtext[idx] <= ' ')){idx++;}
		new offset = idx;
		new result[100];
		while ((idx < length) && ((idx - offset) < (sizeof(result) - 1))){result[idx - offset] = cmdtext[idx]; idx++;}
		result[idx - offset] = EOS;
		if(!strlen(result))
		{
	    	SendClientMessage(playerid, Naranja, "* /(F)accion [Texto]");
	    	return 1;
		}
		new rango[33];
	    switch(PlayerInfo[playerid][pRango])
	    {
            case 1: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango1]);
            case 2: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango2]);
            case 3: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango3]);
            case 4: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango4]);
            case 5: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango5]);
            case 6: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango6]);
            case 7: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango7]);
            case 8: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango8]);
            case 9: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango9]);
            case 10: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango10]);
            case 11: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango11]);
            case 12: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango12]);
            case 13: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango13]);
            case 14: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango14]);
            case 15: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango15]);
            case 16: format(rango, sizeof(rango), "%s", FaccInfo[PlayerInfo[playerid][pFaccion]][fRango16]);
        }
		format(string, sizeof(string), "[OOC] %s %s: %s", rango, GetPlayerNameRP(playerid), result);
		SendFaccionMessage(PlayerInfo[playerid][pFaccion], VerdeClaro, string);
		printf("Faccion %d OOC %s: %s", PlayerInfo[playerid][pFaccion], GetPlayerNameRP(playerid), result);
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/radio", true) == 0 || strcmp(cmd, "/r", true) == 0) //Chat facciones públicas IC
{
    if(IsPlayerConnected(playerid))
    {
        if(PlayerInfo[playerid][pFaccion] == 0 || PlayerInfo[playerid][pFaccion] > TotalFaccs){SendClientMessage(playerid,Rojo,"* No formas parte de ninguna facción."); return 1;}
        if(PlayerInfo[playerid][pFaccion] == 1 && PlayerInfo[playerid][pServicioPD] == 0){SendClientMessage(playerid, Rojo, "* No estás de servicio."); return 1;}
		new length = strlen(cmdtext);
		while ((idx < length) && (cmdtext[idx] <= ' ')){idx++;}
		new offset = idx;
		new result[100];
		while ((idx < length) && ((idx - offset) < (sizeof(result) - 1))){result[idx - offset] = cmdtext[idx]; idx++;}
		result[idx - offset] = EOS;
		if(!strlen(result))
		{
	    	SendClientMessage(playerid, Naranja, "* /(R)adio [Texto]");
	    	return 1;
		}
		format(string, sizeof(string), "[Radio] %s: %s", GetPlayerNameRP(playerid), result);
		SendRadioMessage(PlayerInfo[playerid][pFaccion], AguamarinaOscuro, string);
		if(!IsPlayerInAnyVehicle(playerid)) //Si no está en un vehículo
    	{
            format(string, sizeof(string), "[Radio] %s: %s", GetPlayerNameRP(playerid), result);
 	    	ProxDetector(7.0, playerid, string,Chat1,Chat2,Chat3,Chat4,Chat5);
	    }
		else //Si está en un vehículo
		{
			new carid = GetPlayerVehicleID(playerid);
			if(IsABike(carid) || IsAMBike(carid) || IsAPizzaBike(carid) || IsABoat(carid)) //Si está en un vehiculo sin cabina
	        {
			    format(string, sizeof(string), "[Radio] %s: %s", GetPlayerNameRP(playerid), result);
			    ProxDetector(7.0, playerid, string,Chat1,Chat2,Chat3,Chat4,Chat5);
			}
			else //Si está en un vehiculo con cabina
			{
	            if(VehicleWindows[GetPlayerVehicleID(playerid)] == 0)
			    {
	                format(string, sizeof(string), "[Radio] %s: %s", GetPlayerNameRP(playerid), result);
			    	ProxDetector(2.0, playerid, string,Chat1,Chat2,Chat3,Chat4,Chat5);
	            }
				else
				{
	                format(string, sizeof(string), "[Radio] %s: %s", GetPlayerNameRP(playerid), result);
			    	ProxDetector(7.0, playerid, string,Chat1,Chat2,Chat3,Chat4,Chat5);
				}
			}
		}
		printf("Faccion %d IC %s: %s", PlayerInfo[playerid][pFaccion], GetPlayerNameRP(playerid), result);
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/departamentos", true) == 0 || strcmp(cmd, "/dep", true) == 0) //Chat facciones gubernamentales IC
{
    if(IsPlayerConnected(playerid))
    {
        if(PlayerInfo[playerid][pFaccion] == 0 || PlayerInfo[playerid][pFaccion] > 3){SendClientMessage(playerid,Rojo,"* No formas parte de una facción del estado."); return 1;}
        if(PlayerInfo[playerid][pFaccion] == 1 && PlayerInfo[playerid][pServicioPD] == 0){SendClientMessage(playerid, Rojo, "* No estás de servicio."); return 1;}
		new length = strlen(cmdtext);
		while ((idx < length) && (cmdtext[idx] <= ' ')){idx++;}
		new offset = idx;
		new result[100];
		while ((idx < length) && ((idx - offset) < (sizeof(result) - 1))){result[idx - offset] = cmdtext[idx]; idx++;}
		result[idx - offset] = EOS;
		if(!strlen(result))
		{
	    	SendClientMessage(playerid, Naranja, "* /(Dep)artamentos [Texto]");
	    	return 1;
		}
		format(string, sizeof(string), "[Radio gubernamental] %s: %s", GetPlayerNameRP(playerid), result);
		SendPublicMessage(Rosa, string);
		if(!IsPlayerInAnyVehicle(playerid)) //Si no está en un vehículo
    	{
            format(string, sizeof(string), "[Radio] %s: %s", GetPlayerNameRP(playerid), result);
 	    	ProxDetector(7.0, playerid, string,Chat1,Chat2,Chat3,Chat4,Chat5);
	    }
		else //Si está en un vehículo
		{
			new carid = GetPlayerVehicleID(playerid);
			if(IsABike(carid) || IsAMBike(carid) || IsAPizzaBike(carid) || IsABoat(carid)) //Si está en un vehiculo sin cabina
	        {
			    format(string, sizeof(string), "[Radio] %s: %s", GetPlayerNameRP(playerid), result);
			    ProxDetector(7.0, playerid, string,Chat1,Chat2,Chat3,Chat4,Chat5);
			}
			else //Si está en un vehiculo con cabina
			{
	            if(VehicleWindows[GetPlayerVehicleID(playerid)] == 0)
			    {
	                format(string, sizeof(string), "[Radio] %s: %s", GetPlayerNameRP(playerid), result);
			    	ProxDetector(2.0, playerid, string,Chat1,Chat2,Chat3,Chat4,Chat5);
	            }
				else
				{
	                format(string, sizeof(string), "[Radio] %s: %s", GetPlayerNameRP(playerid), result);
			    	ProxDetector(7.0, playerid, string,Chat1,Chat2,Chat3,Chat4,Chat5);
				}
			}
		}
		printf("Radio gubernamental %s: %s", GetPlayerNameRP(playerid), result);
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/megafono", true) == 0 || strcmp(cmd, "/m", true) == 0) //Chat facciones gubernamentales IC
{
    if(IsPlayerConnected(playerid))
    {
        if(PlayerInfo[playerid][pFaccion] == 0 || PlayerInfo[playerid][pFaccion] > 2){SendClientMessage(playerid,Rojo,"* No formas parte de LSPD o LSMD."); return 1;}
		new length = strlen(cmdtext);
		while ((idx < length) && (cmdtext[idx] <= ' ')){idx++;}
		new offset = idx;
		new result[100];
		while ((idx < length) && ((idx - offset) < (sizeof(result) - 1))){result[idx - offset] = cmdtext[idx]; idx++;}
		result[idx - offset] = EOS;
		if(!strlen(result))
		{
	    	SendClientMessage(playerid, Naranja, "* /(M)egafono [Texto]");
	    	return 1;
		}
        format(string, sizeof(string), "[Megáfono] %s: %s", GetPlayerNameRP(playerid), result);
 	    ProxDetector(50.0, playerid, string,Amarillo,Amarillo,Amarillo,Amarillo,AmarilloClaro);
		printf("[Megáfono] %s: %s", GetPlayerNameRP(playerid), result);
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/gritar", true) == 0 || strcmp(cmd, "/gr", true) == 0 || strcmp(cmd, "/g", true) == 0) //Chat cercano IC gritar
{
    if(IsPlayerConnected(playerid))
    {
		new length = strlen(cmdtext);
		while ((idx < length) && (cmdtext[idx] <= ' ')){idx++;}
		new offset = idx;
		new result[100];
		while ((idx < length) && ((idx - offset) < (sizeof(result) - 1))){result[idx - offset] = cmdtext[idx]; idx++;}
		result[idx - offset] = EOS;
		if(!strlen(result))
		{
	    	SendClientMessage(playerid, Naranja, "* /(G)ritar [Texto]");
	    	return 1;
		}
 	    if(!IsPlayerInAnyVehicle(playerid)) //Si no está en un vehículo
    	{
            format(string, sizeof(string), "%s grita: ¡¡%s!!", GetPlayerNameRP(playerid), result);
 	        ProxDetector(35.0, playerid, string,Blanco,Chat1,Chat2,Chat3,Chat4);
	    }
		else //Si está en un vehículo
		{
			new carid = GetPlayerVehicleID(playerid);
			if(IsABike(carid) || IsAMBike(carid) || IsAPizzaBike(carid) || IsABoat(carid)) //Si está en un vehiculo sin cabina
	        {
			    format(string, sizeof(string), "%s grita: ¡¡%s!!", GetPlayerNameRP(playerid), result);
 	            ProxDetector(35.0, playerid, string,Blanco,Chat1,Chat2,Chat3,Chat4);
			}
			else //Si está en un vehiculo con cabina
			{
	            if(VehicleWindows[GetPlayerVehicleID(playerid)] == 0)
			    {
	                format(string, sizeof(string), "¡¡%s grita: %s¡¡", GetPlayerNameRP(playerid), result);
 	                ProxDetector(20.0, playerid, string,Blanco,Chat1,Chat2,Chat3,Chat4);
	            }
				else
				{
	                format(string, sizeof(string), "¡¡%s grita: %s¡¡", GetPlayerNameRP(playerid), result);
			    	ProxDetector(35.0, playerid, string,Chat1,Chat2,Chat3,Chat4,Chat5);
				}
			}
		}
		printf("%s grita: %s", GetPlayerNameRP(playerid), result);
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/decir", true) == 0 || strcmp(cmd, "/de", true) == 0) //Chat cercano IC decir
{
    if(IsPlayerConnected(playerid))
    {
		new length = strlen(cmdtext);
		while ((idx < length) && (cmdtext[idx] <= ' ')){idx++;}
		new offset = idx;
		new result[100];
		while ((idx < length) && ((idx - offset) < (sizeof(result) - 1))){result[idx - offset] = cmdtext[idx]; idx++;}
		result[idx - offset] = EOS;
		if(!strlen(result))
		{
	    	SendClientMessage(playerid, Naranja, "* /(De)cir [Texto]");
	    	return 1;
		}
 	    if(!IsPlayerInAnyVehicle(playerid)) //Si no está en un vehículo
    	{
            format(string, sizeof(string), "%s dice: %s", GetPlayerNameRP(playerid), result);
 	        ProxDetector(15.0, playerid, string,Chat1,Chat2,Chat3,Chat4,Chat5);
	    }
		else //Si está en un vehículo
		{
			new carid = GetPlayerVehicleID(playerid);
			if(IsABike(carid) || IsAMBike(carid) || IsAPizzaBike(carid) || IsABoat(carid)) //Si está en un vehiculo sin cabina
	        {
			    format(string, sizeof(string), "%s dice: %s", GetPlayerNameRP(playerid), result);
 	            ProxDetector(15.0, playerid, string,Chat1,Chat2,Chat3,Chat4,Chat5);
			}
			else //Si está en un vehiculo con cabina
			{
	            if(VehicleWindows[GetPlayerVehicleID(playerid)] == 0)
			    {
	                format(string, sizeof(string), "(Ventana Cerrada) %s dice: %s", GetPlayerNameRP(playerid), result);
 	                ProxDetector(7.0, playerid, string,Chat1,Chat2,Chat3,Chat4,Chat5);
	            }
				else
				{
	                format(string, sizeof(string), "(Ventana Abierta) %s dice: %s", GetPlayerNameRP(playerid), result);
			    	ProxDetector(15.0, playerid, string,Chat1,Chat2,Chat3,Chat4,Chat5);
				}
			}
		}
		printf("%s dice: %s", GetPlayerNameRP(playerid), result);
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/cerca", true) == 0 || strcmp(cmd, "/c", true) == 0) //Chat cercano IC susurrar
{
    if(IsPlayerConnected(playerid))
    {
		new length = strlen(cmdtext);
		while ((idx < length) && (cmdtext[idx] <= ' ')){idx++;}
		new offset = idx;
		new result[100];
		while ((idx < length) && ((idx - offset) < (sizeof(result) - 1))){result[idx - offset] = cmdtext[idx]; idx++;}
		result[idx - offset] = EOS;
		if(!strlen(result))
		{
	    	SendClientMessage(playerid, Naranja, "* /(C)erca [Texto]");
	    	return 1;
		}
		format(string, sizeof(string), "%s susurra: %s", GetPlayerNameRP(playerid), result);
 	  	ProxDetector(2.0, playerid, string,Chat2,Chat2,Chat3,Chat4,Chat5);
		printf("%s susurra: %s", GetPlayerNameRP(playerid), result);
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/susurrar", true) == 0 || strcmp(cmd, "/s", true) == 0) //Chat  cercano privado IC
{
    if(IsPlayerConnected(playerid))
    {
        tmp = strtok(cmdtext, idx);
        if(!strlen(tmp))
        {
            SendClientMessage(playerid, Naranja, "* /(S)usurrar [ID][Texto]");
            return 1;
        }
        playerid2 = ReturnUser(tmp);
        if(playerid2 == playerid){SendClientMessage(playerid, Rojo, "* No te puedes susurrar a tí mismo."); return 1;}
        if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid, Rojo, "* ID inválida."); return 1;}
		new length = strlen(cmdtext);
		while ((idx < length) && (cmdtext[idx] <= ' ')){idx++;}
		new offset = idx;
		new result[100];
		while ((idx < length) && ((idx - offset) < (sizeof(result) - 1))){result[idx - offset] = cmdtext[idx]; idx++;}
		result[idx - offset] = EOS;
	    if(SPAM(result)) return 0;
		if(!strlen(result))
		{
	    	SendClientMessage(playerid, Naranja, "* /(S)usurrar [ID][Texto]");
	    	return 1;
		}
		if(!GetPlayersProx(1.5, playerid, playerid2)){SendClientMessage(playerid, Rojo, "* Debes estar a su lado para susurrarle."); return 1;}
		format(string, sizeof(string), "* %s susurra algo al oído de %s", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2));
        ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
        format(string, sizeof(string), "%s te susurra al oído: %s", GetPlayerNameRP(playerid), result);
        SendClientMessage(playerid2, AmarilloClaro, string);
        format(string, sizeof(string), "Susurras al oído de %s: %s", GetPlayerNameRP(playerid2), result);
        SendClientMessage(playerid, Amarillo, string);
		printf("%s susurra a %s: %s", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), result);
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/b", true) == 0) //Chat cercano OOC
{
    if(IsPlayerConnected(playerid))
    {
		if(ChatOOC[playerid] == 1){SendClientMessage(playerid, Rojo, "* Espera 3 para volver a usar el chat OOC."); return 1;}
		new length = strlen(cmdtext);
		while ((idx < length) && (cmdtext[idx] <= ' ')){idx++;}
		new offset = idx;
		new result[100];
		while ((idx < length) && ((idx - offset) < (sizeof(result) - 1))){result[idx - offset] = cmdtext[idx]; idx++;}
		result[idx - offset] = EOS;
		if(!strlen(result))
		{
	    	SendClientMessage(playerid, Naranja, "* /B [Texto]");
	    	return 1;
		}
        if(SPAM(result)){SendClientMessage(playerid, Rojo, "* No está permitido el SPAM en nuestro servidor."); return 0;}
	    format(string, sizeof(string), "%s (( %s ))",GetPlayerNameRP(playerid), result);
 	    ProxDetector(15.0, playerid, string,Chat1,Chat2,Chat3,Chat4,Chat5);
		printf("Chat OOC %s: %s", GetPlayerNameRP(playerid), result);
		ChatOOC[playerid] = 1;
		SetTimerEx("ChatOOCTimer",3000,0,"d",playerid);
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/w", true) == 0) //Mensajes privados para admins
{
    tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
 	{
		SendClientMessage(playerid, Naranja, "* /w [ID] [Texto]");
		return 1;
	}
	playerid2 = ReturnUser(tmp);
    if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid,Rojo,"* ID inválida."); return 1;}
    if(PlayerInfo[playerid][pAdmin] == 0 && PlayerInfo[playerid2][pAdmin] == 0){SendClientMessage(playerid,Rojo,"* Solo puedes enviar mensajes privados a administradores."); return 1;}
    if(playerid == playerid2){SendClientMessage(playerid,Rojo,"* No te puedes enviar mensajes privados a tí mismo."); return 1;}
	new length = strlen(cmdtext);
	while ((idx < length) && (cmdtext[idx] <= ' ')){idx++;}
	new offset = idx;
	new result[100];
	while ((idx < length) && ((idx - offset) < (sizeof(result) - 1))){result[idx - offset] = cmdtext[idx]; idx++;}
	result[idx - offset] = EOS;
	if(!strlen(result))
	{
    	SendClientMessage(playerid, Naranja, "* /w [ID] [Texto]");
    	return 1;
	}
    format(string, sizeof(string), "Administración: %s [%d] te whispea: %s", GetPlayerNameRP(playerid), playerid, result);
	SendClientMessage(playerid2, Amarillo, string);
	format(string, sizeof(string), "Administración: Whispeaste a %s [%d]: %s", GetPlayerNameRP(playerid2), playerid2, result);
	SendClientMessage(playerid, AmarilloClaro, string);
	printf("MP %s a %s: %s", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2), result);
    return 1;
}

if(strcmp(cmd, "/animaciones", true) == 0) /* Animaciones del Servidor */
{
	SendClientMessage(playerid,COLOR_NARANJA,"Lista de animaciones disponibles:");
	SendClientMessage(playerid,YELLOW,"/rendirse - /bebido - /movil - /cmovil - /bomba - /apuntar - /reir - /tumbarse - /agacharse - /vomitar - /comiendo - /herido");
	SendClientMessage(playerid,COLOR_NARANJA,"/saludar - /trato - /crack - /fumando - /sentarse - /gro - /fucku - /hablando - /taichi - /caer - /muerto - /brazos - /gangsta");
	SendClientMessage(playerid,YELLOW,"/spray - /medico - /golpeado - /cansado - /saltovital - /tortazo - /rodar - /cacheado - /bate - /boxing - /gritando - /facepalm");
	SendClientMessage(playerid,COLOR_NARANJA,"/animar - /esposado - /pis - /lanzar - /basket - /caminar - /rascarse - /apoyarse - /correr - /strip - /bailar - /trafico");
	SendClientMessage(playerid,YELLOW,"/rifle - /mecanico - /carga - /bailoteo - /consola - /picado - /barandilla - /llorar - /bofetada - /billar - /beso - /dedo");
	SendClientMessage(playerid,COLOR_NARANJA,"/azote - /masturb - /chupete");
	SendClientMessage(playerid,YELLOW," -Animaciones de uso en vehículo: /coche   |   Usa /stopanim (o RBM) para detener la animación.");
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/me", true) == 0 || strcmp(cmd, "/y", true) == 0) //Comando Rol...
{
    if(SPAM(tmp)){SendClientMessage(playerid, Rojo, "* No está permitido el SPAM en nuestro servidor."); return 0;}
    if(IsPlayerConnected(playerid))
    {
		new length = strlen(cmdtext);
		while ((idx < length) && (cmdtext[idx] <= ' ')){idx++;}
		new offset = idx;
		new result[100];
		while ((idx < length) && ((idx - offset) < (sizeof(result) - 1))){result[idx - offset] = cmdtext[idx]; idx++;}
		result[idx - offset] = EOS;
        if(SPAM(result)) return 0;
		if(!strlen(result))
		{
	    	SendClientMessage(playerid, Naranja, "* /Me [Acción]");
	    	return 1;
		}
        format(string, sizeof(string), "%s %s", GetPlayerNameRP(playerid), result);
 	    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
		printf("%s", string);
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/do", true) == 0 || strcmp(cmd, "/p", true) == 0) //Comando entorno...
{
    if(SPAM(tmp)){SendClientMessage(playerid, Rojo, "* No está permitido el SPAM en nuestro servidor."); return 0;}
    if(IsPlayerConnected(playerid))
    {
		new length = strlen(cmdtext);
		while ((idx < length) && (cmdtext[idx] <= ' ')){idx++;}
		new offset = idx;
		new result[100];
		while ((idx < length) && ((idx - offset) < (sizeof(result) - 1))){result[idx - offset] = cmdtext[idx]; idx++;}
		result[idx - offset] = EOS;
        if(SPAM(result)) return 0;
		if(!strlen(result))
		{
	    	SendClientMessage(playerid, Naranja, "* /Do [Entorno]");
	    	return 1;
		}
        format(string, sizeof(string), "* %s (( %s ))", result,GetPlayerNameRP(playerid));
 	    ProxDetector(15.0, playerid, string,Verde,Verde,Verde,Verde,Verde);
		printf("(/do) %s: %s", GetPlayerNameRP(playerid), result);
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/estado", true) == 0) //Indicar un estado del personaje IC
{
    if(PlayerInfo[playerid][pNivel] < 5) return SendClientMessage(playerid,Rojo,"* Necesitas ser nivel 5 para usar este comando.");
    if(IsPlayerConnected(playerid))
    {
		new length = strlen(cmdtext);
		while ((idx < length) && (cmdtext[idx] <= ' ')){idx++;}
		new offset = idx;
		new result[80];
		while ((idx < length) && ((idx - offset) < (sizeof(result) - 1))){result[idx - offset] = cmdtext[idx]; idx++;}
		result[idx - offset] = EOS;
		if(!strlen(result) && PlayerInfo[playerid][pYo] != 0)
		{
	    	SendClientMessage(playerid, Naranja, "* /Estado [Texto]");
	    	format(string, sizeof(string), "Estado actual: * %s *", YoTexto[playerid]);
	    	SendClientMessage(playerid, Naranja, string);
	    	return 1;
		}
		if(!strlen(result))
		{
	    	SendClientMessage(playerid, Naranja, "* /Estado [Texto]");
	    	return 1;
		}
		DestroyDynamic3DTextLabel(Yo3DText[playerid]);
		format(YoTexto[playerid], sizeof(result), result);
        Yo3DText[playerid] = CreateDynamic3DTextLabel(YoTexto[playerid], 0x00EEFFFF,0,0,0, 15.0, playerid);
        Streamer_Update(playerid);
        format(string, sizeof(string), "Estado Actual: * %s *", result);
		SendClientMessage(playerid, Amarillo, string);
		format(PlayerInfo[playerid][pEstado], 80, "%s", result);
		SendClientMessage(playerid, Naranja, "* Utiliza /Estadoq para quitártelo.");
		PlayerInfo[playerid][pYo] = 1;
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/estadoq", true) == 0) //Borrar el estado
{
    if(PlayerInfo[playerid][pNivel] < 1) return SendClientMessage(playerid,Rojo,"* Necesitas ser nivel 5 para usar este comando.");
    if(IsPlayerConnected(playerid))
    {
		if(PlayerInfo[playerid][pYo] == 0)
		{
	    	SendClientMessage(playerid, Naranja, "* No tienes ningún estado actual, utiliza /Estado.");
	    	return 1;
		}
        DestroyDynamic3DTextLabel(Yo3DText[playerid]);
        Streamer_Update(playerid);
		SendClientMessage(playerid, Naranja, "Estado borrado.");
		PlayerInfo[playerid][pYo] = 0;
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/idioma", true) == 0) //Selecciona un idioma
{
    new opcion[24];
	opcion = strtok(cmdtext, idx);
	if(!strlen(opcion))
	{
		SendClientMessage(playerid, Naranja, "* /Idioma [Opción]");
		SendClientMessage(playerid, Naranja, "0: Inglés (Normal), 1: Español");
		SendClientMessage(playerid, Naranja, "2: Alemán, 3: Japonés");
		SendClientMessage(playerid, Naranja, "4: Italiano, 5: Ruso");
		SendClientMessage(playerid, Naranja, "6: Árabe, 7: Francés");
		SendClientMessage(playerid, Naranja, "8: Chino, 9: Portugués");
		return 1;
	}
	if(strcmp(opcion,"0",true) == 0)
	{
	    Idioma[playerid] = 0;
	    SendClientMessage(playerid, Verde, "Idioma cambiado al inglés (normal).");
	    return 1;
	}
	if(strcmp(opcion,"1",true) == 0)
	{
	    Idioma[playerid] = 1;
	    SendClientMessage(playerid, Verde, "Idioma cambiado al español.");
	    return 1;
	}
	if(strcmp(opcion,"2",true) == 0)
	{
	    Idioma[playerid] = 2;
	    SendClientMessage(playerid, Verde, "Idioma cambiado al alemán. ");
	    return 1;
	}
	if(strcmp(opcion,"3",true) == 0)
	{
	    Idioma[playerid] = 3;
	    SendClientMessage(playerid, Verde, "Idioma cambiado al japonés.");
	    return 1;
	}
	if(strcmp(opcion,"4",true) == 0)
	{
	    Idioma[playerid] = 4;
	    SendClientMessage(playerid, Verde, "Idioma cambiado al italiano.");
	    return 1;
	}
	if(strcmp(opcion,"5",true) == 0)
	{
	    Idioma[playerid] = 5;
	    SendClientMessage(playerid, Verde, "Idioma cambiado al ruso.");
	    return 1;
	}
	if(strcmp(opcion,"6",true) == 0)
	{
	    Idioma[playerid] = 6;
	    SendClientMessage(playerid, Verde, "Idioma cambiado al árabe.");
	    return 1;
	}
	if(strcmp(opcion,"7",true) == 0)
	{
	    Idioma[playerid] = 7;
	    SendClientMessage(playerid, Verde, "Idioma cambiado al francés.");
	    return 1;
	}
	if(strcmp(opcion,"8",true) == 0)
	{
	    Idioma[playerid] = 8;
	    SendClientMessage(playerid, Verde, "Idioma cambiado al chino.");
	    return 1;
	}
	if(strcmp(opcion,"9",true) == 0)
	{
	    Idioma[playerid] = 9;
	    SendClientMessage(playerid, Verde, "Idioma cambiado al portugués.");
	    return 1;
	}
	else
	{
	    SendClientMessage(playerid, Naranja, "* /Idioma [Opción]");
		SendClientMessage(playerid, Naranja, "0: Inglés (Normal), 1: Español");
		SendClientMessage(playerid, Naranja, "2: Alemán, 3: Japonés");
		SendClientMessage(playerid, Naranja, "4: Italiano, 5: Ruso");
		SendClientMessage(playerid, Naranja, "6: Árabe, 7: Francés");
		SendClientMessage(playerid, Naranja, "8: Chino, 9: Portugués");
	}
	return 1;
}

//----------COMANDOS CASAS Y NEGOCIOS----------//

if(strcmp(cmd, "/comprarnegocio", true) == 0) //Comprar un negocio
{
	if(!GetPlayerFueraPuertaNego(playerid)){SendClientMessage(playerid,Rojo,"* No estás en la puerta de un local."); return 1;} //No está en un negocio
	new nego = GetPlayerFueraPuertaNego(playerid);
	if(NegoInfo[nego][nComprado] == 1){SendClientMessage(playerid,Rojo,"* Este local no está en venta."); return 1;} //Negocio comprado
	if(PlayerInfo[playerid][pNegocio] > 0){SendClientMessage(playerid,Rojo,"* Ya posees un negocio."); return 1;} //Ya tiene negocio
	if(PlayerInfo[playerid][pNivel] < 3){SendClientMessage(playerid,Rojo,"* Necesitas tener al menos nivel 3 para comprar un local."); return 1;} //No es nivel 3
	if(PlayerInfo[playerid][pDineroBanco] < NegoInfo[nego][nValor]){SendClientMessage(playerid,Rojo,"* No tienes suficiente dinero en el banco."); return 1;}

	PlayerInfo[playerid][pDineroBanco] -= NegoInfo[nego][nValor];
	PlayerInfo[playerid][pNegocio] = nego; //Setea el negocio del jugador
	NegoInfo[nego][nComprado] = 1;
	format(NegoInfo[nego][nDueno], 60, "%s", PlayerInfo[playerid][pNombre]);
	format(string, sizeof(string), "Has comprado un local por %d$.", NegoInfo[nego][nValor]);
	SendClientMessage(playerid, Verde, string);
	SendClientMessage(playerid, Verde, "Felicidades por tu nueva compra. Utiliza '/Ayuda Negocio' para ver los comandos de negocio.");
	printf("%s compra el local %d por %d$",GetPlayerNameRP(playerid), nego, NegoInfo[nego][nValor]);
	UpdateNegocioLabel(nego);
	SaveNegocios(nego);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/nombrenegocio", true) == 0) //Cambiar nombre a un negocio
{
    if(PlayerInfo[playerid][pNegocio] == 0){SendClientMessage(playerid,Rojo,"* No posees un local."); return 1;} //No tiene negocio
	if(GetPlayerFueraPuertaNego(playerid) != PlayerInfo[playerid][pNegocio]){SendClientMessage(playerid,Rojo,"* No estás en la puerta de tu local."); return 1;} //No está en una casa
	new nego = PlayerInfo[playerid][pNegocio];
	new length = strlen(cmdtext);
    while ((idx < length) && (cmdtext[idx] <= ' '))
    {
        idx++;
    }
    new offset = idx;
    new result[MAX_PLAYER_NAME];
    while ((idx < length) && ((idx - offset) < (sizeof(result) - 1)))
    {
        result[idx - offset] = cmdtext[idx];
        idx++;
    }
    result[idx - offset] = EOS;
    if(!strlen(result))
    {
        SendClientMessage(playerid, Naranja, "* /NombreNegocio [Texto]");
        return 1;
    }
    new string2[128];
    format(NegoInfo[nego][nNombre], sizeof(result), "%s", result);
    format(string2, sizeof(string2), "Has cambiado el nombre de tu negocio a '%s'.", result);
    SendClientMessage(playerid, Verde, string2);
    UpdateNegocioLabel(nego);
    SaveNegocios(nego);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/vendernegocio", true) == 0) //Vender un negocio
{
    if(PlayerInfo[playerid][pNegocio] == 0){SendClientMessage(playerid,Rojo,"* No posees un local."); return 1;} //No tiene negocio
	if(GetPlayerFueraPuertaNego(playerid) != PlayerInfo[playerid][pNegocio]){SendClientMessage(playerid,Rojo,"* No estás en la puerta de tu local."); return 1;} //No está en una casa
	new nego = PlayerInfo[playerid][pNegocio];
	PlayerInfo[playerid][pNegocio] = 0; //Setea el negocio del jugador a 0
	new dinero = NegoInfo[nego][nValor]*3/4;
	PlayerInfo[playerid][pDineroBanco] += dinero;
	NegoInfo[nego][nComprado] = 0;
	format(NegoInfo[nego][nDueno], 60, "");
	NegoInfo[nego][nCerrado] = 0;
	format(string, sizeof(string), "Has vendido tu local por %d$. El dinero se te ha ingresado en tu cuenta bancaria.", dinero);
	SendClientMessage(playerid, Verde, string);
	printf("%s vende su local %d por %d$",GetPlayerNameRP(playerid), nego, dinero);
	UpdateNegocioLabel(nego);
	SaveNegocios(nego);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/comprarcasa", true) == 0) //Comprar una casa
{
	if(!GetPlayerFueraPuertaCasa(playerid)){SendClientMessage(playerid,Rojo,"* No estás en la puerta de una casa."); return 1;} //No está en una casa
	new casa = GetPlayerFueraPuertaCasa(playerid);
	if(HouseInfo[casa][hComprada] == 1 || HouseInfo[casa][hComprada] == -1){SendClientMessage(playerid,Rojo,"* Esta casa no está en venta."); return 1;} //Casa comprada
	if(PlayerInfo[playerid][pCasaAlq] > 0){SendClientMessage(playerid,Rojo,"* No puedes comprar una casa si estás alquilando una."); return 1;} //Ya tiene casa
	if(PlayerInfo[playerid][pCasa] > 0){SendClientMessage(playerid,Rojo,"* Ya posees una casa."); return 1;} //Ya tiene casa
	if(PlayerInfo[playerid][pNivel] < 3){SendClientMessage(playerid,Rojo,"* Necesitas tener al menos nivel 3 para comprar una casa."); return 1;} //No es nivel 3
	if(PlayerInfo[playerid][pDineroBanco] < HouseInfo[casa][hValor]){SendClientMessage(playerid,Rojo,"* No tienes suficiente dinero en el banco."); return 1;}
	PlayerInfo[playerid][pDineroBanco] -= HouseInfo[casa][hValor];
	PlayerInfo[playerid][pCasa] = casa; //Setea la casa del jugador
	HouseInfo[casa][hComprada] = 1;
	format(HouseInfo[casa][hDueno], 60, "%s", PlayerInfo[playerid][pNombre]);
	HouseInfo[casa][hInquilinos] = 1;
	HouseInfo[casa][hAlquilable] = 0;
	HouseInfo[casa][hPAlquiler] = 0;
	format(string, sizeof(string), "Has comprado una casa por %d$.", HouseInfo[casa][hValor]);
	SendClientMessage(playerid, Verde, string);
	SendClientMessage(playerid, Verde, "Felicidades por tu nueva compra. Utiliza '/Ayuda Casa' para ver los comandos de tu casa.");
	printf("%s compra la casa %d por %d$",GetPlayerNameRP(playerid), casa, HouseInfo[casa][hValor]);
	UpdateHouseLabel(casa);
	SaveCasa(casa);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/vendercasa", true) == 0) //Vender una casa
{
    if(PlayerInfo[playerid][pCasa] == 0){SendClientMessage(playerid,Rojo,"* No posees una casa."); return 1;} //No tiene casa
	if(GetPlayerFueraPuertaCasa(playerid) != PlayerInfo[playerid][pCasa]){SendClientMessage(playerid,Rojo,"* No estás en la puerta de tu casa."); return 1;} //No está en una casa
	new casa = PlayerInfo[playerid][pCasa];
	PlayerInfo[playerid][pCasa] = 0; //Setea la casa del jugador a 0
	PlayerInfo[playerid][pDineroBanco] += HouseInfo[casa][hValor];
	HouseInfo[casa][hComprada] = 0;
	format(HouseInfo[casa][hDueno], 60, "");
	HouseInfo[casa][hCerrada] = 1;
	HouseInfo[casa][hInquilinos] = 0;
	HouseInfo[casa][hAlquilable] = 0;
	HouseInfo[casa][hPAlquiler] = 0;
	format(string, sizeof(string), "Has vendido tu casa por %d$. El dinero se te ha ingresado en tu cuenta bancaria.", HouseInfo[casa][hValor]);
	SendClientMessage(playerid, Verde, string);
	printf("%s vende su casa %d por %d$",GetPlayerNameRP(playerid), casa, HouseInfo[casa][hValor]);
	UpdateHouseLabel(casa);
	SaveCasa(casa);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/puerta", true) == 0) //Abrir/cerrar una casa o un local
{
	if(!GetPlayerFueraPuertaCasa(playerid) && !GetPlayerDentroPuertaCasa(playerid) && !GetPlayerFueraPuertaNego(playerid) && !GetPlayerDentroPuertaNego(playerid)){SendClientMessage(playerid,Rojo,"* No estás en la puerta de una casa o un local."); return 1;} //No está en una casa
	if(GetPlayerFueraPuertaCasa(playerid) || GetPlayerDentroPuertaCasa(playerid))
	{
        new casa;
        if(!GetPlayerDentroPuertaCasa(playerid)){casa = GetPlayerFueraPuertaCasa(playerid);}
		if(!GetPlayerFueraPuertaCasa(playerid)){casa = GetPlayerDentroPuertaCasa(playerid);}
		if(PlayerInfo[playerid][pCasa] != casa && PlayerInfo[playerid][pCasaAlq] != casa){SendClientMessage(playerid,Rojo,"* No tienes la llave de esta casa."); return 1;} //No es su casa
		if(HouseInfo[casa][hCerrada] == 0)
		{
		    HouseInfo[casa][hCerrada] = 1; GameTextForPlayer(playerid, "~r~Puerta cerrada", 2000, 3);
		}
		else
		{
		    HouseInfo[casa][hCerrada] = 0; GameTextForPlayer(playerid, "~g~Puerta abierta", 2000, 3);
		}
		UpdateHouseLabel(casa);
	}
	if(GetPlayerFueraPuertaNego(playerid) || GetPlayerDentroPuertaNego(playerid))
	{
	    new nego;
        if(!GetPlayerDentroPuertaNego(playerid)){nego = GetPlayerFueraPuertaNego(playerid);}
		if(!GetPlayerFueraPuertaNego(playerid)){nego = GetPlayerDentroPuertaNego(playerid);}
		if(PlayerInfo[playerid][pNegocio] != nego){SendClientMessage(playerid,Rojo,"* No tienes la llave de este local."); return 1;} //No es su negocio
		if(NegoInfo[nego][nCerrado] == 0)
		{
		    NegoInfo[nego][nCerrado] = 1; GameTextForPlayer(playerid, "~r~Puerta cerrada", 2000, 3);
		}
		else
		{
		    NegoInfo[nego][nCerrado] = 0; GameTextForPlayer(playerid, "~g~Puerta abierta", 2000, 3);
		}
		UpdateNegocioLabel(nego);
		SaveNegocios(nego);
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/alquilable", true) == 0) //Hacer alquilable una casa
{
    if(PlayerInfo[playerid][pCasa] == 0){SendClientMessage(playerid,Rojo,"* No posees una casa."); return 1;} //No tiene casa
    new casa = PlayerInfo[playerid][pCasa];
	new opcion[128];
	opcion = strtok(cmdtext, idx);
	if(!strlen(opcion))
	{
		SendClientMessage(playerid, Naranja, "* /Alquilable [Si/No] ");
		return 1;
	}
	if(strcmp(opcion,"Si",true) == 0)
	{
	    HouseInfo[casa][hAlquilable] = 1; GameTextForPlayer(playerid, "~g~Casa alquilable", 2000, 3);
	}
	else if(strcmp(opcion,"No",true) == 0)
	{
        HouseInfo[casa][hAlquilable] = 0; GameTextForPlayer(playerid, "~r~Casa no alquilable", 2000, 3);
	}
	else
	{
	    SendClientMessage(playerid, Naranja, "* /Alquilable [Si/No] ");
		return 1;
	}
	UpdateHouseLabel(casa);
	SaveCasa(casa);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/renta", true) == 0) //Precio de alquiler de una casa
{
	if(PlayerInfo[playerid][pCasa] == 0){SendClientMessage(playerid,Rojo,"* No posees una casa."); return 1;} //No tiene casa
	new casa = PlayerInfo[playerid][pCasa];
	if(HouseInfo[casa][hAlquilable] == 0){SendClientMessage(playerid,Rojo,"* Tu casa no es alquilable."); return 1;} //No tiene casa
	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
	{
		SendClientMessage(playerid, Naranja, "* /Renta [Precio (0-200)]");
		return 1;
	}
	new precio = strval(tmp);
	if(precio < 0 || precio > 200){SendClientMessage(playerid,Rojo,"* El precio debe estar entre 0$ y 200$."); return 1;}
	HouseInfo[casa][hPAlquiler] = precio;
	format(string, sizeof(string), "Precio de alquiler de tu casa: %d$.", precio);
	SendClientMessage(playerid, Amarillo, string);
	UpdateHouseLabel(casa);
	SaveCasa(casa);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/desalojar", true) == 0) //Desalojar a una persona de tu casa
{
	if(PlayerInfo[playerid][pCasa] == 0){SendClientMessage(playerid,Rojo,"* No posees una casa."); return 1;}
	new casa = PlayerInfo[playerid][pCasa];
    tmp = strtok(cmdtext, idx);
   	if(!strlen(tmp))
    {
	    SendClientMessage(playerid, Naranja, "* /Desalojar [ID]");
	    return 1;
	}
    playerid2 = ReturnUser(tmp);
    if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid,Rojo,"* ID inválida."); return 1;}
    if(PlayerInfo[playerid2][pCasaAlq] != casa){SendClientMessage(playerid,Rojo,"* Esta persona no está alquilando tu casa."); return 1;}
    PlayerInfo[playerid2][pCasaAlq] = 0;
    HouseInfo[casa][hInquilinos] --;
    format(string, sizeof(string), "%s te ha desalojado de su casa.",GetPlayerNameRP(playerid));
    SendClientMessage(playerid2, AmarilloClaro, string);
    format(string, sizeof(string), "Has desalojado a %s de tu casa.",GetPlayerNameRP(playerid2));
    SendClientMessage(playerid, AmarilloClaro, string);
    UpdateHouseLabel(casa);
	SaveCasa(casa);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/desalojartodos", true) == 0) //Desalojar a todas las personas persona de tu casa
{
    if(PlayerInfo[playerid][pCasa] == 0){SendClientMessage(playerid,Rojo,"* No posees una casa."); return 1;}
    new casa = PlayerInfo[playerid][pCasa];
    HouseInfo[casa][hInquilinos] = 1;
    format(string, sizeof(string), "%s te ha desalojado de su casa.",GetPlayerNameRP(playerid));
    SendClientMessage(playerid, AmarilloClaro, "Ahora nadie está alquilando tu casa.");
    for(new i=0; i<MAX_PLAYERS; i++)
    {
        if(PlayerInfo[i][pCasaAlq] == casa){PlayerInfo[i][pCasaAlq] = 0; SendClientMessage(i, AmarilloClaro, string);}
    }
    format(string, sizeof(string), "UPDATE usuarios SET CasaAlq = 0 WHERE CasaAlq = %d", casa);
    mysql_query(1, string);
    UpdateHouseLabel(casa);
	SaveCasa(casa);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/alquilar", true) == 0) //Alquilar una casa
{
    if(!GetPlayerFueraPuertaCasa(playerid)){SendClientMessage(playerid,Rojo,"* No estás en la puerta de una casa."); return 1;} //No está en una casa
	new casa = GetPlayerFueraPuertaCasa(playerid);
	if(HouseInfo[casa][hComprada] > 0) //Comprada
	{
		if(HouseInfo[casa][hAlquilable] == 0){SendClientMessage(playerid,Rojo,"* Esta casa no está en alquiler."); return 1;} //Casa comprada
	    if(PlayerInfo[playerid][pCasaAlq] > 0){SendClientMessage(playerid,Rojo,"* Ya estás alquilando una casa."); return 1;}
		if(PlayerInfo[playerid][pCasa] > 0){SendClientMessage(playerid,Rojo,"* No puedes alquilar una casa si tienes comprada otra."); return 1;} //Ya tiene casa
		if(HouseInfo[casa][hInquilinos] >= 4){SendClientMessage(playerid,Rojo,"* Esta casa no puede acoger a más personas."); return 1;} //Ya tiene casa
		if(GetPlayerMoney(playerid) < HouseInfo[casa][hPAlquiler]){SendClientMessage(playerid,Rojo,"* No tienes suficiente dinero."); return 1;}
		GivePlayerMoneyAC(playerid, -HouseInfo[casa][hPAlquiler]);
		PlayerInfo[playerid][pCasaAlq] = casa;
		HouseInfo[casa][hInquilinos] ++;
		format(string, sizeof(string), "Has alquilado una casa por %d$. A partir de ahora pagarás ese precio cada payday.", HouseInfo[casa][hPAlquiler]);
		SendClientMessage(playerid, Verde, string);
		SendClientMessage(playerid, Verde, "Utiliza '/Ayuda Casa' para ver los comandos de tu casa.");
		UpdateHouseLabel(casa);
		SaveCasa(casa);
	}
    else if(HouseInfo[casa][hComprada] == -1) //Hotel
	{
	    if(PlayerInfo[playerid][pCasaAlq] > 0){SendClientMessage(playerid,Rojo,"* Ya estás alquilando una casa."); return 1;}
		if(PlayerInfo[playerid][pCasa] > 0){SendClientMessage(playerid,Rojo,"* No puedes alquilar una habitación si tienes comprada otra."); return 1;} //Ya tiene casa
		if(HouseInfo[casa][hInquilinos] >= 1){SendClientMessage(playerid,Rojo,"* Esta habitación no puede acoger a más personas."); return 1;} //Ya tiene casa
		if(GetPlayerMoney(playerid) < HouseInfo[casa][hPAlquiler]){SendClientMessage(playerid,Rojo,"* No tienes suficiente dinero."); return 1;}
		GivePlayerMoneyAC(playerid, -HouseInfo[casa][hPAlquiler]);
		PlayerInfo[playerid][pCasaAlq] = casa;
		HouseInfo[casa][hInquilinos] = 1;
		format(string, sizeof(string), "Has alquilado una casa por %d$. A partir de ahora pagarás ese precio cada payday.", HouseInfo[casa][hPAlquiler]);
		SendClientMessage(playerid, Verde, string);
		SendClientMessage(playerid, Verde, "Utiliza '/Ayuda Casa' para ver los comandos de tu casa.");
		UpdateHouseLabel(casa);
		SaveCasa(casa);
	}
	else SendClientMessage(playerid,Rojo,"* Esta casa no está en alquiler.");
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/desalquilar", true) == 0) //Desalquilar una casa
{
    if(PlayerInfo[playerid][pCasaAlq] == 0){SendClientMessage(playerid,Rojo,"* No estás alquilando ninguna casa."); return 1;}
    new casa = PlayerInfo[playerid][pCasaAlq];
    if(HouseInfo[casa][hComprada] == -1)
    {
        PlayerInfo[playerid][pCasaAlq] = 0;
	    HouseInfo[casa][hInquilinos] = 0;
	    HouseInfo[casa][hCerrada] = 1;
    }
    else
    {
	    PlayerInfo[playerid][pCasaAlq] = 0;
	    HouseInfo[casa][hInquilinos] --;
    }
    SendClientMessage(playerid, Verde, "Ya no estás alquilando ninguna casa.");
    UpdateHouseLabel(casa);
    SaveCasa(casa);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/armario", true) == 0) //Ver armario de una casa
{
 	if(!GetPlayerDentroCasa(playerid)){SendClientMessage(playerid, Rojo, "* No estás en una casa."); return 1;}
 	new casa = GetPlayerDentroCasa(playerid);
 	if(HouseInfo[casa][hComprada] >= 0 && PlayerInfo[playerid][pCasa] != casa){SendClientMessage(playerid, Rojo, "* No eres el propietario de esta casa."); return 1;}
 	if(HouseInfo[casa][hComprada] == -1){SendClientMessage(playerid, Rojo, "* Los hoteles y moteles no tienen armarios."); return 1;}
    if(PlayerInfo[playerid][pServicioPD] > 0){SendClientMessage(playerid, Rojo, "* No puedes usar este comando estando de servicio."); return 1;}
    MostrarArmario(playerid, casa);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/almacen", true) == 0) //Ver almacén de un local
{
 	if(!GetPlayerDentroNego(playerid)){SendClientMessage(playerid, Rojo, "* No estás en un local."); return 1;}
 	new nego = GetPlayerDentroNego(playerid);
 	if(NegoInfo[nego][nComprado] >= 0 && PlayerInfo[playerid][pNegocio] != nego){SendClientMessage(playerid, Rojo, "* No eres el propietario de este local."); return 1;}
    if(PlayerInfo[playerid][pServicioPD] > 0){SendClientMessage(playerid, Rojo, "* No puedes usar este comando estando de servicio."); return 1;}
    MostrarAlmacen(playerid, nego);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/guardardinero", true) == 0) //Guardar dinero en una casa o local
{
    if(!GetPlayerDentroCasa(playerid) && !GetPlayerDentroNego(playerid)){SendClientMessage(playerid, Rojo, "* No estás en una casa o un local."); return 1;}
    if(GetPlayerDentroCasa(playerid))
    {
	 	new casa = GetPlayerDentroCasa(playerid);
	 	if(HouseInfo[casa][hComprada] >= 0 && PlayerInfo[playerid][pCasa] != casa){SendClientMessage(playerid, Rojo, "* No eres el propietario de esta casa."); return 1;}
	 	if(HouseInfo[casa][hComprada] == -1){SendClientMessage(playerid, Rojo, "* Los hoteles y moteles no tienen armarios."); return 1;}
	 	tmp = strtok(cmdtext, idx);
	   	if(!strlen(tmp))
	    {
		    SendClientMessage(playerid, Naranja, "* /GuardarDinero [Cantidad]");
		    format(string, sizeof(string), "Dinero guardado: %d$", HouseInfo[casa][hDineroGuardado]);
		    SendClientMessage(playerid, Naranja, string);
		    return 1;
		}
	    new dinero = strval(tmp);
	    if(dinero <= 0){SendClientMessage(playerid, Rojo, "* La cantidad no puede ser nula o negativa."); return 1;}
	    if(dinero > GetPlayerMoney(playerid)){SendClientMessage(playerid, Rojo, "* No tienes tanto dinero."); return 1;}
	    HouseInfo[casa][hDineroGuardado] += dinero;
	    GivePlayerMoneyAC(playerid, -dinero);
	    format(string, sizeof(string), "Has guardado %d$ en tu casa.", dinero);
		SendClientMessage(playerid, Verde, string);
		SaveCasa(casa);
	}
	else if(GetPlayerDentroNego(playerid))
    {
        new nego = GetPlayerDentroNego(playerid);
	 	if(NegoInfo[nego][nComprado] >= 0 && PlayerInfo[playerid][pNegocio] != nego){SendClientMessage(playerid, Rojo, "* No eres el propietario de este local."); return 1;}
	 	tmp = strtok(cmdtext, idx);
	   	if(!strlen(tmp))
	    {
		    SendClientMessage(playerid, Naranja, "* /GuardarDinero [Cantidad]");
		    format(string, sizeof(string), "Dinero guardado: %d$", NegoInfo[nego][nDineroGuardado]);
		    SendClientMessage(playerid, Naranja, string);
		    return 1;
		}
	    new dinero = strval(tmp);
	    if(dinero <= 0){SendClientMessage(playerid, Rojo, "* La cantidad no puede ser nula o negativa."); return 1;}
	    if(dinero > GetPlayerMoney(playerid)){SendClientMessage(playerid, Rojo, "* No tienes tanto dinero."); return 1;}
	    NegoInfo[nego][nDineroGuardado] += dinero;
	    GivePlayerMoneyAC(playerid, -dinero);
	    format(string, sizeof(string), "Has guardado %d$ en tu local.", dinero);
		SendClientMessage(playerid, Verde, string);
		SaveNegocios(nego);
    }
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/sacardinero", true) == 0) //Sacar dinero en una casa o local
{
    if(!GetPlayerDentroCasa(playerid) && !GetPlayerDentroNego(playerid)){SendClientMessage(playerid, Rojo, "* No estás en una casa o un local."); return 1;}
    if(GetPlayerDentroCasa(playerid))
    {
	 	new casa = GetPlayerDentroCasa(playerid);
	 	if(HouseInfo[casa][hComprada] >= 0 && PlayerInfo[playerid][pCasa] != casa){SendClientMessage(playerid, Rojo, "* No eres el propietario de esta casa."); return 1;}
	 	if(HouseInfo[casa][hComprada] == -1){SendClientMessage(playerid, Rojo, "* Los hoteles y moteles no tienen armarios."); return 1;}
	 	tmp = strtok(cmdtext, idx);
	   	if(!strlen(tmp))
	    {
		    SendClientMessage(playerid, Naranja, "* /SacarDinero [Cantidad]");
		    format(string, sizeof(string), "Dinero guardado: %d$", HouseInfo[casa][hDineroGuardado]);
		    SendClientMessage(playerid, Naranja, string);
		    return 1;
		}
	    new dinero = strval(tmp);
	    if(dinero <= 0){SendClientMessage(playerid, Rojo, "* La cantidad no puede ser nula o negativa."); return 1;}
	    if(dinero > HouseInfo[casa][hDineroGuardado]){SendClientMessage(playerid, Rojo, "* No hay tanto dinero guardado."); return 1;}
	    HouseInfo[casa][hDineroGuardado] -= dinero;
	    GivePlayerMoneyAC(playerid, dinero);
	    format(string, sizeof(string), "Has sacado %d$ de tu casa.", dinero);
		SendClientMessage(playerid, Verde, string);
		SaveCasa(casa);
	}
	if(GetPlayerDentroNego(playerid))
    {
	 	new nego = GetPlayerDentroNego(playerid);
	 	if(NegoInfo[nego][nComprado] >= 0 && PlayerInfo[playerid][pNegocio] != nego){SendClientMessage(playerid, Rojo, "* No eres el propietario de este local."); return 1;}
	 	tmp = strtok(cmdtext, idx);
	   	if(!strlen(tmp))
	    {
		    SendClientMessage(playerid, Naranja, "* /SacarDinero [Cantidad]");
		    format(string, sizeof(string), "Dinero guardado: %d$", NegoInfo[nego][nDineroGuardado]);
		    SendClientMessage(playerid, Naranja, string);
		    return 1;
		}
	    new dinero = strval(tmp);
	    if(dinero <= 0){SendClientMessage(playerid, Rojo, "* La cantidad no puede ser nula o negativa."); return 1;}
	    if(dinero > NegoInfo[nego][nDineroGuardado]){SendClientMessage(playerid, Rojo, "* No hay tanto dinero guardado."); return 1;}
	    NegoInfo[nego][nDineroGuardado] -= dinero;
	    GivePlayerMoneyAC(playerid, dinero);
	    format(string, sizeof(string), "Has sacado %d$ de tu local.", dinero);
		SendClientMessage(playerid, Verde, string);
		SaveNegocios(nego);
	}
	return 1;
}

//----------COMANDOS TRABAJO----------//

if(strcmp(cmd, "/trabajo", true) == 0) //nuevo comando para trabajar
{
	new opcion[25];
	opcion = strtok(cmdtext, idx);
	if(!strlen(opcion))
	{
		SendClientMessage(playerid, Naranja, "* /trabajo [Opción]");
		SendClientMessage(playerid, Naranja, "Opciones: Piloto,Taxista,Cosechador,Pescador,Ladron.");
		return 1;
	}
	if(PlayerInfo[playerid][pServicioPD] && PlayerInfo[playerid][pServicioLSMD] && PlayerInfo[playerid][pServicioCNN] && PlayerInfo[playerid][pServicioWCST] > 0) return SendClientMessage(playerid,Rojo, " * No puedes obtener un trabajo estando de servicio.");
	if(strcmp(opcion,"piloto",true) == 0)
	{
		if(PlayerInfo[playerid][pNivel] < 3) return SendClientMessage(playerid,Rojo,"* Necesitas ser nivel 3 para tener este trabajo.");
		if(PlayerInfo[playerid][pLicAviacion] < 1) return SendClientMessage(playerid,Rojo,"* No tienes licencia de aviación.");
		if(PlayerInfo[playerid][pTrabajo] != 0){SendClientMessage(playerid, Rojo, "* Ya tienes un empleo."); return 1;}
		if(PlayerInfo[playerid][pTrabajo] == 0)
		{
			if(IsPlayerInRangeOfPoint(playerid, 3.0, 1956.7390,-2183.5740,13.5469))
			{
				SendClientMessage(playerid, Blanco, "Felicidades! Aceptaste para trabajar de {FFFF04}Piloto.");
				SendClientMessage(playerid, Amarillo, "Escribe '/Ayuda Trabajo' para más información.");
				return PlayerInfo[playerid][pTrabajo] = 1;
			}
		}
	}
	if(strcmp(opcion,"cosechador",true) == 0)
	{
		if(PlayerInfo[playerid][pNivel] < 1) return SendClientMessage(playerid,Rojo,"* Necesitas ser nivel 1 para tener este trabajo.");
		if(PlayerInfo[playerid][pTrabajo] != 0){SendClientMessage(playerid, Rojo, "* Ya tienes un empleo."); return 1;}
		if(PlayerInfo[playerid][pTrabajo] == 0)
		{
			if(IsPlayerInRangeOfPoint(playerid, 3.0, -382.5518,-1426.3771,26.2122))
			{
				SendClientMessage(playerid, Blanco, "Felicidades! Aceptaste para trabajar de {FFFF04}Cosechador.");
				SendClientMessage(playerid, Amarillo, "Escribe '/Ayuda Trabajo' para más información.");
				return PlayerInfo[playerid][pTrabajo] = 2;
			}
		}
	}
	if(strcmp(opcion,"taxista",true) == 0)
	{
		if(PlayerInfo[playerid][pNivel] < 2) return SendClientMessage(playerid,Rojo,"* Necesitas ser nivel 2 para tener este trabajo.");
		if(PlayerInfo[playerid][pTrabajo] != 0){SendClientMessage(playerid, Rojo, "* Ya tienes un empleo."); return 1;}
		if(PlayerInfo[playerid][pTrabajo] == 0)
		{
			if(IsPlayerInRangeOfPoint(playerid, 3.0, 1490.2891,1305.7198,1093.2964))
			{
				SendClientMessage(playerid, Blanco, "Felicidades! Aceptaste para trabajar de {FFFF04}Taxista.");
				SendClientMessage(playerid, Amarillo, "Escribe '/Ayuda Trabajo' para más información.");
				return PlayerInfo[playerid][pTrabajo] = 3;
			}
		}
	}
	if(strcmp(opcion,"ladron",true) == 0)
	{
		if(PlayerInfo[playerid][pNivel] < 6) return SendClientMessage(playerid,Rojo,"* Necesitas ser nivel 6 para tener este trabajo.");
		if(PlayerInfo[playerid][pTrabajo] != 0){SendClientMessage(playerid, Rojo, "* Ya tienes un empleo."); return 1;}
		if(PlayerInfo[playerid][pTrabajo] == 0)
		{
			if(IsPlayerInRangeOfPoint(playerid, 3.0, 2123.2236,-1185.7349,24.0278))
			{
				SendClientMessage(playerid, Blanco, "Felicidades! Aceptaste para trabajar de {FFFF04}Ladrón.");
				SendClientMessage(playerid, Amarillo, "Escribe '/Ayuda Trabajo' para más información.");
				return PlayerInfo[playerid][pTrabajo] = 4;
			}
		}
	}
	if(strcmp(opcion,"pescador",true) == 0)
	{
		if(PlayerInfo[playerid][pNivel] < 3) return SendClientMessage(playerid,Rojo,"* Necesitas ser nivel 3 para tener este trabajo.");
		if(PlayerInfo[playerid][pLicNavegacion] < 1) return SendClientMessage(playerid,Rojo,"* No tienes licencia de navegación.");
		if(PlayerInfo[playerid][pTrabajo] != 0){SendClientMessage(playerid, Rojo, "* Ya tienes un empleo."); return 1;}
		if(PlayerInfo[playerid][pTrabajo] == 0)
		{
			if(IsPlayerInRangeOfPoint(playerid, 3.0, 2956.0686,-1523.8318,2.3078))
			{
				SendClientMessage(playerid, Blanco, "Felicidades! Aceptaste para trabajar de {FFFF04}Pescador.");
				SendClientMessage(playerid, Amarillo, "Escribe '/Ayuda Trabajo' para más información.");
				return PlayerInfo[playerid][pTrabajo] = 5;
			}
		}
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/trabajar", true) == 0) //Comienza a trabajar
{
	if(Trabajando[playerid] == 0)
	{
		if(PlayerInfo[playerid][pTrabajo] == 0){SendClientMessage(playerid, Rojo, "* No tienes empleo."); return 1;}
		new empleo = PlayerInfo[playerid][pTrabajo];
		new job = empleo-1;
		if(empleo == 1) //Piloto
		{
		    if(!IsPlayerInRangeOfPoint(playerid, 1.0, Jobs[job][Jx], Jobs[job][Jy], Jobs[job][Jz])){SendClientMessage(playerid, Rojo, "* No estás en tu puesto de trabajo."); return 1;}
		    SetPlayerSkin(playerid, 61);
			Trabajando[playerid] = 1;
			SendClientMessage(playerid, Verde, "Sube a un avión para comenzar a trabajar.");
			SendClientMessage(playerid, Verde, "Utiliza '/Trabajar' de nuevo para dejar de trabajar.");
			return 1;
		}
		if(empleo == 2) //Cosechador
		{
		    if(!IsPlayerInRangeOfPoint(playerid, 1.0, Jobs[job][Jx], Jobs[job][Jy], Jobs[job][Jz])){SendClientMessage(playerid, Rojo, "* No estás en tu puesto de trabajo."); return 1;}
		    SetPlayerSkin(playerid, 161);
			Trabajando[playerid] = 1;
			SendClientMessage(playerid, Verde, "Sube a una cosechadora para comenzar a trabajar.");
			SendClientMessage(playerid, Verde, "Utiliza '/Trabajar' de nuevo para dejar de trabajar.");
			return 1;
		}
		if(empleo == 3) //Taxista
		{
		    tmp = strtok(cmdtext, idx);
			if(!strlen(tmp))
			{
				SendClientMessage(playerid, Naranja, "* /Trabajar [Tarifa (5-20)]");
				return 1;
			}
			new n = strval(tmp);
			if(n < 5 || n > 20){SendClientMessage(playerid, Rojo, "* La tarifa debe estar entre 5$ y 20$."); return 1;}
			Trabajando[playerid] = 1;
			Tarifa[playerid] = n;
			format(string, sizeof(string), "El taxista %s está de servicio. Tarifa: %d$.", GetPlayerNameRP(playerid), n);
			SendAnuncio(Verde, string);
			SendClientMessage(playerid, Verde, "Ahora estás de servicio, utiliza '/Ayuda Trabajo' para mirar los comandos de tu trabajo.");
			SendClientMessage(playerid, Verde, "Utiliza '/Trabajar' de nuevo para dejar de trabajar.");
			return 1;
		}
		if(empleo == 5) //Pescador
		{
	    	if(!IsPlayerInRangeOfPoint(playerid, 1.0, Jobs[job][Jx], Jobs[job][Jy], Jobs[job][Jz])){SendClientMessage(playerid, Rojo, "* No estás en tu puesto de trabajo."); return 1;}
			SetPlayerSkin(playerid, 28);
		    Trabajando[playerid] = 1;
			SendClientMessage(playerid, Verde, "Sube a un barco de pesca para comenzar a pescar.");
			SendClientMessage(playerid, Verde, "Utiliza '/Trabajar' de nuevo para dejar de trabajar.");
			return 1;
		}
	}
	else
	{
	    new empleo = PlayerInfo[playerid][pTrabajo];
		if(empleo == 1) //Piloto
		{
		    SetPlayerSkin(playerid, PlayerInfo[playerid][pSkin]);
			DisablePlayerCheckpoint(playerid);
			Trabajando[playerid] = 0;
			SendClientMessage(playerid, Verde, "* Has dejado de trabajar. A tu jefe no le gustan los holgazanes, así que no cobras.");
			if(IsAvionPiloto(GetPlayerVehicleID(playerid)))RemovePlayerFromVehicle(playerid);
			return 1;
		}
		if(empleo == 2) //Cosechador
		{
		    SetPlayerSkin(playerid, PlayerInfo[playerid][pSkin]);
			DisablePlayerCheckpoint(playerid);
			Trabajando[playerid] = 0;
			Cosechado[playerid] = 0;
			SendClientMessage(playerid, Verde, "* Has dejado de trabajar. A tu jefe no le gustan los holgazanes, así que no cobras.");
			if(IsACombine(GetPlayerVehicleID(playerid)))RemovePlayerFromVehicle(playerid);
			return 1;
		}
		if(empleo == 3) //Taxista
		{
			Trabajando[playerid] = 0;
			SendClientMessage(playerid, Verde, "* Ya no estás de servicio como taxista.");
			return 1;
		}
		if(empleo == 5) //Pescador
		{
			SetPlayerSkin(playerid, PlayerInfo[playerid][pSkin]);
		    DisablePlayerCheckpoint(playerid);
			Trabajando[playerid] = 0;
			PescaRecogida[playerid] = 0;
			SendClientMessage(playerid, Verde, "* Has dejado de trabajar. A tu jefe no le gustan los holgazanes, así que no cobras.");
			if(IsABarcoPesca(GetPlayerVehicleID(playerid)))RemovePlayerFromVehicle(playerid);
			return 1;
		}
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------


if(strcmp(cmd, "/taxi", true) == 0) //Ofrecer transporte a alguien
{
	if(PlayerInfo[playerid][pTrabajo] != 3){SendClientMessage(playerid, Rojo, "* No eres taxista."); return 1;}
	if(Trabajando[playerid] == 0){SendClientMessage(playerid, Rojo, "* No estás de servicio como taxista."); return 1;}
	if(!IsATaxi(GetPlayerVehicleID(playerid))){SendClientMessage(playerid, Rojo, "* No estás en un taxi."); return 1;}
	if(TaxiPasajero[playerid] != NOEXISTE){SendClientMessage(playerid, Rojo, "* Ya hay alguien pagándote por ir en taxi."); return 1;}
	tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Taxi [ID]");
        return 1;
    }
    playerid2 = ReturnUser(tmp);
    if(playerid2 == playerid){SendClientMessage(playerid, Rojo, "* No te puedes ofrecer transporte a tí mismo."); return 1;}
    if((playerid2 == INVALID_PLAYER_ID) || !IsPlayerConnected(playerid2))
	{
		SendClientMessage(playerid, Rojo, "* ID inválida.");
		return 1;
	}
	if(GetPlayerVehicleID(playerid) != GetPlayerVehicleID(playerid2)){SendClientMessage(playerid, Rojo, "* Esa persona no está en tu taxi."); return 1;}
	TaxiPasajero[playerid] = playerid2;
	TaxiConductor[playerid2] = playerid;
	format(string, sizeof(string), "Estás llevando a %s en tu taxi por %d$ cada medio minuto.", GetPlayerNameRP(playerid2), Tarifa[playerid]);
	SendClientMessage(playerid, Amarillo, string);
	SendClientMessage(playerid, Amarillo, "Ve al destino que te ordenó.");
	format(string, sizeof(string), "%s te está llevando en su taxi por %d$ cada medio minuto.", GetPlayerNameRP(playerid), Tarifa[playerid]);
	SendClientMessage(playerid2, Amarillo, string);
	SendClientMessage(playerid2, Amarillo, "Baja del vehículo cuando llegues a tu destino.");
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/llevartaxi", true) == 0) //Acepta el pedido de taxi de alguien
{
    if(PlayerInfo[playerid][pTrabajo] != 3){SendClientMessage(playerid, Rojo, "* No eres taxista."); return 1;}
	if(Trabajando[playerid] == 0){SendClientMessage(playerid, Rojo, "* No estás trabajando."); return 1;}
	if(!IsATaxi(GetPlayerVehicleID(playerid))){SendClientMessage(playerid, Rojo, "* No estás en un taxi."); return 1;}
	new pidetaxi = NOEXISTE;
	for(new i=0; i<MAX_PLAYERS; i++)
	{
	    if(SolicitaTaxi[i] > 0){pidetaxi = i; break;}
	}
	if(pidetaxi == NOEXISTE){SendClientMessage(playerid, Rojo, "* Nadie solicita un taxi actualmente."); return 1;}
	format(string, sizeof(string), "Has aceptado la solicitud de taxi de %s. Ve a su posición.", GetPlayerNameRP(pidetaxi));
	SendClientMessage(playerid, Amarillo, string);
	new Float:mX, Float:mY, Float:mZ;
	GetPlayerPos(pidetaxi, mX, mY, mZ);
	SetPlayerCheckpoint(playerid, mX, mY, mZ, 3.0);
	format(string, sizeof(string), "Agencia de transporte: El taxista %s ha aceptado tu solicitud. No se mueva de su posición.", GetPlayerNameRP(playerid));
	SendClientMessage(pidetaxi, Amarillo, string);
	SolicitaTaxi[pidetaxi] = 0;
	return 1;
}

//-------------------------------------------------------------------------------------------------------//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/llamadas", true) == 0) //acepta la llamada a alguien
{
    if(PlayerInfo[playerid][pFaccion] != 5){SendClientMessage(playerid, Rojo, "* No eres Mecánico"); return 1;}
	if(PlayerInfo[playerid][pServicioWCST] == 0){SendClientMessage(playerid, Rojo, "* No estás de servicio."); return 1;}
	new pidemeca = NOEXISTE;
	for(new i=0; i<MAX_PLAYERS; i++)
	{
	    if(SolicitaMeca[i] > 0){pidemeca = i; break;}
	}
	if(pidemeca == NOEXISTE){SendClientMessage(playerid, Rojo, "* Nadie solicita una grúa actualmente."); return 1;}
	format(string, sizeof(string), "Contestastes la petición del cliente, está marcado en el mapa su posición!");
	SendClientMessage(playerid, Aguamarina, string);
	new Float:mX, Float:mY, Float:mZ;
	GetPlayerPos(pidemeca, mX, mY, mZ);
	SetPlayerCheckpoint(playerid, mX, mY, mZ, 3.0);
	format(string, sizeof(string), "Importante: Un mecánico atendió tu llamado, vendrá lo antes posible.", GetPlayerNameRP(playerid));
	SendClientMessage(pidemeca, Amarillo, string);
	SolicitaMeca[pidemeca] = 0;
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/reparar", true) == 0) //Ofrecer reparación a alguien
{
	if(PlayerInfo[playerid][pFaccion] != 5){SendClientMessage(playerid, Rojo, "* No eres mecánico."); return 1;}
	if(PlayerInfo[playerid][pServicioWCST] == 0){SendClientMessage(playerid,Rojo,"* No estás de servicio."); return 1;}
	if(!GetPlayerTaller(playerid)){SendClientMessage(playerid, Rojo, "* No estás en un taller."); return 1;}
	tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Reparar [ID] [Motor/Carroceria/Ruedas] [Precio]");
        return 1;
    }
    playerid2 = ReturnUser(tmp);
    if(playerid2 == playerid){SendClientMessage(playerid, Rojo, "* No te puedes ofrecer reparación a tí mismo."); return 1;}
    if((playerid2 == INVALID_PLAYER_ID) || !IsPlayerConnected(playerid2)){SendClientMessage(playerid, Rojo, "* ID inválida.");return 1;}
	if(!GetPlayersProx(5.0, playerid, playerid2)){SendClientMessage(playerid, Rojo, "* Demasiado lejos."); return 1;}
	if(!IsPlayerInAnyVehicle(playerid2)){SendClientMessage(playerid, Rojo, "* Esa persona no está en ningún vehículo."); return 1;}
	if(SiendoReparado[playerid2] != 0){SendClientMessage(playerid, Rojo, "* Ya están reparando el vehículo de esta persona, espera a que terminen."); return 1;}
	new coche = GetPlayerVehicleID(playerid2);
	new opcion[128];
	opcion = strtok(cmdtext, idx);
	if(!strlen(opcion))
	{
		SendClientMessage(playerid, Naranja, "* /Reparar [ID] [Motor/Carroceria/Ruedas] [Precio]");
		return 1;
	}
	if(strcmp(opcion,"motor",true) == 0)
	{
	    if(VehCapo[coche] != 1){SendClientMessage(playerid, Rojo, "* El vehículo debe tener abierto el capó."); return 1;}
	    new Float:cvida;
	    GetVehicleHealth(coche, cvida);
		if(cvida == 1000){SendClientMessage(playerid, Rojo, "* El motor de este vehículo está en perfecto estado."); return 1;}
		tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "* /Reparar [ID] [Motor/Carroceria/Ruedas] [Precio]");
	        return 1;
	    }
	    new precio = strval(tmp);
	    if(precio < 30 || precio > 200){SendClientMessage(playerid, Rojo, "* El precio debe estar entre 30$ y 200$."); return 1;}
	    format(string, sizeof(string), "Has ofrecido a %s repararle el motor por %d$. Espera una respuesta.", GetPlayerNameRP(playerid2), precio);
	    SendClientMessage(playerid, Amarillo, string);
	    format(string, sizeof(string), "%s te ha ofrecido repararte el motor por %d$. Utiliza '/Aceptar Reparacion' para aceptarlo.", GetPlayerNameRP(playerid), precio);
	    SendClientMessage(playerid2, Amarillo, string);
		ReparacionTipo[playerid2] = 1;
		ReparacionMeca[playerid2] = playerid;
		ReparacionPrecio[playerid2] = precio;
	    return 1;
	}
	if(strcmp(opcion,"carroceria",true) == 0)
	{
	    new panels,doors,lights,tires;
		GetVehicleDamageStatus(coche,panels,doors,lights,tires);
		if(panels == 0 && doors == 0 && lights == 0){SendClientMessage(playerid, Rojo, "* La carrocería de este vehículo está en perfecto estado."); return 1;}
		tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "* /Reparar [ID] [Motor/Carroceria/Ruedas] [Precio]");
	        return 1;
	    }
	    new precio = strval(tmp);
	    if(precio < 30 || precio > 200){SendClientMessage(playerid, Rojo, "* El precio debe estar entre 30$ y 200$."); return 1;}
	    format(string, sizeof(string), "Has ofrecido a %s repararle la carrocería por %d$. Espera una respuesta.", GetPlayerNameRP(playerid2), precio);
	    SendClientMessage(playerid, Amarillo, string);
	    format(string, sizeof(string), "%s te ha ofrecido repararte la carrocería por %d$. Utiliza '/Aceptar Reparacion' para aceptarlo.", GetPlayerNameRP(playerid), precio);
	    SendClientMessage(playerid2, Amarillo, string);
		ReparacionTipo[playerid2] = 2;
		ReparacionMeca[playerid2] = playerid;
		ReparacionPrecio[playerid2] = precio;
		return 1;
	}
	if(strcmp(opcion,"ruedas",true) == 0)
	{
	    new panels,doors,lights,tires;
		GetVehicleDamageStatus(coche,panels,doors,lights,tires);
		if(tires == 0){SendClientMessage(playerid, Rojo, "* Las ruedas de este vehículo están en perfecto estado."); return 1;}
		tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "* /Reparar [ID] [Motor/Carroceria/Ruedas] [Precio]");
	        return 1;
	    }
	    new precio = strval(tmp);
	    if(precio < 30 || precio > 200){SendClientMessage(playerid, Rojo, "* El precio debe estar entre 30$ y 200$."); return 1;}
	    format(string, sizeof(string), "Has ofrecido a %s repararle las ruedas por %d$. Espera una respuesta.", GetPlayerNameRP(playerid2), precio);
	    SendClientMessage(playerid, Amarillo, string);
	    format(string, sizeof(string), "%s te ha ofrecido repararte las ruedas por %d$. Utiliza '/Aceptar Reparacion' para aceptarlo.", GetPlayerNameRP(playerid), precio);
	    SendClientMessage(playerid2, Amarillo, string);
		ReparacionTipo[playerid2] = 3;
		ReparacionMeca[playerid2] = playerid;
		ReparacionPrecio[playerid2] = precio;
		return 1;
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------


if(strcmp(cmd, "/repintar", true) == 0) //Ofrecer repintar coche a alguien
{
    if(PlayerInfo[playerid][pFaccion] != 5){SendClientMessage(playerid, Rojo, "* No eres mecánico."); return 1;}
    if(PlayerInfo[playerid][pServicioWCST] == 0){SendClientMessage(playerid,Rojo,"* No estás de servicio."); return 1;}
	if(!GetPlayerTaller(playerid)){SendClientMessage(playerid, Rojo, "* No estás en un taller."); return 1;}
	tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Repintar [ID] [Color1] [Color2] [Precio]");
        return 1;
    }
    playerid2 = ReturnUser(tmp);
    if(playerid2 == playerid){SendClientMessage(playerid, Rojo, "* No te puedes ofrecer un repintado a tí mismo."); return 1;}
    if((playerid2 == INVALID_PLAYER_ID) || !IsPlayerConnected(playerid2))
	{
		SendClientMessage(playerid, Rojo, "* ID inválida.");
		return 1;
	}
	if(!GetPlayersProx(5.0, playerid, playerid2)){SendClientMessage(playerid, Rojo, "* Demasiado lejos."); return 1;}
	if(!IsPlayerInAnyVehicle(playerid2)){SendClientMessage(playerid, Rojo, "* Esa persona no está en ningún vehículo."); return 1;}
	tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Repintar [ID] [Color1] [Color2] [Precio]");
        return 1;
    }
    new color1 = strval(tmp);
    tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Repintar [ID] [Color1] [Color2] [Precio]");
        return 1;
    }
    new color2 = strval(tmp);
	tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Repintar [ID] [Color1] [Color2] [Precio]");
        return 1;
    }
    new precio = strval(tmp);
    if(precio < 200 || precio > 700){SendClientMessage(playerid, Rojo, "* El precio debe estar entre 200$ y 700$."); return 1;}
    format(string, sizeof(string), "Has ofrecido a %s repintarle el vehículo (colores %d %d) por %d$. Espera una respuesta.", GetPlayerNameRP(playerid2), color1, color2, precio);
    SendClientMessage(playerid, Amarillo, string);
    format(string, sizeof(string), "%s te ha ofrecido repintarte el vehículo (colores %d %d) por %d$. Utiliza '/Aceptar Repintado'.", GetPlayerNameRP(playerid), color1, color2, precio);
    SendClientMessage(playerid2, Amarillo, string);
	RepintadoColor1[playerid2] = color1;
	RepintadoColor2[playerid2] = color2;
	RepintadoMeca[playerid2] = playerid;
	RepintadoPrecio[playerid2] = precio;
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

new hora;
gettime(hora);

if(strcmp(cmd, "/forzar", true) == 0) //Forzar puertas
{
	if(hora >= 20 && hora <= 23) return SendClientMessage(playerid, Rojo, "Solo puedes usar este comando entre las 20:00 y las 23:00");
    if(PlayerInfo[playerid][pTrabajo] != 4) return SendClientMessage(playerid, Rojo, "* No eres ladrón.");
    if(PlayerInfo[playerid][pManoDer] != 15 && PlayerInfo[playerid][pManoDer] != 15){SendClientMessage(playerid, Rojo, "* Necesitas una palanca para forzar una puerta."); return 1;}
    if(PlayerInfo[playerid][pHabLad] < 30){SendClientMessage(playerid, Rojo, "* Necesitas nivel 2 de ladrón para usar este comando."); return 1;}
    if(PuertaForzada[playerid] > 0)
	{
	    format(string, sizeof(string), "* Espera %d minutos antes de intentar forzar otra puerta.", PuertaForzada[playerid]);
		SendClientMessage(playerid, Rojo, string);
		return 1;
	}
    if(!GetPlayerFueraPuertaCasa(playerid) && !GetPlayerFueraPuertaNego(playerid)){SendClientMessage(playerid, Rojo, "* No estás en la puerta de una casa o local."); return 1;}
    if(GetPlayerFueraPuertaCasa(playerid))
    {
        new casa = GetPlayerFueraPuertaCasa(playerid);
        if(HouseInfo[casa][hCerrada] == 0){SendClientMessage(playerid, Rojo, "* La puerta de esta casa ya está abierta."); return 1;}
        new rand;
	    rand = random(10);
	    if(rand > 3+(PlayerInfo[playerid][pHabLad]/30))
		{
			format(string, sizeof(string), "* %s intenta forzar una puerta con una palanca pero no lo logra.", GetPlayerNameRP(playerid));
		    ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
		    PuertaForzada[playerid] = 2;
		    PlayerPlaySound(playerid, 1009, 0.0, 0.0, 0.0);
			return 1;
		}
		format(string, sizeof(string), "* %s fuerza una puerta con su palanca.", GetPlayerNameRP(playerid));
	    ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
	    PuertaForzada[playerid] = 2;
	    ProxDetector(30.0, playerid, "* Se oye el sonido de una puerta resquebrajándose.", Verde,Verde,Verde,Verde,Verde);
	    PlayerPlaySound(playerid, 1009, 0.0, 0.0, 0.0);
	    HouseInfo[casa][hCerrada] = 0;
	    UpdateHouseLabel(casa);
	    return 1;
    }
    else if(GetPlayerFueraPuertaNego(playerid))
    {
        new nego = GetPlayerFueraPuertaNego(playerid);
        if(NegoInfo[nego][nCerrado] == 0){SendClientMessage(playerid, Rojo, "* La puerta de este local ya está abierta."); return 1;}
        new rand;
	    rand = random(10);
	    if(rand > 3+(PlayerInfo[playerid][pHabLad]/30))
		{
			format(string, sizeof(string), "* %s intenta forzar una puerta con una palanca pero no lo logra.", GetPlayerNameRP(playerid));
		    ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
		    PuertaForzada[playerid] = 2;
		    PlayerPlaySound(playerid, 1009, 0.0, 0.0, 0.0);
			return 1;
		}
		format(string, sizeof(string), "* %s fuerza una puerta con su palanca.", GetPlayerNameRP(playerid));
	    ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
	    PuertaForzada[playerid] = 2;
	    ProxDetector(30.0, playerid, "* Se oye el sonido de una puerta resquebrajándose.", Verde,Verde,Verde,Verde,Verde);
	    PlayerPlaySound(playerid, 1009, 0.0, 0.0, 0.0);
	    NegoInfo[nego][nCerrado] = 0;
	    UpdateNegocioLabel(nego);
	    return 1;
    }
	return 1;
}

//---------------------------------------------------------------------------------------------------------------
if(strcmp(cmd, "/robar", true) == 0) //Robar en casas o locales
{
	if(hora >= 20 && hora <= 23) return SendClientMessage(playerid, Rojo, "Solo puedes usar este comando entre las 20:00 y las 23:00");
    if(PlayerInfo[playerid][pTrabajo] != 4){SendClientMessage(playerid, Rojo, "* No eres ladrón."); return 1;}
    if(!GetPlayerDentroCasa(playerid) && !GetPlayerDentroNego(playerid)){SendClientMessage(playerid, Rojo, "* No estás en una casa o un local."); return 1;}
    if(Robando[playerid] > 0){SendClientMessage(playerid, Rojo, "* Ya estás robando."); return 1;}
    if(PlayerInfo[playerid][pTiempoRobo] > 0)
    {
        format(string, sizeof(string), "* Debes esperar %d minutos para usar este comando.", PlayerInfo[playerid][pTiempoRobo]);
        SendClientMessage(playerid, Rojo, string);
        return 1;
    }
    new policonectado;
    for(new x=0; x<MAX_PLAYERS; x++)
    {
        if(IsPlayerConnected(x) && x != INVALID_PLAYER_ID && PlayerInfo[x][pFaccion] == 1 && PlayerInfo[x][pServicioPD] > 0){policonectado = 1; break;}
    }
    if(policonectado == 0){SendClientMessage(playerid, Rojo, "* Debe haber al menos un policía de servicio conectado para poder robar."); return 1;}
	if(GetPlayerDentroCasa(playerid)) //Es una casa
	{
	    new casa = GetPlayerDentroCasa(playerid);
	    if(PlayerInfo[playerid][pCasa] == casa){SendClientMessage(playerid, Rojo, "* No puedes robar en tu propia casa."); return 1;}
	    if(IsPlayerInRangeOfPoint(playerid, 7.0, HouseInfo[casa][hSalidaX], HouseInfo[casa][hSalidaY], HouseInfo[casa][hSalidaZ])){SendClientMessage(playerid, Rojo, "* Debes estar más alejado de la puerta para robar."); return 1;}
		format(string, sizeof(string), "* %s comienza a buscar dinero y objetos de valor por la casa.", GetPlayerNameRP(playerid));
	    ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
	    Robando[playerid] = 1;
	    RoboTimer[playerid] = SetTimerEx("RobarF", 15000, false, "i, d", playerid, 2);
	    TogglePlayerControllable(playerid, 0);
	    ApplyAnimation(playerid,"BOMBER","BOM_Plant",4.1,1,1,1,0,0,1);
		for(new i = 0; i < MAX_PLAYERS; i++)
		{
			if(IsPlayerConnected(i) && i != INVALID_PLAYER_ID)
			{
				if(PlayerInfo[i][pFaccion] == 1 && PlayerInfo[i][pServicioPD] > 0)
				{
					SetPlayerCheckpoint(i, HouseInfo[casa][hEntradaX], HouseInfo[casa][hEntradaY], HouseInfo[casa][hEntradaZ], 4.0);
					format(string, sizeof(string), "[Radio] -{FFFFFF} Central: Reportan un robo doméstico en la casa {56C4FF}%s.{FFFFFF} Sospechoso {FFFF04}%s.", HouseInfo[casa][hBarrio],GetPlayerNameRP(playerid));
					SendClientMessage(i, TEAM_BLUE_COLOR, string);
				}
			}
		}
	    return 1;
	}
	if(GetPlayerDentroNego(playerid)) //Es un negocio
	{
	    new nego = GetPlayerDentroNego(playerid);
	    if(PlayerInfo[playerid][pNegocio] == nego){SendClientMessage(playerid, Rojo, "* No puedes robar en tu propia negocio."); return 1;}
	    if(IsPlayerInRangeOfPoint(playerid, 7.0, NegoInfo[nego][nSalidaX], NegoInfo[nego][nSalidaY], NegoInfo[nego][nSalidaZ])){SendClientMessage(playerid, Rojo, "* Debes estar más alejado de la puerta para robar."); return 1;}
	    if(NegoInfo[nego][nTipo] == 13 || NegoInfo[nego][nTipo] == 14){SendClientMessage(playerid, Rojo, "* No puedes robar en oficinas o almacenes."); return 1;}
		format(string, sizeof(string), "* %s comienza a forzar la caja fuerte para intentar llevarse el máximo dinero posible.", GetPlayerNameRP(playerid));
	    ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
	    Robando[playerid] = 1;
	    RoboTimer[playerid] = SetTimerEx("RobarF", 20000, false, "i, d", playerid, 2);
	    TogglePlayerControllable(playerid, 0);
	    ApplyAnimation(playerid,"BOMBER","BOM_Plant",4.1,1,1,1,0,0,1);
		for(new i = 0; i < MAX_PLAYERS; i++)
		{
			if(IsPlayerConnected(i) && i != INVALID_PLAYER_ID)
			{
				if(PlayerInfo[i][pFaccion] == 1 && PlayerInfo[i][pServicioPD] > 0)
				{
					    SetPlayerCheckpoint(i, NegoInfo[nego][nEntradaX], NegoInfo[nego][nEntradaY], NegoInfo[nego][nEntradaZ], 4.0);
					    format(string, sizeof(string), "[Radio] -{FFFFFF} Central: Reportan un robo en el local {56C4FF}%s.{FFFFFF} Sospechoso {FFFF04}%s.", NegoInfo[nego][nNombre],GetPlayerNameRP(playerid));
					    SendClientMessage(i, TEAM_BLUE_COLOR, string);
				}
			}
		}
	    return 1;
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/puentear", true) == 0) //Robar un vehículo
{
    if(PlayerInfo[playerid][pTrabajo] != 4) return SendClientMessage(playerid, Rojo, "* No eres ladrón.");
    if(PlayerInfo[playerid][pHabLad] < 60){SendClientMessage(playerid, Rojo, "* Necesitas nivel 3 de ladrón para usar este comando."); return 1;}
    if(PuenteHecho[playerid] > 0)
    {
        format(string, sizeof(string), "* Debes esperar %d minutos para volver a usar este comando.", PuenteHecho[playerid]);
        SendClientMessage(playerid, Rojo, string);
        return 1;
    }
	if(!IsPlayerInAnyVehicle(playerid) || GetPlayerState(playerid) != PLAYER_STATE_DRIVER){SendClientMessage(playerid, Rojo, "* No estás montado en un vehículo como conductor."); return 1;}
	new carid = GetPlayerVehicleID(playerid);
	if(Puenteando[playerid] > 0){SendClientMessage(playerid, Rojo, "* Ya estás haciendo un puente a un vehículo."); return 1;}
	if(carid <= MAX_VEHPUBLICO){SendClientMessage(playerid, Rojo, "* No puedes robar un vehículo de facción o trabajo."); return 1;}
	if(PlayerInfo[playerid][pManoDer] != 74 && PlayerInfo[playerid][pManoIzq] != 74){SendClientMessage(playerid, Rojo, "* Necesitas un destornillador para hacer el puente."); return 1;}

	new engine,lights,alarm,doors,bonnet,boot,objective;
    GetVehicleParamsEx(carid,engine,lights,alarm,doors,bonnet,boot,objective);

    if(engine == 1){SendClientMessage(playerid, Rojo, "* Este vehículo ya tiene el motor encendido."); return 1;}

	SetTimerEx("AlarmaCoche", 25000, false, "d", carid);
    SetVehicleParamsEx(carid,engine,lights,1,doors,bonnet,boot,objective);

    PuenteTimer[playerid] = SetTimerEx("PuentearF", 15000, false, "i, d", playerid, carid);
    format(string, sizeof(string), "* %s comienza a hacerle un puente a un vehículo.", GetPlayerNameRP(playerid));
	ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);

	TogglePlayerControllable(playerid, 0);
	Puenteando[playerid] = 1;
	new Float:pX, Float:pY, Float:pZ;
	GetVehiclePos(carid, pX, pY, pZ);
	for(new i = 0; i < MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i) && i != INVALID_PLAYER_ID)
		{
			if(PlayerInfo[i][pFaccion] == 1 && PlayerInfo[i][pServicioPD] > 0)
			{
				SetPlayerCheckpoint(i, pX, pY, pZ, 4.0);
				format(string, sizeof(string), "[Radio] - {FFFFFF}Central: Reportan un robo de vehículo. Modelo: {FFFF04}%s {FFFFFF}Matrícula: {56C4FF}LS-%d.", CarInfo[carid][cNombreModelo], CarInfo[carid][cLlave]);
				SendClientMessage(i, TEAM_BLUE_COLOR, string);
				format(string, sizeof(string), "[Radio] -{FFFFF} Central: Describen al sospechoso como... (( {FFFF04}%s{FFFFFF} ))", GetPlayerNameRP(playerid));
				SendClientMessage(i, TEAM_BLUE_COLOR, string);
			}
		}
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/desguazar", true) == 0) //Vender un coche al desguace
{
	if(PlayerInfo[playerid][pTrabajo] != 4) return SendClientMessage(playerid, Rojo, "* No eres ladrón.");
    if(PlayerInfo[playerid][pHabLad] < 90){SendClientMessage(playerid, Rojo, "* Necesitas nivel 4 de ladrón para usar este comando."); return 1;}
    if(PlayerInfo[playerid][pTiempoRobo] > 0)
    {
        format(string, sizeof(string), "* Debes esperar %d minutos para usar este comando.", PlayerInfo[playerid][pTiempoRobo]);
        SendClientMessage(playerid, Rojo, string);
        return 1;
    }
	if(!IsPlayerInAnyVehicle(playerid) || GetPlayerState(playerid) != PLAYER_STATE_DRIVER){SendClientMessage(playerid, Rojo, "* No estás montado en un vehículo como conductor."); return 1;}
	new EsPropietario;
	for(new x=0; x<5; x++)
	{
	    if(CarInfo[GetPlayerVehicleID(playerid)][cLlave] == PlayerInfo[playerid][pLlaveCoche][x])EsPropietario = 1;
	}
    if(EsPropietario != 0){SendClientMessage(playerid, Rojo, "* No puedes desguazar tus propios vehículos."); return 1;}

	new carid = GetPlayerVehicleID(playerid);
	if(carid <= MAX_VEHPUBLICO){SendClientMessage(playerid, Rojo, "* No puedes desguazar un vehículo de facción o trabajo."); return 1;}
	if(!IsPlayerInRangeOfPoint(playerid, 8.0, 2272.6394,-2350.2861,13.2669) && !IsPlayerInRangeOfPoint(playerid, 8.0, 2294.3999000,-2447.8000500,0.0000000)){SendClientMessage(playerid, Rojo, "* No estás en el desguace."); return 1;}

 	new precio;
	precio = ((CarInfo[carid][cValor]/24));
	GivePlayerMoneyAC(playerid, precio);
	format(string, sizeof(string), "Has vendido el vehículo robado al desguace por %d$.", precio);
	SendClientMessage(playerid, Verde, string);
	PlayerInfo[playerid][pTiempoRobo] = 40;
    PlayerInfo[playerid][pHabLad] ++;
	VehExplotado[carid] = 1;
	CarInfo[carid][cEnDeposito] = 1;
    SetVehicleToRespawn(carid);
    if(IsPlayerInRangeOfPoint(playerid, 8.0, 2294.3999000,-2447.8000500,0.0000000)){SetPlayerPos(playerid, 2285.9480,-2425.2461,3.0000);}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/renunciar", true) == 0) //Renuncia al trabajo
{
	if(PlayerInfo[playerid][pTrabajo] == 0){SendClientMessage(playerid, Rojo, "* No tienes ningún trabajo."); return 1;}
	new empleo = PlayerInfo[playerid][pTrabajo];
	format(string, sizeof(string), "Has renunciado a tu trabajo de %s.", Jobs[empleo-1][JobNombre]);
	SendClientMessage(playerid, Amarillo, string);
    PlayerInfo[playerid][pTrabajo] = 0;
	SetPlayerSkin(playerid, PlayerInfo[playerid][pSkin]);
	return 1;
}

//----------COMANDOS TELEFONOS----------//

if(strcmp(cmd, "/llamar", true) == 0) //Llama a alguien
{
	if(PlayerInfo[playerid][pTelefono] == 0){SendClientMessage(playerid, Rojo, "* No tienes un número de teléfono asignado a tu cuenta. Compra uno en una tienda de electrónica."); return 1;}
	if(PlayerInfo[playerid][pManoDer] != 68 && PlayerInfo[playerid][pManoIzq] != 68){SendClientMessage(playerid, Rojo, "* Debes tener un teléfono en una mano."); return 1;}
	if(EnLlamada[playerid] != 0){SendClientMessage(playerid, Rojo, "* Ya estás en una llamada."); return 1;}
	tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Llamar [Número]");
        SendClientMessage(playerid, Naranja, "Servicios: Emergencías (911), Taxi (777), Anuncio (444), Taller (999).");
        return 1;
    }
    new numero = strval(tmp);
    if(numero == 0){SendClientMessage(playerid, Rojo, "* No puedes llamar al número 0."); return 1;}
    if(numero == PlayerInfo[playerid][pTelefono]){SendClientMessage(playerid, Rojo, "* No te puedes llamar a tí mismo."); return 1;}

    LlamarTelefono(playerid, numero);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/gps", true) == 0) //GPS
{
		if(PlayerInfo[playerid][pManoDer] != 125 && PlayerInfo[playerid][pManoIzq] != 125) return SendClientMessage(playerid, Rojo, "* Debes tener un GPS en una mano.");
		{
			ShowPlayerDialog(playerid,dGPS,DIALOG_STYLE_LIST, "{FFFFFF}Menú GPS", "» Trabajos\n» Hoteles\n» Puntos de Interés\n» Concesionarios\n» Tiendas de Ropa", "Aceptar", "Cancelar");
		}
		return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/contestar", true) == 0) //Contesta al teléfono
{
    if(PlayerInfo[playerid][pTelefono] == 0){SendClientMessage(playerid, Rojo, "* No tienes un número de teléfono asignado a tu cuenta. Compra uno en una tienda de electrónica."); return 1;}
	if(PlayerInfo[playerid][pManoDer] != 68 && PlayerInfo[playerid][pManoIzq] != 68 && PlayerInfo[playerid][pServicioPD] == 0){SendClientMessage(playerid, Rojo, "* Debes tener un teléfono en una mano."); return 1;}
	if(EnLlamada[playerid] != 0){SendClientMessage(playerid, Rojo, "* Ya estás en una llamada."); return 1;}
	if(PlayerInfo[playerid][pFaccion] == 1 && PlayerInfo[playerid][pServicioPD] > 0)
	{
		new oyente = NOEXISTE;
		for(new i; i < MAX_PLAYERS; i++)
		{
			if(EnLlamada[i] == 911)
			{
				oyente = i;
				break;
			}
		}

		if(oyente != NOEXISTE)
		{
			PersonaEnLlamada[playerid] = oyente;
			PersonaEnLlamada[oyente] = playerid;
			SendClientMessage(oyente,  Gris, "Han respondido al teléfono.");
			EnLlamada[playerid] = 2;
			EnLlamada[oyente] = 912;
			format(string, sizeof(string), "* %s contesta su llamada de emergencia.", GetPlayerNameRP(playerid));
			ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
		}
		return 1;
	}
	if(PersonaEnLlamada[playerid] > NOEXISTE) //llamada normal
	{
		SendClientMessage(playerid, Naranja, "Has contestado a la llamada. Utiliza '/Colgar' para colgar la llamada.");
		SendClientMessage(PersonaEnLlamada[playerid], Gris, "Han respondido al teléfono. Se te cobrará 10$ por minuto.");
		EnLlamada[playerid] = 2;
		EnLlamada[PersonaEnLlamada[playerid]] = 3;
		KillTimer(ToqueLlamadaTimer[playerid]);
		CostoLlamadaTimer[PersonaEnLlamada[playerid]] = SetTimerEx("LlamadaCoste", 6000, true, "d", PersonaEnLlamada[playerid]);
		return 1;
	}
	SendClientMessage(playerid, Rojo, "* Parece no haber llamadas entrantes.");
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/colgar", true) == 0) //Colgar el teléfono
{
	ColgarTelefono(playerid);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/sms", true) == 0) //Manda SMS a alguien
{
    if(PlayerInfo[playerid][pTelefono] == 0){SendClientMessage(playerid, Rojo, "* No tienes un número de teléfono asignado a tu cuenta. Compra uno en una tienda de electrónica."); return 1;}
	if(PlayerInfo[playerid][pManoDer] != 68 && PlayerInfo[playerid][pManoIzq] != 68){SendClientMessage(playerid, Rojo, "* Debes tener un teléfono en una mano."); return 1;}
	tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /SMS [Número] [Texto]");
        return 1;
    }
    new numero = strval(tmp);
    if(numero == PlayerInfo[playerid][pTelefono]){SendClientMessage(playerid, Rojo, "* No te puedes enviar un SMS a tí mismo."); return 1;}

    new tlfencontrado = -1;
    for(new x=0; x<MAX_PLAYERS; x++)
    {
        if(IsPlayerConnected(x) && x != INVALID_PLAYER_ID)
        {
            if(PlayerInfo[x][pTelefono] == numero && PlayerTieneObjeto(x, 68))
            {
                tlfencontrado = x;
                break;
            }
        }
    }
    if(tlfencontrado == -1){SendClientMessage(playerid, Gris, "El número que ha marcado no existe o no está disponible."); return 1;}

    new length = strlen(cmdtext);
    while ((idx < length) && (cmdtext[idx] <= ' '))
    {
        idx++;
    }
    new offset = idx;
    new result[MAX_PLAYER_NAME];
    while ((idx < length) && ((idx - offset) < (sizeof(result) - 1)))
    {
        result[idx - offset] = cmdtext[idx];
        idx++;
    }
    result[idx - offset] = EOS;
    if(!strlen(result))
    {
        SendClientMessage(playerid, Naranja, "* /SMS [Número] [Texto]");
        return 1;
    }
    new string2[128];
    format(string, sizeof(string), "* %s envía un mensaje de texto con su teléfono.", GetPlayerNameRP(playerid));
 	ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
    format(string2, sizeof(string2), "SMS enviado al %d: %s", numero, result);
    SendClientMessage(playerid, Amarillo, string2);
    SendClientMessage(playerid, RojoIntenso, "Costo del SMS: 5$.");
    PlayerInfo[playerid][pDineroBanco] -= 5;
    format(string2, sizeof(string2), "SMS recibido del %d: %s", PlayerInfo[playerid][pTelefono], result);
    SendClientMessage(tlfencontrado, Amarillo, string2);
    printf("%s envía a %s un SMS: %s", GetPlayerNameRP(playerid), GetPlayerNameRP(tlfencontrado), string);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/agenda", true) == 0) //Muestra agenda al jugador
{
    if(PlayerInfo[playerid][pTelefono] == 0){SendClientMessage(playerid, Rojo, "* No tienes un número de teléfono asignado a tu cuenta. Compra uno en una tienda de electrónica."); return 1;}
	if(PlayerInfo[playerid][pManoDer] != 68 && PlayerInfo[playerid][pManoIzq] != 68){SendClientMessage(playerid, Rojo, "* Debes tener un teléfono en una mano."); return 1;}
	new string2[250], dialog[1024];
	format(string2, sizeof(string2), "SELECT Nombre FROM agendas WHERE Nombre = '%s'", PlayerInfo[playerid][pNombre]);
    mysql_query(1, string2);
	mysql_store_result();
	new existe;
	existe = mysql_num_rows();
	mysql_free_result();
	if(existe == 0) //Si no existe en la DB, crearla
	{
	    format(string2,sizeof(string2),"INSERT INTO agendas (Nombre) VALUES ('%s')", PlayerInfo[playerid][pNombre]);
    	mysql_query(1, string2);
	}

	new opcion[20];
	opcion = strtok(cmdtext, idx);
	if(!strlen(opcion))
	{
		SendClientMessage(playerid, Naranja, "* /Agenda [Ver | Nuevo | Borrar]");
		return 1;
	}
	if(strcmp(opcion,"ver",true) == 0) //ver agenda
	{
		for(new x=0; x<16; x++)
		{
		    new Numero = AgendaNumero[playerid][x], Contacto[41];
		    format(Contacto, sizeof(Contacto), "%s", AgendaContacto[playerid][x]);
			if(!strlen(Contacto) || strcmp(Contacto,"NULL",true) == 0){format(string, sizeof(string), "\n{FFFFFF}%d: Libre", x+1);}
			else{format(string, sizeof(string), "\n{FFFFFF}%d: %s - %d", x+1, Contacto, Numero);}
			strcat(dialog, string);
		}
		ShowPlayerDialog(playerid, 22, DIALOG_STYLE_LIST, "Agenda", dialog, "Seleccionar", "Cerrar");
		return 1;
	}
	if(strcmp(opcion,"nuevo",true) == 0) //agregar número a la agenda
	{
	    tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "* /Agenda Nuevo [#Slot] [Número] [Nombre]");
	        return 1;
	    }
	    new slot = strval(tmp)-1;
	    if(slot < 0 || slot > 15){SendClientMessage(playerid, Rojo, "* El espacio debe estar entre 1 y 16."); return 1;}
     	new Contacto[41];
	    format(Contacto, sizeof(Contacto), "%s", AgendaContacto[playerid][slot]);
	    if(strlen(Contacto) && strcmp(Contacto,"NULL",true) != 0){SendClientMessage(playerid, Rojo, "* Espacio ocupado."); return 1;}

	    tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "* /Agenda Nuevo [#Slot] [Número] [Nombre]");
	        return 1;
	    }
	    new numero = strval(tmp);

	    new length = strlen(cmdtext);
	    while ((idx < length) && (cmdtext[idx] <= ' '))
	    {
	        idx++;
	    }
	    new offset = idx;
	    new result[MAX_PLAYER_NAME];
	    while ((idx < length) && ((idx - offset) < (sizeof(result) - 1)))
	    {
	        result[idx - offset] = cmdtext[idx];
	        idx++;
	    }
	    result[idx - offset] = EOS;
	    if(!strlen(result))
	    {
	        SendClientMessage(playerid, Naranja, "* /Agenda Nuevo [#Slot] [Número] [Nombre]");
	        return 1;
	    }

	    AgendaNumero[playerid][slot] = numero;
	    format(AgendaContacto[playerid][slot], sizeof(result), "%s", result);
	    GuardarAgenda(playerid);
	    format(string, sizeof(string), "Contacto '%s' (%d) agregado a la agenda.", result, numero);
	    SendClientMessage(playerid, Verde, string);
	    return 1;
	}
	if(strcmp(opcion,"borrar",true) == 0) //borrar número de la agenda
	{
	    tmp = strtok(cmdtext, idx);
	    if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "* /Agenda Borrar [#Slot]");
	        return 1;
	    }
	    new slot = strval(tmp)-1;
	    if(slot < 0 || slot > 15){SendClientMessage(playerid, Rojo, "* El espacio debe estar entre 1 y 16."); return 1;}
     	new Contacto[41];
	    format(Contacto, sizeof(Contacto), "%s", AgendaContacto[playerid][slot]);
	    if(!strlen(Contacto) || strcmp(Contacto,"NULL",true) == 0){SendClientMessage(playerid, Rojo, "* Espacio vacío."); return 1;}

	    format(string, sizeof(string), "Contacto '%s' (%d) borrado de la agenda.", Contacto, AgendaNumero[playerid][slot]);
	    SendClientMessage(playerid, Verde, string);

	    AgendaNumero[playerid][slot] = 0;
	    format(AgendaContacto[playerid][slot], 41, "");
	    GuardarAgenda(playerid);
	    return 1;
	}
	else
	{
		SendClientMessage(playerid, Naranja, "* /Agenda [Ver | Nuevo | Borrar]");
	}
	return 1;
}

//----------COMANDOS DROGAS----------//

if(strcmp(cmd, "/plantar", true) == 0) //Plantar semillas de drogas
{
    new opcion[25];
	opcion = strtok(cmdtext, idx);
	if(!strlen(opcion))
	{
		SendClientMessage(playerid, Naranja, "* /Plantar [Opción]");
		SendClientMessage(playerid, Naranja, "Marihuana");
		return 1;
	}
	new Float:pX, Float:pY, Float:pZ, Int, VW;
	if(strcmp(opcion,"marihuana",true) == 0)
	{
	    if(PlayerInfo[playerid][pManoDer] != 85 && PlayerInfo[playerid][pManoIzq] != 85){SendClientMessage(playerid, Rojo, "* No tienes una semilla de marihuana en ninguna mano."); return 1;}
	    //Quita unidad de semilla
		if(PlayerInfo[playerid][pManoDer] == 85){PlayerInfo[playerid][pManoDerCant] --;}
		else if(PlayerInfo[playerid][pManoIzq] == 85){PlayerInfo[playerid][pManoIzqCant] --;}
		//Crea planta
		GetPlayerPos(playerid, pX, pY, pZ);
		VW = GetPlayerVirtualWorld(playerid);
		Int = GetPlayerInterior(playerid);
		CrearPlantacion(playerid, 1, pX, pY, pZ, VW, Int);
		Streamer_Update(playerid);
		return 1;
	}
	return 1;
}

if(strcmp(cmd, "/recogerplanta", true) == 0) //Recoge plantacion
{
	new planta = GetPlayerPlantacion(playerid);
	if(planta == 0){SendClientMessage(playerid, Rojo, "* No se ha detectado ninguna plantación a tu alrededor."); return 1;}
	if(PlantaInfo[planta][plEstado] < 100){SendClientMessage(playerid, Rojo, "* No puedes recoger esta plantación todavía."); return 1;}
	if(PlayerInfo[playerid][pManoIzq] != 0 && PlayerInfo[playerid][pManoDer] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}

	if(PlayerInfo[playerid][pManoDer] == 0)
	{
	    PlayerInfo[playerid][pManoDer] = 86;
	    PlayerInfo[playerid][pManoDerCant] = 1;
	    PonerObjeto(playerid, 1, 86);
	}
	else if(PlayerInfo[playerid][pManoIzq] == 0)
	{
	    PlayerInfo[playerid][pManoIzq] = 86;
	    PlayerInfo[playerid][pManoIzqCant] = 1;
	    PonerObjeto(playerid, 2, 86);
	}
	format(string, sizeof(string), "* %s recoge una planta de marihuana del suelo.", GetPlayerNameRP(playerid));
 	ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
	EliminarPlantacion(planta);
	return 1;
}

if(strcmp(cmd, "/eliminarplanta", true) == 0) //Eliminar plantacion
{
	new planta = GetPlayerPlantacion(playerid);
	if(planta == 0){SendClientMessage(playerid, Rojo, "* No se ha detectado ninguna plantación a tu alrededor."); return 1;}
	format(string, sizeof(string), "* %s pisotea una planta de marihuana del suelo.", GetPlayerNameRP(playerid));
 	ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
	EliminarPlantacion(planta);
	return 1;
}

if(strcmp(cmd, "/preparar", true) == 0) //Recoge plantacion
{
	if(PreparandoDroga[playerid] != 0){SendClientMessage(playerid, Rojo, "* Ya estás preparando alguna droga."); return 1;}
    new opcion[25];
	opcion = strtok(cmdtext, idx);
	if(!strlen(opcion))
	{
		SendClientMessage(playerid, Naranja, "* /Preparar [Droga]");
		SendClientMessage(playerid, Naranja, "Drogas: Marihuana, Crack");
		return 1;
	}
	if(strcmp(opcion,"marihuana",true) == 0)
	{
	    if(PlayerInfo[playerid][pManoDer] != 86 && PlayerInfo[playerid][pManoIzq] != 86){SendClientMessage(playerid, Rojo, "* No tienes una planta de marihuana en ninguna mano."); return 1;}
	    format(string, sizeof(string), "* %s comienza a preparar gramos de marihuana a partir de su planta.", GetPlayerNameRP(playerid));
 		ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
 		PreparandoDroga[playerid] = 1;
		TogglePlayerControllable(playerid, 0);
		SetTimerEx("Descongelar", 15000, false, "d", playerid);
		SetTimerEx("PrepararDroga", 15000, false, "d, d", playerid, 1);
	    return 1;
	}
	if(strcmp(opcion,"crack",true) == 0)
	{
		if(PlayerInfo[playerid][pManoDer] != 81 && PlayerInfo[playerid][pManoIzq] != 81){SendClientMessage(playerid, Rojo, "* No tienes una bolsita de cocaina en ninguna mano."); return 1;}
		if(!GetPlayerDentroCasa(playerid) && !GetPlayerDentroNego(playerid)){SendClientMessage(playerid, Rojo, "* No estás en una casa o local."); return 1;}
		if(GetPlayerDentroCasa(playerid) && PlayerInfo[playerid][pCasa] != GetPlayerDentroCasa(playerid) && PlayerInfo[playerid][pCasaAlq] != GetPlayerDentroCasa(playerid)){SendClientMessage(playerid, Rojo, "* No resides en esta vivienda."); return 1;}
		if(GetPlayerDentroNego(playerid) && PlayerInfo[playerid][pNegocio] != GetPlayerDentroNego(playerid)){SendClientMessage(playerid, Rojo, "* No eres el propietario de este local."); return 1;}
	    format(string, sizeof(string), "* %s comienza a preparar gramos de crack a partir de gramos de cocaina y otros productos.", GetPlayerNameRP(playerid));
 		ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
 		PreparandoDroga[playerid] = 2;
		TogglePlayerControllable(playerid, 0);
		SetTimerEx("Descongelar", 25000, false, "d", playerid);
		SetTimerEx("PrepararDroga", 25000, false, "d, d", playerid, 2);
		return 1;
	}
	return 1;
}

if(strcmp(cmd, "/cargar", true) == 0) //Recoge plantacion
{
	new opcion[25];
	opcion = strtok(cmdtext, idx);
	if(!strlen(opcion))
	{
		SendClientMessage(playerid, Naranja, "* /Cargar [Opción]");
		SendClientMessage(playerid, Naranja, "Opciones: Avion");
		return 1;
	}
	if(strcmp(opcion,"avion",true) == 0)
	{
		new autoid;
		if(IsPlayerInAnyVehicle(playerid))
		autoid = GetPlayerVehicleID(playerid);
        if(PlayerInfo[playerid][pTrabajo] != 1) return SendClientMessage(playerid, Rojo, "* No eres piloto.");
		if(Trabajando[playerid] == 0){SendClientMessage(playerid, Rojo, "* No estás trabajando."); return 1;}
		if(!IsAvionPiloto(autoid)) return SendClientMessage(playerid, Rojo, "* Necesitas estar en un avión.");
		if(TrabajoAvion[playerid] == 1) return SendClientMessage(playerid,Rojo,"* Ya tienes un avión cargado");
		if(cavion[playerid] == 1) return SendClientMessage(playerid,Rojo,"* Ya estas cargando un avión");
		{
			new Float:aerols,Float:aerosf,Float:aerolv;
			aerols = GetPlayerDistanceFromPoint(playerid, 1725.9821,-2419.0105,14.7492);
			aerosf = GetPlayerDistanceFromPoint(playerid, -1292.1914,-357.9675,13.7137);
			aerolv = GetPlayerDistanceFromPoint(playerid, 1568.6259,1462.6353,12.0246);
			SendClientMessage(playerid,Blanco,"Se te marcó un {FF4E4E}punto rojo{FFFFFF} en el mapa donde cargarás los pasarejos del avión.");
			if(aerolv < aerols && aerolv < aerosf)
			{
				SetPlayerCheckpoint(playerid,1568.6259,1462.6353,12.0246,15.0);
			}
			else if(aerols < aerolv && aerols < aerosf)
			{
				SetPlayerCheckpoint(playerid,1725.9821,-2419.0105,14.7492,15.0);
			}
			else if(aerosf < aerolv && aerosf < aerols)
			{
				SetPlayerCheckpoint(playerid,-1292.1914,-357.9675,13.7137,15.0);
			}
		}
	}
	return 1;
}

if(strcmp(cmd, "/fardo", true) == 0) //Comando para fardos
{
    new opcion[25];
	opcion = strtok(cmdtext, idx);
	if(!strlen(opcion))
	{
		SendClientMessage(playerid, Naranja, "* /Fardo [Opción] ");
		SendClientMessage(playerid, Naranja, "Crear, Sacar, Meter, Unir");
		return 1;
	}
	if(strcmp(opcion,"crear",true) == 0)
	{
	    if(GetPlayerBolsitaDroga(playerid, 1)) //Tiene una bolsita de droga en la mano derecha
	    {
	        new fardo;
	        switch(GetPlayerBolsitaDroga(playerid, 1))
	        {
	            case 1: fardo = 75; //Marihuana
	            case 2: fardo = 76; //Cocaína
	            case 3: fardo = 77; //Crack
	            case 4: fardo = 78; //Heroína
	            case 5: fardo = 79; //LSD
	        }
	        PlayerInfo[playerid][pManoDer] = fardo;
	        PonerObjeto(playerid, 1, fardo);
			format(string, sizeof(string), "* Has creado un {fce80c}%s (%d){FFFFFF} en tu mano derecha.", ObjetoInfo[fardo][NombreObjeto], PlayerInfo[playerid][pManoDerCant]);
			SendClientMessage(playerid, Blanco, string);
			format(string, sizeof(string), "* %s crea un fardo de droga.", GetPlayerNameRP(playerid));
 			ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
			return 1;
	    }
	    else if(GetPlayerBolsitaDroga(playerid, 2)) //Tiene una bolsita de droga en la mano izquierda
	    {
	        new fardo;
	        switch(GetPlayerBolsitaDroga(playerid, 2))
	        {
	            case 1: fardo = 75; //Marihuana
	            case 2: fardo = 76; //Cocaína
	            case 3: fardo = 77; //Crack
	            case 4: fardo = 78; //Heroína
	            case 5: fardo = 79; //LSD
	        }
	        PlayerInfo[playerid][pManoIzq] = fardo;
	        PonerObjeto(playerid, 2, fardo);
			format(string, sizeof(string), "* Has creado un {fce80c}%s (%d){FFFFFF} en tu mano izquierda.", ObjetoInfo[fardo][NombreObjeto], PlayerInfo[playerid][pManoIzqCant]);
			SendClientMessage(playerid, Blanco, string);
			format(string, sizeof(string), "* %s crea un fardo de droga.", GetPlayerNameRP(playerid));
 			ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
			return 1;
	    }
	    else{SendClientMessage(playerid, Rojo, "* No tienes una bolsita de droga en ninguna mano."); return 1;}
	}
	if(strcmp(opcion,"sacar",true) == 0)
	{
	    if(GetPlayerFardoDroga(playerid, 1) && PlayerInfo[playerid][pManoIzq] == 0) //Tiene fardo en mano derecha y mano izquierda libre
		{
		    tmp = strtok(cmdtext, idx);
			if(!strlen(tmp))
			{
				SendClientMessage(playerid, Naranja, "* /Fardo Sacar [Cantidad]");
				return 1;
			}
			new cantidad = strval(tmp);
			if(cantidad < 1 || cantidad > 5){SendClientMessage(playerid, Rojo, "* La cantidad debe estar entre 1 y 5."); return 1;}
			if(cantidad > PlayerInfo[playerid][pManoDerCant]){SendClientMessage(playerid, Rojo, "* No hay tanta cantidad en el fardo."); return 1;}
			new bolsita;
	        switch(GetPlayerFardoDroga(playerid, 1))
	        {
	            case 1: bolsita = 80; //Marihuana
	            case 2: bolsita = 81; //Cocaína
	            case 3: bolsita = 82; //Crack
	            case 4: bolsita = 83; //Heroína
	            case 5: bolsita = 84; //LSD
	        }
	        PlayerInfo[playerid][pManoDerCant] -= cantidad;
			PlayerInfo[playerid][pManoIzq] = bolsita, PlayerInfo[playerid][pManoIzqCant] = cantidad;
	        PonerObjeto(playerid, 2, bolsita);
	        format(string, sizeof(string), "* Sacas una {fce80c}%s (%d){FFFFFF} del fardo.", ObjetoInfo[bolsita][NombreObjeto], cantidad);
			SendClientMessage(playerid, Blanco, string);
	        return 1;
		}
		else if(GetPlayerFardoDroga(playerid, 2) && PlayerInfo[playerid][pManoDer] == 0) //Tiene fardo en mano izquierda y mano derecha libre
		{
		    tmp = strtok(cmdtext, idx);
			if(!strlen(tmp))
			{
				SendClientMessage(playerid, Naranja, "* /Fardo Sacar [Cantidad]");
				return 1;
			}
			new cantidad = strval(tmp);
			if(cantidad < 1 || cantidad > 5){SendClientMessage(playerid, Rojo, "* La cantidad debe estar entre 1 y 5."); return 1;}
            if(cantidad > PlayerInfo[playerid][pManoIzqCant]){SendClientMessage(playerid, Rojo, "* No hay tanta cantidad en el fardo."); return 1;}
			new bolsita;
	        switch(GetPlayerFardoDroga(playerid, 2))
	        {
	            case 1: bolsita = 80; //Marihuana
	            case 2: bolsita = 81; //Cocaína
	            case 3: bolsita = 82; //Crack
	            case 4: bolsita = 83; //Heroína
	            case 5: bolsita = 84; //LSD
	        }
	        PlayerInfo[playerid][pManoIzqCant] -= cantidad;
			PlayerInfo[playerid][pManoDer] = bolsita, PlayerInfo[playerid][pManoDerCant] = cantidad;
	        PonerObjeto(playerid, 1, bolsita);
	        format(string, sizeof(string), "* Sacas una {fce80c}%s (%d){FFFFFF} del fardo.", ObjetoInfo[bolsita][NombreObjeto], cantidad);
			SendClientMessage(playerid, Blanco, string);
	        return 1;
		}
		else{SendClientMessage(playerid, Rojo, "* Debes tener un fardo en una mano y la otra mano vacía."); return 1;}
	}
	if(strcmp(opcion,"meter",true) == 0)
	{
	    if(!GetPlayerFardoDroga(playerid, 1) && !GetPlayerFardoDroga(playerid, 2)){SendClientMessage(playerid, Rojo, "* No tienes un fardo de droga en ninguna mano."); return 1;}
	    if(!GetPlayerBolsitaDroga(playerid, 1) && !GetPlayerBolsitaDroga(playerid, 2)){SendClientMessage(playerid, Rojo, "* No tienes una bolsita de droga en ninguna mano."); return 1;}
     	if(GetPlayerFardoDroga(playerid, 1) && GetPlayerBolsitaDroga(playerid, 2) && GetPlayerFardoDroga(playerid, 1) == GetPlayerBolsitaDroga(playerid, 2)) //Tiene fardo en mano derecha de misma droga que en mano izquierda
	    {
	        tmp = strtok(cmdtext, idx);
			if(!strlen(tmp))
			{
				SendClientMessage(playerid, Naranja, "* /Fardo Meter [Cantidad]");
				return 1;
			}
			new cantidad = strval(tmp);
			if(cantidad < 1 || cantidad > 5){SendClientMessage(playerid, Rojo, "* La cantidad debe estar entre 1 y 5."); return 1;}
			if(cantidad > PlayerInfo[playerid][pManoIzqCant]){SendClientMessage(playerid, Rojo, "* No tienes tanta cantidad de droga en la bolsita."); return 1;}
			if(PlayerInfo[playerid][pManoDerCant] + cantidad > 70){SendClientMessage(playerid, Rojo, "* Los fardos solo pueden llegar a contener 70 gramos."); return 1;}
			PlayerInfo[playerid][pManoDerCant] += cantidad;
			PlayerInfo[playerid][pManoIzqCant] -= cantidad;
			format(string, sizeof(string), "* Metes %d gramos de tu {fce80c}%s {FFFFFF}en el fardo.", cantidad, ObjetoInfo[PlayerInfo[playerid][pManoIzq]][NombreObjeto]);
			SendClientMessage(playerid, Blanco, string);
			return 1;
	    }
	    else if(GetPlayerFardoDroga(playerid, 2) && GetPlayerBolsitaDroga(playerid, 1) && GetPlayerFardoDroga(playerid, 2) == GetPlayerBolsitaDroga(playerid, 1)) //Tiene fardo en mano izquierda de misma droga que en mano derecha
	    {
	        tmp = strtok(cmdtext, idx);
			if(!strlen(tmp))
			{
				SendClientMessage(playerid, Naranja, "* /Fardo Meter [Cantidad]");
				return 1;
			}
			new cantidad = strval(tmp);
			if(cantidad < 1 || cantidad > 5){SendClientMessage(playerid, Rojo, "* La cantidad debe estar entre 1 y 5."); return 1;}
			if(cantidad > PlayerInfo[playerid][pManoDerCant]){SendClientMessage(playerid, Rojo, "* No tienes tanta cantidad de droga en la bolsita."); return 1;}
			if(PlayerInfo[playerid][pManoIzqCant] + cantidad > 70){SendClientMessage(playerid, Rojo, "* Los fardos solo pueden llegar a contener 70 gramos."); return 1;}
			PlayerInfo[playerid][pManoIzqCant] += cantidad;
			PlayerInfo[playerid][pManoDerCant] -= cantidad;
			format(string, sizeof(string), "* Metes %d gramos de tu {fce80c}%s {FFFFFF}en el fardo.", cantidad, ObjetoInfo[PlayerInfo[playerid][pManoDer]][NombreObjeto]);
			SendClientMessage(playerid, Blanco, string);
			return 1;
	    }
	    else{SendClientMessage(playerid, Rojo, "* Debes un fardo en una mano y una bolsita en la otra de la misma droga."); return 1;}
	}
	if(strcmp(opcion,"unir",true) == 0)
	{
		if(!GetPlayerFardoDroga(playerid, 1) || !GetPlayerFardoDroga(playerid, 2)){SendClientMessage(playerid, Rojo, "* Debes tener un fardo de droga en cada mano."); return 1;}
		if(GetPlayerFardoDroga(playerid, 1) != GetPlayerFardoDroga(playerid, 2)){SendClientMessage(playerid, Rojo, "* Los fardos no son de la misma droga."); return 1;}
		if(PlayerInfo[playerid][pManoDerCant] >= 70 || PlayerInfo[playerid][pManoIzqCant] >= 70){SendClientMessage(playerid, Rojo, "* Los fardos solo pueden llegar a contener 70 gramos."); return 1;}
		if(PlayerInfo[playerid][pManoDerCant] + PlayerInfo[playerid][pManoIzqCant] <= 70)
		{
		    PlayerInfo[playerid][pManoDerCant] += PlayerInfo[playerid][pManoIzqCant];
		    PlayerInfo[playerid][pManoIzqCant] = 0;
		    format(string, sizeof(string), "* Has unido tus fardos y has obtenido un {fce80c}%s {FFFFFF}de %d gramos.", ObjetoInfo[PlayerInfo[playerid][pManoDer]][NombreObjeto], PlayerInfo[playerid][pManoDerCant]);
			SendClientMessage(playerid, Blanco, string);
			return 1;
		}
		else
		{
		    new cantidad = 70 - PlayerInfo[playerid][pManoDerCant];
		    PlayerInfo[playerid][pManoDerCant] = 70;
		    PlayerInfo[playerid][pManoIzqCant] -= cantidad;
		    format(string, sizeof(string), "* Pasas %d gramos de un {fce80c}%s {FFFFFF}a otro.", cantidad, ObjetoInfo[PlayerInfo[playerid][pManoDer]][NombreObjeto]);
			SendClientMessage(playerid, Blanco, string);
		}
		return 1;
	}
	return 1;
}

if(strcmp(cmd, "/consumir", true) == 0) //Consumir drogas
{
    new opcion[25];
	opcion = strtok(cmdtext, idx);
	if(!strlen(opcion))
	{
		SendClientMessage(playerid, Naranja, "* /Consumir [Droga]");
		SendClientMessage(playerid, Naranja, "Drogas: Marihuana, Cocaina, Crack, Heroina, LSD");
		return 1;
	}
	if(strcmp(opcion,"marihuana",true) == 0)
	{
	    if(PlayerInfo[playerid][pManoDer] != 80 && PlayerInfo[playerid][pManoIzq] != 80){SendClientMessage(playerid, Rojo, "* No tienes una bolsita de marihuana en ninguna mano."); return 1;}
		if(PlayerInfo[playerid][pManoDer] != 69 && PlayerInfo[playerid][pManoIzq] != 69){SendClientMessage(playerid, Rojo, "* Necesitas un mechero con gas para encender el porro."); return 1;}
		if((PlayerInfo[playerid][pManoDer] == 69 && PlayerInfo[playerid][pManoDerCant] <= 0) || (PlayerInfo[playerid][pManoIzq] == 69 && PlayerInfo[playerid][pManoIzqCant] <= 0)){SendClientMessage(playerid, Rojo, "* Necesitas un mechero con gas para encender el porro."); return 1;}
		//Quita unidad de droga
		if(PlayerInfo[playerid][pManoDer] == 80){PlayerInfo[playerid][pManoDerCant] --;}
		else if(PlayerInfo[playerid][pManoIzq] == 80){PlayerInfo[playerid][pManoIzqCant] --;}
		//Quita unidad de mechero
		if(PlayerInfo[playerid][pManoDer] == 69){PlayerInfo[playerid][pManoDerCant] --;}
		else if(PlayerInfo[playerid][pManoIzq] == 69){PlayerInfo[playerid][pManoIzqCant] --;}
		//Da efecto de marihuana
		RemovePlayerColorFade(playerid);
		if(PlayerInfo[playerid][pDrConsumida][0] > 80){FlashPlayerScreen(playerid, 0xa8070730, 1, 2); PlayerInfo[playerid][pDrConsumida][0] += 7; GivePlayerHealth(playerid,7.0);}
		else if(PlayerInfo[playerid][pDrConsumida][0] > 60){FlashPlayerScreen(playerid, 0xa8070735, 1, 4); PlayerInfo[playerid][pDrConsumida][0] += 10; GivePlayerHealth(playerid,10.0);}
		else if(PlayerInfo[playerid][pDrConsumida][0] > 40){FlashPlayerScreen(playerid, 0xa8070740, 1, 4); PlayerInfo[playerid][pDrConsumida][0] += 13; GivePlayerHealth(playerid,13.0);}
		else if(PlayerInfo[playerid][pDrConsumida][0] > 20){FlashPlayerScreen(playerid, 0xa8070745, 1, 5); PlayerInfo[playerid][pDrConsumida][0] += 16; GivePlayerHealth(playerid,16.0);}
		else{FlashPlayerScreen(playerid, 0xa8070750, 1, 5); PlayerInfo[playerid][pDrConsumida][0] += 19; GivePlayerHealth(playerid,19.0);}
		GivePlayerDrunkLevel(playerid, 8000);
		//Sube adicción
		PlayerInfo[playerid][pAdiccion][0] += 3;
		if(PlayerInfo[playerid][pAdiccion][0] > 100){PlayerInfo[playerid][pAdiccion][0] = 100;}
		//Sobredosis
		new Float:health;
		GetPlayerHealth(playerid,health);
		if(health >= 215.0)
		{
			SendClientMessage(playerid, NaranjaOscuro, "* Has sufrido una sobredosis por consumir tanta droga en tan poco tiempo.");
			SetPlayerHealth(playerid,0.0);
			RemovePlayerColorFade(playerid);
			return 1;
		}
		DarSobredosis(playerid);
		//Mensajes
		format(string, sizeof(string), "* %s hace un porro de marihuana y lo enciende.", GetPlayerNameRP(playerid));
		ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
		format(string, sizeof(string), "* Te sientes relajado y tranquilo. Tolerancia marihuana: %d/100.", PlayerInfo[playerid][pAdiccion][0]);
		SendClientMessage(playerid, Naranja, string);
		//Da el cigarro
		SetPlayerSpecialAction(playerid, SPECIAL_ACTION_SMOKE_CIGGY);
		ApplyAnimation(playerid, "GANGS", "smkcig_prtl", 3.0, 0, 0, 0, 0, 0);
		return 1;
	}
	if(strcmp(opcion,"cocaina",true) == 0)
	{
		if(PlayerInfo[playerid][pManoDer] != 81 && PlayerInfo[playerid][pManoIzq] !=  81){SendClientMessage(playerid, Rojo, "* No tienes una bolsita de cocaína en ninguna mano."); return 1;}
		//Quita unidad de droga
		if(PlayerInfo[playerid][pManoDer] == 81){PlayerInfo[playerid][pManoDerCant] --;}
		else if(PlayerInfo[playerid][pManoIzq] == 81){PlayerInfo[playerid][pManoIzqCant] --;}
		//Da efecto de cocaina y vida
		RemovePlayerColorFade(playerid);
		if(PlayerInfo[playerid][pAdiccion][1] > 80){FlashPlayerScreen(playerid, 0xFFFFFF20, 255, 110); PlayerInfo[playerid][pDrConsumida][1] += 6; GivePlayerHealth(playerid,6.0);}
		else if(PlayerInfo[playerid][pAdiccion][1] > 60){FlashPlayerScreen(playerid, 0xFFFFFF40, 255, 120); PlayerInfo[playerid][pDrConsumida][1] += 12; GivePlayerHealth(playerid,12.0);}
		else if(PlayerInfo[playerid][pAdiccion][1] > 40){FlashPlayerScreen(playerid, 0xFFFFFF70, 255, 130); PlayerInfo[playerid][pDrConsumida][1] += 18; GivePlayerHealth(playerid,18.0);}
		else if(PlayerInfo[playerid][pAdiccion][1] > 20){FlashPlayerScreen(playerid, 0xFFFFFFBB, 255, 140); PlayerInfo[playerid][pDrConsumida][1] += 24; GivePlayerHealth(playerid,24.0);}
		else{FlashPlayerScreen(playerid, 0xFFFFFFFF, 255, 150); PlayerInfo[playerid][pDrConsumida][1] += 30; GivePlayerHealth(playerid,30.0);}
		//Sube adicción
		PlayerInfo[playerid][pAdiccion][1] += 5;
		if(PlayerInfo[playerid][pAdiccion][1] > 100){PlayerInfo[playerid][pAdiccion][1] = 100;}
		//Sobredosis
		new Float:health;
		GetPlayerHealth(playerid,health);
		if(health >= 215.0)
		{
			SendClientMessage(playerid, NaranjaOscuro, "* Has sufrido una sobredosis por consumir tanta droga en tan poco tiempo.");
			SetPlayerHealth(playerid,0.0);
			RemovePlayerColorFade(playerid);
			return 1;
		}
		DarSobredosis(playerid);
		//Mensajes
		format(string, sizeof(string), "* %s esnifa una raya de cocaina.", GetPlayerNameRP(playerid));
		ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
		format(string, sizeof(string), "* Te sientes eufórico y motivado, pero un tanto nervioso. Adicción cocaína: %d/100.", PlayerInfo[playerid][pAdiccion][1]);
		SendClientMessage(playerid, Naranja, string);
		return 1;
	}
	if(strcmp(opcion,"crack",true) == 0)
	{
		if(PlayerInfo[playerid][pManoDer] != 82 && PlayerInfo[playerid][pManoIzq] != 82){SendClientMessage(playerid, Rojo, "* No tienes una bolsita de crack en ninguna mano."); return 1;}
		if(PlayerInfo[playerid][pManoDer] != 69 && PlayerInfo[playerid][pManoIzq] != 69){SendClientMessage(playerid, Rojo, "* Necesitas un mechero con gas para fumar crack."); return 1;}
		if((PlayerInfo[playerid][pManoDer] == 69 && PlayerInfo[playerid][pManoDerCant] <= 0) || (PlayerInfo[playerid][pManoIzq] == 69 && PlayerInfo[playerid][pManoIzqCant] <= 0)){SendClientMessage(playerid, Rojo, "* Necesitas un mechero con gas para fumar crack."); return 1;}
		//Quita unidad de droga
		if(PlayerInfo[playerid][pManoDer] == 82){PlayerInfo[playerid][pManoDerCant] --;}
		else if(PlayerInfo[playerid][pManoIzq] == 82){PlayerInfo[playerid][pManoIzqCant] --;}
		//Quita unidad de mechero
		if(PlayerInfo[playerid][pManoDer] == 69){PlayerInfo[playerid][pManoDerCant] --;}
		else if(PlayerInfo[playerid][pManoIzq] == 69){PlayerInfo[playerid][pManoIzqCant] --;}
		//Da efecto de crack y vida
		RemovePlayerColorFade(playerid);
		if(PlayerInfo[playerid][pAdiccion][2] > 80){FlashPlayerScreen(playerid, 0xFFFFFF05, 210, 70); PlayerInfo[playerid][pDrConsumida][2] += 4; GivePlayerHealth(playerid,4.0);}
		else if(PlayerInfo[playerid][pAdiccion][2] > 60){FlashPlayerScreen(playerid, 0xFFFFFF10, 210, 70); PlayerInfo[playerid][pDrConsumida][2] += 8; GivePlayerHealth(playerid,8.0);}
		else if(PlayerInfo[playerid][pAdiccion][2] > 40){FlashPlayerScreen(playerid, 0xFFFFFF15, 210, 70); PlayerInfo[playerid][pDrConsumida][2] += 12; GivePlayerHealth(playerid,12.0);}
		else if(PlayerInfo[playerid][pAdiccion][2] > 20){FlashPlayerScreen(playerid, 0xFFFFFF20, 210, 70); PlayerInfo[playerid][pDrConsumida][2] += 16; GivePlayerHealth(playerid,16.0);}
		else{FlashPlayerScreen(playerid, 0xFFFFFF25, 210, 70); PlayerInfo[playerid][pDrConsumida][2] += 20; GivePlayerHealth(playerid,20.0);}
		//Sube adicción
		PlayerInfo[playerid][pAdiccion][2] += 12;
		if(PlayerInfo[playerid][pAdiccion][2] > 100){PlayerInfo[playerid][pAdiccion][2] = 100;}
		//Sobredosis
		new Float:health;
		GetPlayerHealth(playerid,health);
		if(health >= 215.0)
		{
			SendClientMessage(playerid, NaranjaOscuro, "* Has sufrido una sobredosis por consumir tanta droga en tan poco tiempo.");
			SetPlayerHealth(playerid,0.0);
			RemovePlayerColorFade(playerid);
			return 1;
		}
		DarSobredosis(playerid);
		//Mensajes
		format(string, sizeof(string), "* %s fuma un poco de crack.", GetPlayerNameRP(playerid));
		ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
		format(string, sizeof(string), "* Te sientes eufórico. Adicción crack: %d/100.", PlayerInfo[playerid][pAdiccion][2]);
		SendClientMessage(playerid, Naranja, string);
		//Anim de fumar crack
		TogglePlayerControllable(playerid, 0);
		ApplyAnimation(playerid,"CRACK","crckidle1",4.1,1,1,1,1,1);
		SetTimerEx("Descongelar", 12000, false, "i", playerid);
		return 1;
	}
	if(strcmp(opcion,"heroina",true) == 0)
	{
	    if(PlayerInfo[playerid][pManoDer] != 83 && PlayerInfo[playerid][pManoIzq] != 83){SendClientMessage(playerid, Rojo, "* No tienes una bolsita de heroína en ninguna mano."); return 1;}
		if(PlayerInfo[playerid][pManoDer] != 69 && PlayerInfo[playerid][pManoIzq] != 69){SendClientMessage(playerid, Rojo, "* Necesitas un mechero con gas para fundir la heroína."); return 1;}
		if((PlayerInfo[playerid][pManoDer] == 69 && PlayerInfo[playerid][pManoDerCant] <= 0) || (PlayerInfo[playerid][pManoIzq] == 69 && PlayerInfo[playerid][pManoIzqCant] <= 0)){SendClientMessage(playerid, Rojo, "* Necesitas un mechero con gas para fundir la heroína."); return 1;}
		//Quita unidad de droga
		if(PlayerInfo[playerid][pManoDer] == 83){PlayerInfo[playerid][pManoDerCant] --;}
		else if(PlayerInfo[playerid][pManoIzq] == 83){PlayerInfo[playerid][pManoIzqCant] --;}
		//Quita unidad de mechero
		if(PlayerInfo[playerid][pManoDer] == 69){PlayerInfo[playerid][pManoDerCant] --;}
		else if(PlayerInfo[playerid][pManoIzq] == 69){PlayerInfo[playerid][pManoIzqCant] --;}
		//Da efecto de heroína y vida
		RemovePlayerColorFade(playerid);
		if(PlayerInfo[playerid][pAdiccion][3] > 80){FlashPlayerScreen(playerid, 0x00000075, 1, 1); PlayerInfo[playerid][pDrConsumida][3] += 8; GivePlayerHealth(playerid,8.0);}
		else if(PlayerInfo[playerid][pAdiccion][3] > 60){FlashPlayerScreen(playerid, 0x00000080, 1, 2); PlayerInfo[playerid][pDrConsumida][3] += 16; GivePlayerHealth(playerid,16.0);}
		else if(PlayerInfo[playerid][pAdiccion][3] > 40){FlashPlayerScreen(playerid, 0x00000085, 1, 3); PlayerInfo[playerid][pDrConsumida][3] += 24; GivePlayerHealth(playerid,24.0);}
		else if(PlayerInfo[playerid][pAdiccion][3] > 20){FlashPlayerScreen(playerid, 0x00000090, 1, 4); PlayerInfo[playerid][pDrConsumida][3] += 32; GivePlayerHealth(playerid,32.0);}
		else{FlashPlayerScreen(playerid, 0x00000095, 1, 4); PlayerInfo[playerid][pDrConsumida][3] += 40; GivePlayerHealth(playerid,40.0);}
		SetPlayerWeather(playerid, 21);
		//Sube adicción
		PlayerInfo[playerid][pAdiccion][3] += 8;
		if(PlayerInfo[playerid][pAdiccion][3] > 100){PlayerInfo[playerid][pAdiccion][3] = 100;}
		//Sobredosis
		new Float:health;
		GetPlayerHealth(playerid,health);
		if(health >= 215.0)
		{
			SendClientMessage(playerid, NaranjaOscuro, "* Has sufrido una sobredosis por consumir tanta droga en tan poco tiempo.");
			SetPlayerHealth(playerid,0.0);
			RemovePlayerColorFade(playerid);
			return 1;
		}
		DarSobredosis(playerid);
		//Mensajes
		format(string, sizeof(string), "* %s se inyecta heroína.", GetPlayerNameRP(playerid));
		ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
		format(string, sizeof(string), "* Una gran sensación de placer te invade y te hace olvidar tus problemas. Adicción heroína: %d/100.", PlayerInfo[playerid][pAdiccion][3]);
		SendClientMessage(playerid, Naranja, string);
		//Anim de meterse heroína
		TogglePlayerControllable(playerid, 0);
		ApplyAnimation(playerid,"CRACK","crckidle1",4.1,1,1,1,1,1);
		SetTimerEx("Descongelar", 30000, false, "i", playerid);
		return 1;
	}
	if(strcmp(opcion,"lsd",true) == 0)
	{
	    if(PlayerInfo[playerid][pManoDer] != 84 && PlayerInfo[playerid][pManoIzq] != 84){SendClientMessage(playerid, Rojo, "* No tienes un tripi de LSD en ninguna mano."); return 1;}
		//Quita unidad de droga
		if(PlayerInfo[playerid][pManoDer] == 84){PlayerInfo[playerid][pManoDerCant] --;}
		else if(PlayerInfo[playerid][pManoIzq] == 84){PlayerInfo[playerid][pManoIzqCant] --;}
		//Da efecto de LSD
		RemovePlayerColorFade(playerid);
		SetTimerEx("DarEfectoLSD", 200, false, "i", playerid);
		if(PlayerInfo[playerid][pAdiccion][4] > 80){PlayerInfo[playerid][pDrConsumida][4] += 5;}
		else if(PlayerInfo[playerid][pAdiccion][4] > 60){PlayerInfo[playerid][pDrConsumida][4] += 10;}
		else if(PlayerInfo[playerid][pAdiccion][4] > 40){PlayerInfo[playerid][pDrConsumida][4] += 15;}
		else if(PlayerInfo[playerid][pAdiccion][4] > 20){PlayerInfo[playerid][pDrConsumida][4] += 20;}
		else{PlayerInfo[playerid][pDrConsumida][4] += 25;}
		//Sube adicción
		PlayerInfo[playerid][pAdiccion][4] += 5;
		if(PlayerInfo[playerid][pAdiccion][4] > 100){PlayerInfo[playerid][pAdiccion][4] = 100;}
		//Sobredosis
		DarSobredosis(playerid);
		//Mensajes
		format(string, sizeof(string), "* %s se coloca un tripi de LSD en la lengua.", GetPlayerNameRP(playerid));
		ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
		format(string, sizeof(string), "* Empiezas a tener alucinaciones y ves cosas extrañas por todas partes. Tolerancia LSD: %d/100.", PlayerInfo[playerid][pAdiccion][4]);
		SendClientMessage(playerid, Naranja, string);
		return 1;
	}
	return 1;
}

//----------COMANDOS GENERALES----------//

if(strcmp(cmd, "/ver", true) == 0) //Consumir drogas
{
	new opcion[25];
	opcion = strtok(cmdtext, idx);
	if(!strlen(opcion))
	{
		SendClientMessage(playerid, Naranja, "* /Ver [Opción]");
		SendClientMessage(playerid, Naranja, "Opciones: Mapa");
		return 1;
	}
	if(strcmp(opcion,"mapa",true) == 0)
	{
		if(IsPlayerInRangeOfPoint(playerid, 1.0, 1752.0259,-1861.8715,13.5770)) //Ver mapa
		{
            ShowPlayerDialog(playerid,dGPS,DIALOG_STYLE_LIST, "{FFFFFF}Menú GPS", "» Trabajos\n» Hoteles\n» Puntos de Interés\n» Concesionarios", "Aceptar", "Cancelar");
		}
		return 1;
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/ayuda", true) == 0) //ayuda dialogo
{
ShowPlayerDialog(playerid,DAYUDA,DIALOG_STYLE_LIST, "{FFFFFF}Menú de Ayuda", "» General\n» Teléfono\n» Canales\n» Trabajo\n» Facción\n» Casas\n» Negocios\n» Vehículos\n» Lider\n» Drogas\n» Necesidades", "Aceptar", "Cancelar");
return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/peaje", true) == 0) //peaje LS
{
if(GetPlayerMoney(playerid) < 50){SendClientMessage(playerid,Rojo,"* No tienes suficiente dinero para pagar el peaje."); return 1;}
if(IsPlayerInRangeOfPoint(playerid, 12.0, 61.4137, -1524.7015, 5.5230) && GetPlayerState(playerid) == PLAYER_STATE_DRIVER) //Peaje
{
    SetDynamicObjectRot(peajepuerta[1], 0.0, 10.0, 90.0);
   	SetTimerEx("CerrarPuerta",4000,0,"p",peajepuerta[1]);
    GameTextForPlayer(playerid, "~g~San Fierro", 1000, 1);
    GivePlayerMoneyAC(playerid, -50);
}
if(IsPlayerInRangeOfPoint(playerid, 12.0, 47.2068,-1539.4961,5.1773) && GetPlayerState(playerid) == PLAYER_STATE_DRIVER) //Peaje
{
    SetDynamicObjectRot(peajepuerta[2], 0.0, 10.0, 90.0);
   	SetTimerEx("CerrarPuerta",4000,0,"p",peajepuerta[2]);
   	GameTextForPlayer(playerid, "~g~Los Santos", 1000, 1);
   	GivePlayerMoneyAC(playerid, -50);
}
if(IsPlayerInRangeOfPoint(playerid, 12.0, 7.6903,-1312.1354,11.7702) && GetPlayerState(playerid) == PLAYER_STATE_DRIVER) //Peaje
{
    SetDynamicObjectRot(peajepuerta[3], 0.0, 10.0, 90.0);
   	SetTimerEx("CerrarPuerta",4000,0,"p",peajepuerta[3]);
   	GameTextForPlayer(playerid, "~g~San Fierro", 1000, 1);
   	GivePlayerMoneyAC(playerid, -50);
}
if(IsPlayerInRangeOfPoint(playerid, 12.0, 20.5132,-1346.0331,10.0572) && GetPlayerState(playerid) == PLAYER_STATE_DRIVER) //Peaje
{
    SetDynamicObjectRot(peajepuerta[4], 0.0, 10.0, 90.0);
   	SetTimerEx("CerrarPuerta",4000,0,"p",peajepuerta[4]);
   	GameTextForPlayer(playerid, "~g~Los Santos", 1000, 1);
   	GivePlayerMoneyAC(playerid, -50);
}
return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/mostrar", true) == 0) //Mostrar documentación IC
{
    new opcion[128];
    opcion = strtok(cmdtext, idx);
    if(!strlen(opcion))
    {
        SendClientMessage(playerid, Naranja, "* /Mostrar [Opción] [ID]");
        SendClientMessage(playerid, Naranja, "DNI, Licencias, PapelesCoche, Placa");
        return 1;
    }
    if(strcmp(opcion,"DNI",true) == 0)
    {
        tmp = strtok(cmdtext, idx);
        if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "* /Mostrar DNI [ID]");
	        return 1;
	    }
	    playerid2 = ReturnUser(tmp);
	    if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid,Rojo,"* ID inválida."); return 1;}
	    if(!GetPlayersProx(5.0, playerid, playerid2)){SendClientMessage(playerid, Rojo, "* Demasiado lejos."); return 1;}
	    format(string, sizeof(string), "* %s muestra su DNI a %s.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2));
 	    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
 	    SendClientMessage(playerid2, Amarillo, "-------------------");
 	    format(string, sizeof(string), "Nombre completo: %s", PlayerInfo[playerid][pNombre]);
 	    SendClientMessage(playerid2, Blanco, string);
 	    format(string, sizeof(string), "Edad: %d", PlayerInfo[playerid][pEdad]);
 	    SendClientMessage(playerid2, Blanco, string);
 	    new sexo[5];
 	    if(PlayerInfo[playerid][pSexo] == 2) sexo = "(F)";
 	    else sexo = "(M)";
 	    format(string, sizeof(string), "Sexo: %s", sexo);
 	    SendClientMessage(playerid2, Blanco, string);
 	    SendClientMessage(playerid2, Amarillo, "-------------------");
        return 1;
    }
    if(strcmp(opcion,"Licencias",true) == 0)
    {
        tmp = strtok(cmdtext, idx);
        if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "* /Mostrar Licencias [ID]");
	        return 1;
	    }
	    playerid2 = ReturnUser(tmp);
	    if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid,Rojo,"* ID inválida."); return 1;}
	    if(!GetPlayersProx(5.0, playerid, playerid2)){SendClientMessage(playerid, Rojo, "* Demasiado lejos."); return 1;}
	    format(string, sizeof(string), "* %s muestra sus licencias a %s.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2));
 	    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
 	    SendClientMessage(playerid2, Amarillo, "-------------------");
		new tienelicencia[3];
		if(PlayerInfo[playerid][pLicConduccion] == 1) tienelicencia = "Sí";
		else tienelicencia = "No";
 	    format(string, sizeof(string), "Licencia conducción: %s", tienelicencia);
 	    SendClientMessage(playerid2, Blanco, string);
 	    if(PlayerInfo[playerid][pLicAviacion] == 1) tienelicencia = "Sí";
		else tienelicencia = "No";
 	    format(string, sizeof(string), "Licencia aviación: %s", tienelicencia);
 	    SendClientMessage(playerid2, Blanco, string);
 	    if(PlayerInfo[playerid][pLicNavegacion] == 1) tienelicencia = "Sí";
		else tienelicencia = "No";
 	    format(string, sizeof(string), "Licencia navegación: %s", tienelicencia);
 	    SendClientMessage(playerid2, Blanco, string);
 	    SendClientMessage(playerid2, Amarillo, "-------------------");
        return 1;
    }
    if(strcmp(opcion,"PapelesCoche",true) == 0)
    {
        tmp = strtok(cmdtext, idx);
        if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "* /Mostrar PapelesCoche [ID]");
	        return 1;
	    }
	    playerid2 = ReturnUser(tmp);
	    if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid,Rojo,"* ID inválida."); return 1;}
	    if(!GetPlayersProx(5.0, playerid, playerid2)){SendClientMessage(playerid, Rojo, "* Demasiado lejos."); return 1;}
	    format(string, sizeof(string), "* %s muestra los documentos de sus vehículos a %s.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2));
 	    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
 	    SendClientMessage(playerid2, Amarillo, "-------------------");
		for(new x=0; x<5; x++)
		{
		    if(PlayerInfo[playerid][pLlaveCoche][x] == 0)
		    {
		        format(string, sizeof(string), "Slot %d: Vacío", x);
		        SendClientMessage(playerid2, Blanco, string);
		    }
		    else
		    {
		        new carid, string2[250];
		        for(new c=MAX_VEHPUBLICO; c<=TotalVeh; c++)
		        {
		            if(CarInfo[c][cLlave] == PlayerInfo[playerid][pLlaveCoche][x]){carid = c; break;}
		        }
		        format(string2, sizeof(string2), "Slot %d: Matrícula: LS-%d, Modelo: %s, Propietario: %s, Valor: %d", x+1, PlayerInfo[playerid][pLlaveCoche][x], CarInfo[carid][cNombreModelo], CarInfo[carid][cDueno], CarInfo[carid][cValor]);
		        SendClientMessage(playerid2, Blanco, string2);
		    }
		}
 	    SendClientMessage(playerid2, Amarillo, "-------------------");
        return 1;
    }
    if(strcmp(opcion,"Placa",true) == 0)
    {
        if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid, Rojo, "* No eres policía."); return 1;}
        tmp = strtok(cmdtext, idx);
        if(!strlen(tmp))
	    {
	        SendClientMessage(playerid, Naranja, "* /Mostrar Placa [ID]");
	        return 1;
	    }
	    playerid2 = ReturnUser(tmp);
	    if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid,Rojo,"* ID inválida."); return 1;}
	    if(!GetPlayersProx(5.0, playerid, playerid2)){SendClientMessage(playerid, Rojo, "* Demasiado lejos."); return 1;}
	    format(string, sizeof(string), "* %s muestra su placa de agente del LSPD a %s.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2));
 	    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
 	    SendClientMessage(playerid2, Amarillo, "-------------------");
 	    format(string, sizeof(string), "Nombre: %s", PlayerInfo[playerid][pNombre]);
 	    SendClientMessage(playerid2, Blanco, string);
 	    switch(PlayerInfo[playerid][pRango])
 	    {
 	    	case 1:
	 	    {
	 	    	format(string, sizeof(string), "Rango: %s", FaccInfo[1][fRango1]);
	 	    	SendClientMessage(playerid2, Blanco, string);
	 	    }
	 	    case 2:
	 	    {
	 	    	format(string, sizeof(string), "Rango: %s", FaccInfo[1][fRango2]);
	 	    	SendClientMessage(playerid2, Blanco, string);
	 	    }
	 	    case 3:
	 	    {
	 	    	format(string, sizeof(string), "Rango: %s", FaccInfo[1][fRango3]);
	 	    	SendClientMessage(playerid2, Blanco, string);
	 	    }
	 	    case 4:
	 	    {
	 	    	format(string, sizeof(string), "Rango: %s", FaccInfo[1][fRango4]);
	 	    	SendClientMessage(playerid2, Blanco, string);
	 	    }
	 	    case 5:
	 	    {
	 	    	format(string, sizeof(string), "Rango: %s", FaccInfo[1][fRango5]);
	 	    	SendClientMessage(playerid2, Blanco, string);
	 	    }
	 	    case 6:
	 	    {
	 	    	format(string, sizeof(string), "Rango: %s", FaccInfo[1][fRango6]);
	 	    	SendClientMessage(playerid2, Blanco, string);
	 	    }
	 	    case 7:
	 	    {
	 	    	format(string, sizeof(string), "Rango: %s", FaccInfo[1][fRango7]);
	 	    	SendClientMessage(playerid2, Blanco, string);
	 	    }
	 	    case 8:
	 	    {
	 	    	format(string, sizeof(string), "Rango: %s", FaccInfo[1][fRango8]);
	 	    	SendClientMessage(playerid2, Blanco, string);
	 	    }
 	    }
 	    format(string, sizeof(string), "Nº de agente: %d", PlayerInfo[playerid][pSQLID]+1000);
 	    SendClientMessage(playerid2, Blanco, string);
 	    SendClientMessage(playerid2, Amarillo, "-------------------");
        return 1;
    }
    else
    {
        SendClientMessage(playerid, Naranja, "* /Mostrar [Opción] [ID]");
        SendClientMessage(playerid, Naranja, "DNI, Licencias, PapelesCoche");
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/autoreparar", true) == 0) //Repararse automáticamente un vehículo en el taller
{
	if(!GetPlayerVehicleID(playerid)){SendClientMessage(playerid, Rojo, "* No estás en ningún vehículo."); return 1;}
	if(SiendoReparado[playerid] == 1){SendClientMessage(playerid, Rojo, "* Tu vehículo está siendo reparado, espera a que terminen."); return 1;}
    if(!GetPlayerTaller(playerid)){SendClientMessage(playerid, Rojo, "* No estás en un taller público."); return 1;}
	new haymecanicos;
	for(new x=0; x<MAX_PLAYERS; x++)
	{
	    if(PlayerInfo[x][pFaccion] == 5) haymecanicos ++;
	    if(haymecanicos >= 3) break;
	}
	if(haymecanicos >= 3){SendClientMessage(playerid, Rojo, "* Hay más de 3 mecánicos conectados, busca uno."); return 1;}
	if(GetPlayerMoney(playerid) < 400){SendClientMessage(playerid, Rojo, "* Necesitas 400$."); return 1;}

	new coche = GetPlayerVehicleID(playerid);
	new Float:cvida;
    GetVehicleHealth(coche, cvida);
    new panels,doors,lights,tires;
	GetVehicleDamageStatus(coche,panels,doors,lights,tires);
	if(cvida == 1000 && panels == 0 && doors == 0 && lights == 0 && tires == 0){SendClientMessage(playerid, Rojo, "* Tu vehículo está en perfecto estado."); return 1;}

    format(string, sizeof(string), "* Un mecánico del taller comienza a reparar el vehículo de %s.", GetPlayerNameRP(playerid));
 	ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
    SiendoReparado[playerid] = 1;
	TogglePlayerControllable(playerid, 0);
	SetTimerEx("Descongelar", 100000, false, "i", playerid);
	GameTextForPlayer(playerid, "~g~Reparando vehiculo", 100000, 3);
	SetTimerEx("RepararMeca", 100000, false, "i d d", playerid, 4, coche);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/bandeja", true) == 0) //Comando para comer en la prisión federal
{
	if(PlayerInfo[playerid][pEncarcelado] != 2){SendClientMessage(playerid, Rojo, "* No estás encarcelado en la prisión federal."); return 1;}
	if(!IsPlayerInRangeOfPoint(playerid, 2.0, 2567.2358,-1283.9948,1044.1250)){SendClientMessage(playerid, Rojo, "* No estás en el comedor de la prisión federal."); return 1;}
	if(PlayerInfo[playerid][pHambre] >= MAX_HAMBRE && PlayerInfo[playerid][pSed] >= MAX_SED){SendClientMessage(playerid, Rojo, "* No tienes hambre ni sed."); return 1;}

	if(PlayerInfo[playerid][pHambre] < MAX_HAMBRE)PlayerInfo[playerid][pHambre] = MAX_HAMBRE, ActualizarHambre(playerid);
	if(PlayerInfo[playerid][pSed] < MAX_SED)PlayerInfo[playerid][pSed] = MAX_SED, ActualizarSed(playerid);
	format(string, sizeof(string), "* %s coge su bandeja de comida.", GetPlayerNameRP(playerid));
 	ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/vm", true) == 0) //Comando ver matriculas de vehiculos
{
    if(MatriculasActivadas[playerid] == 0)
    {
        MatriculasActivadas[playerid] = 1;
        for(new i; i <= MAX_VEHPUBLICO; i++)
		{
			if(!IsValidVehicle(i))
			{
				continue;
			}
			format(string, sizeof(string), "LS-%d\nID: %d", 998+i-MAX_VEHPUBLICO, i);
			MatriculasCoches[playerid][i] = CreatePlayer3DTextLabel(playerid, string, Aguamarina, 0.0, 0.0, 0.0, 10.0, -1, i);
		}
        for(new i = MAX_VEHPUBLICO+1; i < MAX_VEHICLES; i++)
		{
			if(!IsValidVehicle(i))
			{
				continue;
			}
			format(string, sizeof(string), "LS-%d\nID: %d", CarInfo[i][cLlave], i);
			MatriculasCoches[playerid][i] = CreatePlayer3DTextLabel(playerid, string, Aguamarina, 0.0, 0.0, 0.0, 10.0, -1, i);
		}
		SendClientMessage(playerid, Amarillo, "Textos flotantes de matriculas activados.");
    }
    else
    {
        MatriculasActivadas[playerid] = 0;
        for(new i; i < MAX_VEHICLES; i++)
		{
			DeletePlayer3DTextLabel(playerid, MatriculasCoches[playerid][i]);
		}
		SendClientMessage(playerid, Amarillo, "Textos flotantes de matriculas desactivados.");
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/entrenar", true) == 0) //Comando para entrenar en gyms
{
    if(HaciendoPressBanca[playerid] == 1){SendClientMessage(playerid, Rojo, "* Ya estás haciendo algún tipo de ejercicio."); return 1;}
    if(PlayerInfo[playerid][pCansancioEntrenar] > 0)
    {
        format(string, sizeof(string), "* Estás cansado de entrenar. Debes esperar %d minutos.", PlayerInfo[playerid][pCansancioEntrenar]);
        SendClientMessage(playerid, Rojo, string);
        return 1;
    }
    new opcion[25];
	opcion = strtok(cmdtext, idx);
	if(!strlen(opcion))
	{
		SendClientMessage(playerid, Naranja, "* /Entrenar [Opción]");
		SendClientMessage(playerid, Naranja, "PressBanca");
		return 1;
	}
	if(strcmp(opcion,"PressBanca",true) == 0)
	{
	    new DetectarPressBanca, banca;
		for(new x; x < sizeof(PressBancaPlayerPos); x++)
		{
			if(IsPlayerInRangeOfPoint(playerid, 2.0, PressBancaPlayerPos[x][0], PressBancaPlayerPos[x][1], PressBancaPlayerPos[x][2]))
			{
				DetectarPressBanca = 1;
				banca = x;
				DestroyObject(PressBancaBarraObjeto[x]);
				break;
			}
		}
		if(DetectarPressBanca == 0){SendClientMessage(playerid, Rojo, "* No estás al lado de una máquina para hacer ese ejercicio."); return 1;}
		format(string, sizeof(string), "* %s se tumba en la máquina de press banca y comienza a levantar una barra de %dKg.", GetPlayerNameRP(playerid), PlayerInfo[playerid][pFuerza]/100*25);
	    ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
		HaciendoPressBanca[playerid] = 1;
		TogglePlayerControllable(playerid, 0);
		SetPlayerPos(playerid, PressBancaPlayerPos[banca][0], PressBancaPlayerPos[banca][1], PressBancaPlayerPos[banca][2]);
		SetPlayerFacingAngle(playerid, PressBancaPlayerPos[banca][3]);
		ApplyAnimation(playerid, "benchpress", "gym_bp_geton", 1, 0, 0, 0, 1, 0, 1);
		SendClientMessage(playerid, Amarillo, "Pulsa LCTRL tantas veces como puedas en 1 minuto.");
		SendClientMessage(playerid, Naranja, "* Escriba '/DEntrenar' para dejar de hacer ejercicio.");
		SetTimerEx("TimerEntrenar", 60000, false, "i, d", playerid, 1);
		SetPlayerAttachedObject(playerid, 5, 2913, 6);
		return 1;
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/dentrenar", true) == 0) //Comando para dejar de entrenar en gyms
{
    if(HaciendoPressBanca[playerid] == 0){SendClientMessage(playerid, Rojo, "* No estás haciendo ningún tipo de ejercicio."); return 1;}
    TimerEntrenar(playerid, 1);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/caja", true) == 0) //Comando de cajas de armamentos
{
    new opcion[25];
	opcion = strtok(cmdtext, idx);
	if(!strlen(opcion))
	{
		SendClientMessage(playerid, Naranja, "* /Caja [Opción]");
		SendClientMessage(playerid, Naranja, "Sacar");
		return 1;
	}
	if(strcmp(opcion,"sacar",true) == 0)
	{
	    if(!GetPlayerCajaArmamento(playerid, 1) && !GetPlayerCajaArmamento(playerid, 2)){SendClientMessage(playerid, Rojo, "* No tienes una caja de armamento en ninguna mano."); return 1;}
	    if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Debes tener una mano vacía."); return 1;}
	    if(GetPlayerCajaArmamento(playerid, 1)) //Caja de armamento en mano derecha
	    {
	        new objeto = GetPlayerCajaArmamento(playerid, 1);
	        PlayerInfo[playerid][pManoDerCant] --;
	        PlayerInfo[playerid][pManoIzq] = objeto, PonerObjeto(playerid, 2, objeto);
			PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];
			format(string, sizeof(string), "* Has sacado un/a {fce80c}%s (%d){FFFFFF} de la caja.", ObjetoInfo[objeto][NombreObjeto], PlayerInfo[playerid][pManoIzqCant]);
			SendClientMessage(playerid, Blanco, string);
			format(string, sizeof(string), "* %s saca un/a %s de una caja de armamento.", GetPlayerNameRP(playerid), ObjetoInfo[objeto][NombreObjeto]);
 			ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
 			return 1;
	    }
	    else if(GetPlayerCajaArmamento(playerid, 2)) //Caja de armamento en mano izquierda
	    {
	        new objeto = GetPlayerCajaArmamento(playerid, 2);
	        PlayerInfo[playerid][pManoIzqCant] --;
	        PlayerInfo[playerid][pManoDer] = objeto, PonerObjeto(playerid, 1, objeto);
	        if(ObjetoInfo[objeto][IDArma] != 0)
	        {
	            GivePlayerWeapon(playerid, ObjetoInfo[objeto][IDArma], ObjetoInfo[objeto][Capacidad]);
	        }
			PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];
			format(string, sizeof(string), "* Has sacado un/a {fce80c}%s (%d){FFFFFF} de la caja.", ObjetoInfo[objeto][NombreObjeto], PlayerInfo[playerid][pManoDerCant]);
			SendClientMessage(playerid, Blanco, string);
			format(string, sizeof(string), "* %s saca un/a %s de una caja de armamento.", GetPlayerNameRP(playerid), ObjetoInfo[objeto][NombreObjeto]);
 			ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
 			return 1;
	    }
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/intentar", true) == 0 || strcmp(cmd, "/int", true) == 0) //Intentar una acción
{
	if(IntentarUsado[playerid] > 0){SendClientMessage(playerid, Rojo, "* Debes esperar 15 segundos antes de volver a usar este comando."); return 1;}
	new rand = random(100);
	if(rand < 50)
	{
	    format(string, sizeof(string), "* %s logró lo que intentaba", GetPlayerNameRP(playerid));
        ProxDetector(15.0,playerid, string, VerdeClaro,VerdeClaro,VerdeClaro,VerdeClaro,VerdeClaro);
        printf(string);
     	IntentarUsado[playerid] = 30;
	}
	else
	{
		format(string, sizeof(string), "* %s falló en su intento", GetPlayerNameRP(playerid));
		ProxDetector(15.0,playerid, string, RojoIntenso,RojoIntenso,RojoIntenso,RojoIntenso,RojoIntenso);
		printf(string);
		IntentarUsado[playerid] = 30;
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/minpayday", true) == 0) //Ver cuanto queda para el siguiente payday
{
	format(string, sizeof(string), "Te quedan %d minutos para recibir tu próximo payday.", 55-PlayerInfo[playerid][pMinPayDay]);
	SendClientMessage(playerid, Amarillo, string);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/hora", true) == 0) //Reporta a la administración
{
	if(PlayerInfo[playerid][pEncarcelado] > 0)
	{
		format(string, sizeof(string), "Tiempo de cárcel: %d minutos.", PlayerInfo[playerid][pTiempoCarcel]);
		SendClientMessage(playerid, AmarilloClaro, string);
	}
	if(!GetPlayerReloj(playerid)){SendClientMessage(playerid, Rojo, "* No tienes un reloj en ninguna mano ni en el inventario."); return 1;}
	new hour,minuto;
	gettime(hour,minuto);
	format(string, sizeof(string), "~g~|~w~%d:%d~g~|", hour, minuto);
	GameTextForPlayer(playerid, string, 5000, 1);
	ApplyAnimation(playerid,"COP_AMBIENT","Coplook_watch",4.1,0,0,0,0,0);
	format(string, sizeof(string), "* %s mira la hora en su %s.", GetPlayerNameRP(playerid), ObjetoInfo[GetPlayerReloj(playerid)][NombreObjeto]);
 	ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/curar", true) == 0)
	{
	    if(PlayerInfo[playerid][pFaccion] != 2){SendClientMessage(playerid,Rojo,"* No eres médico."); return 1;}
		if(PlayerInfo[playerid][pServicioLSMD] == 0){SendClientMessage(playerid,Rojo,"* No estás de servicio."); return 1;}
	    tmp = strtok(cmdtext, idx);
		if(!strlen(tmp))
	 	{
			SendClientMessage(playerid, Naranja, "* /curar [ID Jugador]");
			return 1;
    	}
		playerid2 = ReturnUser(tmp);
	    if(!GetPlayersProx(5.0, playerid, playerid2)){SendClientMessage(playerid, Rojo, "* Demasiado lejos."); return 1;}
	    if(playerid == playerid2){SendClientMessage(playerid,Rojo,"* No te puedes curar a tí mismo."); return 1;}
	  	new giveambu = GetPlayerVehicleID(playerid2);
		new playambu = GetPlayerVehicleID(playerid);
		if(IsPlayerInRangeOfPoint(playerid, 50.0, 1179.752075, -1312.542602, 1349.396972) || GetVehicleModel(playambu) == 416 && playambu == giveambu){
		    new Float:vida;
			GetPlayerHealth(tmp[0], vida);
			if(vida != 100.0){
			    new probabilidad = random(2);
			  	if(probabilidad > 0){
			  	    format(string, sizeof(string), "* %s intentó curar a %s y consiguió hacerlo.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2));
			  	    ProxDetector(20, playerid, string, Morado,Morado,Morado,Morado,Morado);
                    PlayerInfo[playerid][pVida] = 100;
                    SetPlayerHealth(playerid, 100);
					return 1;
			  	}
			  	else{
			  	    format(string, sizeof(string), "* %s intentó curar a %s y no consiguió hacerlo.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2));
			  	    ProxDetector(20, playerid, string, Morado,Morado,Morado,Morado,Morado);
			  	    return 1;
			  	}
			}
			else{
			    SendClientMessage(playerid, Rojo, "* El jugador al que desea curar se encuentra sano.");
		    	return 1;
			}
		}
		else{
		    SendClientMessage(playerid, Rojo, "* Usted debe estar en el hospital o en una ambulancia.");
		    return 1;
    }
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/reportar", true) == 0)
	{
		tmp = strtok(cmdtext, idx);
		new otherplayer = strval(tmp);
   		if(!strlen(tmp)) return SendClientMessage(playerid, Naranja, "* /reportar [ID] [Razón]");
		new length = strlen(cmdtext);
		while ((idx < length) && (cmdtext[idx] <= ' '))
		{
		idx++;
		}
		new offset = idx;
		new result[64];
		while ((idx < length) && ((idx - offset) < (sizeof(result) - 1)))
		{
		result[idx - offset] = cmdtext[idx];
		idx++;
		}
		result[idx - offset] = EOS;
		if(!strlen(result)) return SendClientMessage(playerid, Naranja, "* /reportar [ID] [Razón]");
		if(!IsPlayerConnected(otherplayer)) return SendClientMessage(playerid, Rojo, "[ERRO] Jogador indisponível.");
		{
      	SendClientMessage(playerid, Rojo, "Reporte enviado con éxito, será atendido por un miembro del STAFF.");
		}
		format(string,sizeof(string),"[REPORTE] {FFFFFF}Reportante: %s{FFFF00} | Reportado: {FFFFFF}ID: %d {FFFF00}Razón: {FFFFFF}%s.{FFFF00}]", GetPlayerNameRP(playerid), otherplayer, result);
		for(new i=0;i<MAX_PLAYERS;i++)
		{
			if(IsPlayerConnected(i) && PlayerInfo[playerid][pOnDuty] == 1)
			{
			SendClientMessage(i,Rojo,string);
			}
		}
    	return 1;
	}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/mecaigo", true) == 0) //Anti bug caida
{
	new Float:vvelocidad[3];
	GetPlayerVelocity(playerid, vvelocidad[0], vvelocidad[1], vvelocidad[2]);
    if(GetPlayerAnimationIndex(playerid) == 1130 && (GetPlayerInterior(playerid) != 0 || GetPlayerVirtualWorld(playerid) != 0) && vvelocidad[2] <= -1)
    {
        format(string, sizeof(string), "'%s' ha usado el comando /mecaigo y ha sido teleportado al ayuntamiento.", GetPlayerNameRP(playerid));
        SendAdminMessage(Aguamarina, string);
        printf(string);
        ProxDetector(50.0, playerid, string, AmarilloClaro,AmarilloClaro,AmarilloClaro,AmarilloClaro,AmarilloClaro);
        SetPlayerInterior(playerid, 0);
        SetPlayerVirtualWorld(playerid, 0);
        SetPlayerPos(playerid, 1479.6182, -1724.0615, 13.5469);
        return 1;
    }
    else{SendClientMessage(playerid, Rojo, "* No se ha detectado que estés cayendo por bug.");}
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/pagar", true) == 0) //Da dinero a un jugador
{
	if(PlayerInfo[playerid][pNivel] < 2){SendClientMessage(playerid,Rojo,"* Debes ser nivel 2 para usar este comando."); return 1;}
	if(PagarTimer[playerid] == 1){SendClientMessage(playerid,Rojo,"* Debes esperar 1 minuto antes de volver a usar este comando."); return 1;}
    tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
	{
		SendClientMessage(playerid, Naranja, "* /Pagar [ID] [Cantidad]");
		return 1;
	}
    playerid2 = ReturnUser(tmp);
	if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid,Rojo,"* ID inválida."); return 1;}
	if(playerid == playerid2){SendClientMessage(playerid,Rojo,"* No puedes pagarte a tí mismo."); return 1;}
	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
	{
		SendClientMessage(playerid, Naranja, "* /Pagar [ID] [Cantidad]");
		return 1;
	}
	new dinero = strval(tmp);
	if(dinero < 1 || dinero > 50000){SendClientMessage(playerid, Rojo, "* La cantidad solo puede estar entre 1$ y 50000$."); return 1;}
	if(GetPlayerMoney(playerid) < dinero){SendClientMessage(playerid,Rojo,"* No tienes tanto dinero."); return 1;}
	if(!GetPlayersProx(5.0, playerid, playerid2)){SendClientMessage(playerid, Rojo, "* Demasiado lejos."); return 1;}
	format(string, sizeof(string), "* %s da a %s algo de dinero.", GetPlayerNameRP(playerid), GetPlayerNameRP(playerid2));
 	ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
	GivePlayerMoneyAC(playerid, -dinero);
	GivePlayerMoneyAC(playerid2, dinero);
	PagarTimer[playerid] = 1;
	SetTimerEx("TimerPagar", 60000, false, "i", playerid);
	format(string, sizeof(string), "Has dado %d$ a %s.", dinero, GetPlayerNameRP(playerid2));
	SendClientMessage(playerid, Amarillo, string);
	format(string, sizeof(string), "%s te ha dado %d$.", GetPlayerNameRP(playerid), dinero);
	SendClientMessage(playerid2, Amarillo, string);

	format(string, sizeof(string), "'%s' ha pagado %d$ a '%s'.", GetPlayerNameRP(playerid), dinero,  GetPlayerNameRP(playerid2));
    SendAdminMessage(Aguamarina, string);

	printf("%s ha dado %d$ a %s", GetPlayerNameRP(playerid), dinero,  GetPlayerNameRP(playerid2));
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/habilidades", true) == 0) //Muestra habilidades del jugador
{
    new opcion[128];
    opcion = strtok(cmdtext, idx);
    if(!strlen(opcion))
    {
        SendClientMessage(playerid, Naranja, "* /Habilidades [Opción]");
        SendClientMessage(playerid, Naranja, "Trabajos, Armas, Fisicas");
        return 1;
    }
    if(strcmp(opcion,"Trabajos",true) == 0)
    {
        SendClientMessage(playerid, Amarillo, "||____________________ Habilidades de trabajos ____________________||");
	    new ladnivel = (PlayerInfo[playerid][pHabLad]/30)+1;
	    format(string, sizeof(string), "Nivel de Ladrón: %d (%d/%d)", ladnivel, PlayerInfo[playerid][pHabLad], ladnivel*30);
	    SendClientMessage(playerid, AmarilloClaro, string);
	    format(string, sizeof(string), "Nivel de Piloto: %d (%d/50)", PlayerInfo[playerid][pNivelPiloto], PlayerInfo[playerid][pHabPil]);
	    SendClientMessage(playerid, AmarilloClaro, string);
	    return 1;
    }
    else if(strcmp(opcion,"Armas",true) == 0)
    {
        SendClientMessage(playerid, Amarillo, "||____________________ Habilidades de armas ____________________||");
	    format(string, sizeof(string), "Hab M1911: %d | Hab D. Eagle: %d", PlayerInfo[playerid][pHabPistola], PlayerInfo[playerid][pHabDEagle]);
	    SendClientMessage(playerid, AmarilloClaro, string);
	    format(string, sizeof(string), "Hab Escopeta: %d | Hab Sawnoff: %d | Hab SPAS12: %d", PlayerInfo[playerid][pHabEscopeta], PlayerInfo[playerid][pHabSawnoff], PlayerInfo[playerid][pHabEscopetaCom]);
	    SendClientMessage(playerid, AmarilloClaro, string);
	    format(string, sizeof(string), "Hab UZI/TEC-9: %d | Hab MP5: %d", PlayerInfo[playerid][pHabUZI], PlayerInfo[playerid][pHabMP5]);
	    SendClientMessage(playerid, AmarilloClaro, string);
	    format(string, sizeof(string), "Hab AK47: %d | Hab M4: %d", PlayerInfo[playerid][pHabAK47], PlayerInfo[playerid][pHabM4]);
	    SendClientMessage(playerid, AmarilloClaro, string);
	    format(string, sizeof(string), "Hab Rifle: %d", PlayerInfo[playerid][pHabFranco]);
	    SendClientMessage(playerid, AmarilloClaro, string);
	    return 1;
    }
    else if(strcmp(opcion,"Fisicas",true) == 0)
    {
        SendClientMessage(playerid, Amarillo, "||____________________ Habilidades físicas ____________________||");
	    format(string, sizeof(string), "Fuerza: %.2f", float(PlayerInfo[playerid][pFuerza])/100);
	    SendClientMessage(playerid, AmarilloClaro, string);
    }
    else
    {
        SendClientMessage(playerid, Naranja, "* /Habilidades [Opción]");
        SendClientMessage(playerid, Naranja, "Trabajos, Armas, Fisicas");
    }
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/cuenta", true) == 0) //Muestra las stats del jugador
{
    ShowStats(AmarilloClaro, playerid, playerid);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/admins", true) == 0) //Muestra los admins conectados de servicio
{
	SendClientMessage(playerid, Amarillo, "Admins conectados de servicio:");
	for(new i = 0; i < MAX_PLAYERS; i++){
		if(IsPlayerConnected(i)){
			if(PlayerInfo[i][pOnDuty] ==1){
				new admtext[24];
				switch(PlayerInfo[i][pAdmin]){
					case 1:		admtext = "Helper";
					case 2:     admtext = "Moderador";
					case 3:     admtext = "Moderador Global";
					case 4:     admtext = "Administrador";
					case 5:     admtext = "Dueño";
					case 6:     admtext = "Mapper";
				}
				format(string, sizeof(string),"  %s - %s", admtext, GetPlayerNameRP(i));
				SendClientMessage(playerid, Blanco, string);
			}
		}
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/inventario",true) == 0 || strcmp(cmd,"/inv",true) == 0) //Inventario
{
	//if(PlayerInfo[playerid][pServicioPD] > 0){SendClientMessage(playerid, Rojo, "* No puedes usar este comando estando de servicio."); return 1;}
	MostrarInv(playerid);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/cin",true) == 0) //Cinturón PD
{
	if(PlayerInfo[playerid][pFaccion] != 1 && PlayerInfo[playerid][pFaccion] != 12){SendClientMessage(playerid, Rojo, "* No eres policía o guardia nacional."); return 1;}
	if(PlayerInfo[playerid][pServicioPD] == 0){SendClientMessage(playerid, Rojo, "* No estás de servicio."); return 1;}
	MostrarCint(playerid);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/mano",true) == 0) //Cambiar objetos de mano
{
	CambiarObjetosMano(playerid);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/usar",true) == 0) //Usar objetos
{
	if(PlayerInfo[playerid][pManoDer] == 0 && PlayerInfo[playerid][pManoIzq] == 0){SendClientMessage(playerid, Rojo, "* No tienes nada en ninguna mano."); return 1;}
	new ManoDer = PlayerInfo[playerid][pManoDer], ManoDerCant = PlayerInfo[playerid][pManoDerCant];
	new ManoIzq = PlayerInfo[playerid][pManoIzq], ManoIzqCant = PlayerInfo[playerid][pManoIzqCant];
	if(ObjetoInfo[ManoDer][IDArma] > 0 && ObjetoInfo[ManoDer][Capacidad] > 1 && ManoIzq != 0) //Tiene un arma en mano derecha y algo en mano izquierda
	{
		ActualizarManos(playerid);
	    new Cargador, ArmaID = ObjetoInfo[ManoDer][IDArma];
	    switch(ArmaID)
	    {
	        case 22: Cargador = 39;
	        case 23: Cargador = 39;
			case 24: Cargador = 40;
			case 25: Cargador = 50;
			case 26: Cargador = 50;
			case 27: Cargador = 50;
			case 28: Cargador = 41;
			case 29: Cargador = 42;
			case 30: Cargador = 44;
			case 31: Cargador = 45;
			case 32: Cargador = 43;
			case 33: Cargador = 46;
			case 34: Cargador = 46;
	    }
	    if(ManoIzq != Cargador){SendClientMessage(playerid, Rojo, "* No puedes recargar este arma con este objeto."); return 1;}
	    if(RecargarTiempo[playerid] == 1){SendClientMessage(playerid, Rojo, "* Espera 3 segundos antes de volver a recargar."); return 1;}
	    if(ArmaID != 25 && ArmaID != 26 && ArmaID != 27) //No es una escopeta
	    {
	        if(ManoIzqCant == 0){SendClientMessage(playerid, Rojo, "* Ese cargador está vacio."); return 1;}
			ResetPlayerWeapons(playerid);
		    GivePlayerWeapon(playerid, ArmaID, ManoIzqCant);
		 	PlayerInfo[playerid][pManoIzqCant] = ManoDerCant;
		 	format(string, sizeof(string), "* %s recarga su arma.", GetPlayerNameRP(playerid));
		    ProxDetector(5.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
		    RecargarTiempo[playerid] = 1;
		    SetTimerEx("RecargarTimer", 3000, false, "i", playerid);
	 	}
	 	else
	 	{
	 	    new n;
	 	    switch(ArmaID)
	 	    {
	 	        case 25: n = 4;
	 	        case 26: n = 2;
	 	        case 27: n = 7;
	 	    }
	 	    if(GetPlayerWeaponAmmo(playerid, ArmaID) >= n){SendClientMessage(playerid, Rojo, "* No necesitas recargar este arma."); return 1;}
	 	    if(ManoIzqCant == 0){SendClientMessage(playerid, Rojo, "* No te queda munición."); return 1;}
	 	    new Municion = (n - GetPlayerWeaponAmmo(playerid, ArmaID));
	 	    for(new a = 0; a < Municion; a++)
	 	    {
					if(PlayerInfo[playerid][pManoIzqCant] == 0){break;}
	 	    		GivePlayerWeapon(playerid, ArmaID, 1);
	 	    		PlayerInfo[playerid][pManoIzqCant] --;
	 	    }
	 	    format(string, sizeof(string), "* %s recarga su arma.", GetPlayerNameRP(playerid));
		    ProxDetector(5.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
		    RecargarTiempo[playerid] = 1;
		    SetTimerEx("RecargarTimer", 3000, false, "i", playerid);
	 	}
	 	return 1;
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/bolsillo",true) == 0 || strcmp(cmd,"/bol",true) == 0) //Saca un objeto del inventario
{
	tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /(Bol)sillo [#Bol]");
        return 1;
    }
    new Bol = strval(tmp);
    if(PlayerInfo[playerid][pServicioPD] <= 0)
    {
	    if(Bol < 1 || Bol > 8){SendClientMessage(playerid, Rojo, "* El número del bolsillo debe estar entre 1 y 8."); return 1;}
		SacarBolsillo(playerid, Bol-1);
	}
	else if(PlayerInfo[playerid][pServicioPD] > 0)
	{
	    if(Bol < 1 || Bol > 8){SendClientMessage(playerid, Rojo, "* Estás de servicio, el número del bolsillo debe estar entre 1 y 5."); return 1;}
		SacarCint(playerid, Bol-1);
	}
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/guardar",true) == 0) //Guarda un objeto en el inventario
{
	new Mano[20];
	Mano = strtok(cmdtext, idx);
	if(!strlen(Mano))
	{
		SendClientMessage(playerid, Naranja, "* /Guardar [Izq/Der]");
		return 1;
	}
	if(strcmp(Mano,"izq",true) == 0)
	{
	    if(PlayerInfo[playerid][pServicioPD] <= 0) GuardarBolsillo(playerid, 2);
     	if(PlayerInfo[playerid][pServicioPD] > 0) GuardarCint(playerid, 2);
    }
    else if(strcmp(Mano,"der",true) == 0)
	{
	    if(PlayerInfo[playerid][pServicioPD] <= 0) GuardarBolsillo(playerid, 1);
	    if(PlayerInfo[playerid][pServicioPD] > 0) GuardarCint(playerid, 1);
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/ceder",true) == 0) //Ceder un objeto a otro jugador
{
	if(CederTiempo[playerid] == 1){SendClientMessage(playerid, Rojo, "* Espera 3 segundos para ceder otro objeto."); return 1;}
	new Mano[20];
	Mano = strtok(cmdtext, idx);
	if(!strlen(Mano))
	{
		SendClientMessage(playerid, Naranja, "* /Ceder [Izq/Der] [ID]");
		return 1;
	}
	tmp = strtok(cmdtext, idx);
    if(!strlen(tmp))
    {
        SendClientMessage(playerid, Naranja, "* /Ceder [Izq/Der] [ID]");
        return 1;
    }
    playerid2 = ReturnUser(tmp);
    if(playerid2 == playerid){SendClientMessage(playerid, Rojo, "* No te puedes pasar objetos a tí mismo."); return 1;}
    if(PlayerInfo[playerid][pServicioPD] > 0 && PlayerInfo[playerid2][pServicioPD] == 0){SendClientMessage(playerid, Rojo, "* Si estás de servicio solo puedes ceder objetos a personas que también estén de servicio."); return 1;}
    if((playerid2 == INVALID_PLAYER_ID) || !IsPlayerConnected(playerid2))
	{
		SendClientMessage(playerid, Rojo, "* ID inválida.");
		return 1;
	}
	if(!GetPlayersProx(5.0, playerid, playerid2)){SendClientMessage(playerid, Rojo, "* Demasiado lejos."); return 1;}
	if(strcmp(Mano,"izq",true) == 0)
	{
	    if(PlayerInfo[playerid][pManoIzq] <= 0){SendClientMessage(playerid, Rojo, "* No tienes nada en tu mano izquierda."); return 1;}
	    if(PlayerInfo[playerid2][pManoIzq] > 0 && PlayerInfo[playerid2][pManoDer] > 0){SendClientMessage(playerid, Rojo, "* Este jugador tiene ambas manos ocupadas."); return 1;}
		new ManoIzq = PlayerInfo[playerid][pManoIzq], ManoIzqCant = PlayerInfo[playerid][pManoIzqCant];
	    if(PlayerInfo[playerid2][pManoDer] == 0)
		{
            if(ObjetoInfo[ManoIzq][IDArma] > 0){GivePlayerWeapon(playerid2, ObjetoInfo[ManoIzq][IDArma], ManoIzqCant);}
			PlayerInfo[playerid2][pManoDer] = ManoIzq, PlayerInfo[playerid2][pManoDerCant] = ManoIzqCant, PonerObjeto(playerid2, 1, ManoIzq), ActualizarManos(playerid2);
		}
	    else if(PlayerInfo[playerid2][pManoIzq] == 0){PlayerInfo[playerid2][pManoIzq] = ManoIzq, PlayerInfo[playerid2][pManoIzqCant] = ManoIzqCant, PonerObjeto(playerid2, 2, ManoIzq), ActualizarManos(playerid2);}
	    PlayerInfo[playerid][pManoIzq] = 0, PlayerInfo[playerid][pManoIzqCant] = 0, ActualizarManos(playerid);
	    format(string, sizeof(string), "* {fce80c}%s {FFFFFF}te ha dado un/a {fce80c}%s (%d){FFFFFF}.", GetPlayerNameRP(playerid), ObjetoInfo[ManoIzq][NombreObjeto], ManoIzqCant);
	    SendClientMessage(playerid2, Blanco, string);
	    format(string, sizeof(string), "* Has dado a {fce80c}%s {FFFFFF}un/a {fce80c}%s (%d){FFFFFF}.", GetPlayerNameRP(playerid2), ObjetoInfo[ManoIzq][NombreObjeto], ManoIzqCant);
	    SendClientMessage(playerid, Blanco, string);
	    CederTiempo[playerid] = 1;
	    SetTimerEx("CederTimer", 3000, false, "i", playerid);
	    CederTiempo[playerid2] = 1;
	    SetTimerEx("CederTimer", 3000, false, "i", playerid2);
    }
    else if(strcmp(Mano,"der",true) == 0)
	{
	    if(PlayerInfo[playerid][pManoDer] <= 0){SendClientMessage(playerid, Rojo, "* No tienes nada en tu mano derecha."); return 1;}
	    if(PlayerInfo[playerid2][pManoIzq] > 0 && PlayerInfo[playerid2][pManoDer] > 0){SendClientMessage(playerid, Rojo, "* Este jugador tiene ambas manos ocupadas."); return 1;}
	    new ManoDer = PlayerInfo[playerid][pManoDer], ManoDerCant = PlayerInfo[playerid][pManoDerCant];
	    if(PlayerInfo[playerid2][pManoDer] == 0)
		{
			if(ObjetoInfo[ManoDer][IDArma] > 0){GivePlayerWeapon(playerid2, ObjetoInfo[ManoDer][IDArma], ManoDerCant);}
			PlayerInfo[playerid2][pManoDer] = ManoDer, PlayerInfo[playerid2][pManoDerCant] = ManoDerCant, PonerObjeto(playerid2, 1, ManoDer), ActualizarManos(playerid2);
		}
	    else if(PlayerInfo[playerid2][pManoIzq] == 0){PlayerInfo[playerid2][pManoIzq] = ManoDer, PlayerInfo[playerid2][pManoIzqCant] = ManoDerCant, PonerObjeto(playerid2, 2, ManoDer), ActualizarManos(playerid2);}
	    PlayerInfo[playerid][pManoDer] = 0, PlayerInfo[playerid][pManoDerCant] = 0, ActualizarManos(playerid);
	    ResetPlayerWeapons(playerid);
	    format(string, sizeof(string), "* {fce80c}%s {FFFFFF}te ha dado un/a {fce80c}%s (%d){FFFFFF}.", GetPlayerNameRP(playerid), ObjetoInfo[ManoDer][NombreObjeto], ManoDerCant);
	    SendClientMessage(playerid2, Blanco, string);
	    format(string, sizeof(string), "* Has dado a {fce80c}%s {FFFFFF}un/a {fce80c}%s (%d){FFFFFF}.", GetPlayerNameRP(playerid2), ObjetoInfo[ManoDer][NombreObjeto], ManoDerCant);
	    SendClientMessage(playerid, Blanco, string);
	    CederTiempo[playerid] = 1;
	    SetTimerEx("CederTimer", 3000, false, "i", playerid);
	    CederTiempo[playerid2] = 1;
	    SetTimerEx("CederTimer", 3000, false, "i", playerid2);
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/tirar",true) == 0) //Tirar objetos
{
    ActualizarManos(playerid);
    if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT){SendClientMessage(playerid, Rojo, "* No puedes usar este comando en esta situación."); return 1;}
    new Mano[20];
	Mano = strtok(cmdtext, idx);
	if(!strlen(Mano))
	{
		SendClientMessage(playerid, Naranja, "* /Tirar [Izq/Der]");
		SendClientMessage(playerid, Naranja, "También puedes utilizar '/Ti', '/Td' o '/Tt'.");
		return 1;
	}
	if(strcmp(Mano,"izq",true) == 0)
	{
		if(PlayerInfo[playerid][pManoIzq] == 0){SendClientMessage(playerid, Rojo, "* No tienes nada en tu mano izquierda."); return 1;}
		new ManoIzq = PlayerInfo[playerid][pManoIzq];
		new ManoIzqCant = PlayerInfo[playerid][pManoIzqCant];
		//if(PlayerInfo[playerid][pServicioPD] > 0 && ObjetoInfo[ManoIzq][IDArma] != 0){SendClientMessage(playerid, Rojo, "* No puedes tirar armas estando de servicio."); return 1;}
		//if(PlayerInfo[playerid][pServicioPD] > 0 && (ManoIzq >= 39 && ManoIzq <= 53)){SendClientMessage(playerid, Rojo, "* No puedes tirar municiones estando de servicio."); return 1;}
		format(string, sizeof(string), "* Has dejado tu {fce80c}%s (%d) {FFFFFF}en el suelo.", ObjetoInfo[ManoIzq][NombreObjeto], ManoIzqCant);
		SendClientMessage(playerid, Blanco, string);
		PlayerInfo[playerid][pManoIzq] = 0;
		PlayerInfo[playerid][pManoIzqCant] = 0;
		RemovePlayerAttachedObject(playerid, 2);
		new Float:X, Float:Y, Float:Z;
		GetPlayerPos(playerid, X, Y, Z);
		new World = GetPlayerVirtualWorld(playerid);
		new Interior = GetPlayerInterior(playerid);
		DropObjeto(ManoIzq, ManoIzqCant, X, Y+0.3, Z, World, Interior);
	}
	if(strcmp(Mano,"der",true) == 0)
	{
        if(PlayerInfo[playerid][pManoDer] == 0){SendClientMessage(playerid, Rojo, "* No tienes nada en tu mano derecha."); return 1;}
        new ManoDer = PlayerInfo[playerid][pManoDer];
		new ManoDerCant = PlayerInfo[playerid][pManoDerCant];
		//if(PlayerInfo[playerid][pServicioPD] > 0 && ObjetoInfo[ManoDer][IDArma] != 0){SendClientMessage(playerid, Rojo, "* No puedes tirar armas estando de servicio."); return 1;}
		//if(PlayerInfo[playerid][pServicioPD] > 0 && (ManoDer >= 39 && ManoDer <= 53)){SendClientMessage(playerid, Rojo, "* No puedes tirar municiones estando de servicio."); return 1;}
		format(string, sizeof(string), "* Has dejado tu {fce80c}%s (%d) {FFFFFF}en el suelo.", ObjetoInfo[ManoDer][NombreObjeto], ManoDerCant);
		SendClientMessage(playerid, Blanco, string);
		PlayerInfo[playerid][pManoDer] = 0;
		PlayerInfo[playerid][pManoDerCant] = 0;
		RemovePlayerAttachedObject(playerid, 1);
		ResetPlayerWeapons(playerid);
		new Float:X, Float:Y, Float:Z;
		GetPlayerPos(playerid, X, Y, Z);
		new World = GetPlayerVirtualWorld(playerid);
		new Interior = GetPlayerInterior(playerid);
		DropObjeto(ManoDer, ManoDerCant, X, Y-0.3, Z, World, Interior);
	}
	Streamer_Update(playerid);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/td",true) == 0) //Tirar objeto mano derecha
{
    ActualizarManos(playerid);
    if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT){SendClientMessage(playerid, Rojo, "* No puedes usar este comando en esta situación."); return 1;}
    if(PlayerInfo[playerid][pManoDer] == 0){SendClientMessage(playerid, Rojo, "* No tienes nada en tu mano derecha."); return 1;}
    new ManoDer = PlayerInfo[playerid][pManoDer];
	new ManoDerCant = PlayerInfo[playerid][pManoDerCant];
	//if(PlayerInfo[playerid][pServicioPD] > 0 && ObjetoInfo[ManoDer][IDArma] != 0){SendClientMessage(playerid, Rojo, "* No puedes tirar armas estando de servicio."); return 1;}
	if(PlayerInfo[playerid][pServicioPD] > 0 && (ManoDer >= 39 && ManoDer <= 53)){SendClientMessage(playerid, Rojo, "* No puedes tirar municiones estando de servicio."); return 1;}
	format(string, sizeof(string), "* Has dejado tu {fce80c}%s (%d) {FFFFFF}en el suelo.", ObjetoInfo[ManoDer][NombreObjeto], ManoDerCant);
	SendClientMessage(playerid, Blanco, string);
	PlayerInfo[playerid][pManoDer] = 0;
	PlayerInfo[playerid][pManoDerCant] = 0;
	RemovePlayerAttachedObject(playerid, 1);
	ResetPlayerWeapons(playerid);
	new Float:X, Float:Y, Float:Z;
	GetPlayerPos(playerid, X, Y, Z);
	new World = GetPlayerVirtualWorld(playerid);
	new Interior = GetPlayerInterior(playerid);
	DropObjeto(ManoDer, ManoDerCant, X, Y-0.3, Z, World, Interior);
    Streamer_Update(playerid);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/ti",true) == 0) //Tirar objeto mano izquierda
{
    ActualizarManos(playerid);
    if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT){SendClientMessage(playerid, Rojo, "* No puedes usar este comando en esta situación."); return 1;}
    if(PlayerInfo[playerid][pManoIzq] == 0){SendClientMessage(playerid, Rojo, "* No tienes nada en tu mano izquierda."); return 1;}
	new ManoIzq = PlayerInfo[playerid][pManoIzq];
	new ManoIzqCant = PlayerInfo[playerid][pManoIzqCant];
	//if(PlayerInfo[playerid][pServicioPD] > 0 && ObjetoInfo[ManoIzq][IDArma] != 0){SendClientMessage(playerid, Rojo, "* No puedes tirar armas estando de servicio."); return 1;}
	if(PlayerInfo[playerid][pServicioPD] > 0 && (ManoIzq >= 39 && ManoIzq <= 53)){SendClientMessage(playerid, Rojo, "* No puedes tirar municiones estando de servicio."); return 1;}
	format(string, sizeof(string), "* Has dejado tu {fce80c}%s (%d) {FFFFFF}en el suelo.", ObjetoInfo[ManoIzq][NombreObjeto], ManoIzqCant);
	SendClientMessage(playerid, Blanco, string);
	PlayerInfo[playerid][pManoIzq] = 0;
	PlayerInfo[playerid][pManoIzqCant] = 0;
	RemovePlayerAttachedObject(playerid, 2);
	new Float:X, Float:Y, Float:Z;
	GetPlayerPos(playerid, X, Y, Z);
	new World = GetPlayerVirtualWorld(playerid);
	new Interior = GetPlayerInterior(playerid);
	DropObjeto(ManoIzq, ManoIzqCant, X, Y+0.3, Z, World, Interior);
    Streamer_Update(playerid);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/tt",true) == 0) //Tirar objeto de cada mano
{
    ActualizarManos(playerid);
    if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT){SendClientMessage(playerid, Rojo, "* No puedes usar este comando en esta situación."); return 1;}
    if(PlayerInfo[playerid][pManoIzq] == 0 && PlayerInfo[playerid][pManoDer] == 0){SendClientMessage(playerid, Rojo, "* No tienes nada en ninguna mano."); return 1;}
    new ManoIzq, ManoIzqCant, ManoDer, ManoDerCant;
	if(PlayerInfo[playerid][pManoIzq] > 0){ManoIzq = PlayerInfo[playerid][pManoIzq]; ManoIzqCant = PlayerInfo[playerid][pManoIzqCant];}
	if(PlayerInfo[playerid][pManoDer] > 0){ManoDer = PlayerInfo[playerid][pManoDer]; ManoDerCant = PlayerInfo[playerid][pManoDerCant];}
	if(PlayerInfo[playerid][pServicioPD] > 0 && (ObjetoInfo[ManoDer][IDArma] != 0 || ObjetoInfo[ManoIzq][IDArma] != 0)){SendClientMessage(playerid, Rojo, "* No puedes tirar armas estando de servicio."); return 1;}
	if(PlayerInfo[playerid][pServicioPD] > 0 && ((ManoIzq >= 39 && ManoIzq <= 53) || (ManoDer >= 39 && ManoDer <= 53))){SendClientMessage(playerid, Rojo, "* No puedes tirar municiones estando de servicio."); return 1;}
    if(ManoIzq > 0)
	{
		format(string, sizeof(string), "* Has dejado tu {fce80c}%s (%d) {FFFFFF}en el suelo.", ObjetoInfo[ManoIzq][NombreObjeto], ManoIzqCant);
		SendClientMessage(playerid, Blanco, string);
		PlayerInfo[playerid][pManoIzq] = 0;
		PlayerInfo[playerid][pManoIzqCant] = 0;
		RemovePlayerAttachedObject(playerid, 2);
		new Float:X, Float:Y, Float:Z;
		GetPlayerPos(playerid, X, Y, Z);
		new World = GetPlayerVirtualWorld(playerid);
		new Interior = GetPlayerInterior(playerid);
		DropObjeto(ManoIzq, ManoIzqCant, X, Y+0.3, Z, World, Interior);
	}
	if(ManoDer > 0)
	{
		format(string, sizeof(string), "* Has dejado tu {fce80c}%s (%d) {FFFFFF}en el suelo.", ObjetoInfo[ManoDer][NombreObjeto], ManoDerCant);
		SendClientMessage(playerid, Blanco, string);
		PlayerInfo[playerid][pManoDer] = 0;
		PlayerInfo[playerid][pManoDerCant] = 0;
		RemovePlayerAttachedObject(playerid, 1);
		ResetPlayerWeapons(playerid);
		new Float:X, Float:Y, Float:Z;
		GetPlayerPos(playerid, X, Y, Z);
		new World = GetPlayerVirtualWorld(playerid);
		new Interior = GetPlayerInterior(playerid);
		DropObjeto(ManoDer, ManoDerCant, X, Y-0.3, Z, World, Interior);
	}
	Streamer_Update(playerid);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/coger",true) == 0) //Recoger objeto del suelo
{
	RecogerObjeto(playerid);
	return 1;
}


//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/espalda",true) == 0) //Poner objeto en la espalda
{
	if(PlayerInfo[playerid][pEspalda] > 0){SendClientMessage(playerid, Rojo, "* Ya tienes un objeto colgado en tu espalda."); return 1;}
	if(PlayerInfo[playerid][pManoDer] == 0 && PlayerInfo[playerid][pManoIzq] == 0){SendClientMessage(playerid, Rojo, "* No tienes nada en ninguna mano."); return 1;}
	if(PlayerInfo[playerid][pManoDer] > 0 && ObjetoInfo[PlayerInfo[playerid][pManoDer]][Guardable] == 0)
	{
	    ActualizarManos(playerid);
		new Mano = PlayerInfo[playerid][pManoDer];
		format(string, sizeof(string), "* Cuelgas un/a {fce80c}%s (%d) {FFFFFF}en tu espalda.", ObjetoInfo[Mano][NombreObjeto], PlayerInfo[playerid][pManoDerCant]);
  		SendClientMessage(playerid, Blanco, string);
  		SendClientMessage(playerid, Blanco, "Utiliza /QEspalda para quitarte el objeto de la espalda.");
		PlayerInfo[playerid][pEspalda] = PlayerInfo[playerid][pManoDer], PlayerInfo[playerid][pEspaldaCant] = PlayerInfo[playerid][pManoDerCant];
		PlayerInfo[playerid][pManoDer] = 0, PlayerInfo[playerid][pManoDerCant] = 0;
		PonerObjeto(playerid, 3, Mano);
		RemovePlayerWeapon(playerid, ObjetoInfo[Mano][IDArma]);
		RemovePlayerAttachedObject(playerid, 1);
	}
	else if(PlayerInfo[playerid][pManoIzq] > 0 && ObjetoInfo[PlayerInfo[playerid][pManoIzq]][Guardable] == 0)
	{
	    ActualizarManos(playerid);
		new Mano = PlayerInfo[playerid][pManoIzq];
		format(string, sizeof(string), "* Cuelgas un/a {fce80c}%s (%d) {FFFFFF}en tu espalda.", ObjetoInfo[Mano][NombreObjeto], PlayerInfo[playerid][pManoIzqCant]);
        SendClientMessage(playerid, Blanco, string);
        SendClientMessage(playerid, Blanco, "Utiliza /QEspalda para quitarte el objeto de la espalda.");
		PlayerInfo[playerid][pEspalda] = PlayerInfo[playerid][pManoIzq], PlayerInfo[playerid][pEspaldaCant] = PlayerInfo[playerid][pManoIzqCant];
		PlayerInfo[playerid][pManoIzq] = 0, PlayerInfo[playerid][pManoIzqCant] = 0;
		PonerObjeto(playerid, 3, Mano);
		RemovePlayerAttachedObject(playerid, 2);
	}
	else{SendClientMessage(playerid, Rojo, "* No llevas ningún objeto que se pueda colgar de la espalda.");}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/qespalda",true) == 0) //Quitar objeto de la espalda
{
	if(PlayerInfo[playerid][pEspalda] == 0){SendClientMessage(playerid, Rojo, "* No tienes nada colgado en tu espalda."); return 1;}
    if(PlayerInfo[playerid][pManoDer] > 0 && PlayerInfo[playerid][pManoIzq] > 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
	new Espalda = PlayerInfo[playerid][pEspalda];
	if(PlayerInfo[playerid][pManoDer] == 0)
	{
		format(string, sizeof(string), "* Descuelgas un/a {fce80c}%s (%d) {FFFFFF}con tu mano derecha.", ObjetoInfo[Espalda][NombreObjeto], PlayerInfo[playerid][pEspaldaCant]);
  		SendClientMessage(playerid, Blanco, string);
		GivePlayerWeapon(playerid, ObjetoInfo[Espalda][IDArma], PlayerInfo[playerid][pEspaldaCant]);
		PlayerInfo[playerid][pManoDer] = PlayerInfo[playerid][pEspalda];
		PlayerInfo[playerid][pManoDerCant] = PlayerInfo[playerid][pEspaldaCant];
		PonerObjeto(playerid, 1, Espalda);
	}
	else if(PlayerInfo[playerid][pManoIzq] == 0)
	{
		format(string, sizeof(string), "* Descuelgas un/a {fce80c}%s (%d) {FFFFFF}con tu mano izquierda.", ObjetoInfo[Espalda][NombreObjeto], PlayerInfo[playerid][pEspaldaCant]);
  		SendClientMessage(playerid, Blanco, string);
		PlayerInfo[playerid][pManoIzq] = PlayerInfo[playerid][pEspalda];
		PlayerInfo[playerid][pManoIzqCant] = PlayerInfo[playerid][pEspaldaCant];
		PonerObjeto(playerid, 2, Espalda);
	}
	PlayerInfo[playerid][pEspalda] = 0, PlayerInfo[playerid][pEspaldaCant] = 0;
	RemovePlayerAttachedObject(playerid, 3);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/comer",true) == 0) //Comer
{
    if(PlayerInfo[playerid][pManoDer] == 0 && PlayerInfo[playerid][pManoIzq] == 0){SendClientMessage(playerid, Rojo, "* No tienes nada en ninguna mano."); return 1;}
    if(((PlayerInfo[playerid][pManoDer] >= 55 && PlayerInfo[playerid][pManoDer] <= 57) || (PlayerInfo[playerid][pManoDer] >= 65 && PlayerInfo[playerid][pManoDer] <= 67)) && PlayerInfo[playerid][pManoDerCant] > 0)
    {
        switch(PlayerInfo[playerid][pManoDer])
        {
	        case 55: PlayerInfo[playerid][pHambre] += 15; //Bolsa de doritos
	        case 56: PlayerInfo[playerid][pHambre] += 15; //Bolsa de patatas
	        case 57: PlayerInfo[playerid][pHambre] += 15; //Bolsa de nachos
	        case 65: PlayerInfo[playerid][pHambre] += 20; //Hamburguesa
	        case 66: PlayerInfo[playerid][pHambre] += 20; //Burrito
	        case 67: PlayerInfo[playerid][pHambre] += 20; //Pizza
        }
        format(string, sizeof(string), "* %s come de su %s.", GetPlayerNameRP(playerid), ObjetoInfo[PlayerInfo[playerid][pManoDer]][NombreObjeto]);
 	    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
        PlayerInfo[playerid][pManoDerCant] --;
        if(PlayerInfo[playerid][pHambre] > MAX_HAMBRE){PlayerInfo[playerid][pHambre] = MAX_HAMBRE;}
        ActualizarHambre(playerid);
        new Float:cvida;
        GetPlayerHealth(playerid, cvida);
        if(cvida < 100) GivePlayerHealth(playerid, 1);
	    return 1;
    }
    else if(((PlayerInfo[playerid][pManoIzq] >= 55 && PlayerInfo[playerid][pManoIzq] <= 57) || (PlayerInfo[playerid][pManoIzq] >= 65 && PlayerInfo[playerid][pManoIzq] <= 67)) && PlayerInfo[playerid][pManoIzqCant] > 0)
    {
        switch(PlayerInfo[playerid][pManoIzq])
        {
	        case 55: PlayerInfo[playerid][pHambre] += 15; //Bolsa de doritos
	        case 56: PlayerInfo[playerid][pHambre] += 15; //Bolsa de patatas
	        case 57: PlayerInfo[playerid][pHambre] += 15; //Bolsa de nachos
	        case 65: PlayerInfo[playerid][pHambre] += 20; //Hamburguesa
	        case 66: PlayerInfo[playerid][pHambre] += 20; //Burrito
	        case 67: PlayerInfo[playerid][pHambre] += 20; //Pizza
        }
        format(string, sizeof(string), "* %s come de su %s.", GetPlayerNameRP(playerid), ObjetoInfo[PlayerInfo[playerid][pManoIzq]][NombreObjeto]);
 	    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
        PlayerInfo[playerid][pManoIzqCant] --;
        if(PlayerInfo[playerid][pHambre] > MAX_HAMBRE){PlayerInfo[playerid][pHambre] = MAX_HAMBRE;}
        ActualizarHambre(playerid);
        new Float:cvida;
        GetPlayerHealth(playerid, cvida);
        if(cvida < 100) GivePlayerHealth(playerid, 1);
	    return 1;
    }
    else{SendClientMessage(playerid, Rojo, "* No tienes ningún tipo de comida en ninguna mano o no te queda.");}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/beber",true) == 0) //Beber
{
    if(PlayerInfo[playerid][pManoDer] == 0 && PlayerInfo[playerid][pManoIzq] == 0){SendClientMessage(playerid, Rojo, "* No tienes nada en ninguna mano."); return 1;}
    if(((PlayerInfo[playerid][pManoDer] >= 58 && PlayerInfo[playerid][pManoDer] <= 64) || (PlayerInfo[playerid][pManoDer] >= 71 && PlayerInfo[playerid][pManoDer] <= 73)) && PlayerInfo[playerid][pManoDerCant] > 0)
    {
        switch(PlayerInfo[playerid][pManoDer])
        {
	        case 58: PlayerInfo[playerid][pSed] += 12; //Lata de sprunk
	        case 59: PlayerInfo[playerid][pSed] += 12; //Lata de fanta
	        case 60: PlayerInfo[playerid][pSed] += 14; //Botella de agua
	        case 61: PlayerInfo[playerid][pSed] += 11; //Botella de cerveza
	        case 62: PlayerInfo[playerid][pSed] += 11; //Copa de vino
	        case 63: PlayerInfo[playerid][pSed] += 11; //Vaso de whisky
	        case 64: PlayerInfo[playerid][pSed] += 11; //Vaso de ron
	        case 71: PlayerInfo[playerid][pSed] += 11; //Botella de ron
	        case 72: PlayerInfo[playerid][pSed] += 11; //Botella de whisky
	        case 73: PlayerInfo[playerid][pSed] += 11; //Botella de vino
        }
        format(string, sizeof(string), "* %s bebe de su %s.", GetPlayerNameRP(playerid), ObjetoInfo[PlayerInfo[playerid][pManoDer]][NombreObjeto]);
 	    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
        PlayerInfo[playerid][pManoDerCant] --;
        if(PlayerInfo[playerid][pSed] > MAX_SED){PlayerInfo[playerid][pSed] = MAX_SED;}
        ActualizarSed(playerid);
        new Float:cvida;
        GetPlayerHealth(playerid, cvida);
        if(cvida < 100) GivePlayerHealth(playerid, 1);
	    return 1;
    }
    else if(((PlayerInfo[playerid][pManoIzq] >= 58 && PlayerInfo[playerid][pManoIzq] <= 64) || (PlayerInfo[playerid][pManoIzq] >= 71 && PlayerInfo[playerid][pManoIzq] <= 73)) && PlayerInfo[playerid][pManoIzqCant] > 0)
    {
        switch(PlayerInfo[playerid][pManoIzq])
        {
	        case 58: PlayerInfo[playerid][pSed] += 12; //Lata de sprunk
	        case 59: PlayerInfo[playerid][pSed] += 12; //Lata de fanta
	        case 60: PlayerInfo[playerid][pSed] += 14; //Botella de agua
	        case 61: PlayerInfo[playerid][pSed] += 11; //Botella de cerveza
	        case 62: PlayerInfo[playerid][pSed] += 11; //Copa de vino
	        case 63: PlayerInfo[playerid][pSed] += 11; //Vaso de whisky
	        case 64: PlayerInfo[playerid][pSed] += 11; //Vaso de ron
	        case 71: PlayerInfo[playerid][pSed] += 11; //Botella de ron
	        case 72: PlayerInfo[playerid][pSed] += 11; //Botella de whisky
	        case 73: PlayerInfo[playerid][pSed] += 11; //Botella de vino
        }
        format(string, sizeof(string), "* %s bebe de su %s.", GetPlayerNameRP(playerid), ObjetoInfo[PlayerInfo[playerid][pManoIzq]][NombreObjeto]);
 	    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
        PlayerInfo[playerid][pManoIzqCant] --;
        if(PlayerInfo[playerid][pSed] > MAX_SED){PlayerInfo[playerid][pSed] = MAX_SED;}
        ActualizarSed(playerid);
        new Float:cvida;
        GetPlayerHealth(playerid, cvida);
        if(cvida < 100) GivePlayerHealth(playerid, 1);
	    return 1;
    }
    else{SendClientMessage(playerid, Rojo, "* No tienes ningún tipo de bebida en ninguna mano o no te queda.");}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/fumar",true) == 0) //Fumar
{
	if(!((PlayerInfo[playerid][pManoDer] == 69 && PlayerInfo[playerid][pManoDerCant] > 0 && PlayerInfo[playerid][pManoIzq] == 70 && PlayerInfo[playerid][pManoIzqCant] > 0) || (PlayerInfo[playerid][pManoDer] == 70 && PlayerInfo[playerid][pManoDerCant] > 0 && PlayerInfo[playerid][pManoIzq] == 69 && PlayerInfo[playerid][pManoIzqCant] > 0)))
	{
		SendClientMessage(playerid, Rojo, "* Debes tener un mechero con gas en una mano y una caja de cigarrillos en la otra.");
		return 1;
	}
	PlayerInfo[playerid][pManoDerCant] --;
	PlayerInfo[playerid][pManoIzqCant] --;
	ApplyAnimation(playerid, "GANGS", "smkcig_prtl_F", 3.0, 0, 0, 0, 0, 0);
	SetPlayerSpecialAction(playerid, SPECIAL_ACTION_SMOKE_CIGGY);
	format(string, sizeof(string), "* %s enciende un cigarrillo.", GetPlayerNameRP(playerid));
 	ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/entrada",true) == 0) //Entrar/salir
{
    if(GetPlayerState(playerid) != 1){return 1;}
	if(GetPlayerFueraPuertaCasa(playerid)) //Está en la entrada de una casa
	{
		new h = GetPlayerFueraPuertaCasa(playerid);
		if(HouseInfo[h][hCerrada] == 1){GameTextForPlayer(playerid, "~r~Cerrado", 5000, 1);}
		else
		{
		    TogglePlayerControllable(playerid, 0);
		    SetTimerEx("Descongelar", 2000, false, "i", playerid);
		    SetPlayerPos(playerid, HouseInfo[h][hSalidaX], HouseInfo[h][hSalidaY], HouseInfo[h][hSalidaZ]);
		    SetPlayerInterior(playerid, HouseInfo[h][hInterior]);
		    SetPlayerVirtualWorld(playerid, HouseInfo[h][hVirtualWorld]);
		    return 1;
		}
	}
	if(GetPlayerDentroPuertaCasa(playerid)) //Está en la salida de una casa
	{
	    new h = GetPlayerDentroPuertaCasa(playerid);
	    if(HouseInfo[h][hInterior2] != 0) //Si el mundo exterior no es 0 congelar y descongelar
	    {
	        TogglePlayerControllable(playerid, 0);
		    SetTimerEx("Descongelar", 2000, false, "i", playerid);
	    }
	    SetPlayerPos(playerid, HouseInfo[h][hEntradaX], HouseInfo[h][hEntradaY], HouseInfo[h][hEntradaZ]);
	    SetPlayerInterior(playerid, HouseInfo[h][hInterior2]);
	    SetPlayerVirtualWorld(playerid, HouseInfo[h][hVirtualWorld2]);
	    return 1;
	}
	if(GetPlayerFueraPuertaNego(playerid)) //Está en la entrada de un negocio
	{
		new n = GetPlayerFueraPuertaNego(playerid);
		if(NegoInfo[n][nCerrado] == 1){GameTextForPlayer(playerid, "~r~Cerrado", 5000, 1);}
		else
		{
		    TogglePlayerControllable(playerid, 0);
		    SetTimerEx("Descongelar", 2000, false, "i", playerid);
		    SetPlayerPos(playerid, NegoInfo[n][nSalidaX], NegoInfo[n][nSalidaY], NegoInfo[n][nSalidaZ]);
		    SetPlayerInterior(playerid, NegoInfo[n][nInterior]);
		    SetPlayerVirtualWorld(playerid, NegoInfo[n][nVirtualWorld]);
		    return 1;
		}
	}
	if(GetPlayerDentroPuertaNego(playerid)) //Está en la salida de un negocio
	{
	    new n = GetPlayerDentroPuertaNego(playerid);
	    if(NegoInfo[n][nInterior2] != 0) //Si el mundo exterior no es 0 congelar y descongelar
	    {
	        TogglePlayerControllable(playerid, 0);
		    SetTimerEx("Descongelar", 2000, false, "i", playerid);
	    }
	    SetPlayerPos(playerid, NegoInfo[n][nEntradaX], NegoInfo[n][nEntradaY], NegoInfo[n][nEntradaZ]);
	    SetPlayerInterior(playerid, NegoInfo[n][nInterior2]);
	    SetPlayerVirtualWorld(playerid, NegoInfo[n][nVirtualWorld2]);
	    return 1;
	}
	EntrarSitioPublico(playerid); //Entrar a establecimiento
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/cargador",true) == 0) //Comando de cargadores
{
	if(!GetPlayerCargadorCalibre(playerid, 1) && !GetPlayerCargadorCalibre(playerid, 2)){SendClientMessage(playerid, Rojo, "* No tienes un cargador en ninguna mano."); return 1;}
	new opcion[25];
	opcion = strtok(cmdtext, idx);
	if(!strlen(opcion))
	{
		SendClientMessage(playerid, Naranja, "* /Cargador [Opción] ");
		SendClientMessage(playerid, Naranja, "Llenar, Vaciar");
		return 1;
	}
	if(strcmp(opcion,"llenar",true) == 0)
	{
	    if(!GetPlayerMunicionCalibre(playerid, 1) && !GetPlayerMunicionCalibre(playerid, 2)){SendClientMessage(playerid, Rojo, "* No tienes ningún tipo de munición en ninguna mano."); return 1;}
	    new ManoDer = PlayerInfo[playerid][pManoDer], ManoIzq = PlayerInfo[playerid][pManoIzq];
	    if(GetPlayerMunicionCalibre(playerid, 1) && GetPlayerCargadorCalibre(playerid, 2) && GetPlayerMunicionCalibre(playerid, 1) == GetPlayerCargadorCalibre(playerid, 2)) //Tiene munición en mano derecha y cargador en mano izquierda
	    {
	        tmp = strtok(cmdtext, idx);
			if(!strlen(tmp))
			{
				SendClientMessage(playerid, Naranja, "* /Cargador Llenar [Cantidad]");
				return 1;
			}
			new cantidad = strval(tmp);
			if(PlayerInfo[playerid][pManoIzqCant] >= ObjetoInfo[ManoIzq][Capacidad]){SendClientMessage(playerid, Rojo, "* El cargador ya está a su máxima capacidad."); return 1;}
			if(cantidad < 1){SendClientMessage(playerid, Rojo, "* La cantidad no puede ser nula o negativa."); return 1;}
			if(cantidad > PlayerInfo[playerid][pManoDerCant]){SendClientMessage(playerid, Rojo, "* No te queda tanta munición en la caja."); return 1;}
			if(PlayerInfo[playerid][pManoIzqCant] + cantidad >= ObjetoInfo[ManoIzq][Capacidad]) //Si la cantidad + el cargador es mayor a su capacidad
			{
			    format(string, sizeof(string), "* Has rellenado tu {fce80c}%s{FFFFFF} con {fce80c}%d %s{FFFFFF}.", ObjetoInfo[ManoIzq][NombreObjeto], ObjetoInfo[ManoIzq][Capacidad] - PlayerInfo[playerid][pManoIzqCant], ObjetoInfo[ManoDer][NombreObjeto]);
				SendClientMessage(playerid, Blanco, string);
				PlayerInfo[playerid][pManoDerCant] -= ObjetoInfo[ManoIzq][Capacidad] - PlayerInfo[playerid][pManoIzqCant];
			    PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[ManoIzq][Capacidad];
				return 1;
			}
			PlayerInfo[playerid][pManoDerCant] -= cantidad;
			PlayerInfo[playerid][pManoIzqCant] += cantidad;
			format(string, sizeof(string), "* Has metido {fce80c}%d %s {FFFFFF}en tu {fce80c}%s (%d){FFFFFF}.", cantidad, ObjetoInfo[ManoDer][NombreObjeto], ObjetoInfo[ManoIzq][NombreObjeto], PlayerInfo[playerid][pManoIzqCant]);
			SendClientMessage(playerid, Blanco, string);
	    }
	    else if(GetPlayerMunicionCalibre(playerid, 2) && GetPlayerCargadorCalibre(playerid, 1) && GetPlayerMunicionCalibre(playerid, 2) == GetPlayerCargadorCalibre(playerid, 1))  //Tiene munición en mano izquierda y cargador en mano derecha
	    {
	        tmp = strtok(cmdtext, idx);
			if(!strlen(tmp))
			{
				SendClientMessage(playerid, Naranja, "* /Cargador Llenar [Cantidad]");
				return 1;
			}
			new cantidad = strval(tmp);
			if(PlayerInfo[playerid][pManoDerCant] >= ObjetoInfo[ManoDer][Capacidad]){SendClientMessage(playerid, Rojo, "* El cargador ya está a su máxima capacidad."); return 1;}
			if(cantidad < 1){SendClientMessage(playerid, Rojo, "* La cantidad no puede ser nula o negativa."); return 1;}
			if(cantidad > PlayerInfo[playerid][pManoIzqCant]){SendClientMessage(playerid, Rojo, "* No te queda tanta munición en la caja."); return 1;}
			if(PlayerInfo[playerid][pManoDerCant] + cantidad >= ObjetoInfo[ManoDer][Capacidad]) //Si la cantidad + el cargador es mayor a su capacidad
			{
			    format(string, sizeof(string), "* Has rellenado tu {fce80c}%s{FFFFFF} con {fce80c}%d %s{FFFFFF}.", ObjetoInfo[ManoDer][NombreObjeto], ObjetoInfo[ManoDer][Capacidad] - PlayerInfo[playerid][pManoDerCant], ObjetoInfo[ManoIzq][NombreObjeto]);
				SendClientMessage(playerid, Blanco, string);
				PlayerInfo[playerid][pManoIzqCant] -= ObjetoInfo[ManoDer][Capacidad] - PlayerInfo[playerid][pManoDerCant];
			    PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[ManoDer][Capacidad];
				return 1;
   			}
			PlayerInfo[playerid][pManoIzqCant] -= cantidad;
			PlayerInfo[playerid][pManoDerCant] += cantidad;
			format(string, sizeof(string), "* Has metido {fce80c}%d %s {FFFFFF}en tu {fce80c}%s (%d){FFFFFF}.", cantidad, ObjetoInfo[ManoIzq][NombreObjeto], ObjetoInfo[ManoDer][NombreObjeto], PlayerInfo[playerid][pManoDerCant]);
			SendClientMessage(playerid, Blanco, string);
	    }
	    else{SendClientMessage(playerid, Rojo, "* El cargador y la munición no son del mismo tipo.");}
	    return 1;
	}
	if(strcmp(opcion,"vaciar",true) == 0)
	{
        new ManoDer = PlayerInfo[playerid][pManoDer], ManoIzq = PlayerInfo[playerid][pManoIzq];
	    if(GetPlayerCargadorCalibre(playerid, 2)) //Tiene cargador en mano izquierda
	    {
	        tmp = strtok(cmdtext, idx);
			if(!strlen(tmp))
			{
				SendClientMessage(playerid, Naranja, "* /Cargador Vaciar [Cantidad]");
				return 1;
			}
			new cantidad = strval(tmp);
			if(cantidad < 1){SendClientMessage(playerid, Rojo, "* La cantidad no puede ser nula o negativa."); return 1;}
			if(cantidad > PlayerInfo[playerid][pManoIzqCant]){SendClientMessage(playerid, Rojo, "* No te queda tanta munición en el cargador."); return 1;}
			if(GetPlayerMunicionCalibre(playerid, 1) && PlayerInfo[playerid][pManoDerCant] >= ObjetoInfo[ManoDer][Capacidad]){SendClientMessage(playerid, Rojo, "* La caja de munición ya está a su máxima capacidad."); return 1;}
			if(GetPlayerMunicionCalibre(playerid, 1) && GetPlayerCargadorCalibre(playerid, 2) != GetPlayerMunicionCalibre(playerid, 1)){SendClientMessage(playerid, Rojo, "* La munición del cargador no es la misma que la de esta caja de munición."); return 1;}
			if(!GetPlayerMunicionCalibre(playerid, 1) && PlayerInfo[playerid][pManoDer] > 0){SendClientMessage(playerid, Rojo, "* No puedes meter balas en este objeto."); return 1;}

			if(GetPlayerCargadorCalibre(playerid, 2) == GetPlayerMunicionCalibre(playerid, 1)) //Ya tiene caja de munición en la otra mano
	        {
	            if(PlayerInfo[playerid][pManoDerCant] + cantidad >= ObjetoInfo[ManoDer][Capacidad]) //La cantidad que saca es mayor a la capacidad de la caja
	            {
	                cantidad = ObjetoInfo[ManoDer][Capacidad] - PlayerInfo[playerid][pManoDerCant];
	                PlayerInfo[playerid][pManoIzqCant] -= cantidad;
					PlayerInfo[playerid][pManoDerCant] += cantidad;
					format(string, sizeof(string), "* Has sacado {fce80c}%d %s {FFFFFF}de tu {fce80c}%s (%d){FFFFFF}.", cantidad, ObjetoInfo[ManoDer][NombreObjeto], ObjetoInfo[ManoIzq][NombreObjeto], PlayerInfo[playerid][pManoIzqCant]);
					SendClientMessage(playerid, Blanco, string);
					return 1;
	            }
	            PlayerInfo[playerid][pManoIzqCant] -= cantidad;
				PlayerInfo[playerid][pManoDerCant] += cantidad;
				format(string, sizeof(string), "* Has sacado {fce80c}%d %s {FFFFFF}de tu {fce80c}%s (%d){FFFFFF}.", cantidad, ObjetoInfo[ManoDer][NombreObjeto], ObjetoInfo[ManoIzq][NombreObjeto], PlayerInfo[playerid][pManoIzqCant]);
				SendClientMessage(playerid, Blanco, string);
				return 1;
	        }

	        new caja;
	        switch(GetPlayerCargadorCalibre(playerid, 2))
	        {
	            case 1: caja = 47; //M1911 (.45 ACP)
	            case 2: caja = 48; //D.Eagle (.50 AE)
	            case 3: caja = 49; //UZI MP5 Tec9 (9mm)
	            case 5: caja = 51; //Ak47
	            case 6: caja = 52; //M4
	            case 7: caja = 53; //Rifle
	        }
	        PlayerInfo[playerid][pManoIzqCant] -= cantidad;
		    PlayerInfo[playerid][pManoDer] = caja;
			PlayerInfo[playerid][pManoDerCant] += cantidad;
			PonerObjeto(playerid, 1, caja);
			format(string, sizeof(string), "* Has sacado {fce80c}%d %s {FFFFFF}de tu {fce80c}%s (%d){FFFFFF}.", cantidad, ObjetoInfo[caja][NombreObjeto], ObjetoInfo[ManoIzq][NombreObjeto], PlayerInfo[playerid][pManoIzqCant]);
			SendClientMessage(playerid, Blanco, string);
	    }
	    else if(GetPlayerCargadorCalibre(playerid, 1)) // //Tiene cargador en mano derecha
	    {
	        tmp = strtok(cmdtext, idx);
			if(!strlen(tmp))
			{
				SendClientMessage(playerid, Naranja, "* /Cargador Vaciar [Cantidad]");
				return 1;
			}
			new cantidad = strval(tmp);
			if(cantidad < 1){SendClientMessage(playerid, Rojo, "* La cantidad no puede ser nula o negativa."); return 1;}
			if(cantidad > PlayerInfo[playerid][pManoDerCant]){SendClientMessage(playerid, Rojo, "* No te queda tanta munición en el cargador."); return 1;}
			if(GetPlayerMunicionCalibre(playerid, 2) && PlayerInfo[playerid][pManoIzqCant] >= ObjetoInfo[ManoIzq][Capacidad]){SendClientMessage(playerid, Rojo, "* La caja de munición ya está a su máxima capacidad."); return 1;}
			if(GetPlayerMunicionCalibre(playerid, 2) && GetPlayerCargadorCalibre(playerid, 1) != GetPlayerMunicionCalibre(playerid, 2)){SendClientMessage(playerid, Rojo, "* La munición del cargador no es la misma que la de esta caja de munición."); return 1;}
			if(!GetPlayerMunicionCalibre(playerid, 2) && PlayerInfo[playerid][pManoIzq] > 0){SendClientMessage(playerid, Rojo, "* No puedes meter balas en este objeto."); return 1;}

			if(GetPlayerCargadorCalibre(playerid, 1) == GetPlayerMunicionCalibre(playerid, 2)) //Ya tiene caja de munición en la otra mano
	        {
	            if(PlayerInfo[playerid][pManoIzqCant] + cantidad >= ObjetoInfo[ManoIzq][Capacidad]) //La cantidad que saca es mayor a la capacidad de la caja
	            {
	                cantidad = ObjetoInfo[ManoIzq][Capacidad] - PlayerInfo[playerid][pManoIzqCant];
	                PlayerInfo[playerid][pManoDerCant] -= cantidad;
					PlayerInfo[playerid][pManoIzqCant] += cantidad;
					format(string, sizeof(string), "* Has sacado {fce80c}%d %s {FFFFFF}de tu {fce80c}%s (%d){FFFFFF}.", cantidad, ObjetoInfo[ManoIzq][NombreObjeto], ObjetoInfo[ManoDer][NombreObjeto], PlayerInfo[playerid][pManoDerCant]);
					SendClientMessage(playerid, Blanco, string);
					return 1;
	            }
	            PlayerInfo[playerid][pManoDerCant] -= cantidad;
				PlayerInfo[playerid][pManoIzqCant] += cantidad;
				format(string, sizeof(string), "* Has sacado {fce80c}%d %s {FFFFFF}de tu {fce80c}%s (%d){FFFFFF}.", cantidad, ObjetoInfo[ManoIzq][NombreObjeto], ObjetoInfo[ManoDer][NombreObjeto], PlayerInfo[playerid][pManoDerCant]);
				SendClientMessage(playerid, Blanco, string);
				return 1;
	        }

	        new caja;
	        switch(GetPlayerCargadorCalibre(playerid, 1))
	        {
	            case 1: caja = 47; //M1911 (.45 ACP)
	            case 2: caja = 48; //D.Eagle (.50 AE)
	            case 3: caja = 49; //UZI MP5 Tec9 (9mm)
	            case 5: caja = 51; //Ak47
	            case 6: caja = 52; //M4
	            case 7: caja = 53; //Rifle
	        }
	        PlayerInfo[playerid][pManoDerCant] -= cantidad;
		    PlayerInfo[playerid][pManoIzq] = caja;
			PlayerInfo[playerid][pManoIzqCant] += cantidad;
			PonerObjeto(playerid, 2, caja);
			format(string, sizeof(string), "* Has sacado {fce80c}%d %s {FFFFFF}de tu {fce80c}%s (%d){FFFFFF}.", cantidad, ObjetoInfo[caja][NombreObjeto], ObjetoInfo[ManoDer][NombreObjeto], PlayerInfo[playerid][pManoDerCant]);
			SendClientMessage(playerid, Blanco, string);
	    }
	    return 1;
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/recargar",true) == 0 || strcmp(cmd,"/rec",true) == 0) //Recarga un arma
{
	if(RecargarTiempo[playerid] == 1){SendClientMessage(playerid, Rojo, "* Espera 3 segundos antes de volver a recargar."); return 1;}
	new ManoDer = PlayerInfo[playerid][pManoDer], ArmaID = ObjetoInfo[ManoDer][IDArma];
    if(ArmaID == 0){SendClientMessage(playerid, Rojo, "* No sujetas ningún arma con tu mano derecha."); return 1;}
    if(ObjetoInfo[ManoDer][Capacidad] == 1 /*&& ManoDer != 38*/){SendClientMessage(playerid, Rojo, "* Este arma no se puede recargar."); return 1;}
    new Cargador;
    switch(ArmaID)
    {
        case 22: Cargador = 39;
        case 23: Cargador = 39;
		case 24: Cargador = 40;
		case 25: Cargador = 50;
		case 26: Cargador = 50;
		case 27: Cargador = 50;
		case 28: Cargador = 41;
		case 29: Cargador = 42;
		case 30: Cargador = 44;
		case 31: Cargador = 45;
		case 32: Cargador = 43;
		case 33: Cargador = 46;
		case 34: Cargador = 46;
    }
    new TieneCargador, Bol;
    if(PlayerInfo[playerid][pServicioPD] == 0)
	{
	    for(new x = 0; x < 8; x++)
    	{
    		if(PlayerInfo[playerid][pBol][x] == Cargador && PlayerInfo[playerid][pBolCant][x] > 0)
			{
				TieneCargador = 1;
      	 	 	Bol = x;
				break;
			}
		}
	}
	if(PlayerInfo[playerid][pServicioPD] > 0)
	{
		for(new x = 0; x < 8; x++)
    	{
			if(PlayerInfo[playerid][pCint][x] == Cargador && PlayerInfo[playerid][pCintCant][x] > 0)
			{
				TieneCargador = 1;
        		Bol = x;
				break;
			}
		}
	}
    if(TieneCargador == 0){SendClientMessage(playerid, Rojo, "* No te queda munición para este arma."); return 1;}
    new BolCant;
    if(PlayerInfo[playerid][pServicioPD] == 0){BolCant = PlayerInfo[playerid][pBolCant][Bol];}
    if(PlayerInfo[playerid][pServicioPD] > 0){BolCant = PlayerInfo[playerid][pCintCant][Bol];}
    new Muni = GetPlayerWeaponAmmo(playerid, ArmaID);
    if(ArmaID != 25 && ArmaID != 26 && ArmaID != 27)
    {
		ResetPlayerWeapons(playerid);
	    GivePlayerWeapon(playerid, ArmaID, BolCant);
	 	if(PlayerInfo[playerid][pServicioPD] == 0){PlayerInfo[playerid][pBolCant][Bol] = Muni;}
	 	if(PlayerInfo[playerid][pServicioPD] > 0){PlayerInfo[playerid][pCintCant][Bol] = Muni;}
 	}
 	else
 	{
 	    new n;
 	    switch(ArmaID)
 	    {
 	        case 25: n = 4;
 	        case 26: n = 2;
 	        case 27: n = 7;
 	    }
 	    if(GetPlayerWeaponAmmo(playerid, ArmaID) >= n){SendClientMessage(playerid, Rojo, "* No necesitas recargar este arma."); return 1;}
 	    new Municion = (n - GetPlayerWeaponAmmo(playerid, ArmaID));
 	    for(new a = 0; a < Municion; a++)
 	    {
 	    	if(PlayerInfo[playerid][pServicioPD] == 0)
			{
 	        	if(PlayerInfo[playerid][pBolCant][Bol] == 0){break;}
 	    		GivePlayerWeapon(playerid, ArmaID, 1);
 	    		PlayerInfo[playerid][pBolCant][Bol] --;
 	    	}
 	    	if(PlayerInfo[playerid][pServicioPD] > 0)
			{
				if(PlayerInfo[playerid][pCintCant][Bol] == 0){break;}
 	    		GivePlayerWeapon(playerid, ArmaID, 1);
 	    		PlayerInfo[playerid][pCintCant][Bol] --;
			}
 	    }
 	}
 	format(string, sizeof(string), "* %s recarga su arma.", GetPlayerNameRP(playerid));
    ProxDetector(5.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
    RecargarTiempo[playerid] = 1;
    SetTimerEx("RecargarTimer", 3000, false, "i", playerid);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd,"/atm",true) == 0) //Ver comandos de un cajero
{
    if(!GetPlayerCajero(playerid)){SendClientMessage(playerid, Rojo, "* No estás en un cajero automático."); return 1;}
    MostrarATM(playerid, 1);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/aceptar", true) == 0) //Aceptar proposiciones
{
    new opcion[60];
	opcion = strtok(cmdtext, idx);
	if(!strlen(opcion))
	{
	    SendClientMessage(playerid, Naranja, "* /Aceptar [Opción]");
	    SendClientMessage(playerid, Naranja, "Faccion, Multa, CompraVeh, Reparacion, Repintado, Mision, Saludo, Llave");
	    return 1;
	}
	if(strcmp(opcion,"faccion",true) == 0)
	{
		if(reclutarfaccion[playerid] == 0){SendClientMessage(playerid, Rojo, "* Nadie te ha ofrecido formar parte de su facción."); return 1;}
		if(!GetPlayersProx(5.0, playerid, reclutarlider[playerid])){SendClientMessage(playerid, Rojo, "* Demasiado lejos."); reclutarlider[playerid] = 0, reclutarfaccion[playerid] = 0; return 1;}
		PlayerInfo[playerid][pFaccion] = reclutarfaccion[playerid];
		PlayerInfo[playerid][pRango] = 1;
		format(string, sizeof(string), "* Ahora formas parte de la facción #%d.", reclutarfaccion[playerid]);
	    SendClientMessage(playerid, Amarillo, string);
	    format(string, sizeof(string), "* %s forma ahora parte de tu facción.", GetPlayerNameRP(playerid));
	    SendClientMessage(reclutarlider[playerid], Amarillo, string);
	    reclutarfaccion[playerid] = 0;
	    reclutarlider[playerid] = NOEXISTE;
	    return 1;
	}
	if(strcmp(opcion,"multa",true) == 0)
	{
	    if(MultaPrecio[playerid] == 0 || Multador[playerid] == NOEXISTE){SendClientMessage(playerid, Rojo, "* Nadie te ha entregado una multa."); return 1;}
	    if(!GetPlayersProx(5.0, playerid, Multador[playerid])){SendClientMessage(playerid, Rojo, "* Demasiado lejos."); Multador[playerid] = -1, MultaPrecio[playerid] = 0; return 1;}
		PlayerInfo[playerid][pDineroBanco] -= MultaPrecio[playerid];
		new Recibo = (5*MultaPrecio[playerid]/100);
		if(Recibo < 1)Recibo = 0;
		PlayerInfo[Multador[playerid]][pDineroBanco] += Recibo;
		format(string, sizeof(string), "* Has pagado tu multa de %d$ a %s. El dinero se te descontará del banco", MultaPrecio[playerid], GetPlayerNameRP(Multador[playerid]));
		SendClientMessage(playerid, Amarillo, string);
		format(string, sizeof(string), "* %s ha pagado su multa de %d$. Recibes una parte de %d$ en el banco.", GetPlayerNameRP(playerid), MultaPrecio[playerid], Recibo);
		SendClientMessage(Multador[playerid], Amarillo, string);
		Multador[playerid] = NOEXISTE;
		MultaPrecio[playerid] = 0;
	    return 1;
	}
	if(strcmp(opcion,"compraveh",true) == 0)
	{
	    if(VenderVehAVendedor[playerid] == NOEXISTE){SendClientMessage(playerid, Rojo, "* Nadie te ha ofrecido comprar un vehículo."); return 1;}
		if(GetPlayerMoney(playerid) < VenderVehAPrecio[playerid]){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero en mano."); return 1;}
		if(!GetPlayersProx(5.0, playerid, VenderVehAVendedor[playerid])){SendClientMessage(playerid, Rojo, "* Demasiado lejos."); VenderVehAVendedor[playerid] = NOEXISTE; return 1;}
		new EsPropietario;
		for(new x; x < 5; x++)
		{
			if(PlayerInfo[VenderVehAVendedor[playerid]][pLlaveCoche][x] == VenderVehALlave[playerid])
			{
				EsPropietario = 1;
				break;
			}
		}
		if(!EsPropietario){SendClientMessage(playerid, Rojo, "* La oferta ha expirado."); return 1;}
		GivePlayerMoneyAC(playerid, -VenderVehAPrecio[playerid]);
		GivePlayerMoneyAC(VenderVehAVendedor[playerid], VenderVehAPrecio[playerid]);
		format(string, sizeof(string), "* Has comprado un vehículo a %s por %d$.", GetPlayerNameRP(VenderVehAVendedor[playerid]), VenderVehAPrecio[playerid]);
		SendClientMessage(playerid, Verde, string);
		format(string, sizeof(string), "* %s te ha comprado tu vehículo por %d$.", GetPlayerNameRP(playerid), VenderVehAPrecio[playerid]);
		SendClientMessage(VenderVehAVendedor[playerid], Verde, string);
		printf("%s ha vendido un vehículo (LS-%d) a %s por %d.", GetPlayerNameRP(VenderVehAVendedor[playerid]), VenderVehALlave[playerid], GetPlayerNameRP(playerid), VenderVehAPrecio[playerid]);
		format(string, sizeof(string), "* %s vende un vehículo a %s y le entrega los papeles.", GetPlayerNameRP(VenderVehAVendedor[playerid]), GetPlayerNameRP(playerid));
 	    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
		for(new x; x < 5; x++)
		{
			if(PlayerInfo[playerid][pLlaveCoche][x] == 0)
			{
				PlayerInfo[playerid][pLlaveCoche][x] = VenderVehALlave[playerid];
				break;
			}
		}
		for(new x; x < 5; x++)
		{
			if(PlayerInfo[VenderVehAVendedor[playerid]][pLlaveCoche][x] == VenderVehALlave[playerid])
			{
				PlayerInfo[VenderVehAVendedor[playerid]][pLlaveCoche][x] = 0;
				break;
			}
		}
		RemovePlayerFromVehicle(VenderVehAVendedor[playerid]);
		return 1;
	}
	if(strcmp(opcion,"reparacion",true) == 0)
	{
        if(ReparacionTipo[playerid] == 0 || ReparacionMeca[playerid] == NOEXISTE){SendClientMessage(playerid, Rojo, "* Nadie te ha ofrecido una reparación."); return 1;}
		if(!GetPlayersProx(5.0, playerid, ReparacionMeca[playerid])){SendClientMessage(playerid, Rojo, "* Demasiado lejos."); ReparacionMeca[playerid] = NOEXISTE; ReparacionTipo[playerid] = 0; ReparacionPrecio[playerid] = 0; return 1;}
		if(!GetPlayerTaller(playerid)){SendClientMessage(playerid, Rojo, "* No estás en un taller."); ReparacionMeca[playerid] = NOEXISTE, ReparacionTipo[playerid] = 0; ReparacionPrecio[playerid] = 0; return 1;}
		if(GetPlayerMoney(playerid) < ReparacionPrecio[playerid]){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); ReparacionMeca[playerid] = NOEXISTE, ReparacionTipo[playerid] = 0; ReparacionPrecio[playerid] = 0; return 1;}
		if(ReparacionTipo[playerid] == 1) //Motor
		{
			new mecanico = ReparacionMeca[playerid], precio = ReparacionPrecio[playerid], coche = GetPlayerVehicleID(playerid);
			format(string, sizeof(string), "Has aceptado la reparación del motor de %s por %d$. Espera a que se repare.", GetPlayerNameRP(mecanico), precio);
			SendClientMessage(playerid, Amarillo, string);
			format(string, sizeof(string), "%s ha aceptado tu reparación del motor por %d$.", GetPlayerNameRP(playerid), precio);
			SendClientMessage(mecanico, Amarillo, string);
			format(string, sizeof(string), "* %s comienza a repararle el motor a %s.", GetPlayerNameRP(mecanico), GetPlayerNameRP(playerid));
 	    	ProxDetector(15.0, mecanico, string,Morado,Morado,Morado,Morado,Morado);
 	    	TogglePlayerControllable(playerid, 0);
			SetTimerEx("Descongelar", 20000, false, "i", playerid);
			GameTextForPlayer(playerid, "~g~Reparando motor", 20000, 3);
			SetTimerEx("RepararMeca", 20000, false, "i d d", playerid, ReparacionTipo[playerid], coche);
			GivePlayerMoneyAC(playerid, -precio);
			GivePlayerMoneyAC(mecanico, precio-30);
			ReparacionTipo[playerid] = 0;
			ReparacionMeca[playerid] = NOEXISTE;
			ReparacionPrecio[playerid] = 0;
			SiendoReparado[playerid] = 1;
			return 1;
		}
		if(ReparacionTipo[playerid] == 2) //Carrocería
		{
			new mecanico = ReparacionMeca[playerid], precio = ReparacionPrecio[playerid], coche = GetPlayerVehicleID(playerid);
			format(string, sizeof(string), "Has aceptado la reparación de la carrocería de %s por %d$. Espera a que se repare.", GetPlayerNameRP(mecanico), precio);
			SendClientMessage(playerid, Amarillo, string);
			format(string, sizeof(string), "%s ha aceptado tu reparación de la carrocería por %d$.", GetPlayerNameRP(playerid), precio);
			SendClientMessage(mecanico, Amarillo, string);
			format(string, sizeof(string), "* %s comienza a repararle la carrocería a %s.", GetPlayerNameRP(mecanico), GetPlayerNameRP(playerid));
 	    	ProxDetector(15.0, mecanico, string,Morado,Morado,Morado,Morado,Morado);
 	    	TogglePlayerControllable(playerid, 0);
			SetTimerEx("Descongelar", 30000, false, "i", playerid);
			GameTextForPlayer(playerid, "~g~Reparando carroceria", 30000, 3);
			SetTimerEx("RepararMeca", 30000, false, "i d d", playerid, ReparacionTipo[playerid], coche);
			GivePlayerMoneyAC(playerid, -precio);
			GivePlayerMoneyAC(mecanico, precio-30);
			ReparacionTipo[playerid] = 0;
			ReparacionMeca[playerid] = NOEXISTE;
			ReparacionPrecio[playerid] = 0;
			SiendoReparado[playerid] = 1;
			return 1;
		}
		if(ReparacionTipo[playerid] == 3) //Ruedas
		{
			new mecanico = ReparacionMeca[playerid], precio = ReparacionPrecio[playerid], coche = GetPlayerVehicleID(playerid);
			format(string, sizeof(string), "Has aceptado la reparación de las ruedas de %s por %d$. Espera a que se repare.", GetPlayerNameRP(mecanico), precio);
			SendClientMessage(playerid, Amarillo, string);
			format(string, sizeof(string), "%s ha aceptado tu reparación de las ruedas por %d$.", GetPlayerNameRP(playerid), precio);
			SendClientMessage(mecanico, Amarillo, string);
			format(string, sizeof(string), "* %s comienza a repararle las ruedas a %s.", GetPlayerNameRP(mecanico), GetPlayerNameRP(playerid));
 	    	ProxDetector(15.0, mecanico, string,Morado,Morado,Morado,Morado,Morado);
 	    	TogglePlayerControllable(playerid, 0);
			SetTimerEx("Descongelar", 15000, false, "i", playerid);
			GameTextForPlayer(playerid, "~g~Reparando ruedas", 15000, 3);
			SetTimerEx("RepararMeca", 15000, false, "i d d", playerid, ReparacionTipo[playerid], coche);
			GivePlayerMoneyAC(playerid, -precio);
			GivePlayerMoneyAC(mecanico, precio-30);
			ReparacionTipo[playerid] = 0;
			ReparacionMeca[playerid] = NOEXISTE;
			ReparacionPrecio[playerid] = 0;
			SiendoReparado[playerid] = 1;
			return 1;
		}
	}
	if(strcmp(opcion,"repintado",true) == 0)
	{
	    if(RepintadoMeca[playerid] == NOEXISTE){SendClientMessage(playerid, Rojo, "* Nadie te ha ofrecido una repintar tu vehículo."); return 1;}
		if(!GetPlayersProx(5.0, playerid, RepintadoMeca[playerid])){SendClientMessage(playerid, Rojo, "* Demasiado lejos."); RepintadoMeca[playerid] = NOEXISTE; RepintadoColor1[playerid] = 0; RepintadoColor2[playerid] = 0; RepintadoPrecio[playerid] = 0; return 1;}
		if(!GetPlayerTaller(playerid)){SendClientMessage(playerid, Rojo, "* No estás en un taller."); RepintadoMeca[playerid] = NOEXISTE, RepintadoColor1[playerid] = 0; RepintadoColor2[playerid] = 0; RepintadoPrecio[playerid] = 0; return 1;}
		if(GetPlayerMoney(playerid) < RepintadoPrecio[playerid]){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); RepintadoMeca[playerid] = NOEXISTE, RepintadoColor1[playerid] = 0; RepintadoColor2[playerid] = 0; RepintadoPrecio[playerid] = 0; return 1;}
		new mecanico = RepintadoMeca[playerid], precio = RepintadoPrecio[playerid], color1 = RepintadoColor1[playerid], color2 = RepintadoColor2[playerid], coche = GetPlayerVehicleID(playerid);
		format(string, sizeof(string), "Has aceptado el repintado de %s por %d$.", GetPlayerNameRP(mecanico), precio);
		SendClientMessage(playerid, Amarillo, string);
		format(string, sizeof(string), "%s ha aceptado tu repintado por %d$.", GetPlayerNameRP(playerid), precio);
		SendClientMessage(mecanico, Amarillo, string);
		format(string, sizeof(string), "* %s comienza a repintarle el vehículo a %s.", GetPlayerNameRP(mecanico), GetPlayerNameRP(playerid));
    	ProxDetector(15.0, mecanico, string,Morado,Morado,Morado,Morado,Morado);
    	TogglePlayerControllable(playerid, 0);
    	SetTimerEx("Descongelar", 15000, false, "i", playerid);
		GameTextForPlayer(playerid, "~g~Repintando vehiculo", 15000, 3);
		SetTimerEx("RepintarMeca", 15000, false, "i d d d", playerid, color1, color2, coche);
    	GivePlayerMoneyAC(playerid, -precio);
		GivePlayerMoneyAC(mecanico, precio-200);
		RepintadoColor1[playerid] = 0;
		RepintadoColor2[playerid] = 0;
		RepintadoMeca[playerid] = NOEXISTE;
		RepintadoPrecio[playerid] = 0;
		return 1;
	}
	if(strcmp(opcion,"mision",true) == 0)
	{
	    if(RealizandoMision[playerid] != 0){SendClientMessage(playerid, Rojo, "* Ya estás en un recado."); return 1;}
		if(MisionEncargada[playerid] == 0){SendClientMessage(playerid, Rojo, "* Nadie te ha encargado un recado."); return 1;}
		if(MisionEncargada[playerid] == 1) //Misión conseguir droga
		{
		    SendClientMessage(playerid, Amarillo, "SMS de Nº oculto: La poli va a venir a husmear a mi casa.");
		    SendClientMessage(playerid, Amarillo, "SMS de Nº oculto: Necesito que te lleves una cosa que no he conseguido vender.");
            MisionEncargada[playerid] = 0;
			RealizandoMision[playerid] = 1;
			new rand, bucles;
			for(new x=1; x<=TotalTurfs; x++)
			{
			    rand = random(2);
			    if(TurfInfo[x][tFaccion] == PlayerInfo[playerid][pFaccion] && rand)
			    {
			        SetPlayerCheckpoint(playerid, TurfInfo[x][tDistrbuirDrogaX], TurfInfo[x][tDistrbuirDrogaY], TurfInfo[x][tDistrbuirDrogaZ], 0.5);
			        break;
			    }
			    if(x == TotalTurfs) x = 1, bucles++; //Reinicia el bucle
			    if(bucles >= 3) break;
			}
			return 1;
		}
		else if(MisionEncargada[playerid] == 2) //Misión conseguir arma
		{
		    SendClientMessage(playerid, Amarillo, "SMS de Nº oculto: Tuve problemas con un payaso y lo mandé de viaje.");
		    SendClientMessage(playerid, Amarillo, "SMS de Nº oculto: La poli está husmeando, necesito que escondas algo un tiempo.");
		    MisionEncargada[playerid] = 0;
		    RealizandoMision[playerid] = 2;
		    new rand, bucles;
			for(new x=1; x<=TotalTurfs; x++)
			{
			    rand = random(2);
			    if(TurfInfo[x][tFaccion] == PlayerInfo[playerid][pFaccion] && rand)
			    {
			        SetPlayerCheckpoint(playerid, TurfInfo[x][tDistrbuirDrogaX], TurfInfo[x][tDistrbuirDrogaY], TurfInfo[x][tDistrbuirDrogaZ], 0.5);
			        break;
			    }
			    if(x == TotalTurfs) x = 1, bucles++; //Reinicia el bucle
			    if(bucles >= 5) break;
			}
			return 1;
		}
		else if(MisionEncargada[playerid] == 3) //Misión pintar
		{
		    SendClientMessage(playerid, Amarillo, "SMS de Nº oculto: Tenemos que darnos a conocer en la ciudad.");
		    SendClientMessage(playerid, Amarillo, "SMS de Nº oculto: Pilla unos sprays y haz una buena pintada para que sepan quién manda aquí.");
		    MisionEncargada[playerid] = 0;
		    RealizandoMision[playerid] = 3;
		    new rand = random(MAX_LUGARESPINTAR);
		    MuroAPintar[playerid] = rand;
		    SetPlayerCheckpoint(playerid, LugaresPintar[rand][GraffitiX], LugaresPintar[rand][GraffitiY], LugaresPintar[rand][GraffitiZ], 2.0);
		}
	}
	if(strcmp(opcion,"saludo",true) == 0)
	{
	    if(ofertasaludo[idsaludado] != NOEXISTE)
		{
			new seleccion;
			seleccion = saludoid;
			ApplyAnimation(playerid,animsaludo[seleccion][animliba],animsaludo[seleccion][animnamea],4.0,0,0,0,3000,1,1);
			ApplyAnimation(ofertasaludo[playerid],animsaludo[seleccion][animliba],animsaludo[seleccion][animnamea],4.0,0,0,0,3000,1,1);
			ofertasaludo[idsaludado] = NOEXISTE;
		}
		else
		{
			SendClientMessage(playerid,RojoIntenso,"Nadie te ofreció un saludo");
			return 1;
		}
	}
	if(strcmp(opcion,"llave",true) == 0)
	{
	    if(PrestadorCoche[playerid] == NOEXISTE || LlavePrestada[playerid] == NOEXISTE)
		{
		    PrestadorCoche[playerid] = NOEXISTE;
    		LlavePrestada[playerid] = NOEXISTE;
			SendClientMessage(playerid,Rojo,"* Nadie te ha ofrecido prestarte la llave de su vehículo.");
			return 1;
		}
		if(!GetPlayersProx(5.0, playerid, PrestadorCoche[playerid]))
		{
		    PrestadorCoche[playerid] = NOEXISTE;
    		LlavePrestada[playerid] = NOEXISTE;
			SendClientMessage(playerid, Rojo, "* Demasiado lejos.");
			return 1;
		}

		new tieneslotlibre = -1;
		for(new x=0; x<5; x++)
		{
		    if(PlayerInfo[playerid][pLlaveCochePrestado][x] == 0){tieneslotlibre = x; break;}
		}
		if(tieneslotlibre == -1){SendClientMessage(playerid, Rojo, "* Tienes todos los slots de llaves prestadas ocupados."); return 1;}

		PlayerInfo[playerid][pLlaveCochePrestado][tieneslotlibre] = LlavePrestada[playerid];

		format(string, sizeof(string), "Has aceptado la llave del coche LS-%d ofrecida por %s.", LlavePrestada[playerid], GetPlayerNameRP(PrestadorCoche[playerid]));
		SendClientMessage(playerid, Amarillo, string);
		format(string, sizeof(string), "%s ha aceptado tu llave del coche LS-%d.", GetPlayerNameRP(playerid), LlavePrestada[playerid]);
		SendClientMessage(PrestadorCoche[playerid], Amarillo, string);

		PrestadorCoche[playerid] = NOEXISTE;
		LlavePrestada[playerid] = NOEXISTE;
		return 1;
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------


if(strcmp(cmd, "/parking", true) == 0) //Entrar a un parking público o privado
{
    new
        vehicleid = GetPlayerVehicleID(playerid),
        id = -1;

    if((id = PlayerIsNearParking(playerid)) != -1)
    {
        if(IsPlayerInAnyVehicle(playerid))
		{
		SetVehiclePos(vehicleid, ParkInfo[id][parkPosXX], ParkInfo[id][parkPosYY], ParkInfo[id][parkPosZZ]);
	    SetVehicleZAngle(vehicleid, ParkInfo[id][parkPosAA]);
        SetVehicleVirtualWorld(vehicleid, id + 20);
        LinkVehicleToInteriorEx(vehicleid, ParkInfo[id][parkINTInt]);
        }
        else
        {
        SetPlayerPos(playerid,ParkInfo[id][parkPosXX], ParkInfo[id][parkPosYY], ParkInfo[id][parkPosZZ]);
        }
        SetPlayerVirtualWorld(playerid, id + 20);
        SetPlayerInterior(playerid, ParkInfo[id][parkINTInt]);
    }
    else if((id = PlayerIsNearExitParking(playerid)) != -1){
    	if(IsPlayerInAnyVehicle(playerid))
		{
        SetVehiclePos(vehicleid, ParkInfo[id][parkPosX], ParkInfo[id][parkPosY], ParkInfo[id][parkPosZ]);
        SetVehicleZAngle(vehicleid, ParkInfo[id][parkPosA]);
        SetVehicleVirtualWorld(vehicleid, ParkInfo[id][parkVWExt]);
        LinkVehicleToInteriorEx(vehicleid, ParkInfo[id][parkINTExt]);
        }
        else
        {
        SetPlayerPos(playerid,ParkInfo[id][parkPosXX], ParkInfo[id][parkPosYY], ParkInfo[id][parkPosZZ]);
        }
        SetPlayerVirtualWorld(playerid, ParkInfo[id][parkVWExt]);
        SetPlayerInterior(playerid, ParkInfo[id][parkINTExt]);
    }
	else if(IsPlayerInRangeOfPoint(playerid, 4.0, 1585.6000000, -1678.8000500, 5.9000000)) //1ª planta parking LSPD
	{
        for(new i=0; i <= TotalVeh; i++)
	    {
		    if(IsVehicleInRangeOfPoint(6.0, i, -1605.3000500, 733.3000100, -5.2000000) && GetVehicleVirtualWorld(i) == 1)
			{
				SendClientMessage(playerid, Rojo, "* Hay un vehículo al otro lado, no se puede pasar.");
	        	return 1;
			}
	    }
		if(PlayerInfo[playerid][pFaccion] != 1){SendClientMessage(playerid,Rojo,"* No eres policía."); return 1;}
		SetVehiclePos(vehicleid, -1605.3000500, 733.3000100, -5.2000000);
		SetVehicleZAngle(vehicleid, 0);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 4.0, -1605.3000500, 733.3000100, -5.2000000)) //2ª planta parking LSPD
	{
        for(new i=0; i <= TotalVeh; i++)
	    {
		    if(IsVehicleInRangeOfPoint(6.0, i, 1585.6000000, -1678.8000500, 5.9000000) && GetVehicleVirtualWorld(i) == 0)
			{
				SendClientMessage(playerid, Rojo, "* Hay un vehículo al otro lado, no se puede pasar.");
	        	return 1;
			}
	    }
		SetVehiclePos(vehicleid, 1585.6000000, -1678.8000500, 5.9000000);
		SetVehicleZAngle(vehicleid, 270);
	}
    else
    {
        SendClientMessage(playerid, Rojo, "* No estás en la puerta de un parking.");
    }
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/barrason", true) == 0) //Muestra barras de hambre y sed
{
	SendClientMessage(playerid, Amarillo, "Todas las barras fueron activadas.");
    ShowPlayerProgressBar(playerid, hambrebar[playerid]);
    ShowPlayerProgressBar(playerid, sedbar[playerid]);
    ShowPlayerProgressBar(playerid, XP[playerid]);
    TextDrawShowForPlayer(playerid, hambre[playerid]); //Textdraws hambre y sed
    TextDrawShowForPlayer(playerid, sed[playerid]);
    TextDrawShowForPlayer(playerid, Barra[0]);
    TextDrawShowForPlayer(playerid, Barra[1]);
    TextDrawShowForPlayer(playerid, Barra[2]);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/barrasoff", true) == 0) //Esconde barras de hambre y sed
{
	SendClientMessage(playerid, Amarillo, "Todas las barras fueron desactivadas.");
    HidePlayerProgressBar(playerid, hambrebar[playerid]);
    HidePlayerProgressBar(playerid, sedbar[playerid]);
    HidePlayerProgressBar(playerid, XP[playerid]);
    TextDrawHideForPlayer(playerid, hambre[playerid]); //Textdraws hambre y sed
    TextDrawHideForPlayer(playerid, sed[playerid]);
    TextDrawHideForPlayer(playerid, Barra[0]);
    TextDrawHideForPlayer(playerid, Barra[1]);
    TextDrawHideForPlayer(playerid, Barra[2]);
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/nameoff", true) == 0) //Ocultar nombres
{
	PlayerNameOff[playerid] = 1;
	for(new i = 0;i <= MAX_PLAYERS; i++)
	{
		ShowPlayerNameTagForPlayer(playerid,i, 0);
	}
	SendClientMessage(playerid, Amarillo, "Nombres de jugadores desactivados, '/NameON' para volver a activarlos.");
    return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/nameon", true) == 0) //Mostrar nombres
{
	PlayerNameOff[playerid] = 0;
	for(new i = 0;i <= MAX_PLAYERS; i++)
	{
		ShowPlayerNameTagForPlayer(playerid,i, 1);
	}
	SendClientMessage(playerid, Amarillo, "Nombres de jugadores activados.");
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/catalogo", true) == 0) //Ver coches de concesionario
{
    if(GetPlayerConcesionario(playerid) > 0)
	{
		format(string, 128, "Bienvenido al concesionario %s, puede observar nuestra gama de vehículos.", Concesionarios[GetPlayerConcesionarioEx(playerid)][cNombre]);
		SendClientMessage(playerid, Amarillo, string);
		SendClientMessage(playerid, Naranja, "Pulsa SHIFT y ALT para ver los modelos.");
		SendClientMessage(playerid, Naranja, "Pulsa ENTER para salir del catálogo.");
		TogglePlayerControllable(playerid, 0);
		if(EnCatalogoVeh[playerid] == NOEXISTE)
		{
			TogglePlayerControllable(playerid,0);
			EnCatalogoVeh[playerid] = 1;
		}
		PConcesionario[playerid] = GetPlayerConcesionario(playerid);
		catalogovehiculos(playerid, PConcesionario[playerid]);
		TextDrawShowForPlayer(playerid,fila[1]);
		TextDrawShowForPlayer(playerid,fila[2]);
		TextDrawShowForPlayer(playerid,fila[3]);
		TextDrawShowForPlayer(playerid,fila[4]);
	}
	else{SendClientMessage(playerid, Rojo, "* No estás en un concesionario.");}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp("/comprarveh", cmd, true) == 0) //Comprar vehículos
{
    if(!GetPlayerConcesionario(playerid)){SendClientMessage(playerid, Rojo, "* No estás en un concesionario."); return 1;}
    if((GetPlayerConcesionario(playerid) >= 1 && GetPlayerConcesionario(playerid) <= 5) && PlayerInfo[playerid][pLicConduccion] == 0){SendClientMessage(playerid, Rojo, "* Necesitas licencia de conducción para comprar vehículos aquí."); return 1;}
	cmd = strtok(cmdtext,idx);
 	if(!strlen(cmd))
	{
		SendClientMessage(playerid, Naranja, "* /Comprarveh [VehículoID] [Color1] [Color2]");
		SendClientMessage(playerid, Naranja, "Puedes ver la lista de colores en el foro.");
	    return 1;
	}
	if(EnCatalogoVeh[playerid] != NOEXISTE){SendClientMessage(playerid, Rojo, "* Sal del catálogo primero."); return 1;}
	//GetPlayerPos(playerid, PlayerInfo[playerid][pPos_x], PlayerInfo[playerid][pPos_y], PlayerInfo[playerid][pPos_z]);
	new tmpcar;
	tmpcar = strval(cmd);
	if(datacar[tmpcar][dcNivel] > PlayerInfo[playerid][pNivel])
	{
		SendClientMessage(playerid, Rojo, "* Nivel insuficiente.");
		return 1;
	}

	new EspacioLibre;
	for(new x = 0; x < 5; x++)
	{
	    if(PlayerInfo[playerid][pLlaveCoche][x] == 0){EspacioLibre = 1; break;}
	}
	if(EspacioLibre == 0){SendClientMessage(playerid, Rojo, "* Ya tienes todos los slots de llaves propias ocupados."); return 1;}

	if(datacar[tmpcar][dcConcesionario] != GetPlayerConcesionario(playerid))
	{
		SendClientMessage(playerid, Rojo, "* No disponemos de ese modelo, deberás buscar en otro concesionario.");
        return 1;
	}

	new Conce2 = GetPlayerConcesionarioEx(playerid);
	for(new i=0; i <= TotalVeh; i++)
	{
		if(IsVehicleInRangeOfPoint(10.0, i, Concesionarios[Conce2][ctX], Concesionarios[Conce2][ctY], Concesionarios[Conce2][ctZ]))
		{
			SendClientMessage(playerid, Rojo, "* Hay un vehículo en el punto de entrega.");
			return 1;
		}
	}

	if(GetPlayerMoney(playerid) < datacar[tmpcar][dcPrecio] && PlayerInfo[playerid][pDineroBanco] < datacar[tmpcar][dcPrecio])
	{
		SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero ni en mano ni en el banco.");
		return 1;
	}

	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
	{
	    SendClientMessage(playerid, Naranja, "* /Comprarveh [VehículoID] [Color1] [Color2]");
		SendClientMessage(playerid, Naranja, "Puedes ver la lista de colores en el foro.");
	    return 1;
	}
	new color1;
	color1 = strval(tmp);

	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
	{
	    SendClientMessage(playerid, Naranja, "* /Comprarveh [VehículoID] [Color1] [Color2]");
		SendClientMessage(playerid, Naranja, "Puedes ver la lista de colores en el foro.");
	    return 1;
	}
	new color2;
	color2 = strval(tmp);

    for(new x; x < 5; x++)
	{
		if(PlayerInfo[playerid][pLlaveCoche][x] == 0)
		{
			PlayerInfo[playerid][pLlaveCoche][x] = CodigoLlave;
			break;
		}
	}

	SendClientMessage(playerid, Verde, "* Has comprado un nuevo vehículo.");
	SendClientMessage(playerid, Amarillo, "* El vendedor te ha entregado las llaves (/cuenta).");

	new Conce = datacar[tmpcar][dcConcesionario]-1;
	if(GetPlayerMoney(playerid) >= datacar[tmpcar][dcPrecio]){GivePlayerMoneyAC(playerid, -datacar[tmpcar][dcPrecio]);}
	else if(PlayerInfo[playerid][pDineroBanco] >= datacar[tmpcar][dcPrecio]){PlayerInfo[playerid][pDineroBanco] -= datacar[tmpcar][dcPrecio];}
	else{return 1;}
	darCoche(tmpcar,Concesionarios[Conce][ctX],Concesionarios[Conce][ctY],Concesionarios[Conce][ctZ],PlayerInfo[playerid][pNombre],color1,color2);
	return 1;
}


//---------------------------------------------------------------------------------------------------------------
if(strcmp("/examen", cmd, true) == 0) //Examen permisos
{
    if(IsPlayerInRangeOfPoint(playerid, 2.0, AutoEscuelas[0][AutoX], AutoEscuelas[0][AutoY], AutoEscuelas[0][AutoZ])) //Autoescuela conducción
    {
        if(PlayerInfo[playerid][pLicConduccion] == 1){SendClientMessage(playerid, Rojo, "* Ya tienes la licencia de conducción."); return 1;}
        if(EnAutoEscuela[playerid] != 0){SendClientMessage(playerid, Rojo, "* Ya estás haciendo algún examen."); return 1;}
        if(GetPlayerMoney(playerid) < 700){SendClientMessage(playerid, Rojo, "* Necesitas 700$ para hacer este examen."); return 1;}
        TemaAutoescuelaCond(playerid, 0);
		EnAutoEscuela[playerid] = 1;
		CheckPointAutoEscuela[playerid] = 0;
		TogglePlayerControllable(playerid, 0);
    }
    else if(IsPlayerInRangeOfPoint(playerid, 2.0, AutoEscuelas[1][AutoX], AutoEscuelas[1][AutoY], AutoEscuelas[1][AutoZ])) //Autoescuela aviación
    {
        if(PlayerInfo[playerid][pLicAviacion] == 1){SendClientMessage(playerid, Rojo, "* Ya tienes la licencia de aviación."); return 1;}
        if(EnAutoEscuela[playerid] != 0){SendClientMessage(playerid, Rojo, "* Ya estás haciendo algún examen."); return 1;}
        if(PlayerInfo[playerid][pNivel] < 3){SendClientMessage(playerid, Rojo, "* Necesitas nivel 3 para hacer este examen."); return 1;}
        if(GetPlayerMoney(playerid) < 7000){SendClientMessage(playerid, Rojo, "* Necesitas 7000$ para hacer este examen."); return 1;}
        EnAutoEscuela[playerid] = 2;
		CheckPointAutoEscuela[playerid] = 0;
        SendClientMessage(playerid, Amarillo, "Sube a la avioneta para comenzar el examen.");
	  	SetTimerEx("TimerAutoescuela", 15000, false, "i", playerid);
    }
    else if(IsPlayerInRangeOfPoint(playerid, 2.0, AutoEscuelas[2][AutoX], AutoEscuelas[2][AutoY], AutoEscuelas[2][AutoZ])) //Autoescuela navegación
    {
        if(PlayerInfo[playerid][pLicNavegacion] == 1){SendClientMessage(playerid, Rojo, "* Ya tienes la licencia de navegación."); return 1;}
        if(EnAutoEscuela[playerid] != 0){SendClientMessage(playerid, Rojo, "* Ya estás haciendo algún examen."); return 1;}
        if(GetPlayerMoney(playerid) < 1000){SendClientMessage(playerid, Rojo, "* Necesitas 1000$ para hacer este examen."); return 1;}
		EnAutoEscuela[playerid] = 3;
		CheckPointAutoEscuela[playerid] = 0;
		SendClientMessage(playerid, Amarillo, "Sube a la lancha para comenzar el examen.");
	  	SetTimerEx("TimerAutoescuela", 15000, false, "i", playerid);
    }
    else{SendClientMessage(playerid, Rojo, "* No estás en un lugar donde conseguir una licencia.");}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp("/licencias", cmd, true) == 0) //Muestra licencias al jugador
{
    SendClientMessage(playerid, Amarillo, "|__________Licencias__________|");
	new licencia[3];
	licencia = "No";
	if(PlayerInfo[playerid][pLicConduccion] == 1)licencia = "Sí";
	format(string, sizeof(string), "Licencia conducción: %s", licencia);
	SendClientMessage(playerid, AmarilloClaro, string);
	licencia = "No";
	if(PlayerInfo[playerid][pLicAviacion] == 1)licencia = "Sí";
	format(string, sizeof(string), "Licencia aviación: %s", licencia);
	SendClientMessage(playerid, AmarilloClaro, string);
	licencia = "No";
	if(PlayerInfo[playerid][pLicNavegacion] == 1)licencia = "Sí";
	format(string, sizeof(string), "Licencia navegación: %s", licencia);
	SendClientMessage(playerid, AmarilloClaro, string);
	licencia = "No";
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp("/comprar", cmd, true) == 0) //Muestra licencias al jugador
{
	if(!GetPlayerDentroNego(playerid)){SendClientMessage(playerid, Rojo, "* No estás en un local."); return 1;}
	if(!EstaEnMostrador(playerid)){SendClientMessage(playerid, Rojo, "* Debes estar en el mostrador de la tienda."); return 1;}
	new n = GetPlayerDentroNego(playerid);
	if(NegoInfo[n][nTipo] == 1) //Restaurantes
	{
	    ShowMenuForPlayer(restaurantes, playerid);
		TogglePlayerControllable(playerid, 0);
	}
	if(NegoInfo[n][nTipo] == 2) //Bares
	{
	    ShowMenuForPlayer(bares, playerid);
		TogglePlayerControllable(playerid, 0);
	}
	if(NegoInfo[n][nTipo] == 3) //Comidas rápidas
	{
	    ShowMenuForPlayer(comidasrapidas, playerid);
		TogglePlayerControllable(playerid, 0);
	}
	if(NegoInfo[n][nTipo] == 4) //Discotecas
	{
	    ShowMenuForPlayer(discoteca, playerid);
		TogglePlayerControllable(playerid, 0);
	}
	if(NegoInfo[n][nTipo] == 5) //Puticlubs
	{
	    ShowMenuForPlayer(puticlub, playerid);
		TogglePlayerControllable(playerid, 0);
	}
	if(NegoInfo[n][nTipo] == 7) //Ammu Nations
	{
	    if(PlayerInfo[playerid][pServicioPD] > 0){SendClientMessage(playerid, Rojo, "* No puedes comprar aquí estando de servicio como policía."); return 1;}
	    if(PlayerInfo[playerid][pLicArmas] == 0){SendClientMessage(playerid, Rojo, "* Necesitas licencia de armas para comprar aquí."); return 1;}
	    ShowMenuForPlayer(ammunation, playerid);
		TogglePlayerControllable(playerid, 0);
	}
	if(NegoInfo[n][nTipo] == 8) //24/7
	{
	    ShowMenuForPlayer(menu247, playerid);
		TogglePlayerControllable(playerid, 0);
	}
	if(NegoInfo[n][nTipo] == 9) //Tienda deportiva
	{
	    if(PlayerInfo[playerid][pServicioPD] > 0){SendClientMessage(playerid, Rojo, "* No puedes comprar aquí estando de servicio como policía."); return 1;}
	    ShowMenuForPlayer(tiendadeportes, playerid);
		TogglePlayerControllable(playerid, 0);
	}
	if(NegoInfo[n][nTipo] == 10) //Ferretería
	{
	    if(PlayerInfo[playerid][pServicioPD] > 0){SendClientMessage(playerid, Rojo, "* No puedes comprar aquí estando de servicio como policía."); return 1;}
	    ShowMenuForPlayer(ferreteria, playerid);
		TogglePlayerControllable(playerid, 0);
	}
	if(NegoInfo[n][nTipo] == 11) //Tienda ropa
	{
	    ShowMenuForPlayer(tiendaropa, playerid);
		TogglePlayerControllable(playerid, 0);
	}
	if(NegoInfo[n][nTipo] == 12) //Tienda electrónica
	{
	    ShowMenuForPlayer(electronica, playerid);
		TogglePlayerControllable(playerid, 0);
	}
	if(NegoInfo[n][nTipo] == 18) //Estanco
	{
	    ShowMenuForPlayer(estanco, playerid);
		TogglePlayerControllable(playerid, 0);
	}
	if(NegoInfo[n][nTipo] == 19) //licoreria
	{
	    ShowMenuForPlayer(licoreria, playerid);
		TogglePlayerControllable(playerid, 0);
	}
	return 1;
}

//---------------------------------------------------------------------------------------------------------------

if(strcmp(cmd, "/id", true) == 0)
{
	tmp = strtok(cmdtext, idx);
	if(!strlen(tmp))
	{
		SendClientMessage(playerid, Naranja, "* /ID [ID/Nombre_Apellido]");
		return 1;
	}
	playerid2 = ReturnUser(tmp);
	if(!IsPlayerConnected(playerid2) || playerid2 == INVALID_PLAYER_ID){SendClientMessage(playerid, Rojo, "* ID inválida o más de un jugador encontrados con ese nombre."); return 1;}
	format(string, sizeof(string), "- %s (ID: %d)", GetPlayerNameRP(playerid2), playerid2);
	SendClientMessage(playerid, Amarillo, string);
	return 1;
}

//---------------------------------------------------------------------------------------------------------------
SendClientMessage(playerid, AmarilloClaro, "* Comando desconocido, utiliza '/Ayuda'.");
return 1;
}

public OnPlayerEnterVehicle(playerid, vehicleid, ispassenger)
{
    oldcarid[playerid] = vehicleid;
    if(CocheLSPD(vehicleid) && PlayerInfo[playerid][pFaccion] != 1 && !ispassenger) //Si entra a un vehiculo policial y no es del LSPD, impedirle entrar.
    {
		new Float:X, Float:Y, Float:Z;
		GetPlayerPos(playerid, X, Y, Z);
		SetPlayerPos(playerid, X, Y, Z);
    }
	if(PlayerInfo[playerid][pMuerto] > 0) //Si entra a un vehiculo estando crack
    {
		new Float:X, Float:Y, Float:Z;
		GetPlayerPos(playerid, X, Y, Z);
		SetPlayerPos(playerid, X, Y, Z);
    }
    return 1;
}

public OnPlayerExitVehicle(playerid, vehicleid)
{
    VenderVeh[playerid] = 0;
	if(IsAvionPiloto(vehicleid) || IsAutoPiloto(vehicleid)) { if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER) { SetVehicleToRespawn(GetPlayerVehicleID(playerid)); cavion[playerid] = 0; } }
    if(CinturonPuesto[playerid] == 1) //Quitarse cinturón
    {
        new string[60];
        format(string, sizeof(string), "* %s se quita el cinturón de seguridad.", GetPlayerNameRP(playerid));
 	    ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
        CinturonPuesto[playerid] = 0;
    }
    if(CocheLSN(vehicleid))
    {
        if(DirectoLSNCoche[vehicleid] == playerid)
        {
            DirectoLSNCoche[vehicleid] = NOEXISTE;
            for(new i=0; i<MAX_PLAYERS; i++)
            {
                if(GetPlayerVehicleID(i) == vehicleid)SendClientMessage(i, NaranjaOscuro, "Este vehículo ha dejado de emitir en directo.");
            }
        }
    }
    if(TaxiConductor[playerid] != NOEXISTE)
    {
        new taxista = TaxiConductor[playerid], string[80];
        format(string, sizeof(string), "Has pagado a %s %d$ por el transporte en taxi.", GetPlayerNameRP(taxista), TaxiCoste[playerid]);
        SendClientMessage(playerid, Verde, string);
        format(string, sizeof(string), "%s te ha pagado %d$ por el transporte en taxi.", GetPlayerNameRP(playerid), TaxiCoste[playerid]);
        SendClientMessage(taxista, Verde, string);
        TaxiConductor[playerid] = NOEXISTE;
        TaxiPasajero[taxista] = NOEXISTE;
		TaxiCoste[playerid] = 0;
		return 1;
    }
    if(TaxiPasajero[playerid] != NOEXISTE)
    {
        new pasajero = TaxiPasajero[playerid], string[80];
        format(string, sizeof(string), "Has pagado a %s %d$ por el transporte en taxi.", GetPlayerNameRP(playerid), TaxiCoste[pasajero]);
        SendClientMessage(pasajero, Verde, string);
        format(string, sizeof(string), "%s te ha pagado %d$ por el transporte en taxi.", GetPlayerNameRP(pasajero), TaxiCoste[pasajero]);
        SendClientMessage(playerid, Verde, string);
        TaxiConductor[pasajero] = NOEXISTE;
        TaxiPasajero[playerid] = NOEXISTE;
		TaxiCoste[pasajero] = 0;
		return 1;
    }
	return 1;
}

public OnPlayerStateChange(playerid, newstate, oldstate)
{
	    new veh = GetPlayerVehicleID(playerid);
	    if(IsAutoRenta(veh))
	    {
	    	if(VehRentado[veh] == 0)
	    	{
	    	    new RS[300];
	    	    format(RS,sizeof(RS),"{FFFFFF}¡Vehículo en renta!:\n________________________________\n\n  Precio: {FFFF04}$300\n{FFFFFF}  Tiempo: {4785FF}15 Minutos\n{FFFFFF}  Modelo: {4785FF}Emperor{FFFFFF}\n{FFFFFF}  Dueño: {10E4FF}Gobierno{FFFFFF}\n________________________________");
	        	ShowPlayerDialog(playerid,dVehRenta,DIALOG_STYLE_MSGBOX,"Renta",RS,"Rentar","Salir");
			}
			else if(VehRentado[veh] == 1 && RentoVehID[playerid] != GetPlayerVehicleID(playerid) && newstate==2)
			{
				RemovePlayerFromVehicle(playerid);
				SendClientMessage(playerid,Rojo,"¡ Ya alguien ha rentado este vehículo !");
				return 1;
			}
			else if(VehRentado[veh] == 1 && RentoVehID[playerid] == GetPlayerVehicleID(playerid)){}
		}
        if(PlayerInfo[playerid][pTrabajo] == 1 && Trabajando[playerid] == 1 && IsAvionPiloto(veh))
	    {
	    	SendClientMessage(playerid,Blanco,"Para cargar el avión utiliza {FFFF04}/cargar avion.");
	    }
		if(oldstate == 2) //Era conductor
		{
			TextDrawHideForPlayer(playerid,box[playerid]); //Velocímetro
			TextDrawHideForPlayer(playerid,vvel[playerid]);
			TextDrawHideForPlayer(playerid,fuel[playerid]);
			if(EnAutoEscuela[playerid] == 1)
			{
			    SendClientMessage(playerid, Rojo, "Tienes 10 segundos para volver al vehículo y seguir la parte práctica del examen.");
				SetTimerEx("TimerAutoescuela", 10000, false, "i", playerid);
			}
			if(EnAutoEscuela[playerid] == 2)
			{
				SendClientMessage(playerid, Rojo, "Tienes 10 segundos para volver al avión.");
				SetTimerEx("TimerAutoescuela", 10000, false, "i", playerid);
			}
			if(EnAutoEscuela[playerid] == 3)
			{
				SendClientMessage(playerid, Rojo, "Tienes 10 segundos para volver a la lancha.");
				SetTimerEx("TimerAutoescuela", 10000, false, "i", playerid);
			}
			if(Trabajando[playerid] == 1) //Trabajando
			{
				if(PlayerInfo[playerid][pTrabajo] == 2) //Cosechador
				{
					SendClientMessage(playerid, Rojo, "Tienes 20 segundos para volver a la cosechadora.");
					TimerDejarTrabajar[playerid] = SetTimerEx("TimerDejarTrabajarF", 20000, false, "i", playerid);
				}
				if(PlayerInfo[playerid][pTrabajo] == 5) //Pescador
				{
					SendClientMessage(playerid, Rojo, "Tienes 20 segundos para volver al barco.");
					TimerDejarTrabajar[playerid] = SetTimerEx("TimerDejarTrabajarF", 20000, false, "i", playerid);
				}
			}
		}
		if(newstate == 2) //Es conductor
		{

			VehicleHack[playerid] ++;
			//CurrentVeh[playerid] = GetPlayerVehicleID(playerid);
			if(VehicleHack[playerid] > 3)
			{
				new string[80], Nombre[34];
				GetPlayerName(playerid, Nombre, sizeof(Nombre));
				format(string, sizeof(string), "* %s ha sido kickeado automáticamente por hacks de vehículos.", Nombre);
				SendClientMessageToAll(Rojo, string);
				printf(string);
				KickL(playerid);
				VehicleHack[playerid] = 0;
				return 1;
			}
			TextDrawShowForPlayer(playerid,box[playerid]); //Velocímetro
			TextDrawShowForPlayer(playerid,vvel[playerid]);
			TextDrawShowForPlayer(playerid,fuel[playerid]);
            if(IsACocheRuso(GetPlayerVehicleID(playerid))) // Es coche Ruso
            {
                if(PlayerInfo[playerid][pFaccion] != 11){SendClientMessage(playerid, Rojo, "* No formas parte de la facción Mafia Rusa."); RemovePlayerFromVehicle(playerid); return 1;}
				return 1;
			}
            if(IsACocheLCN(GetPlayerVehicleID(playerid))) // Es coche LCN
            {
                if(PlayerInfo[playerid][pFaccion] != 7){SendClientMessage(playerid, Rojo, "* No formas parte de la facción La Cosa Nostra."); RemovePlayerFromVehicle(playerid); return 1;}
				return 1;
			}
            if(IsACocheYKZ(GetPlayerVehicleID(playerid))) // Es coche Yakuza
            {
                if(PlayerInfo[playerid][pFaccion] != 10){SendClientMessage(playerid, Rojo, "* No formas parte de la facción Yakuza."); RemovePlayerFromVehicle(playerid); return 1;}
				return 1;
			}
			if(CocheGOB(GetPlayerVehicleID(playerid))) //Es coche del gobierno
			{
                if(PlayerInfo[playerid][pFaccion] != 3){SendClientMessage(playerid, Rojo, "* No formas parte de la facción Gobierno."); RemovePlayerFromVehicle(playerid); return 1;}
				return 1;
			}
			if(CocheLSN(GetPlayerVehicleID(playerid))) //Es coche del LSRTV
			{
                if(PlayerInfo[playerid][pFaccion] != 4){SendClientMessage(playerid, Rojo, "* No formas parte de la facción CNN."); RemovePlayerFromVehicle(playerid); return 1;}
				if(PlayerInfo[playerid][pServicioCNN] != 1){SendClientMessage(playerid, Rojo, "* No estás de servicio como CNN."); RemovePlayerFromVehicle(playerid); return 1;}
				return 1;
			}
			if(IsACocheLSMD(GetPlayerVehicleID(playerid))) //Es coche del LSMD
			{
                if(PlayerInfo[playerid][pFaccion] != 2){SendClientMessage(playerid, Rojo, "* No formas parte de la facción LSMD."); RemovePlayerFromVehicle(playerid); return 1;}
				if(PlayerInfo[playerid][pServicioLSMD] != 1){SendClientMessage(playerid, Rojo, "* No estás de servicio como LSMD."); RemovePlayerFromVehicle(playerid); return 1;}
				return 1;
			}
			else
			{
				switch(GetVehicleModel(GetPlayerVehicleID(playerid)))
				{
				    case 519:
					{
						if(PlayerInfo[playerid][pNivelPiloto] < 2)
						{
			   			SendClientMessage(playerid, Rojo, "* Necesitas ser nivel 2 de piloto para utilizar este avión.");
						RemovePlayerFromVehicle(playerid);
						}
				    }
			        case 553:
					{
						if(PlayerInfo[playerid][pNivelPiloto] < 3)
						{
			   			SendClientMessage(playerid, Rojo, "* Necesitas ser nivel 3 de piloto para utilizar este avión.");
						RemovePlayerFromVehicle(playerid);
						}
				    }
				}
			}
			if(IsACocheTaller(GetPlayerVehicleID(playerid))) //Es coche de Mecánicos.
			{
                if(PlayerInfo[playerid][pFaccion] != 5){SendClientMessage(playerid, Rojo, "* No formas parte de la facción Mecánicos."); RemovePlayerFromVehicle(playerid); return 1;}
				if(PlayerInfo[playerid][pServicioWCST] != 1){SendClientMessage(playerid, Rojo, "* No estás de servicio como Mecánico."); RemovePlayerFromVehicle(playerid); return 1;}
				if(PlayerInfo[playerid][pRango] != 3){SendClientMessage(playerid, Rojo, "* No eres rango 3 o superior."); RemovePlayerFromVehicle(playerid); return 1;}
				return 1;
			}
		    if(CocheAutoescuelaCond(GetPlayerVehicleID(playerid))) //autoescuela conducir
		    {
				if(EnAutoEscuela[playerid] != 1){SendClientMessage(playerid, Rojo, "* No estás haciendo un examen de conducción."); RemovePlayerFromVehicle(playerid); return 1;}
				if(CheckPointAutoEscuela[playerid] != 0){return 1;}
				SendClientMessage(playerid, Blanco, "Realiza el recorrido pasando por los chekpoints.");
				SendClientMessage(playerid, Blanco, "No vayas a más de 70Km/h ni dañes el vehículo.");
				KillTimer(MaxTiempoAutoEscuelaTimer[playerid]);
				MaxTiempoAutoEscuelaTimer[playerid] = SetTimerEx("MaxTiempoAutoEscuela", 600000, false, "i", playerid);
				CheckPointAutoEscuela[playerid] = 0;
                EnAutoEscuela[playerid] = 1;
				SetPlayerCheckpoint(playerid, ChecksPracticoCoche[0][0], ChecksPracticoCoche[0][1], ChecksPracticoCoche[0][2], 5.0);
			}
			if(CocheAutoescuelaAvion(GetPlayerVehicleID(playerid))) //autoescuela pilotar
			{
				if(EnAutoEscuela[playerid] != 2){SendClientMessage(playerid, Rojo, "* No estás haciendo un examen de aviación."); RemovePlayerFromVehicle(playerid); return 1;}
				if(CheckPointAutoEscuela[playerid] != 0){return 1;}
				SendClientMessage(playerid, Blanco, "Realiza el recorrido pasando por los chekpoints en menos de 5 minutos.");
				KillTimer(MaxTiempoAutoEscuelaTimer[playerid]);
				MaxTiempoAutoEscuelaTimer[playerid] = SetTimerEx("MaxTiempoAutoEscuela", 300000, false, "i", playerid);
				CheckPointAutoEscuela[playerid] = 0;
				SetPlayerCheckpoint(playerid, ChecksPracticoAvion[0][0], ChecksPracticoAvion[0][1], ChecksPracticoAvion[0][2], 5.0);
			}
			if(CocheAutoescuelaBarco(GetPlayerVehicleID(playerid))) //autoescuela navegar
			{
				if(EnAutoEscuela[playerid] != 3){SendClientMessage(playerid, Rojo, "* No estás haciendo un examen de navegación."); RemovePlayerFromVehicle(playerid); return 1;}
				if(CheckPointAutoEscuela[playerid] != 0){return 1;}
				SendClientMessage(playerid, Blanco, "Realiza el recorrido pasando por los chekpoints en menos de 3 minutos y sin dañar la embarcación.");
				KillTimer(MaxTiempoAutoEscuelaTimer[playerid]);
				MaxTiempoAutoEscuelaTimer[playerid] = SetTimerEx("MaxTiempoAutoEscuela", 180000, false, "i", playerid);
				CheckPointAutoEscuela[playerid] = 0;
				SetPlayerRaceCheckpoint(playerid, 0, ChecksPracticoBarco[0][0], ChecksPracticoBarco[0][1], ChecksPracticoBarco[0][2], ChecksPracticoBarco[1][0], ChecksPracticoBarco[1][1], ChecksPracticoBarco[1][2], 5.0);
			}
			if(IsACombine(GetPlayerVehicleID(playerid)))
			{
				if(PlayerInfo[playerid][pTrabajo] != 2){SendClientMessage(playerid, Rojo, "* No trabajas de cosechador."); RemovePlayerFromVehicle(playerid); return 1;}
				if(Trabajando[playerid] == 0){SendClientMessage(playerid, Rojo, "* No estás trabajando. Utiliza '/Trabajar' primero."); RemovePlayerFromVehicle(playerid); return 1;}
				SendClientMessage(playerid, Verde, "Pasa por los checkpoints con la cosechadora.");
				if(Cosechado[playerid] == 0)
				{
					new rand = random(sizeof(ChecksCosechador));
					SetPlayerCheckpoint(playerid, ChecksCosechador[rand][0], ChecksCosechador[rand][1], ChecksCosechador[rand][2], 5.0);
					Cosechado[playerid] ++;
				}
				KillTimer(TimerDejarTrabajar[playerid]);
				return 1;
			}
			if(IsATaxi(GetPlayerVehicleID(playerid)))
			{
				if(PlayerInfo[playerid][pTrabajo] != 3){SendClientMessage(playerid, Rojo, "* No eres taxista."); RemovePlayerFromVehicle(playerid); return 1;}
				if(Trabajando[playerid] == 0){SendClientMessage(playerid, Rojo, "* No estás de servicio. Utiliza '/Trabajar' primero."); RemovePlayerFromVehicle(playerid); return 1;}
				return 1;
			}
			if(IsAvionPiloto(GetPlayerVehicleID(playerid)))
			{
				if(PlayerInfo[playerid][pTrabajo] != 1){SendClientMessage(playerid, Rojo, "* No eres piloto."); RemovePlayerFromVehicle(playerid); return 1;}
				if(Trabajando[playerid] == 0){SendClientMessage(playerid, Rojo, "* No estás trabajando. Utiliza '/Trabajar' primero."); RemovePlayerFromVehicle(playerid); return 1;}
				return 1;
			}
			if(IsAutoPiloto(GetPlayerVehicleID(playerid)))
			{
				if(PlayerInfo[playerid][pTrabajo] != 1){SendClientMessage(playerid, Rojo, "* No eres piloto."); RemovePlayerFromVehicle(playerid); return 1;}
				if(Trabajando[playerid] == 0){SendClientMessage(playerid, Rojo, "* No estás trabajando. Utiliza '/Trabajar' primero."); RemovePlayerFromVehicle(playerid); return 1;}
				return 1;
			}
			if(IsABarcoPesca(GetPlayerVehicleID(playerid))) //Pescador
			{
				if(PlayerInfo[playerid][pTrabajo] != 5){SendClientMessage(playerid, Rojo, "* No trabajas de pescador."); RemovePlayerFromVehicle(playerid); return 1;}
				if(Trabajando[playerid] == 0){SendClientMessage(playerid, Rojo, "* No estás trabajando. Utiliza '/Trabajar' primero."); RemovePlayerFromVehicle(playerid); return 1;}
				SendClientMessage(playerid, Verde, "Ve a los puntos de pesca a ver qué encuentras. Con un poco de suerte conseguirás una buena pesca.");
				if(PescaRecogida[playerid] == 0)
				{

					new rand = random(sizeof(ChecksPescador));
					SetPlayerCheckpoint(playerid, ChecksPescador[rand][0], ChecksPescador[rand][1], ChecksPescador[rand][2], 5.0);
					PescaRecogida[playerid] ++;
				}
				KillTimer(TimerDejarTrabajar[playerid]);
				return 1;
			}
		}
		return 1;
	}
	public OnPlayerEnterCheckpoint(playerid)
	{
		new autoid = GetPlayerVehicleID(playerid);
		if(IsPlayerInRangeOfPoint(playerid, 5.0, 2274.1028,-2345.5371,13.5469) || IsPlayerInRangeOfPoint(playerid, 8.0, 2294.3999000,-2447.8000500,0.0000000) || IsPlayerInRangeOfPoint(playerid, 8.0, 2286.8096,-2423.5090,3.0000)){DisablePlayerCheckpoint(playerid); return 1;} //Depósito Ocean Docks
		else if(LocalizarVeh[playerid] > 0){SendClientMessage(playerid, Amarillo, "Gracias por usar nuestro sistema de rastreo de vehículos por GPS."); LocalizarVeh[playerid] = 0; DisablePlayerCheckpoint(playerid); return 1;}
		else if(AtendiendoInforme[playerid] != NOEXISTE) //Informes LSED
		{
    		for(new i = 0; i < MAX_LSEDINFORMES; i++)
			{
				if(InformeEmergencias[i][ieJugador] == AtendiendoInforme[playerid])
				{
					KillTimer(InformeEmergencias[i][ieTimer]);
					InformeEmergencias[i][ieEstado] = NOEXISTE;
					InformeEmergencias[i][ieJugador] = NOEXISTE;
					break;
				}
			}
			DisablePlayerCheckpoint(playerid);
		}
		else if(EnAutoEscuela[playerid] == 1 && CocheAutoescuelaCond(GetPlayerVehicleID(playerid))) //Autoescuela conducción
		{
			SetCheckPointAutoescuela(playerid);
			if(CheckPointAutoEscuela[playerid] >= 25)
			{
				new Float:cVida, coche;
				coche = GetPlayerVehicleID(playerid);
				GetVehicleHealth(coche, cVida);
				if(cVida < 900) //Si el vehículo tiene más de 10% de daños
				{
					SendClientMessage(playerid, Rojo, "* Has dañado demasiado el vehículo y has suspendido.");
					KillTimer(MaxTiempoAutoEscuelaTimer[playerid]);
					GameTextForPlayer(playerid, "~r~Suspenso", 1000, 6);
					GivePlayerMoneyAC(playerid, -100);
					CheckPointAutoEscuela[playerid] = 0;
					EnAutoEscuela[playerid] = 0;
					SetVehicleToRespawn(coche);
					DisablePlayerCheckpoint(playerid);
					return 1;
				}
				SendClientMessage(playerid, Verde, "Parte práctica aprobada.");
				SendClientMessage(playerid, Amarillo, "Has conseguido superar el examen de conducción.");
				SendClientMessage(playerid, Amarillo, "Ahora tienes tu licencia de conducción por 700$.");
				KillTimer(MaxTiempoAutoEscuelaTimer[playerid]);
				PlayerInfo[playerid][pLicConduccion] = 1;
				GivePlayerMoneyAC(playerid, -700);
				CheckPointAutoEscuela[playerid] = 0;
				EnAutoEscuela[playerid] = 0;
				SetVehicleToRespawn(coche);
				DisablePlayerCheckpoint(playerid);
				return 1;
			}
		}
		else if(EnAutoEscuela[playerid] == 2 && CocheAutoescuelaAvion(GetPlayerVehicleID(playerid))) //Autoescuela aviación
		{
			if(CheckPointAutoEscuela[playerid] == 0 || CheckPointAutoEscuela[playerid] >= 17){SetCheckPointAutoescuela(playerid);}
			if(CheckPointAutoEscuela[playerid] >= 17)
			{
				new coche;
				coche = GetPlayerVehicleID(playerid);
				SendClientMessage(playerid, Verde, "Examen aprobado.");
				SendClientMessage(playerid, Amarillo, "Has conseguido superar el examen de aviación.");
				SendClientMessage(playerid, Amarillo, "Ahora tienes tu licencia de aviación por 7000$.");
				KillTimer(MaxTiempoAutoEscuelaTimer[playerid]);
				PlayerInfo[playerid][pLicAviacion] = 1;
				GivePlayerMoneyAC(playerid, -7000);
				CheckPointAutoEscuela[playerid] = 0;
				EnAutoEscuela[playerid] = 0;
				SetVehicleToRespawn(coche);
				DisablePlayerCheckpoint(playerid);
				return 1;
			}
		}
		else if(Trabajando[playerid] == 1) //Trabajando
		{
			if(PlayerInfo[playerid][pTrabajo] == 2 && IsACombine(GetPlayerVehicleID(playerid))) //Cosechador
			{
				if(Cosechado[playerid] < 16)
				{
					new rand = random(sizeof(ChecksCosechador));
					SetPlayerCheckpoint(playerid, ChecksCosechador[rand][0], ChecksCosechador[rand][1], ChecksCosechador[rand][2], 5.0);
					Cosechado[playerid] ++;
					return 1;
				}
				if(Cosechado[playerid] == 16)
				{
					SendClientMessage(playerid, Blanco, "Ya has cosechado suficiente. Vuelve para recibir tu paga.");
					SetPlayerCheckpoint(playerid, -389.8043,-1476.0060,25.7266, 5.0);
					Cosechado[playerid] ++;
					return 1;
				}
		 	    if(Cosechado[playerid] > 16)
		 	    {
		 	        SendClientMessage(playerid, Blanco, "Has recibido {00FF00}450${FFFFFF} por tu trabajo.");
		 	        GivePlayerMoneyAC(playerid, 450);
		 	        Cosechado[playerid] = 0;
		 	        Trabajando[playerid] = 0;
		 	        SetPlayerSkin(playerid, PlayerInfo[playerid][pSkin]);
		 	        SetVehicleToRespawn(GetPlayerVehicleID(playerid));
		 	        DisablePlayerCheckpoint(playerid);
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Debes tener una mano vacía."); return 1;}
					new probabilidad = random(20), premio;
					if(probabilidad > 5) //Semilla marihuana
					{
						premio = 85;
						SendClientMessage(playerid, Blanco, "* Premio: Ganaste un/a {fce80c}Semillas de Marihuana(10).");
						new cantidad = 10 + random(20);
						if(PlayerInfo[playerid][pManoDer] == 0)
						{
							PlayerInfo[playerid][pManoDer] = premio, PlayerInfo[playerid][pManoDerCant] = cantidad;
							PonerObjeto(playerid, 1, premio);
						}
						else if(PlayerInfo[playerid][pManoIzq] == 0)
						{
							PlayerInfo[playerid][pManoIzq] = premio, PlayerInfo[playerid][pManoIzqCant] = cantidad;
							PonerObjeto(playerid, 2, premio);
						}
					}
					else if(probabilidad > 10) //Dinero
					{
						GivePlayerMoneyAC(playerid, 150);
						SendClientMessage(playerid, Blanco, "* Premio: Ganaste un/a {fce80c}dinero extra (150).");
					}
					else if(probabilidad > 1) //Escopeta
					{
                        SendClientMessage(playerid, Blanco, "* Premio: Ganaste un/a {fce80c}Escopeta Normal.");
						PlayerInfo[playerid][pEspalda] = 22;
						PlayerInfo[playerid][pEspaldaCant] = ObjetoInfo[22][Capacidad];
						PonerObjeto(playerid, 3, 22);
					}
					return 1;
		 	    }
		    }
			if(PlayerInfo[playerid][pTrabajo] == 3 && IsATaxi(GetPlayerVehicleID(playerid))){DisablePlayerCheckpoint(playerid); return 1;} //Taxista
			if(PlayerInfo[playerid][pTrabajo] == 5 && IsABarcoPesca(GetPlayerVehicleID(playerid))) //Pescador
			{

				new string[60];
				if(PescaRecogida[playerid] > 11)
				{
					format(string, sizeof(string), "Has recibido {00FF00}%d${FFFFFF} por tu trabajo.", DineroPesca[playerid]);
					SendClientMessage(playerid, Blanco, string);
					GivePlayerMoneyAC(playerid, DineroPesca[playerid]);
					PescaRecogida[playerid] = 0;
					DineroPesca[playerid] = 0;
					Trabajando[playerid] = 0;
					SetVehicleToRespawn(GetPlayerVehicleID(playerid));
					DisablePlayerCheckpoint(playerid);
					SetPlayerPos(playerid, 2956.0686,-1523.8318,2.3078);
					return 1;
				}
				TogglePlayerControllable(playerid, 0);
				GameTextForPlayer(playerid, "~r~Pescando...", 15000, 3);
				DisablePlayerCheckpoint(playerid);
				SetVehicleVelocity(GetPlayerVehicleID(playerid), 0, 0, 0);
				SetTimerEx("Pescar", 15000, false, "i", playerid);
				return 1;
			}
		}
		if(IsPlayerInRangeOfPoint(playerid, 15.0,-1371.7418,-217.5301,15.3426)||IsPlayerInRangeOfPoint(playerid, 15.0,1576.4979,1352.2899,10.4328)||IsPlayerInRangeOfPoint(playerid, 15.0,1853.7726,-2403.0959,14.7489))
		{
		if(IsAvionPiloto(autoid) && GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
		{
		if(TrabajoAvion[playerid] != 1) return DisablePlayerCheckpoint(playerid);
		if(AvionID[playerid] != autoid) return SendClientMessage(playerid, Blanco,"No estas utilizando el avión que cargaste");
	 	DisablePlayerCheckpoint(playerid);
	  	VarAvion[playerid] = 10;
	   	SendClientMessage(playerid,Amarillo,"Los pasajeros estan bajando del avión, espera unos segundos");
		GameTextForPlayer(playerid, "~y~DESCARGANDO PASAJEROS...", 1000, 1);
	    TCV2[playerid] = SetTimerEx("AvionDescargado",1000,true,"d",playerid);
	    TogglePlayerControllable(playerid,0);
	  	}
		}
		if(IsPlayerInRangeOfPoint(playerid, 15.0,1568.6259,1462.6353,12.0246)||IsPlayerInRangeOfPoint(playerid, 15.0,-1292.1914,-357.9675,13.7137)||IsPlayerInRangeOfPoint(playerid, 15.0,1725.9821,-2419.0105,14.7492))
	 	{
	 	    if(IsAvionPiloto(autoid) && GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
			{
			if(cavion[playerid] == 1) return DisablePlayerCheckpoint(playerid);
			DisablePlayerCheckpoint(playerid);
		    VarAvion[playerid] = 0;
		    SendClientMessage(playerid,Amarillo,"Los pasajeros estan subiendo al avión, espera unos segundos");
		    GameTextForPlayer(playerid, "~y~CARGANDO PASAJEROS...", 1000, 1);
		    TCV[playerid] = SetTimerEx("AvionCargado",1000,true,"d",playerid);
		    TogglePlayerControllable(playerid,0);
		    AvionID[playerid] = autoid;
		    cavion[playerid] = 1;
		    }
		}
		else if(RealizandoMision[playerid] == 1) //Misión conseguir droga
		{
			if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Debes tener una mano vacía."); return 1;}
			new probabilidad = random(20), droga;
			if(probabilidad > 10) //Semilla marihuana
			{
				droga = 85;
			}
			if(probabilidad > 5) //Marihuana
			{
				droga = 75;
			}
			else if(probabilidad > 3) //Crack
			{
				droga = 77;
			}
			else if(probabilidad > 1) //cocaina
			{
				droga = 76;
			}
			else //Heroína
			{
				droga = 78;
			}
			new cantidad = 10 + random(20);
			if(PlayerInfo[playerid][pManoDer] == 0)
			{
				PlayerInfo[playerid][pManoDer] = droga, PlayerInfo[playerid][pManoDerCant] = cantidad;
				PonerObjeto(playerid, 1, droga);
			}
			else if(PlayerInfo[playerid][pManoIzq] == 0)
			{
				PlayerInfo[playerid][pManoIzq] = droga, PlayerInfo[playerid][pManoIzqCant] = cantidad;
				PonerObjeto(playerid, 2, droga);
			}
			ProxDetector(15.0, playerid, "Desconocido: Toma, haz lo que quieras con eso.", Chat1,Chat2,Chat3,Chat4,Chat5);
			RealizandoMision[playerid] = 0;
			DisablePlayerCheckpoint(playerid);
			return 1;
		}
		else if(RealizandoMision[playerid] == 2) //Misión conseguir arma
		{
			if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Debes tener una mano vacía."); return 1;}
			new probabilidad = random(20), arma;
			if(probabilidad > 4) //M1911
			{
				arma = 19;
			}
			else if(probabilidad > 3) //D. Eagle
			{

				arma = 21;
			}
			else if(probabilidad > 1) //Tec-9
			{
				arma = 29;
			}
			else //UZI
			{
				arma = 25;
			}
			if(PlayerInfo[playerid][pManoDer] == 0)
			{
				PlayerInfo[playerid][pManoDer] = arma, GivePlayerWeapon(playerid, ObjetoInfo[arma][IDArma], ObjetoInfo[arma][Capacidad]), PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[arma][Capacidad];
				PonerObjeto(playerid, 1, arma);
			}
			else if(PlayerInfo[playerid][pManoIzq] == 0)
			{
				PlayerInfo[playerid][pManoIzq] = arma, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[arma][Capacidad];
				PonerObjeto(playerid, 2, arma);
			}
			ProxDetector(15.0, playerid, "Desconocido: Tírala, escóndela o haz lo que quieras. No nos hemos visto.", Chat1,Chat2,Chat3,Chat4,Chat5);
			RealizandoMision[playerid] = 0;
			DisablePlayerCheckpoint(playerid);
		}
		else if(RealizandoMision[playerid] == 3) //Misión pintar
		{
			if(PlayerInfo[playerid][pManoDer] != 34 && PlayerInfo[playerid][pManoIzq] != 34){SendClientMessage(playerid, Rojo, "* Necesitas un bote de spray con pintura para pintar el graffiti."); return 1;}
			if(!((PlayerInfo[playerid][pManoDer] == 34 && PlayerInfo[playerid][pManoDerCant] > 0) || (PlayerInfo[playerid][pManoIzq] == 34 && PlayerInfo[playerid][pManoIzqCant] > 0))){SendClientMessage(playerid, Rojo, "* Necesitas un bote de spray con pintura para pintar el graffiti."); return 1;}
			if(PlayerInfo[playerid][pManoDer] == 34)
			{
				if(PlayerInfo[playerid][pManoDerCant] > 50)
				{
					GivePlayerWeapon(playerid, ObjetoInfo[PlayerInfo[playerid][pManoDer]][IDArma], -50), PlayerInfo[playerid][pManoDerCant] -= 50;
				}
				else
				{
					RemovePlayerWeapon(playerid, ObjetoInfo[PlayerInfo[playerid][pManoDer]][IDArma]), PlayerInfo[playerid][pManoDerCant] = 0;
				}
			}
			else if(PlayerInfo[playerid][pManoIzq] == 34)
			{
				if(PlayerInfo[playerid][pManoIzqCant] > 50)
				{
					PlayerInfo[playerid][pManoIzqCant] -= 50;
				}
				else
				{
					RemovePlayerWeapon(playerid, ObjetoInfo[PlayerInfo[playerid][pManoIzq]][IDArma]), PlayerInfo[playerid][pManoIzqCant] = 0;
				}
			}
			new string[60];
            format(string, sizeof(string), "* %s comienza a pintar un graffiti en el muro.", GetPlayerNameRP(playerid));
			ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
			SendClientMessage(playerid, Naranja, "* Utiliza '/DPintar' para dejar de pintar. Esto cancelará el recado.");
			RealizandoMision[playerid] = 0;
			DisablePlayerCheckpoint(playerid);
			TogglePlayerControllable(playerid, 0);
			SetTimerEx("PintarGraffiti", 20000, false, "i", playerid);
			ApplyAnimation(playerid,"SPRAYCAN","spraycan_fire",4.1,1,1,1,1,22000,1);
			new Float:posicion[3];
			GetPlayerPos(playerid, posicion[0], posicion[1], posicion[2]);
			for(new i = 0; i < MAX_PLAYERS; i++)
			{
				if(IsPlayerConnected(i) && i != INVALID_PLAYER_ID)
				{
					if(PlayerInfo[i][pFaccion] == 1 && PlayerInfo[i][pServicioPD] > 0)
					{
						SetPlayerCheckpoint(i, posicion[0], posicion[1], posicion[2], 4.0);
						SendClientMessage(i, TEAM_BLUE_COLOR, "[Radio] - {FFFFFF}Central: Una banda está haciendo pintadas por las calles. Acudan a la posición marcada.");
					}
				}
			}
        }
		else{DisablePlayerCheckpoint(playerid);}
		return 1;
	}

	public OnPlayerLeaveCheckpoint(playerid)
	{
	return 1;
	}

	public OnPlayerEnterRaceCheckpoint(playerid)
	{
		if(EnAutoEscuela[playerid] == 2 && CocheAutoescuelaAvion(GetPlayerVehicleID(playerid))) //Autoescuela aviación
		{
			if(CheckPointAutoEscuela[playerid] > 0 || CheckPointAutoEscuela[playerid] < 17){SetCheckPointAutoescuela(playerid);}
		}
		else if(EnAutoEscuela[playerid] == 3 && CocheAutoescuelaBarco(GetPlayerVehicleID(playerid))) //Autoescuela navegación
		{
			if(CheckPointAutoEscuela[playerid] < 21){SetCheckPointAutoescuela(playerid);}
			if(CheckPointAutoEscuela[playerid] >= 21)
			{
				new Float:cVida, coche;
				coche = GetPlayerVehicleID(playerid);
				GetVehicleHealth(coche, cVida);
				if(cVida < 900) //Si el vehículo tiene más de 10% de daños
				{
					SendClientMessage(playerid, Rojo, "* Has dañado demasiado el vehículo y has suspendido.");
					KillTimer(MaxTiempoAutoEscuelaTimer[playerid]);
					GameTextForPlayer(playerid, "~r~Suspenso", 1000, 6);
					GivePlayerMoneyAC(playerid, -100);
					CheckPointAutoEscuela[playerid] = 0;
					EnAutoEscuela[playerid] = 0;
					SetVehicleToRespawn(coche);
					DisablePlayerRaceCheckpoint(playerid);
					return 1;
				}
				SendClientMessage(playerid, Verde, "Examen aprobado.");
				SendClientMessage(playerid, Amarillo, "Has conseguido superar el examen de navegación.");
				SendClientMessage(playerid, Amarillo, "Ahora tienes tu licencia de navegación por 1000$.");
				KillTimer(MaxTiempoAutoEscuelaTimer[playerid]);
				PlayerInfo[playerid][pLicNavegacion] = 1;
				GivePlayerMoneyAC(playerid, -1000);
				CheckPointAutoEscuela[playerid] = 0;
				EnAutoEscuela[playerid] = 0;
				SetVehicleToRespawn(coche);
				DisablePlayerRaceCheckpoint(playerid);
			}
		}
		else{DisablePlayerRaceCheckpoint(playerid);}
		return 1;
	}

	public OnPlayerLeaveRaceCheckpoint(playerid)
	{
	return 1;
	}

	public OnRconCommand(cmd[])
	{
	return 1;
	}

	public OnPlayerRequestSpawn(playerid)
	{
	return 1;
	}

	public OnObjectMoved(objectid)
	{
	return 1;
	}

	public OnPlayerObjectMoved(playerid, objectid)
	{
	return 1;
	}

	public OnPlayerPickUpPickup(playerid, pickupid)
	{
	return 1;
	}

	public OnVehicleMod(playerid, vehicleid, componentid)
	{
	return 1;
	}

	public OnVehiclePaintjob(playerid, vehicleid, paintjobid)
	{
	return 1;
	}

	public OnVehicleRespray(playerid, vehicleid, color1, color2)
	{
	return 1;
	}

	public OnPlayerSelectedMenuRow(playerid, row)
	{
		new string[256];
		if(GetPlayerMenu(playerid) == restaurantes) //restaurantes
	    {
	        TogglePlayerControllable(playerid, 1);
	        switch(row)
	        {
	            case 0: //Botella de cerveza
	            {
	                new precio = 15, objeto = 61;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(restaurantes, playerid);
	            }
	            case 1: //Copa de vino
	            {
	                new precio = 15, objeto = 62;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
	                format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
					HideMenuForPlayer(restaurantes, playerid);
	            }
	            case 2: //Vaso de whisky
	            {
	                new precio = 15, objeto = 63;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
	                format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
					HideMenuForPlayer(restaurantes, playerid);
	            }
	            case 3: //Vaso de ron
	            {
	                new precio = 15, objeto = 64;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
	                format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
					HideMenuForPlayer(restaurantes, playerid);
	            }
	            case 4: //Salir
	            {
					HideMenuForPlayer(restaurantes, playerid);
	            }
	        }
	    }
		if(GetPlayerMenu(playerid) == bares) //Bares
	    {
	        TogglePlayerControllable(playerid, 1);
	        switch(row)
	        {
	            case 0: //Botella de cerveza
	            {
	                new precio = 15, objeto = 61;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(bares, playerid);
	            }
	            case 1: //Botella de agua
	            {
	                new precio = 10, objeto = 60;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(bares, playerid);
	            }
	            case 2: //Lata de fanta
	            {
	                new precio = 13, objeto = 59;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
	                format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
					HideMenuForPlayer(bares, playerid);
	            }
	            case 3: //Lata sprunk
	            {
	                new precio = 13, objeto = 58;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
	                format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
					HideMenuForPlayer(bares, playerid);
	            }
	            case 4: //Copa de vino
	            {
	                new precio = 15, objeto = 62;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
	                format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
					HideMenuForPlayer(bares, playerid);
	            }
	            case 5: //Vaso de whisky
	            {
	                new precio = 15, objeto = 63;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
	                format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
					HideMenuForPlayer(bares, playerid);
	            }
	            case 6: //Vaso de ron
	            {
	                new precio = 15, objeto = 64;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
	                format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
					HideMenuForPlayer(bares, playerid);
	            }
	            case 7: //Salir
	            {
					HideMenuForPlayer(bares, playerid);
	            }
	        }
	    }
	    if(GetPlayerMenu(playerid) == comidasrapidas) //Comidas rápidas
	    {
	        TogglePlayerControllable(playerid, 1);
	        switch(row)
	        {
	            case 0: //Lata de sprunk
	            {
	                new precio = 13, objeto = 58;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(comidasrapidas, playerid);
	            }
	            case 1: //Lata de fanta
	            {
	                new precio = 13, objeto = 59;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(comidasrapidas, playerid);
	            }
	            case 2: //Botella de agua
	            {
	                new precio = 10, objeto = 60;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
	                format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
					HideMenuForPlayer(comidasrapidas, playerid);
	            }
	            case 3: //Hamburguesa
	            {
	                new precio = 20, objeto = 65;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
	                format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
					HideMenuForPlayer(comidasrapidas, playerid);
	            }
	            case 4: //Burrito
	            {
	                new precio = 20, objeto = 66;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
	                format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
					HideMenuForPlayer(comidasrapidas, playerid);
	            }
	            case 5: //Pizza
	            {
	                new precio = 30, objeto = 67;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
	                format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
					HideMenuForPlayer(comidasrapidas, playerid);
	            }
	            case 6: //Salir
	            {
					HideMenuForPlayer(comidasrapidas, playerid);
	            }
	        }
	    }
	    if(GetPlayerMenu(playerid) == discoteca) //Discoteca
	    {
	        TogglePlayerControllable(playerid, 1);
	        switch(row)
	        {
	            case 0: //Lata de sprunk
	            {
	                new precio = 13, objeto = 58;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(discoteca, playerid);
	            }
	            case 1: //Lata de fanta
	            {
	                new precio = 13, objeto = 59;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(discoteca, playerid);
	            }
	            case 2: //Vaso de whisky
	            {
	                new precio = 13, objeto = 63;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
	                format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
					HideMenuForPlayer(discoteca, playerid);
	            }
	            case 3: //Vaso de ron
	            {
	                new precio = 13, objeto = 64;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
	                format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
					HideMenuForPlayer(discoteca, playerid);
	            }
	            case 4: //Salir
	            {
					HideMenuForPlayer(discoteca, playerid);
	            }
	        }
	    }
	    if(GetPlayerMenu(playerid) == puticlub) //Puticlubs
	    {
	        TogglePlayerControllable(playerid, 1);
	        switch(row)
	        {
	            case 0: //Botella de cerveza
	            {
	                new precio = 15, objeto = 61;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(puticlub, playerid);
	            }
	            case 1: //Vaso de whisky
	            {
	                new precio = 15, objeto = 63;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
	                format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
					HideMenuForPlayer(puticlub, playerid);
	            }
	            case 2: //Vaso de ron
	            {
	                new precio = 15, objeto = 64;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
	                format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
					HideMenuForPlayer(puticlub, playerid);
	            }
	            case 3: //Salir
	            {
					HideMenuForPlayer(puticlub, playerid);
	            }
	        }
	    }
	    if(GetPlayerMenu(playerid) == ammunation) //Ammu Nations
	    {
	        TogglePlayerControllable(playerid, 1);
	        switch(row)
	        {
	            case 0: //M1911
	            {
	                new precio = 2100, objeto = 19;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, GivePlayerWeapon(playerid, ObjetoInfo[objeto][IDArma], ObjetoInfo[objeto][Capacidad]), PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(ammunation, playerid);
	            }
	            case 1: //Cargador M1911
	            {
	                new precio = 300, objeto = 39;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(ammunation, playerid);
	            }
	            case 2: //Balas .45ACP
	            {
	                new precio = 1000, objeto = 47;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(ammunation, playerid);
	            }
	            case 3: //Remington 870
	            {
	                new precio = 4800, objeto = 22;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, GivePlayerWeapon(playerid, ObjetoInfo[objeto][IDArma], ObjetoInfo[objeto][Capacidad]), PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(ammunation, playerid);
	            }
	            case 4: //Cartuchos 12GA
	            {
	                new precio = 1200, objeto = 50;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(ammunation, playerid);
	            }
	            case 5: //Remington 700
	            {
	                new precio = 6200, objeto = 30;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, GivePlayerWeapon(playerid, ObjetoInfo[objeto][IDArma], ObjetoInfo[objeto][Capacidad]), PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(ammunation, playerid);
	            }
	            case 6: //Cargador Remington 700
	            {
	                new precio = 500, objeto = 46;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(ammunation, playerid);
	            }
	            case 7: //Balas 7.62x51mm
	            {
	                new precio = 1200, objeto = 53;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(ammunation, playerid);
	            }
	            case 8: //Salir
	            {
					HideMenuForPlayer(ammunation, playerid);
	            }
	        }
	    }
	    if(GetPlayerMenu(playerid) == menu247) //Tienda 24/7
	    {
	        TogglePlayerControllable(playerid, 1);
	        switch(row)
	        {
	            case 0: //Bolsa de doritos
	            {
	                new precio = 20, objeto = 55;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(menu247, playerid);
	            }
	            case 1: //Bolsa de patatas
	            {
	                new precio = 20, objeto = 56;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(menu247, playerid);
	            }
	            case 2: //Bolsa de nachos
	            {
	                new precio = 20, objeto = 57;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
	                format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
					HideMenuForPlayer(menu247, playerid);
	            }
	            case 3: //Lata sprunk
	            {
	                new precio = 13, objeto = 58;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
	                format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
					HideMenuForPlayer(menu247, playerid);
	            }
	            case 4: //Lata fanta
	            {
	                new precio = 13, objeto = 59;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
	                format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
					HideMenuForPlayer(menu247, playerid);
	            }
	            case 5: //Botella agua
	            {
	                new precio = 10, objeto = 60;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
	                format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
					HideMenuForPlayer(menu247, playerid);
	            }
	            case 6: //Botella cerveza
	            {
	                new precio = 15, objeto = 61;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
	                format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
					HideMenuForPlayer(menu247, playerid);
	            }
	            case 7: //Salir
	            {
					HideMenuForPlayer(menu247, playerid);
	            }
	        }
	    }
	    if(GetPlayerMenu(playerid) == tiendadeportes) //Tienda de deportes
	    {
	        TogglePlayerControllable(playerid, 1);
	        switch(row)
	        {
	            case 0: //Bate
	            {
	                new precio = 50, objeto = 5;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, GivePlayerWeapon(playerid, ObjetoInfo[objeto][IDArma], ObjetoInfo[objeto][Capacidad]), PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(tiendadeportes, playerid);
	            }
	            case 1: //Palo de golf
	            {
	                new precio = 70, objeto = 2;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, GivePlayerWeapon(playerid, ObjetoInfo[objeto][IDArma], ObjetoInfo[objeto][Capacidad]), PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(tiendadeportes, playerid);
	            }
	            case 2: //Palo de billar
	            {
	                new precio = 60, objeto = 7;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, GivePlayerWeapon(playerid, ObjetoInfo[objeto][IDArma], ObjetoInfo[objeto][Capacidad]), PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
	                format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
					HideMenuForPlayer(tiendadeportes, playerid);
	            }
	            case 3: //Salir
	            {
					HideMenuForPlayer(tiendadeportes, playerid);
	            }
	        }
	    }
	    if(GetPlayerMenu(playerid) == ferreteria) //Ferretería
	    {
	        TogglePlayerControllable(playerid, 1);
	        switch(row)
	        {
	            case 0: //Palanca
	            {
	                new precio = 100, objeto = 15;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, GivePlayerWeapon(playerid, ObjetoInfo[objeto][IDArma], ObjetoInfo[objeto][Capacidad]), PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(ferreteria, playerid);
	            }
	            case 1: //Cuchillo
	            {
	                if(PlayerInfo[playerid][pNivel] < 2){HideMenuForPlayer(ferreteria, playerid); SendClientMessage(playerid, Rojo, "* Debes ser nivel 2 para comprar este objeto."); return 1;}
	                new precio = 100, objeto = 4;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, GivePlayerWeapon(playerid, ObjetoInfo[objeto][IDArma], ObjetoInfo[objeto][Capacidad]), PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(ferreteria, playerid);
	            }
	            case 2: //Destornillador
	            {
	                new precio = 20, objeto = 74;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(ferreteria, playerid);
	            }
	            case 3: //Extintor
	            {
	                new precio = 300, objeto = 35;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, GivePlayerWeapon(playerid, ObjetoInfo[objeto][IDArma], ObjetoInfo[objeto][Capacidad]), PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(ferreteria, playerid);
	            }
	            case 4: //Spray
	            {
	                new precio = 150, objeto = 34;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, GivePlayerWeapon(playerid, ObjetoInfo[objeto][IDArma], ObjetoInfo[objeto][Capacidad]), PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(ferreteria, playerid);
	            }
	            case 5: //Pala
	            {
	                new precio = 60, objeto = 6;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, GivePlayerWeapon(playerid, ObjetoInfo[objeto][IDArma], ObjetoInfo[objeto][Capacidad]), PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(ferreteria, playerid);
	            }
	            case 6: //Salir
	            {
					HideMenuForPlayer(ferreteria, playerid);
	            }
	        }
	    }
	    if(GetPlayerMenu(playerid) == tiendaropa) //Tiendas de ropa
	    {
	        TogglePlayerControllable(playerid, 1);
	        switch(row)
	        {
	            case 0: //Skin
	            {
	                ShowModelSelectionMenu(playerid, ropa, "Lista de skins", AguamarinaOscuro, Blanco, Amarillo);
	            }
	            case 1: //Salir
	            {
					HideMenuForPlayer(tiendaropa, playerid);
	            }
	        }
	    }
	    if(GetPlayerMenu(playerid) == electronica) //Tienda electrónica
	    {
	        TogglePlayerControllable(playerid, 1);
	        switch(row)
	        {
	            case 0: //Móvil
	            {
	                new precio = 3000, objeto = 68;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(electronica, playerid);
	                new randphone = 100000 + random(899999); //Crea número de teléfono entre el 100000 y el 999999
					PlayerInfo[playerid][pTelefono] = randphone;
					format(string, sizeof(string), "Ahora tu número de teléfono es el %d", randphone);
					SendClientMessage(playerid, Blanco, string);
					SendClientMessage(playerid, Blanco, "Recuerda que puedes cambiar de número comprando otro teléfono.");
	            }
	            case 1: //Cámara
	            {
	                new precio = 400, objeto = 36;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, GivePlayerWeapon(playerid, ObjetoInfo[objeto][IDArma], ObjetoInfo[objeto][Capacidad]), PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(ferreteria, playerid);
	            }
	            case 2: //Reloj casio digital 1
	            {
	                new precio = 800, objeto = 92;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(ferreteria, playerid);
	            }
	            case 3: //gps
	            {
	                new precio = 2100, objeto = 125;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
    				if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					SendClientMessage(playerid, Verde, "Has comprado un/a GPS por 2100$");
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(ferreteria, playerid);
			    }
                case 4: //Salir
	            {
					HideMenuForPlayer(electronica, playerid);
	            }
	        }
	    }
	    if(GetPlayerMenu(playerid) == estanco) //Estanco
	    {
	        TogglePlayerControllable(playerid, 1);
	        switch(row)
	        {
	            case 0: //Caja cigarrillos
	            {
	                new precio = 20, objeto = 70;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(estanco, playerid);
	            }
	            case 1: //Mechero
	            {
					new precio = 15, objeto = 69;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(estanco, playerid);
	            }
	            case 2: //Salir
	            {
					HideMenuForPlayer(estanco, playerid);
	            }
	        }
	    }
	    if(GetPlayerMenu(playerid) == licoreria) //Licorería
	    {
	        TogglePlayerControllable(playerid, 1);
	        switch(row)
	        {
	            case 0: //Botella Whisky
	            {
	                new precio = 30, objeto = 72;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(licoreria, playerid);
	            }
	            case 1: //Botella Ron
	            {
	                new precio = 30, objeto = 71;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(licoreria, playerid);
	            }
	            case 2: //Botella cerveza
	            {
	                new precio = 20, objeto = 61;
					if(GetPlayerMoney(playerid) < precio){SendClientMessage(playerid, Rojo, "* No tienes suficiente dinero."); return 1;}
					if(PlayerInfo[playerid][pManoDer] != 0 && PlayerInfo[playerid][pManoIzq] != 0){SendClientMessage(playerid, Rojo, "* Tienes ambas manos ocupadas."); return 1;}
					if(PlayerInfo[playerid][pManoDer] == 0){PonerObjeto(playerid, 1, objeto); PlayerInfo[playerid][pManoDer] = objeto, PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];}
					else if(PlayerInfo[playerid][pManoIzq] == 0){PonerObjeto(playerid, 2, objeto); PlayerInfo[playerid][pManoIzq] = objeto, PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];}
					format(string, sizeof(string), "Has comprado un/a %s por %d$.", ObjetoInfo[objeto][NombreObjeto], precio);
					SendClientMessage(playerid, Verde, string);
					GivePlayerMoneyAC(playerid, -precio);
	                HideMenuForPlayer(licoreria, playerid);
	            }
	            case 3: //Salir
	            {
					HideMenuForPlayer(licoreria, playerid);
	            }
	        }
	    }
		return 1;
	}

	public OnPlayerExitedMenu(playerid)
	{
	    if(GetPlayerMenu(playerid) == restaurantes) TogglePlayerControllable(playerid, 1); //Restaurantes
		if(GetPlayerMenu(playerid) == bares) TogglePlayerControllable(playerid, 1); //Bares
		if(GetPlayerMenu(playerid) == comidasrapidas) TogglePlayerControllable(playerid, 1); //Comidas rápidas
		if(GetPlayerMenu(playerid) == discoteca) TogglePlayerControllable(playerid, 1); //Discotecas
		if(GetPlayerMenu(playerid) == puticlub) TogglePlayerControllable(playerid, 1); //Puticlubs
		if(GetPlayerMenu(playerid) == ammunation) TogglePlayerControllable(playerid, 1); //Ammu Nations
		if(GetPlayerMenu(playerid) == menu247) TogglePlayerControllable(playerid, 1); //24/7
		if(GetPlayerMenu(playerid) == tiendadeportes) TogglePlayerControllable(playerid, 1); //Tienda deportiva
		if(GetPlayerMenu(playerid) == ferreteria) TogglePlayerControllable(playerid, 1); //Ferretería
		if(GetPlayerMenu(playerid) == tiendaropa) TogglePlayerControllable(playerid, 1); //Tiendas de ropa
		if(GetPlayerMenu(playerid) == electronica) TogglePlayerControllable(playerid, 1); //Tienda electrónica

		if(GetPlayerMenu(playerid) == estanco) TogglePlayerControllable(playerid, 1); //Estanco
		if(GetPlayerMenu(playerid) == licoreria) TogglePlayerControllable(playerid, 1); //Licorería
		return 1;
	}

	public OnPlayerInteriorChange(playerid, newinteriorid, oldinteriorid)
	{
		new x = 0; //Sistema RECON
		while(x!=MAX_PLAYERS)
		{
		    if( IsPlayerConnected(x) &&	GetPlayerState(x) == PLAYER_STATE_SPECTATING &&
			PlayerInfo[x][pSpecID] == playerid && PlayerInfo[x][pSpecType] == ADMIN_SPEC_TYPE_PLAYER)
			{
				SetPlayerVirtualWorld(x,GetPlayerVirtualWorld(playerid));
				SetPlayerInterior(x,newinteriorid);
			}
			x++;
		}
		return 1;
	}

	public OnPlayerKeyStateChange(playerid, newkeys, oldkeys)
	{
	    Anims_OnPlayerKeyStateChange(playerid, newkeys, oldkeys);
        if(EnCatalogoVeh[playerid] != NOEXISTE) //Concesionario catalogo
		{
			if(((newkeys & KEY_JUMP) == KEY_JUMP)  && ((oldkeys & KEY_JUMP) != KEY_JUMP)) //Shift
		    {
		        TextDrawHideForPlayer(playerid, Modelo[EnCatalogoVeh[playerid]]);
				TextDrawHideForPlayer(playerid, CocheNombre[EnCatalogoVeh[playerid]]);
				TextDrawHideForPlayer(playerid, Costo[EnCatalogoVeh[playerid]]);
				TextDrawHideForPlayer(playerid, Id[EnCatalogoVeh[playerid]]);
		        EnCatalogoVeh[playerid]--;
				catalogovehiculos(playerid, PConcesionario[playerid]);
				PlayerPlaySound(playerid, 1083, 0.0, 0.0, 0.0);
				return 1;
			}
		    if(((newkeys & KEY_WALK) == KEY_WALK) && ((oldkeys & KEY_WALK) != KEY_WALK)) //Alt
		    {
		        TextDrawHideForPlayer(playerid, Modelo[EnCatalogoVeh[playerid]]);
				TextDrawHideForPlayer(playerid, CocheNombre[EnCatalogoVeh[playerid]]);
				TextDrawHideForPlayer(playerid, Costo[EnCatalogoVeh[playerid]]);
				TextDrawHideForPlayer(playerid, Id[EnCatalogoVeh[playerid]]);
		        EnCatalogoVeh[playerid]++;
				catalogovehiculos(playerid, PConcesionario[playerid]);
				PlayerPlaySound(playerid, 1083, 0.0, 0.0, 0.0);
				return 1;
			}
		    if(((newkeys & KEY_SECONDARY_ATTACK) == KEY_SECONDARY_ATTACK) && ((oldkeys & KEY_SECONDARY_ATTACK) != KEY_SECONDARY_ATTACK)) //Intro
		    {
		        TextDrawHideForPlayer(playerid, Modelo[EnCatalogoVeh[playerid]]);
				TextDrawHideForPlayer(playerid, CocheNombre[EnCatalogoVeh[playerid]]);
				TextDrawHideForPlayer(playerid, Costo[EnCatalogoVeh[playerid]]);
				TextDrawHideForPlayer(playerid, Id[EnCatalogoVeh[playerid]]);
				TextDrawHideForPlayer(playerid,fila[1]);
				TextDrawHideForPlayer(playerid,fila[2]);
				TextDrawHideForPlayer(playerid,fila[3]);
				TextDrawHideForPlayer(playerid,fila[4]);
		        TogglePlayerControllable(playerid,1);
		    	EnCatalogoVeh[playerid] = NOEXISTE;
		    	SendClientMessage(playerid, Amarillo, "Esperamos que le haya gustado algún modelo.");
		    	PlayerPlaySound(playerid, 1084, 0.0, 0.0, 0.0);
				return 1;
			}
		}
	    if(GetPlayerState(playerid) == PLAYER_STATE_SPECTATING && PlayerInfo[playerid][pSpecID] != INVALID_PLAYER_ID) //Sistema RECON
	    {
			if(newkeys == KEY_JUMP) AdvanceSpectate(playerid);
			else if(newkeys == KEY_SPRINT) ReverseSpectate(playerid);
			else if(newkeys == 4) StartSpectate(playerid, PlayerInfo[playerid][pSpecID]);
			return 1;
		}
		if(newkeys & KEY_SECONDARY_ATTACK) //Al pulsar intro F
		{
	        if(GetPlayerState(playerid) == 1)
			{
			    if(GetPlayerCajero(playerid))
			    {
			        MostrarATM(playerid, 1);
					return 1;
			    }
	        	if(GetPlayerFueraPuertaCasa(playerid)) //Está en la entrada de una casa
				{
					new h = GetPlayerFueraPuertaCasa(playerid);
					if(HouseInfo[h][hCerrada] == 1){GameTextForPlayer(playerid, "~r~Cerrado", 5000, 1);}
					else
					{
					    TogglePlayerControllable(playerid, 0);
					    SetTimerEx("Descongelar", 2000, false, "i", playerid);
					    SetPlayerPos(playerid, HouseInfo[h][hSalidaX], HouseInfo[h][hSalidaY], HouseInfo[h][hSalidaZ]);
					    SetPlayerInterior(playerid, HouseInfo[h][hInterior]);
					    SetPlayerVirtualWorld(playerid, HouseInfo[h][hVirtualWorld]);
					    return 1;
					}
				}
				if(GetPlayerDentroPuertaCasa(playerid)) //Está en la salida de una casa
				{
				    new h = GetPlayerDentroPuertaCasa(playerid);
				    if(HouseInfo[h][hInterior2] != 0) //Si el mundo exterior no es 0 congelar y descongelar
				    {
				        TogglePlayerControllable(playerid, 0);
					    SetTimerEx("Descongelar", 2000, false, "i", playerid);
				    }
				    SetPlayerPos(playerid, HouseInfo[h][hEntradaX], HouseInfo[h][hEntradaY], HouseInfo[h][hEntradaZ]);
				    SetPlayerInterior(playerid, HouseInfo[h][hInterior2]);
				    SetPlayerVirtualWorld(playerid, HouseInfo[h][hVirtualWorld2]);
				    return 1;
				}
				if(GetPlayerFueraPuertaNego(playerid)) //Está en la entrada de un negocio
				{
					new n = GetPlayerFueraPuertaNego(playerid);
					if(NegoInfo[n][nCerrado] == 1){GameTextForPlayer(playerid, "~r~Cerrado", 5000, 1);}
					else
					{
					    TogglePlayerControllable(playerid, 0);
					    SetTimerEx("Descongelar", 2000, false, "i", playerid);
					    SetPlayerPos(playerid, NegoInfo[n][nSalidaX], NegoInfo[n][nSalidaY], NegoInfo[n][nSalidaZ]);
					    SetPlayerInterior(playerid, NegoInfo[n][nInterior]);
					    SetPlayerVirtualWorld(playerid, NegoInfo[n][nVirtualWorld]);
					    return 1;
					}
				}
				if(GetPlayerDentroPuertaNego(playerid)) //Está en la salida de un negocio
				{
				    new n = GetPlayerDentroPuertaNego(playerid);
				    if(NegoInfo[n][nInterior2] != 0) //Si el mundo exterior no es 0 congelar y descongelar
				    {
				        TogglePlayerControllable(playerid, 0);
					    SetTimerEx("Descongelar", 2000, false, "i", playerid);
				    }
				    SetPlayerPos(playerid, NegoInfo[n][nEntradaX], NegoInfo[n][nEntradaY], NegoInfo[n][nEntradaZ]);
				    SetPlayerInterior(playerid, NegoInfo[n][nInterior2]);
				    SetPlayerVirtualWorld(playerid, NegoInfo[n][nVirtualWorld2]);
				    return 1;
				}
				EntrarSitioPublico(playerid); //Entrar a establecimiento
			}
		}
		if((newkeys & KEY_CTRL_BACK) || (GetPlayerState(playerid) == PLAYER_STATE_DRIVER && (newkeys & KEY_CROUCH))) //Al pulsar H
		{
	        AbrirPuerta(playerid); //Abrir puerta
	        if(GetPlayerDentroNego(playerid)) //Está en un negocio
			{
			    if(!EstaEnMostrador(playerid)){return 1;} //No está en el mostrador
			    new n = GetPlayerDentroNego(playerid);
			    if(NegoInfo[n][nTipo] == 1) //Restaurantes
				{
				    ShowMenuForPlayer(restaurantes, playerid);
					TogglePlayerControllable(playerid, 0);
				}
			    if(NegoInfo[n][nTipo] == 2) //Bar
				{
				    ShowMenuForPlayer(bares, playerid);
					TogglePlayerControllable(playerid, 0);
				}
				if(NegoInfo[n][nTipo] == 3) //Comida rápida
				{
				    ShowMenuForPlayer(comidasrapidas, playerid);
					TogglePlayerControllable(playerid, 0);
				}
				if(NegoInfo[n][nTipo] == 4) //Discotecas
				{
				    ShowMenuForPlayer(discoteca, playerid);
					TogglePlayerControllable(playerid, 0);
				}
				if(NegoInfo[n][nTipo] == 5) //Puticlubs
				{
				    ShowMenuForPlayer(puticlub, playerid);
					TogglePlayerControllable(playerid, 0);
				}
				if(NegoInfo[n][nTipo] == 7) //Ammu Nations
				{
				    if(PlayerInfo[playerid][pServicioPD] > 0){return 1;}
				    if(PlayerInfo[playerid][pLicArmas] == 0){return 1;}
				    ShowMenuForPlayer(ammunation, playerid);
					TogglePlayerControllable(playerid, 0);
				}
				if(NegoInfo[n][nTipo] == 8) //24/7
				{
				    ShowMenuForPlayer(menu247, playerid);
					TogglePlayerControllable(playerid, 0);
				}
				if(NegoInfo[n][nTipo] == 9) //Tienda deportiva
				{
				    if(PlayerInfo[playerid][pServicioPD] > 0){return 1;}
				    ShowMenuForPlayer(tiendadeportes, playerid);
					TogglePlayerControllable(playerid, 0);
				}
				if(NegoInfo[n][nTipo] == 10) //Ferretería
				{
				    if(PlayerInfo[playerid][pServicioPD] > 0){return 1;}
				    ShowMenuForPlayer(ferreteria, playerid);
					TogglePlayerControllable(playerid, 0);
				}
				if(NegoInfo[n][nTipo] == 11) //Tiendas de ropa
				{
				    ShowMenuForPlayer(tiendaropa, playerid);
					TogglePlayerControllable(playerid, 0);
				}
				if(NegoInfo[n][nTipo] == 12) //Electrónica
				{
				    ShowMenuForPlayer(electronica, playerid);
					TogglePlayerControllable(playerid, 0);
				}
				if(NegoInfo[n][nTipo] == 18) //Estanco
				{
				    ShowMenuForPlayer(estanco, playerid);
					TogglePlayerControllable(playerid, 0);
				}
				if(NegoInfo[n][nTipo] == 19) //Licorería
				{
				    ShowMenuForPlayer(licoreria, playerid);
					TogglePlayerControllable(playerid, 0);
				}
			}
		}
		if(newkeys & KEY_YES) //Al pulsar Y
		{
	        if(PlayerInfo[playerid][pServicioPD] == 0){MostrarInv(playerid);} //Abrir inventario
	        if(PlayerInfo[playerid][pManoDer] == 38 && GetPlayerWeaponAmmo(playerid, 23) == 0 && PlayerInfo[playerid][pServicioPD] > 0)
			{
			    if(TaserRecarga[playerid] != 0){SendClientMessage(playerid, Rojo, "* Espera 5 segundos antes de recargar."); return 1;}
			    new string[60];
			    format(string, sizeof(string), "* %s recarga su pistola táser (400V).", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
				GivePlayerWeapon(playerid, 23, 1);
				ApplyAnimation(playerid,"SILENCED","Silence_reload",4.1,0,1,1,0,0);
			}
		}
		if(newkeys & KEY_NO) //Al pulsar N
		{
	        if(PlayerInfo[playerid][pServicioPD] > 0 && PlayerInfo[playerid][pFaccion] == 1){MostrarCint(playerid);} //Abrir citurón (LSPD)
		}
		if(newkeys & KEY_FIRE) //Al pusar botón de ataque
		{
			if(GetPlayerState(playerid) == PLAYER_STATE_ONFOOT)
		    {
			    if(PlayerInfo[playerid][pManoDer] == 17 && GetPlayerWeapon(playerid) == 17) //Sistema de granada de gas
				{
				    new string[60];
				    format(string, sizeof(string), "* %s lanza una granada de gas.", GetPlayerNameRP(playerid));
	 	    		ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
	 	    		PlayerInfo[playerid][pManoDer] = 0, ResetPlayerWeapons(playerid);
				    for(new i=0; i < MAX_PLAYERS; i++)
				    {
						if(GetPlayersProx(9, playerid, i) && MascaraGas[i] == 0 && GetPlayerState(i) == PLAYER_STATE_ONFOOT)
						{
						    SetPlayerDrunkLevel(i, 8000);
						    ApplyAnimation(i, "PED", "GAS_CWR",4.1,1,1,1,0,4000, 1);
						    ApplyAnimation(i, "PED", "GAS_CWR",4.1,1,1,1,0,4000, 1);
							SendClientMessage(i, NaranjaOscuro, "* Han lanzado una granada de gas cerca de tí, el humo te asfixía y no te deja ver.");
							FadePlayerScreen(i, 0xb0b0b0DA, 1);
						}
				    }
				}
				if(PlayerInfo[playerid][pManoDer] == 54 && GetPlayerWeapon(playerid) == 17) //Sistema de granada cegadora
				{
				    new string[60];
				    format(string, sizeof(string), "* %s lanza una granada cegadora.", GetPlayerNameRP(playerid));
	 	    		ProxDetector(15.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
	 	    		PlayerInfo[playerid][pManoDer] = 0, ResetPlayerWeapons(playerid);
				    for(new i=0; i < MAX_PLAYERS; i++)
				    {
						if(GetPlayersProx(10, playerid, i) && PlayerInfo[i][pServicioPD] == 0 && i != playerid)
						{
						    SetPlayerDrunkLevel(i, 6500);
							SendClientMessage(i, NaranjaOscuro, "* Han lanzado una granada cegadora cerca de tí, el fogonazo te ha dejado aturdido.");
							FadePlayerScreen(i, 0xFFFFFFFF, 1);
						}
				    }
				}
		    }
		}
		if((oldkeys == KEY_FIRE) && (newkeys == 0)) //Al pulsar y soltar botón de ataque
		{
			if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER) //Encender motor de vehiculo
			{
				new car = GetPlayerVehicleID(playerid);
				if(IsABike(car)){return 1;}
				EncenderMotorF(playerid, car);
			}
			if(HaciendoPressBanca[playerid] == 1)
			{
			    RepeticionesPressBanca[playerid] ++;
			    ProgresoPressBanca[playerid] ++;
			    if(ProgresoPressBanca[playerid] >= 20)
			    {
					ApplyAnimation(playerid, "benchpress", "gym_bp_up_B", 1, 0, 0, 0, 1, 0, 1);
					ProgresoPressBanca[playerid] = 0;
			    }
			}
		}
		if(newkeys & KEY_ACTION) //Al pulsar LCTRL
		{
		    if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER) //Encender luces de vehiculo
			{
			    new car = GetPlayerVehicleID(playerid);
				new engine,lights,alarm,doors,bonnet,boot,objective;
		        GetVehicleParamsEx(car,engine,lights,alarm,doors,bonnet,boot,objective);
		        if(lights == 0)SetVehicleParamsEx(car,engine,1,alarm,doors,bonnet,boot,objective);
		        else SetVehicleParamsEx(car,engine,0,alarm,doors,bonnet,boot,objective);
	        }
		}
		if(newkeys & KEY_JUMP) //Al pulsar saltar
		{
	        if(GetPlayerState(playerid) == PLAYER_STATE_ONFOOT) //Anti BH
			{
			    if(Esposado[playerid] > 0)
			    {
			        ApplyAnimation(playerid, "GYMNASIUM", "gym_jog_falloff",4.1,0,1,1,0,0);
			    }
			}
		}
	    return 1;
	}

	public OnRconLoginAttempt(ip[], password[], success)
	{
		if(!success)
		{
		    new string[256];
			for(new x=0; x<MAX_PLAYERS; x++)
			{
			    GetPlayerIp(x, string, sizeof(string));
	            if(!strcmp(ip, string, true))
	            {
	                format(string, sizeof(string), "'%s' ha sido kickeado por fallar al intentar loguear como admin RCON.", GetPlayerNameRP(x));
	                SendAdminMessage(Aguamarina, string);
	                SendClientMessage(x, Rojo, "Has sido kickeado automáticamente por intentar loguear como admin RCON.");
	                KickL(x);
	                return 1;
	            }
			}
		    format(string, sizeof(string), "banip %s", ip);
	        SendRconCommand(string);
		}
		return 1;
	}

	public OnPlayerUpdate(playerid)
	{
	    if(PrimerSpawn[playerid] != 1 || PrimerSpawn[playerid] != 1 || JugadorLogueado[playerid] != 1){return 0;}
		//Inventario
		if(PlayerInfo[playerid][pManoDer] > 0)
		{
			if(GetPlayerWeapon(playerid) != ObjetoInfo[PlayerInfo[playerid][pManoDer]][IDArma] && GetPlayerWeaponAmmo(playerid, ObjetoInfo[PlayerInfo[playerid][pManoDer]][IDArma]) > 0)
			{
				SetPlayerArmedWeapon(playerid, ObjetoInfo[PlayerInfo[playerid][pManoDer]][IDArma]);
			}
			else if(GetPlayerWeaponAmmo(playerid, ObjetoInfo[PlayerInfo[playerid][pManoDer]][IDArma]) == 0) //Si no le queda munición
			{
				if(GetPlayerWeapon(playerid) != 0)SetPlayerArmedWeapon(playerid, 0);
			}
		}
		//Arreglo de las gafas de visión nocturna / térmica
		if(GetPlayerWeapon(playerid) == 44 || GetPlayerWeapon(playerid) == 45)
	    {
	        new keys, ud, lr;
	        GetPlayerKeys(playerid, keys, ud, lr);
	        if((keys & KEY_FIRE) && (!IsPlayerInAnyVehicle(playerid)))
	        {
	            return 0;
	        }
	    }
	    //Pinchos LPSD
	    if(GetPlayerState(playerid) == 2)
		{
			for(new i = 0; i < sizeof(ObjectsInfo); i++)
	  	    {
	  	        if(IsPlayerInRangeOfPoint(playerid, 3.0, ObjectsInfo[i][cpX], ObjectsInfo[i][cpY], ObjectsInfo[i][cpZ]) && ObjectsInfo[i][cpType] == 1)
	            {
	  	            if(ObjectsInfo[i][cpCreated] == 1)
	  	            {
	  	                new panels, doors, lights, tires;
	  	                new carid = GetPlayerVehicleID(playerid);
			            GetVehicleDamageStatus(carid, panels, doors, lights, tires);
			            tires = encode_tires(1, 1, 1, 1);
			            UpdateVehicleDamageStatus(carid, panels, doors, lights, tires);
	  	                return 0;
	  	            }
	  	        }
	  	    }
	  	    //Velocímetro
	  	    new Float:x,Float:y,Float:z,string[24],vehicleid = GetPlayerVehicleID(playerid);
			GetVehicleVelocity(vehicleid,x,y,z);
			velocidad[playerid] = floatround(floatsqroot(((x*x)+(y*y))+(z*z))*175);
			format(string,sizeof(string),"Vel.: %dKm/h",velocidad[playerid]);
			TextDrawSetString(vvel[playerid],string);
			format(string,sizeof(string),"Gas: %dL",CarInfo[vehicleid][cGas]);
			TextDrawSetString(fuel[playerid],string);
		}
	    return 1;
	}

	public OnPlayerStreamIn(playerid, forplayerid)
	{
		if(PlayerNameOff[playerid] == 1) //Nameoff
		{
			ShowPlayerNameTagForPlayer(playerid, forplayerid, 0);
		}
		if(PlayerNameOff[playerid] == 0) //Nameon
		{
			ShowPlayerNameTagForPlayer(playerid, forplayerid, 1);
		}
		return 1;
	}

	public OnPlayerStreamOut(playerid, forplayerid)
	{
	return 1;
	}

	public OnVehicleStreamIn(vehicleid, forplayerid)
	{
	return 1;
	}

	public OnVehicleStreamOut(vehicleid, forplayerid)
	{
	return 1;
	}

public OnDialogResponse(playerid, dialogid, response, listitem, inputtext[])
{
	Anims_OnDialogResponse(playerid, dialogid, response, listitem);
	if(REGISTRO_PASSWORD == dialogid){
		new string[50];
		if(!response)
		{
            KickL(playerid);
		}
		JugadorLogueado[playerid] = 1;
		strcat((PlayerInfo[playerid][pContra][0] = EOS, PlayerInfo[playerid][pContra]), inputtext, strlen(inputtext) + 1);
		format(string, sizeof(string), ""#CBLANCO"¿Qué sexo tendrá tu personaje?");
		ShowPlayerDialog(playerid, DSEXO, DIALOG_STYLE_MSGBOX,"{FFFFFF}Registro {FFFF04}- Sky RolePlay",string,"Hombre","Mujer");
		new Random = random(sizeof(RandLogin));
		SetPlayerCameraPos(playerid, RandLogin[Random][0],RandLogin[Random][1],RandLogin[Random][2]);
		SetPlayerCameraLookAt(playerid, RandLogin[Random][3],RandLogin[Random][4],RandLogin[Random][5]);
		SetPlayerPos(playerid, RandLogin[Random][6],RandLogin[Random][7],RandLogin[Random][8]);
	}
	if(DSEXO == dialogid){
		{
			new string[80];
			if(!response)
			{
                PlayerInfo[playerid][pSkin] = 56;
				PlayerInfo[playerid][pSexo] = 2;
			}
			else if(response)
			{
				PlayerInfo[playerid][pSkin] = 26;
				PlayerInfo[playerid][pSexo] = 1;
			}
			format(string, sizeof(string), ""#CBLANCO"¿Qué edad tendrá tu personaje? {FFFF04}(18 - 30 Años)");
			ShowPlayerDialog(playerid, EDAD, DIALOG_STYLE_INPUT,"{FFFFFF}Registro {FFFF04}- Sky RolePlay",string,"Aceptar","Cancelar");
		}
	}
	if(EDAD == dialogid){
		{
			new pName2[32],string[350];
			GetPlayerName(playerid, pName2, 32);
            if(response)
			{
				if(strval(inputtext) < 18 || strval(inputtext) > 30)
				{
					SendClientMessage(playerid, Amarillo, "Información: Debes colocar una edad entre los 18 años y los 30 años");
					format(string, sizeof(string), ""#CBLANCO"¿Qué edad tendrá tu personaje? {FFFF04}(18 - 30 Años)");
					ShowPlayerDialog(playerid, EDAD, DIALOG_STYLE_INPUT,"{FFFFFF}Registro {FFFF04}- Sky RolePlay",string,"Aceptar","Cancelar");
					return 1;
				}
				PlayerInfo[playerid][pEdad] = strval(inputtext);
				format(string,sizeof(string),""#CBLANCO"Debes ingresar un correo electrónico, el mismo te ayudará si pierdes tu cuenta");
				ShowPlayerDialog(playerid, DEMAIL, DIALOG_STYLE_INPUT,"{FFFFFF}Registro {FFFF04}- Sky RolePlay",string,"Aceptar","Cancelar");
			}
			if(!response) return KickL(playerid);
		}
	}
	if(DEMAIL == dialogid){
		{
			new string[100];
			if(strlen(inputtext) < 50)
			{
				if(strfind(inputtext, "@", true) == -1)
				{
					format(string,sizeof(string),""#CBLANCO"Debes ingresar un correo electrónico, el mismo te ayudará si pierdes tu cuenta");
					return ShowPlayerDialog(playerid, DEMAIL,DIALOG_STYLE_INPUT,"{FFFFFF}Registro {FFFF04}- Sky RolePlay",string,"Aceptar","Cancelar");
				}
				else {
					new sql_query[256];
					GetPlayerName(playerid, PlayerInfo[playerid][pNombre], MAX_PLAYER_NAME);
					format(sql_query, sizeof(sql_query), "INSERT INTO `usuarios` (`Nombre`, `Contra`, `Email`, `Sexo`, `Edad`, `Skin`) VALUES ('%s','%s','%s','%d','%d','%d')", PlayerInfo[playerid][pNombre], PlayerInfo[playerid][pContra],inputtext,PlayerInfo[playerid][pSexo],PlayerInfo[playerid][pEdad],PlayerInfo[playerid][pSkin]);
					mysql_query(1, sql_query);
					format(sql_query, sizeof(sql_query), "SELECT `ID` FROM `usuarios` WHERE `Nombre` = '%s' LIMIT 1;", GetPlayerNameRP(playerid));
					mysql_query(1, sql_query);
					mysql_store_result();
					PlayerInfo[playerid][pSQLID] = cache_get_field_content_int(0, "ID");
					mysql_free_result();
                    new titulo[200] = "#1: ¿Cuál sería un acto de PG?";
                    PlayAudioStreamForPlayer(playerid,"http://vol10.music-bazaar.com/samples/vol10/520/520397/preview-76ec14e787.mp3.mp3");
					ShowPlayerDialog(playerid, PREGUNTA1, DIALOG_STYLE_LIST, titulo, "A) Sacar un arma en vía pública\nB) Agredir a alguien en frente de la comisaría\nC) Caer desde una gran altura y no rolear ninguna lesión\nD) Todos se consideran PG", "Aceptar", "");
					Preguntas[playerid] = 1;
					Fallo[playerid] = 0;
					SetPlayerCameraPos(playerid, 133.2111, -1973.0588, 50.5363);
					SetPlayerCameraLookAt(playerid, 226.8999, -1939.4000, 41.2000);
					SetPlayerPos(playerid, 154.0000, -1952.0000, 11.0000);
				}
			}
			else
			{
				format(string,sizeof(string),""#CBLANCO"Debes ingresar un hotmail, el mismo te ayudará si pierdes tu cuenta");
				ShowPlayerDialog(playerid, DEMAIL,DIALOG_STYLE_INPUT,"{FFFFFF}Registro {FFFF04}- Sky RolePlay",string,"Aceptar","Cancelar");
			}
			if(!response)
			{
                KickL(playerid);
			}
		}
	}
	if(dialogid == dVehRenta)
	{
		if(!response) return RemovePlayerFromVehicle(playerid);
		if(response)
		{
			if(RentoVehID[playerid] != 0)
			{
				SendClientMessage(playerid,Rojo,"* Ya tienes un vehículo rentado.");
				RemovePlayerFromVehicle(playerid);
			}
			else
			{
				if(GetPlayerMoney(playerid) < 300)
				{
					new s[60];
					format(s,sizeof(s),"* No tienes suficiente dinero.");
					SendClientMessage(playerid,Rojo,s);
					RemovePlayerFromVehicle(playerid);
					return 1;
				}
				SendClientMessage(playerid,Blanco,"Vehículo rentado por {FFFF04}$300{FFFFFF}, esta renta durará 15 minutos máximo.{FF4E4E} (Vehículo será desrentado automáticamente).");
				SendClientMessage(playerid,Blanco, "{4785FF}Información:{FFFFFF} Para encenderle el motor presione ALT, utilice {FFFF04}/ayuda{FFFFFF} para más información.");
				RentoVehID[playerid] = GetPlayerVehicleID(playerid);
				VehRentado[GetPlayerVehicleID(playerid)] = 1;
				GivePlayerMoneyAC(playerid,-300);
				RentTime[playerid] = 900;
			}
		}
		return 1;
	}
	if(dialogid == UniformeLSMD) //Vestuario LSMD
	{
		if(!response){return 1;}
		new string[256];
		switch(listitem)
		{
			case 0: //Ropa Paramédico
			{
				if(PlayerInfo[playerid][pRango] < 1){SendClientMessage(playerid,Rojo,"* Rango insuficiente."); return 1;}
				SetPlayerSkin(playerid, 276);
				format(string, sizeof(string), "* %s coge el uniforme de paramédico.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioLSMD] = 1;
				//SetPlayerColor(playerid, TEAM_MED_COLOR);
				return 1;
			}
			case 1: //Ropa Enfermero
			{
				if(PlayerInfo[playerid][pRango] < 3){SendClientMessage(playerid,Rojo,"* Rango insuficiente."); return 1;}
				SetPlayerSkin(playerid, 275);
				format(string, sizeof(string), "* %s coge el uniforme de enfermero.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioLSMD] = 1;
				//SetPlayerColor(playerid, TEAM_MED_COLOR);
				return 1;
			}
			case 2: //Sub Director
			{
				if(PlayerInfo[playerid][pRango] < 5){SendClientMessage(playerid,Rojo,"* Rango insuficiente."); return 1;}
				SetPlayerSkin(playerid, 70);
				format(string, sizeof(string), "* %s coge el uniforme de sub director.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioLSMD] = 1;
				//SetPlayerColor(playerid, TEAM_MED_COLOR);
				return 1;
			}
			case 3: //Director
			{
				if(PlayerInfo[playerid][pRango] < 6){SendClientMessage(playerid,Rojo,"* Rango insuficiente."); return 1;}
				SetPlayerSkin(playerid, 240);
				format(string, sizeof(string), "* %s coge el uniforme de director.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioLSMD] = 1;
				//SetPlayerColor(playerid, TEAM_MED_COLOR);
				return 1;
			}
			case 4: //SkinMujer
			{
				SetPlayerSkin(playerid, 308);
				format(string, sizeof(string), "* %s coge el uniforme de mujer.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioLSMD] = 1;
				//SetPlayerColor(playerid, TEAM_MED_COLOR);
				return 1;
			}
			case 5: //
			{
				if(!(GetPlayerSkin(playerid) == 276 || GetPlayerSkin(playerid) == 275 || GetPlayerSkin(playerid) == 70 || GetPlayerSkin(playerid) == 240 || GetPlayerSkin(playerid) == 308 || PlayerInfo[playerid][pServicioLSMD] > 0)){SendClientMessage(playerid, Rojo, "* No estás de servicio."); return 1;}
				SetPlayerSkin(playerid, PlayerInfo[playerid][pSkin]);
				format(string, sizeof(string), "* %s coge su ropa y se viste.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioLSMD] = 0;
				//SetPlayerColor(playerid,Blanco2);
			}
		}
		return 1;
	}
	if(dialogid == UniformeWCST) //Vestuario Mecánico LS
	{
		if(!response){return 1;}
		new string[256];
		switch(listitem)
		{
			case 0: //Ropa Mecánico Novato
			{
				if(PlayerInfo[playerid][pRango] < 1){SendClientMessage(playerid,Rojo,"* Rango insuficiente."); return 1;}
				SetPlayerSkin(playerid, 8);
				format(string, sizeof(string), "* %s coge el uniforme de Mecánico Novato.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioWCST] = 1;
				return 1;
			}
			case 1: //Ropa Mecánico AVANZADO
			{
				if(PlayerInfo[playerid][pRango] < 2){SendClientMessage(playerid,Rojo,"* Rango insuficiente."); return 1;}
				SetPlayerSkin(playerid, 50);
				format(string, sizeof(string), "* %s coge el uniforme de Mecánico Avanzado.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioWCST] = 1;
				return 1;
			}
			case 2: //Ropa de T
			{
				if(PlayerInfo[playerid][pRango] < 3){SendClientMessage(playerid,Rojo,"* Rango insuficiente."); return 1;}
				SetPlayerSkin(playerid, 16);
				format(string, sizeof(string), "* %s coge el uniforme de Trucker.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioWCST] = 1;
				return 1;
			}
			case 3: //Ropa de Encargado
			{
				if(PlayerInfo[playerid][pRango] < 4){SendClientMessage(playerid,Rojo,"* Rango insuficiente."); return 1;}
				SetPlayerSkin(playerid, 268);
				format(string, sizeof(string), "* %s coge el uniforme de Encargado.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioWCST] = 1;
				return 1;
			}
			case 4: //Ropa de Empresario
			{
				if(PlayerInfo[playerid][pRango] < 5){SendClientMessage(playerid,Rojo,"* Rango insuficiente."); return 1;}
				SetPlayerSkin(playerid, 42);
				format(string, sizeof(string), "* %s coge el uniforme de Empresario.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioWCST] = 1;
				return 1;
			}
			case 5: //SkinMujer
			{
				SetPlayerSkin(playerid, 69);
				format(string, sizeof(string), "* %s coge el uniforme de mujer.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioWCST] = 1;
				return 1;
			}
			case 6: //
			{
				if(!(GetPlayerSkin(playerid) == 8 || GetPlayerSkin(playerid) == 50 || GetPlayerSkin(playerid) == 16 || GetPlayerSkin(playerid) == 268 || GetPlayerSkin(playerid) == 42 || GetPlayerSkin(playerid) == 69 || PlayerInfo[playerid][pServicioWCST] > 0)){SendClientMessage(playerid, Rojo, "* No estás de servicio."); return 1;}
				SetPlayerSkin(playerid, PlayerInfo[playerid][pSkin]);
				format(string, sizeof(string), "* %s coge su ropa y se viste.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioWCST] = 0;
			}
		}
		return 1;
	}
	if(dialogid == UniformeCNN) //Vestuario CNN
	{
		if(!response){return 1;}
		new string[256];
		switch(listitem)
		{
			case 0: //Ropa Becario
			{
				if(PlayerInfo[playerid][pRango] < 1){SendClientMessage(playerid,Rojo,"* Rango insuficiente."); return 1;}
				SetPlayerSkin(playerid, 188);
				format(string, sizeof(string), "* %s coge el uniforme de Reportero.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioCNN] = 1;
				return 1;
			}
			case 1: //Ropa Reportero
			{
				if(PlayerInfo[playerid][pRango] < 2){SendClientMessage(playerid,Rojo,"* Rango insuficiente."); return 1;}
				SetPlayerSkin(playerid, 20);
				format(string, sizeof(string), "* %s coge el uniforme de Periodista.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioCNN] = 1;
				return 1;
			}
			case 2: //Ropa Jefe de edición.
			{
				if(PlayerInfo[playerid][pRango] < 3){SendClientMessage(playerid,Rojo,"* Rango insuficiente."); return 1;}
				SetPlayerSkin(playerid, 46);
				format(string, sizeof(string), "* %s coge el uniforme de Jefe de edición.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioCNN] = 1;
				return 1;
			}
			case 3: //Sub Director
			{
				if(PlayerInfo[playerid][pRango] < 5){SendClientMessage(playerid,Rojo,"* Rango insuficiente."); return 1;}
				SetPlayerSkin(playerid, 70);
				format(string, sizeof(string), "* %s coge el uniforme de sub director.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioCNN] = 1;
				return 1;
			}
			case 4: //Ropa de Empresario
			{
				if(PlayerInfo[playerid][pRango] < 5){SendClientMessage(playerid,Rojo,"* Rango insuficiente."); return 1;}
				SetPlayerSkin(playerid, 290);
				format(string, sizeof(string), "* %s coge el uniforme de Director.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioCNN] = 1;
				return 1;
			}
			case 5: //SkinMujer
			{
				SetPlayerSkin(playerid, 219);
				format(string, sizeof(string), "* %s coge el uniforme de mujer.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioCNN] = 1;
				return 1;
			}
			case 6: //
			{
				if(!(GetPlayerSkin(playerid) == 188 || GetPlayerSkin(playerid) == 20 || GetPlayerSkin(playerid) == 46 || GetPlayerSkin(playerid) == 70 || GetPlayerSkin(playerid) == 290 || GetPlayerSkin(playerid) == 219 || PlayerInfo[playerid][pServicioCNN] > 0)){SendClientMessage(playerid, Rojo, "* No estás de servicio."); return 1;}
				SetPlayerSkin(playerid, PlayerInfo[playerid][pSkin]);
				format(string, sizeof(string), "* %s coge su ropa y se viste.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioCNN] = 0;
			}
		}
		return 1;
	}
	if(dialogid == DAYUDA)
	{
		if(!response) return 1;
		{
			switch(listitem)// Comprueba Si a Sido Seleccionado
			{
				case 0: // El Primer Boton Incluido
				{
				      SendClientMessage(playerid, AmarilloClaro, "' Comandos Generales '");
				      SendClientMessage(playerid, AmarilloClaro, "General: /Cuenta - /(Inv)entario (o Y) - /Bol - /Mano - /Usar - /Guardar - /Ceder - /Tirar - /Coger - /Espalda - /Cargador");
				      SendClientMessage(playerid, AmarilloClaro, "General: /Trabajo - /Comprar - /Habilidades - /Renunciar - /Comer - /Beber - /Pagar - /Mecaigo - /Reportar - /Hora - /(Int)entar");
				      SendClientMessage(playerid, AmarilloClaro, "General: /NameOFF - /BarrasOFF - /Caja - /Entrenar - /VM - /Mostrar - /AutoReparar - /MinPayDay - /Duda - /Fumar - /Entrada");
				      SendClientMessage(playerid, AmarilloClaro, "General: /(Rec)argar - /Aceptar - /ATM (o F) - /Parking - /Admins - /Licencias - /GPS - /Peaje - /Animaciones");
				}
				case 1: // Esto es el segundo boton
				{
				      SendClientMessage(playerid, AmarilloClaro, "' Comandos de Teléfono '");
				      SendClientMessage(playerid, AmarilloClaro, "Teléfono: /Llamar - /SMS - /Contestar - /Colgar - /Agenda");
				}
				case 2: // El Tercer boton
				{
				      SendClientMessage(playerid, AmarilloClaro, "' Canales IC '");
				      SendClientMessage(playerid, AmarilloClaro, "Canales: /(G)ritar - /(C)erca - /(S)usurrar - /(F)accion - /(R)adio");
				      SendClientMessage(playerid, AmarilloClaro, "Canales: /(Dep)artamentos - /(M)egafono - /B - /Me - /Do - /Estado - /MP - /Idioma");
				}
				case 3: // El Tercer boton
				{
					if(PlayerInfo[playerid][pTrabajo] == 0){SendClientMessage(playerid, Rojo, "* No tienes ningún trabajo."); return 1;}
					if(PlayerInfo[playerid][pTrabajo] == 1) //Piloto
					{
						new string[600];
						strcat(string, "{FFFFFF} Trabajo {FF0000}Piloto.\n\n");
						strcat(string, "\t{FFFFFF} Sube a un avión de tú nivel, los mismos están marcos con un texto en él que indica el nivel.\n");
						strcat(string, "\t{FFFFFF}Coloca "#CINFO"/cargar avión{FFFFFF} se te marcará un punto.\n\n");
                        strcat(string, "\t{FFFF04}Nivel 1:{FFFFFF} 10/15 Pasajeros.\n");
                        strcat(string, "\t{FFFF04}Nivel 2:{FFFFFF} 15/25 Pasajeros.\n");
                        strcat(string, "\t{FFFF04}Nivel 3:{FFFFFF} 16/33 Pasajeros.\n\n");
                        strcat(string, "\t{FFFFFF}Tu paga dependerá de los pasajeros que lleves en tu avión.\n\n");
						strcat(string, "{6FA828} Comandos\n\n");
						strcat(string, "\t{FFFFFF}/Trabajar - Renunciar\n\n");
						strcat(string, "\t{FF0000}Trabajo versión BETA(Se mejorará próximamente).\n");
						ShowPlayerDialog(playerid,dAyuda2,DIALOG_STYLE_MSGBOX,""#CINFO"Trabajo Piloto -{FFFFFF} Sky RolePlay",string,"Aceptar","Cancelar");
						return 1;
					}
					if(PlayerInfo[playerid][pTrabajo] == 2) //Cosechador
					{
						new string[600];
						strcat(string, "{FFFFFF} Trabajo {FF0000}Cosechador.\n\n");
						strcat(string, "\t{FFFFFF} Se trata de tomar una cosechadora, y comenzar a cosechar sobre el terreno indicado.\n");
						strcat(string, "\t{FFFFFF}Luego de tocar todos los Checkpoint, se deberá entregar la cosechadora.\n\n");
                        strcat(string, "{FFFF04} Recompensas\n\n");
                        strcat(string, "\t{FFFFFF}Semillas de Marihuana(10% de Posbilidad)\n");
                        strcat(string, "\t{FFFFFF}Escopeta Normal(1% de Posbilidad)\n");
                        strcat(string, "\t{FFFFFF}Dinero Extra(10% de Posbilidad)\n\n");
						strcat(string, "{6FA828} Comandos\n\n");
						strcat(string, "\t{FFFFFF}/Trabajar - Renunciar\n\n");
						strcat(string, "\t{FF0000}Trabajo versión BETA(Se mejorará próximamente).\n");
						ShowPlayerDialog(playerid,dAyuda2,DIALOG_STYLE_MSGBOX,""#CINFO"Trabajo Cosechador -{FFFFFF} Sky RolePlay",string,"Aceptar","Cancelar");
						return 1;
					}
					if(PlayerInfo[playerid][pTrabajo] == 3) //Taxista
					{
						new string[400];
						strcat(string, "{FFFFFF} Trabajo {FF0000}Taxista.\n\n");
						strcat(string, "\t{FFFFFF} Cuando un cliente suba a tu taxi, utiliza "#CINFO"/Taxi [ID]\n");
						strcat(string, "\t{FFFFFF} Para contestar el llamado de un cliente, usa "#CINFO"/LlevarTaxi\n\n");
						strcat(string, "{6FA828} Comandos\n\n");
						strcat(string, "\t{FFFFFF}/Trabajar <Tarifa> (5-20) - /Renunciar\n\n");
						strcat(string, "\t{FF0000}Trabajo versión BETA(Se mejorará próximamente).\n");
						ShowPlayerDialog(playerid,dAyuda2,DIALOG_STYLE_MSGBOX,""#CINFO"Trabajo Taxista -{FFFFFF} Sky RolePlay",string,"Aceptar","Cancelar");
						return 1;
					}
					if(PlayerInfo[playerid][pTrabajo] == 4) //Ladrón
					{
						new string[600];
						strcat(string, "{FFFFFF} Trabajo {FF0000}Ladrón.\n\n");
						strcat(string, "\t{FFFFFF} Este trabajo tiene 4 niveles, cada nivel desbloqueas nuevos comandos.\n\n");
						strcat(string, "\t{FFFFFF} Nivel 1: Para robar una casa abierta, o negocio utiliza "#CINFO"/Robar{FFFFFF}\n");
						strcat(string, "\t{FFFFFF} Nivel 2: Para forzar una puerta de casa, o negocio utiliza "#CINFO"/Forzar\n");
						strcat(string, "\t{FFFFFF} Nivel 3: Para encender un vehículo abierto, utiliza "#CINFO"/Puentear\n");
						strcat(string, "\t{FFFFFF} Nivel 4: Para desguazar un vehículo, utiliza "#CINFO"/Desguazar\n");
						strcat(string, "\t{FFFFFF} Solo puedes robar/forzar en la noche del servidor{FF0000} (20:00 hasta las 23:00)\n\n");
						strcat(string, "{6FA828} Comandos\n\n");
						strcat(string, "\t{FFFFFF}/Trabajar - /Renunciar\n\n");
						ShowPlayerDialog(playerid,dAyuda2,DIALOG_STYLE_MSGBOX,""#CINFO"Trabajo Ladrón -{FFFFFF} Sky RolePlay",string,"Aceptar","Cancelar");
						return 1;
					}
					if(PlayerInfo[playerid][pTrabajo] == 5) //Pescador
					{
						new string[600];
						strcat(string, "{FFFFFF} Trabajo {FF0000}Pescador.\n\n");
						strcat(string, "\t{FFFFFF} Consiste en tomar un barco de los que están en el muelle y ir por diferentes puntos que te marquen\n\n");
						strcat(string, "\t{FFFFFF}en el mar, con esto llenarás las redes, al finalizar devuelve el Barco. \n");
						strcat(string, "{6FA828} Comandos\n\n");
						strcat(string, "\t{FFFFFF}/Trabajar - /Renunciar\n\n");
						strcat(string, "\t{FF0000}Trabajo versión BETA(Se mejorará próximamente).\n");
						ShowPlayerDialog(playerid,dAyuda2,DIALOG_STYLE_MSGBOX,""#CINFO"Trabajo Pescador -{FFFFFF} Sky RolePlay",string,"Aceptar","Cancelar");
						return 1;
					}
				}
				case 4:
				{
					if(PlayerInfo[playerid][pFaccion] == 1) //LSPD
					{
						if(PlayerInfo[playerid][pFaccion] == 0){SendClientMessage(playerid, Rojo, "* No formas parte de una facción."); return 1;}
						SendClientMessage(playerid, AmarilloClaro, "' Comandos de Los Santos Police Department'");
						SendClientMessage(playerid, AmarilloClaro, "Facción: /Miembros - /Ap (o H) - /Celda - /Vestuario - /Armeria - /RecogerPrueba - /Esposar - /Retener - /(Ref)uerzos");
						SendClientMessage(playerid, AmarilloClaro, "Facción: /Mascara - /Laser - /Encarcelar - /Cachear - /Requisar - /Multar - /(M)egafono - /(R)adio - /(Dep)artamentos");
						SendClientMessage(playerid, AmarilloClaro, "Facción: /TrafPoner - /TrafQuitar - /TrafLimpiar - /Remolcar - /Irrumpir - /Registrar - /Confiscar - /Deposito - /Embargar");
						SendClientMessage(playerid, AmarilloClaro, "Facción: /APatio - /CPatio - /ForzarMaletero - /ForzarVehiculo - /Sir - /Bloqueof");
						return 1;
					}
					if(PlayerInfo[playerid][pFaccion] == 3) //Gobierno
					{
						SendClientMessage(playerid, AmarilloClaro, "' Comandos de Gobierno '");
						SendClientMessage(playerid, AmarilloClaro, "Facción: /Miembros - /(Gob)ierno - /F [Texto] - /(R)adio - /Vestuario - /Bloqueof");
						return 1;
					}
					if(PlayerInfo[playerid][pFaccion] == 4) //LSN
					{
						SendClientMessage(playerid, AmarilloClaro, "' Comandos de Cable News Network '");
						SendClientMessage(playerid, AmarilloClaro, "Facción: /Miembros - /Ap (o H) - /(N)oticia - /Directo - /F [Texto] - /(R)adio - /Bloqueof");
						return 1;
					}
					if(PlayerInfo[playerid][pFaccion] == 2) //LSMD
					{
						SendClientMessage(playerid, AmarilloClaro, "' Comandos de Los Santos Medical Department '");
						SendClientMessage(playerid, AmarilloClaro, "Facción: /Miembros - /Curar [ID] - /Reanimar [ID] - /F [Texto] - /(R)adio - /(M)egafono - /Informes - /Vestuario");
						SendClientMessage(playerid, AmarilloClaro, "Facción: /Bloqueof");
						return 1;
					}
					if(PlayerInfo[playerid][pFaccion] == 5) //Mecánicos
					{
						SendClientMessage(playerid, AmarilloClaro, "' Comandos de Mecánicos '");
						SendClientMessage(playerid, AmarilloClaro, "Facción: /Miembros - /Reparar - /Repintar - /Remolcar - /F [Texto] - /(R)adio - /Bloqueof");
						return 1;
					}
					if(FaccInfo[PlayerInfo[playerid][pFaccion]][fTipo] == 3) //Banda/pandilla
					{
						SendClientMessage(playerid, AmarilloClaro, "' Comandos de Bandas/Pandillas '");
						SendClientMessage(playerid, AmarilloClaro, "Facción: /Miembros - /Turf - /Distribuir - /F [Texto] - /(R)adio");
						return 1;
					}
					if(FaccInfo[PlayerInfo[playerid][pFaccion]][fTipo] == 4) //Mafia
					{
						SendClientMessage(playerid, AmarilloClaro, "' Comandos de Mafias '");
						SendClientMessage(playerid, AmarilloClaro, "Facción: /Miembros - /ContactoArmas - /ContactoDrogas - /F [Texto] - /(R)adio");
						return 1;
					}
				}
				case 5:
				{
				    static string[700];
					if (string[0] == '\0') {
					strcat(string, "{FFFFFF} Sistema de {FF0000}Propiedades.\n\n");
					strcat(string, "\t{FFFFFF} Busca una casa, y utiliza "#CINFO"/ComprarCasa.\n");
					strcat(string, "\t{FFFFFF} Para alquilar una casa en alquiler, utiliza "#CINFO"/Alquilar - /DesAlquilar.\n\n");
                    strcat(string, "{FFFFFF} Dueños de Propiedades:\n\n");
					strcat(string, "\t{FFFFFF} Para vender tú casa, utiliza "#CINFO"/VenderCasa.\n");
					strcat(string, "\t{FFFFFF} Para abrir la casa, o cerrarla debes usar, "#CINFO"/Puerta.\n");
					strcat(string, "\t{FFFFFF} Para guardar, o sacar dinero de tu casa, utiliza "#CINFO"/GuardarDinero - /SacarDinero\n");
					strcat(string, "\t{FFFFFF} Para alquilar tu casa, cambiar el precio de alquilar o desalojar, utiliza "#CINFO"/Alquilable - /Renta - /Desalojar - /DesalojarTodos\n");
					strcat(string, "\t{FFFFFF} Para guardar armas en tú casa, utiliza "#CINFO"/Armario.\n");
                    }
					ShowPlayerDialog(playerid,dAyuda2,DIALOG_STYLE_MSGBOX,""#CINFO"Casas -{FFFFFF} Sky RolePlay",string,"Aceptar","Cancelar");
					return 1;
				}
				case 6:
				{
					static string[600];
					if (string[0] == '\0') {
					strcat(string, ""#CBLANCO" Sistema de "CROJO"Negocios.\n\n");
					strcat(string, "\t"#CBLANCO" Busca un negocio, y utiliza "#CINFO"/ComprarNegocio.\n");
					strcat(string, "\t"#CBLANCO" Para comprar productos entra a un negocio, presione H o "#CINFO"/Comprar.\n\n");
                    strcat(string, ""#CBLANCO" Dueños de Negocios:\n\n");
					strcat(string, "\t"#CBLANCO" Para vender tú negocio, utiliza "#CINFO"/VenderNegocio.\n");
					strcat(string, "\t"#CBLANCO" Para abrir el negocio, o cerrarlo debes usar, "#CINFO"/Puerta.\n");
					strcat(string, "\t"#CBLANCO" Para guardar, o sacar dinero del negocio, utiliza "#CINFO"/GuardarDinero - /SacarDinero\n");
					strcat(string, "\t"#CBLANCO" Para contratar, o expulsar empleados para tú negocio, coloca "#CINFO"/Contratar - /Despedir - /DespedirTodos.\n");
					}
					ShowPlayerDialog(playerid,dAyuda2,DIALOG_STYLE_MSGBOX,""#CINFO"Negocios -{FFFFFF} Sky RolePlay",string,"Aceptar","Cancelar");
					return 1;
				}
				case 7:
				{
					static string[1180];
					if (string[0] == '\0') {
					    strcat(string, ""#CBLANCO" Sistema de "CROJO"Vehículos.\n\n");
					    strcat(string, "\t"#CBLANCO" Para encenderle o apagarle el motor, presione ALT o "#CINFO"/Motor.\n");
					    strcat(string, "\t"#CBLANCO" Para encenderle o apagarle las luces, presione la tecla LCTRL o "#CINFO"/Luces.\n");
					    strcat(string, "\t"#CBLANCO" Para colocarse el cinturón de seguridad, use "#CINFO"/Cinturon.\n\n");
					    strcat(string, ""#CBLANCO" Dueños de Vehículos:\n\n");
					    strcat(string, "\t"#CBLANCO" Busca una concesionaria, y utiliza "#CINFO"/Catalogo.\n");
					    strcat(string, "\t"#CBLANCO" Puedes prestar la llave de tu vehículo a un amigo. "#CINFO"/PrestarLlave - /TirarLlave.\n");
					    strcat(string, "\t"#CBLANCO" Para abrir el vehículo, o cerrarlo debes usar "#CINFO"/Bloqueo.\n");
					    strcat(string, "\t"#CBLANCO" Para guardarle armas en su maletero, utiliza "#CINFO"/Maletero.\n");
					    strcat(string, "\t"#CBLANCO" Podrás abrir el capó: "#CINFO"/Capo.\n");
					    strcat(string, "\t"#CBLANCO" Podrás vender tu vehículo al gobierno o a usuario cuando lo desees. "#CINFO"/VenderVeh - /VenderVehA.\n");
					    strcat(string, "\t"#CBLANCO" Para localizar tú vehículo, "#CINFO"/LocalizarVeh.\n");
					    strcat(string, "\t"#CBLANCO" Para bajar la ventanilla del coche, utiliza "#CINFO"/Ventanilla.\n");
					    strcat(string, "\t"#CBLANCO" Para sacar tu vehículo del deposito, utiliza "#CINFO"/SacarDeposito - /Desambargar.\n");
					    strcat(string, "\t"#CBLANCO" Para saber la ID del vehículo anterior que montaste o la actual, utiliza "#CINFO"/Carid - /Oldcar.\n");
					}
					ShowPlayerDialog(playerid,dAyuda2,DIALOG_STYLE_MSGBOX,""#CINFO"Vehículos -{FFFFFF} Sky RolePlay",string,"Aceptar","Cancelar");
					return 1;
				}
				case 8:
				{
					SendClientMessage(playerid, AmarilloClaro, "' Comandos de Líder '");
					SendClientMessage(playerid, AmarilloClaro, "Líder: /Reclutar - /Promover - /Expulsar");
					return 1;
				}
				case 9:
				{
					SendClientMessage(playerid, AmarilloClaro, "' Comandos de Drogas '");
					SendClientMessage(playerid, AmarilloClaro, "Drogas: /Consumir - /Plantar - /RecogerPlanta - /EliminarPlanta - /Preparar - /Fardo");
					return 1;
				}
				case 10:
				{
                    static string[1120];
					if (string[0] == '\0') {
                    strcat(string, ""#CBLANCO" Sistema de "CROJO"Necesidades.\n\n");
				    strcat(string, "\t "#CROJO"Hambre: "#CBLANCO"Indicado por la barra "#CHAMBRE"NARANJA"#CBLANCO", cuando esté llena tu jugador no tiene hambre. Esta barra baja constantemente,\n");
				    strcat(string, "\t  "#CBLANCO"y para satisfacer esta necesidad deberás ir a un restaurant, y utilizar el comando "#CINFO"/comprar o H\n");
				    strcat(string, "\t  "#CBLANCO"Cuando tu jugador pasa mucho tiempo sin comer, comienza a perder el conocimiento. Esto se manifiesta con mareos.\n\n");
				    strcat(string, "\t "#CROJO"Sed: "#CBLANCO"Indicado por la barra "#CCANSANCIO"CELESTE"#CBLANCO", cuando esta barra esté completa tu jugador no tendrá sed. Esta barra baja cada bastante tiempo,\n");
				    strcat(string, "\t  "#CBLANCO"y para satisfacer esta necesidad deberás ir a un 24/7, y utilizar "#CINFO"/comprar o H"#CBLANCO"\n");
				    strcat(string, "\t "#CBLANCO"Si tu jugador está mucho tiempo con sed, y la barra está muy baja, comenzarás a perder vida lentamente.\n\n");
				    strcat(string, "\t "#CROJO"Experiencia: "#CBLANCO"Lo indica la barra "#CGRIS"Gris"#CBLANCO", cada punto de reputación(PayDay) esta aumentará, cuando este llena significa\n");
				    strcat(string, "\t  "#CBLANCO"que subirás de nivel, después de esto se reinicia.");
					}
					ShowPlayerDialog(playerid,dAyuda2,DIALOG_STYLE_MSGBOX,""#CINFO"Necesidades -{FFFFFF} Sky RolePlay",string,"Aceptar","Cancelar");
					return 1;
				}
			}
		}
	}
	if(dialogid == dGPS)
	{
		if(!response) return 1;
		{
			if(listitem == 0)
			{
				new string[320];
				format(string,320,"{FFFFFF}Cosechador {FF0000}(Distancia: %0.0f)(Nivel 1)\n{FFFFFF}Taxista {FF0000}(Distancia: %0.0f)(Nivel 2)\n{FFFFFF}Pescador {FF0000}(Distancia: %0.0f)(Nivel 1)\n{FFFFFF}Ladrón {FF0000}(Distancia: %0.0f)(Nivel 6)\n{FFFFFF}Piloto {FF0000}(Distancia: %0.0f)(Nivel 3)",GetPlayerDistanceFromPoint(playerid,-382.5518,-1426.3771,26.2122),
				GetPlayerDistanceFromPoint(playerid,1742.9919,-1864.4597,13.5738),GetPlayerDistanceFromPoint(playerid,2956.0686,-1523.8318,2.3078),GetPlayerDistanceFromPoint(playerid,2123.2236,-1185.7349,24.0278),GetPlayerDistanceFromPoint(playerid,1956.7390,-2183.5740,13.5469));
				ShowPlayerDialog(playerid, dGPSTRABAJOS, DIALOG_STYLE_LIST, "GPS", string, "Aceptar", "Cancelar");
			}
			if(listitem == 1)
			{
				new string[250];
				format(string,250,"Hotel Midtown {FF0000}(Distancia: %0.0f)\n{FFFFFF}Hotel Resort {FF0000}(Distancia: %0.0f)",GetPlayerDistanceFromPoint(playerid,1498.4912,-1581.3987,13.5498),
				GetPlayerDistanceFromPoint(playerid,2232.6450,-1159.8384,25.8906));
				ShowPlayerDialog(playerid, dGPSHOTELES, DIALOG_STYLE_LIST, "GPS", string, "Aceptar", "Cancelar");
			}
			if(listitem == 2)
			{
				new string[250];
				format(string,250,"Autoescuela {FF0000}(Distancia: %0.0f)\n{FFFFFF}Iglesia {FF0000}(Distancia: %0.0f)\n{FFFFFF}Tienda Electrónica {FF0000}(Distancia: %0.0f)\n{FFFFFF}Escuela Aviación{FF0000}(Distancia: %0.0f)",GetPlayerDistanceFromPoint(playerid,2045.6418,-1908.1290,13.5469),
				GetPlayerDistanceFromPoint(playerid,2233.1997,-1333.3169,23.9816),GetPlayerDistanceFromPoint(playerid,1597.23,-1862.94,13.5216),GetPlayerDistanceFromPoint(playerid,2017.1357,-2274.4543,13.5969));
				ShowPlayerDialog(playerid, dGPSINTERES, DIALOG_STYLE_LIST, "GPS", string, "Aceptar", "Cancelar");
			}
			if(listitem == 3)
			{
				new string[250];
				format(string,250,"Rusty Rides {FF0000}(Distancia: %0.0f)\n{FFFFFF}Heavy Weight Trucks {FF0000}(Distancia: %0.0f)\n{FFFFFF}Gentlemen Cars {FF0000}(Distancia: %0.0f)\n{FFFFFF}Motorsport {FF0000}(Distancia: %0.0f)\n{FFFFFF}Luxury Vehicles & Co. {FF0000}(Distancia: %0.0f)",
				GetPlayerDistanceFromPoint(playerid,2131.4873,-1148.9374,24.3184),GetPlayerDistanceFromPoint(playerid,-77.5412,-1136.4923,1.0781),GetPlayerDistanceFromPoint(playerid,1410.6371,-1703.0380,13.5395),GetPlayerDistanceFromPoint(playerid,2329.6626,-2315.8853,13.5469),GetPlayerDistanceFromPoint(playerid,521.2985,-1293.2179,17.2422));
				ShowPlayerDialog(playerid, dGPSCONCESIONARIOS, DIALOG_STYLE_LIST, "GPS", string, "Aceptar", "Cancelar");
			}
				if(listitem == 4)// Tiendas de ropa
			{
				new string[250];
				format(string,250,"Binco {FF0000}(Distancia: %0.0f)\n{FFFFFF}Sub-Urban {FF0000}(Distancia: %0.0f)\n{FFFFFF}Didier Saschs {FF0000}(Distancia: %0.0f)\n{FFFFFF}Victim {FF0000}(Distancia: %0.0f)\n{FFFFFF}ZIP{FF0000}(Distancia: %0.0f)\n{FFFFFF}Pro Laps{FF0000}(Distancia: %0.0f)",
						GetPlayerDistanceFromPoint(playerid,2244.323242 , -1665.001708 , 15.476562),GetPlayerDistanceFromPoint(playerid, 2112.88 , -1211.76 , 23.9633 ),GetPlayerDistanceFromPoint(playerid,453.584, -1478.21, 30.8145),
						GetPlayerDistanceFromPoint(playerid,461.44 ,  -1500.9 ,  31.0594),GetPlayerDistanceFromPoint(playerid,1457.38 , -1137.48 ,  23.9691),
						GetPlayerDistanceFromPoint(playerid,499.675 , -1360.13 ,  16.3271));
				ShowPlayerDialog(playerid, dGPSROPA, DIALOG_STYLE_LIST, "GPS", string, "Aceptar", "Cancelar");
			}
		}
		return 1;
	}
	if(dialogid == dGPSROPA)
	{
		if(!response) return 1;
		{
			if(listitem == 0)
			{
				SetPlayerCheckpoint(playerid,2244.323242 , -1665.001708 , 15.476562, 3.0);
				SendClientMessage(playerid,Amarillo,"Se te marco la ubicación seleccionada en el radar");
			}
			if(listitem == 1)
			{
				SetPlayerCheckpoint(playerid,2112.88 , -1211.76 , 23.9633,3.0);
				SendClientMessage(playerid,Amarillo,"Se te marco la ubicación seleccionada en el radar");
			}
			if(listitem == 2)
			{
				SetPlayerCheckpoint(playerid,453.584, -1478.21, 30.8145,3.0);
				SendClientMessage(playerid,Amarillo,"Se te marco la ubicación seleccionada en el radar");
			}
			if(listitem == 3)
			{
				SetPlayerCheckpoint(playerid,461.44 ,  -1500.9 ,  31.0594,3.0);
				SendClientMessage(playerid,Amarillo,"Se te marco la ubicación seleccionada en el radar");
			}
			if(listitem == 4)
			{
				SetPlayerCheckpoint(playerid,1457.38 , -1137.48 ,  23.9691,3.0);
				SendClientMessage(playerid,Amarillo,"Se te marco la ubicación seleccionada en el radar");
			}
			if(listitem == 5)
			{
				SetPlayerCheckpoint(playerid,499.675 , -1360.13 ,  16.3271,3.0);
				SendClientMessage(playerid,Amarillo,"Se te marco la ubicación seleccionada en el radar");
			}
		}
		return 1;
	}
	if(dialogid == dGPSCONCESIONARIOS)
	{
		if(!response) return 1;
		{
			if(listitem == 0)
			{
				SetPlayerCheckpoint(playerid,2131.4873,-1148.9374,24.3184, 3.0);
				SendClientMessage(playerid,Amarillo,"Se te marco la ubicación seleccionada en el radar");
			}
			if(listitem == 1)
			{
				SetPlayerCheckpoint(playerid,-77.5412,-1136.4923,1.0781,3.0);
				SendClientMessage(playerid,Amarillo,"Se te marco la ubicación seleccionada en el radar");
			}
			if(listitem == 2)
			{
				SetPlayerCheckpoint(playerid,1410.6371,-1703.0380,13.5395,3.0);
				SendClientMessage(playerid,Amarillo,"Se te marco la ubicación seleccionada en el radar");
			}
			if(listitem == 3)
			{
				SetPlayerCheckpoint(playerid,2329.6626,-2315.8853,13.5469,3.0);
				SendClientMessage(playerid,Amarillo,"Se te marco la ubicación seleccionada en el radar");
			}
			if(listitem == 4)
			{
				SetPlayerCheckpoint(playerid,521.2985,-1293.2179,17.2422,3.0);
				SendClientMessage(playerid,Amarillo,"Se te marco la ubicación seleccionada en el radar");
			}
		}
		return 1;
	}
	if(dialogid == dGPSHOTELES)
	{
		if(!response) return 1;
		{
			if(listitem == 0)
			{
				SetPlayerCheckpoint(playerid,1498.4912,-1581.3987,13.5498, 3.0);
				SendClientMessage(playerid,Amarillo,"Se te marco la ubicación seleccionada en el radar");
			}
			if(listitem == 1)
			{
				SetPlayerCheckpoint(playerid,2232.6450,-1159.8384,25.8906,3.0);
				SendClientMessage(playerid,Amarillo,"Se te marco la ubicación seleccionada en el radar");
			}
		}
		return 1;
	}
	if(dialogid == dGPSINTERES)
	{
		if(!response) return 1;
		{
			if(listitem == 0)
			{
				SetPlayerCheckpoint(playerid,2045.6418,-1908.1290,13.5469, 3.0);
				SendClientMessage(playerid,Amarillo,"Se te marco la ubicación seleccionada en el radar");
			}
			if(listitem == 1)
			{
				SetPlayerCheckpoint(playerid,2233.1997,-1333.3169,23.9816,3.0);
				SendClientMessage(playerid,Amarillo,"Se te marco la ubicación seleccionada en el radar");
			}
			if(listitem == 2)
			{
				SetPlayerCheckpoint(playerid,1597.23,-1862.94,13.5216,3.0);
				SendClientMessage(playerid,Amarillo,"Se te marco la ubicación seleccionada en el radar");
			}
			if(listitem == 3)
			{
				SetPlayerCheckpoint(playerid,2017.1357,-2274.4543,13.5969,3.0);
				SendClientMessage(playerid,Amarillo,"Se te marco la ubicación seleccionada en el radar");
			}
		}
		return 1;
	}
	if(dialogid == dGPSTRABAJOS)
	{
		if(!response) return 1;
		{
			if(listitem == 0)
			{
				SetPlayerCheckpoint(playerid,-382.5518,-1426.3771,26.2122,3.0);
				SendClientMessage(playerid,Amarillo,"Se te marco la ubicación seleccionada en el radar");
			}
			if(listitem == 1)
			{
				SetPlayerCheckpoint(playerid,1742.9919,-1864.4597,13.5738,3.0);
				SendClientMessage(playerid,Amarillo,"Se te marco la ubicación seleccionada en el radar");
			}
			if(listitem == 2)
			{
				SetPlayerCheckpoint(playerid,2956.0686,-1523.8318,2.3078,3.0);
				SendClientMessage(playerid,Amarillo,"Se te marco la ubicación seleccionada en el radar");
			}
			if(listitem == 3)
			{
				SetPlayerCheckpoint(playerid,2123.2236,-1185.7349,24.0278,3.0);
				SendClientMessage(playerid,Amarillo,"Se te marco la ubicación seleccionada en el radar");
			}
			if(listitem == 4)
			{
				SetPlayerCheckpoint(playerid,1956.7390,-2183.5740,13.5469,3.0);
				SendClientMessage(playerid,Amarillo,"Se te marco la ubicación seleccionada en el radar");
			}
		}
		return 1;
	}
	if(dialogid == MENSAJE)
	{
		if(!response) return Kick(playerid);
		if(response)
		{
			LimpiarChat(playerid, 100);
			PlayAudioStreamForPlayer(playerid,"http://vol10.music-bazaar.com/samples/vol10/520/520397/preview-76ec14e787.mp3.mp3");
			if(Preguntas[playerid] != 1) return 1;
			new titulo[200] = "#1: ¿Cuál sería un acto de PG?";
			ShowPlayerDialog(playerid, PREGUNTA1, DIALOG_STYLE_LIST, titulo, "A) Sacar un arma en vía pública\nB) Agredir a alguien en frente de la comisaría\nC) Caer desde una gran altura y no rolear ninguna lesión\nD) Todos se consideran PG", "Aceptar", "");
		}
	}
	if(dialogid == PREGUNTA1)
	{
		if(!response) return Kick(playerid);
		if(response)
		{
			if(listitem == 0)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #1: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			if(listitem == 1)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #1: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			if(listitem == 2)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #1: Respuesta {66FF00}Correcta");
			}
			if(listitem == 3)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #1: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			Preguntas[playerid] = 2;
			if(Fallo[playerid] == 1) return Kalex(playerid);
			new titulo[170] = "#2: ¿Cuál es la definición correcta de MG?";
			ShowPlayerDialog(playerid, PREGUNTA2, DIALOG_STYLE_LIST, titulo, "A) Confusión de canales IC con OOC o viceversa\nB) Realizar un rol incorrecto\nC) Escribir anuncios sin tags\nD) Tomar información OOC para aplicarla en terreno IC", "Aceptar", "");
		}
	}
	if(dialogid == PREGUNTA2)
	{
		if(!response) return Kick(playerid);
		if(Preguntas[playerid] != 2) return 1;
		if(response)
		{
			if(listitem == 0)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #2: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			if(listitem == 1)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #2: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			if(listitem == 2)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #2: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			if(listitem == 3)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #2: Respuesta {66FF00}Correcta");
			}
			Preguntas[playerid] = 3;
			if(Fallo[playerid] == 1) return Kalex(playerid);
			new titulo[100] = "#3: ¿En qué momento se interpreta el entorno?";
			ShowPlayerDialog(playerid, PREGUNTA3, DIALOG_STYLE_LIST, titulo, "A) Cuando hay otros usuarios cerca\nB) Cuando estoy en un rol importante\nC) En todo momento, situación o localización\nB) Cuando me interese", "Aceptar", "");
		}
	}
	if(dialogid == PREGUNTA3)
	{
		if(!response) return Kick(playerid);
		if(Preguntas[playerid] != 3) return 1;
		if(response)
		{
			if(listitem == 0)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #3: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			if(listitem == 1)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #3: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			if(listitem == 2)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #3: Respuesta {66FF00}Correcta");
			}
			if(listitem == 3)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #3: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			Preguntas[playerid] = 4;
			if(Fallo[playerid] == 1) return Kalex(playerid);
			new titulo[100] = "#4: ¿Cuál es la definición de IOOC?";
			ShowPlayerDialog(playerid, PREGUNTA4, DIALOG_STYLE_LIST, titulo, "A) Agredir a un usuario erróneamente\nB) No tiene definición\nC) Insultar vía MP\nD) Insultar mediante canales OOC", "Aceptar", "");
		}
	}
	if(dialogid == PREGUNTA4)
	{
		if(!response) return Kick(playerid);
		if(Preguntas[playerid] != 4) return 1;
		if(response)
		{
			if(listitem == 0)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #4: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			if(listitem == 1)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #4: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			if(listitem == 2)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #4: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			if(listitem == 3)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #4: Respuesta {66FF00}Correcta");
			}
			Preguntas[playerid] = 5;
			if(Fallo[playerid] == 1) return Kalex(playerid);
			new titulo[100] = "#5: Si alguien te insulta por medio IC ¿qué harías?";
			ShowPlayerDialog(playerid, PREGUNTA5, DIALOG_STYLE_LIST, titulo, "A) Lo mato o golpeo\nB) Saco mi arma y lo amenazo, nadie debe insultarme\nC) Actuo tal y como lo haría mi personaje\nD) No le hago caso", "Aceptar", "");
		}
	}
	if(dialogid == PREGUNTA5)
	{
		if(!response) return Kick(playerid);
		if(Preguntas[playerid] != 5) return 1;
		if(response)
		{
			if(listitem == 0)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #5: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			if(listitem == 1)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #5: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			if(listitem == 2)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #5: Respuesta {66FF00}Correcta");
			}
			if(listitem == 3)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #5: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			Preguntas[playerid] = 6;
			if(Fallo[playerid] == 1) return Kalex(playerid);
			new titulo[100] = "#6: ¿Cuál es la definición de EOOC?";
			ShowPlayerDialog(playerid, PREGUNTA6, DIALOG_STYLE_LIST, titulo, "A) No tiene definición\nB) Insultar vía TS3\nC) Insultar vía Foro\nD) Agredir por motivos OOC","Aceptar", "");
		}
	}
	if(dialogid == PREGUNTA6)
	{
		if(!response) return Kick(playerid);
		if(Preguntas[playerid] != 6) return 1;
		if(response)
		{
			if(listitem == 0)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #6: Respuesta {66FF00}Correcta");
			}
			if(listitem == 1)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #6: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			if(listitem == 2)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #6: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			if(listitem == 3)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #6: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			Preguntas[playerid] = 7;
			if(Fallo[playerid] == 1) return Kalex(playerid);
			new titulo[100] = "#7: ¿Para qué sirve el comando /do?";
			ShowPlayerDialog(playerid, PREGUNTA7, DIALOG_STYLE_LIST, titulo, "A) Para pensamientos\nB) Para la representación de entorno y aclaración de rol\nC) Para realizar preguntas\nD) Para colocar caritas","Aceptar", "");
		}
	}
	if(dialogid == PREGUNTA7)
	{
		if(!response) return Kick(playerid);
		if(Preguntas[playerid] != 7) return 1;
		if(response)
		{
			if(listitem == 0)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #7: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			if(listitem == 1)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #7: Respuesta {66FF00}Correcta");
			}
			if(listitem == 2)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #7: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			if(listitem == 3)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #7: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			Preguntas[playerid] = 8;
			if(Fallo[playerid] == 1) return Kalex(playerid);
			new titulo[100] = "#8: ¿Para qué sirve el comando /me?";
			ShowPlayerDialog(playerid, PREGUNTA8, DIALOG_STYLE_LIST, titulo, "A) Interpretar el entorno\nB) Para realizar acciones físicas que no son visibles en el juego\nC) Para aclarar cuando pienso o me siento feliz\nD) Ninguna es correcta","Aceptar", "");
		}
	}
	if(dialogid == PREGUNTA8)
	{
		if(!response) return Kick(playerid);
		if(Preguntas[playerid] != 8) return 1;
		if(response)
		{
			if(listitem == 0)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #8: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			if(listitem == 1)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #8: Respuesta {66FF00}Correcta");
			}
			if(listitem == 2)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #8: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			if(listitem == 3)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #8: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			Preguntas[playerid] = 9;
			if(Fallo[playerid] == 1) return Kalex(playerid);
			new titulo[100] = "#9: ¿Qué harías si encontrarás un BUG?";
			ShowPlayerDialog(playerid, PREGUNTA9, DIALOG_STYLE_LIST, titulo, "A) Lo reportaría en el foro\nB) Lo reportaría mediante /reportar IG \nC) Le avisaría a un administrador mediante /w\nD) Lo dejaría ahí, no me importa","Aceptar", "");
			PlayerInfo[playerid][pTest] = 1;
		}
	}
	if(dialogid == PREGUNTA9)
	{
		if(!response) return Kick(playerid);
		if(Preguntas[playerid] != 9) return 1;
		if(response)
		{
			if(listitem == 0)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #9: Respuesta {66FF00}Correcta");
			}
			if(listitem == 1)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #9: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			if(listitem == 2)
			{
			    SendClientMessage(playerid,Amarillo,"Pregunta #9: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			if(listitem == 3)
			{
				SendClientMessage(playerid,Amarillo,"Pregunta #9: Respuesta {FF0000}Incorrecta");
				Fallo[playerid] = 1;
			}
			if(Fallo[playerid] == 1) return Kalex(playerid);
			Preguntas[playerid] = 0;
			Fallo[playerid] = 0;
			SpawnPlayer(playerid);
			PlayerInfo[playerid][pTest] = 1;
            PlayerSave(playerid);
            new Query[200];
            format(Query, 200, "UPDATE `usuarios` SET `Test`='1' WHERE `Nombre`='%s'",GetPlayerNameRP(playerid));
			mysql_query(1,Query);
			print("usuarios");
		}
	}
	if(dialogid == 0) //Logueo
	{
		if(response == 0) //Si da a Salir
		{
			Kick(playerid);
		}
		if(response == 1) //Si da a Entrar
		{
			if(strlen(inputtext))
			{
				new tmppass[64];
				strmid(tmppass, inputtext, 0, strlen(inputtext), 255);
				OnPlayerLogin(playerid,tmppass);
			}
			else
			{
				IntentosLogueo[playerid] += 1;
				if(IntentosLogueo[playerid] == 4){SendClientMessage(playerid, Amarillo, "Tu IP ha sido baneada por introducir mal la contraseña repetidamente."); SendClientMessage(playerid, Amarillo, "Si crees que ha sido un error, saca foto con F8 y pide tu desbán en www.foro.com"); BanL(playerid); return 1;}
				new loginstring[128];
				format(loginstring,sizeof(loginstring),"Contraseña incorrecta, inténtalo de nuevo. \nRecuerda que serás baneado si la escribes mal 4 veces.");
				ShowPlayerDialog(playerid,0,DIALOG_STYLE_PASSWORD,"Sky RolePlay",loginstring,"Entrar","Salir");
			}
		}
		return 1;
	}
	if(dialogid == 1) //Ascensor LSPD
	{
		if(!response){TogglePlayerControllable(playerid, 1); return 1;}
		if(listitem == 0)
		{
			SetPlayerPos(playerid,255.0220,126.2807,1003.2188);
			SetPlayerInterior(playerid, 10);
			SetPlayerVirtualWorld(playerid, 0);
			SetPlayerFacingAngle(playerid, 180);
			TogglePlayerControllable(playerid, 1);
		}
		if(listitem == 1)
		{
			SetPlayerPos(playerid,1568.6243,-1689.9784,6.2188);
			SetPlayerInterior(playerid, 0);
			SetPlayerVirtualWorld(playerid, 0);
			SetPlayerFacingAngle(playerid, 180);
			TogglePlayerControllable(playerid, 1);
		}
		if(listitem == 2)
		{
			SetPlayerPos(playerid,-1594.2114,716.2331,-4.9063);
			SetPlayerInterior(playerid, 0);
			SetPlayerVirtualWorld(playerid, 0);
			SetPlayerFacingAngle(playerid, 270);
			TogglePlayerControllable(playerid, 1);
		}
	}
	if(dialogid == 2) //Inventario
	{
		if(!response){return 1;}
		new i = listitem;
		if(i == 8){return 1;} //Selecciona la barra separadora
		if(i >= 0 && i <= 7) //Selecciona un bolsillo
		{
			SacarBolsillo(playerid, i);
		}
		if(i == 9) //Selecciona mano derecha
		{
			GuardarBolsillo(playerid, 1);
		}
		if(i == 10) //Selecciona mano izquierda
		{
			GuardarBolsillo(playerid, 2);
		}
		if(i == 11) //Selecciona intercambio de manos
		{
			CambiarObjetosMano(playerid);
		}
	}
	if(dialogid == 3) //Vestuario LSPD
	{
		if(!response){return 1;}
		new string[256];
		switch(listitem)
		{
			case 0: //Cadete
			{
				SetPlayerSkin(playerid, 71);
				format(string, sizeof(string), "* %s coge el uniforme de cadete y se viste.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioPD] = 1;
				//SetPlayerColor(playerid,TEAM_BLUE_COLOR);
				return 1;
			}
			case 1: //Motero
			{
				SetPlayerSkin(playerid, 284);
				format(string, sizeof(string), "* %s coge el uniforme de motero y se viste.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioPD] = 2;
				//SetPlayerColor(playerid,TEAM_BLUE_COLOR);
				return 1;
			}
			case 2: //Oficial 1
			{
				SetPlayerSkin(playerid, 280);
				format(string, sizeof(string), "* %s coge el uniforme de oficial y se viste.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioPD] = 3;
				//SetPlayerColor(playerid,TEAM_BLUE_COLOR);
				return 1;
			}
			case 3: //Oficial 2
			{
				SetPlayerSkin(playerid, 281);
				format(string, sizeof(string), "* %s coge el uniforme de oficial y se viste.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioPD] = 4;
				//SetPlayerColor(playerid,TEAM_BLUE_COLOR);
				return 1;
			}
			case 4: //Oficial 3
			{
				SetPlayerSkin(playerid, 267);
				format(string, sizeof(string), "* %s coge el uniforme de oficial y se viste.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioPD] = 5;
				//SetPlayerColor(playerid,TEAM_BLUE_COLOR);
				return 1;
			}
			case 5: //Oficial 4
			{
				SetPlayerSkin(playerid, 266);
				format(string, sizeof(string), "* %s coge el uniforme de oficial y se viste.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioPD] = 6;
				//SetPlayerColor(playerid,TEAM_BLUE_COLOR);
				return 1;
			}
			case 6: //Oficial 5
			{
				SetPlayerSkin(playerid, 265);
				format(string, sizeof(string), "* %s coge el uniforme de oficial y se viste.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioPD] = 7;
				//SetPlayerColor(playerid,TEAM_BLUE_COLOR);
				return 1;
			}
			case 7: //Paisano
			{
				if(PlayerInfo[playerid][pRango] < 5){SendClientMessage(playerid, Rojo, "* Rango insuficiente."); return 1;}
				SetPlayerSkin(playerid, PlayerInfo[playerid][pSkin]);
				SendClientMessage(playerid, Amarillo, "Contacta con un admin superior si quieres hacer un rol de paisano más desarrollado.");
				format(string, sizeof(string), "* %s se pone de servicio como paisano.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioPD] = 8;
				//SetPlayerColor(playerid,TEAM_BLUE_COLOR);
				return 1;
			}
			case 8: //SWAT
			{
				SetPlayerSkin(playerid, 285);
				format(string, sizeof(string), "* %s coge el traje de SWAT y se viste.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioPD] = 9;
				//SetPlayerColor(playerid,TEAM_BLUE_COLOR);
				return 1;
			}
			case 9: //Superior
			{
				SetPlayerSkin(playerid, 283);
				format(string, sizeof(string), "* %s coge el uniforme de superior y se viste.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioPD] = 10;
				//SetPlayerColor(playerid,TEAM_BLUE_COLOR);
				return 1;
			}
			case 10: //Comisario
			{
				SetPlayerSkin(playerid, 288);
				format(string, sizeof(string), "* %s coge el uniforme de comisario y se viste.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioPD] = 11;
				//SetPlayerColor(playerid,TEAM_BLUE_COLOR);
				return 1;
			}
			case 11: //Skin de mujer
			{
				if(PlayerInfo[playerid][pSexo] != 2){SendClientMessage(playerid, Rojo, "* No eres mujer."); return 1;}
				SetPlayerSkin(playerid, 211);
				format(string, sizeof(string), "* %s coge su uniforme y se viste.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioPD] = 12;
				//SetPlayerColor(playerid,TEAM_BLUE_COLOR);
				return 1;
			}
			case 12: //Ropa normal
			{
				if(PlayerInfo[playerid][pManoDer] > 0 || PlayerInfo[playerid][pManoIzq] > 0 || PlayerInfo[playerid][pEspalda] > 0){SendClientMessage(playerid, Rojo, "* Devuelve antes tus armas."); return 1;}
				if(!(GetPlayerSkin(playerid) == 288 || GetPlayerSkin(playerid) == 285 || GetPlayerSkin(playerid) == 284 || GetPlayerSkin(playerid) == 280 || GetPlayerSkin(playerid) == 71 || GetPlayerSkin(playerid) == 282 || PlayerInfo[playerid][pServicioPD] > 0)){SendClientMessage(playerid, Rojo, "* No estás de servicio."); return 1;}
				for(new x = 0; x < 8; x++)
				{
					PlayerInfo[playerid][pCint][x] = 0;
					PlayerInfo[playerid][pCintCant][x] = 0;
				}
				SetPlayerSkin(playerid, PlayerInfo[playerid][pSkin]);
				format(string, sizeof(string), "* %s coge su ropa y se viste.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioPD] = 0;
				//SetPlayerColor(playerid,Blanco2);
				for(new i = 0; i < MAX_PLAYERS; i++)
				{
					if(IsPlayerConnected(i))
					{
						if(PlayerInfo[i][pFaccion] == 1 && SolicitaRefuerzos[i] == 1)
						{
							SetPlayerMarkerForPlayer(playerid, i, Blanco2);
						}
					}
				}
				return 1;
			}
		}
	}
	if(dialogid == 4) //Armería LSPD
	{
		return 1;
	}
	if(dialogid == 5) //Cinturón LSPD
	{
		if(!response){return 1;}
		new i = listitem;
		if(i >= 0 && i <= 7) //Selecciona un bolsillo
		{
			SacarCint(playerid, i);
		}
		if(i == 8){return 1;} //Selecciona la barra separadora
		if(i == 9) //Selecciona mano derecha
		{
			GuardarCint(playerid, 1);
		}
		if(i == 10) //Selecciona mano izquierda
		{
			GuardarCint(playerid, 2);
		}
		if(i == 11) //Selecciona intercambio de manos
		{
			CambiarObjetosMano(playerid);
		}
	}
	if(dialogid == 6) //Maleteros
	{
		if(!response){return 1;}
		new i = listitem;
		if(i == 7){return 1;} //Selecciona la barra separadora
		if(i >= 0 && i <= 6) //Selecciona un bolsillo
		{
			SacarMaletero(playerid, VehMaleteroPlayer[playerid], i);
		}
		if(i == 8) //Selecciona mano derecha
		{
			GuardarMaletero(playerid, VehMaleteroPlayer[playerid], 1);
		}
		if(i == 9) //Selecciona mano izquierda
		{
			GuardarMaletero(playerid, VehMaleteroPlayer[playerid], 2);
		}
	}
	if(dialogid == 7) //Autoescuela conducción intro
	{
		if(!response){EnAutoEscuela[playerid] = 0; TogglePlayerControllable(playerid, 1); return 1;}
		TemaAutoescuelaCond(playerid, 1);
	}
	if(dialogid == 8) //Autoescuela conducción tema 1
	{
		if(!response){TemaAutoescuelaCond(playerid, 0); return 1;}
		TemaAutoescuelaCond(playerid, 2);
	}
	if(dialogid == 9) //Autoescuela conducción tema 2
	{
		if(!response){TemaAutoescuelaCond(playerid, 1); return 1;}
		TemaAutoescuelaCond(playerid, 3);
	}
	if(dialogid == 10) //Autoescuela conducción tema 3
	{
		if(!response){TemaAutoescuelaCond(playerid, 2); return 1;}
		TemaAutoescuelaCond(playerid, 4);
	}
	if(dialogid == 11) //Autoescuela conducción tema 4
	{
		if(!response){TemaAutoescuelaCond(playerid, 3); return 1;}
		TemaAutoescuelaCond(playerid, 5);
	}
	if(dialogid == 12) //Autoescuela conducción tema 5
	{
		if(!response){TemaAutoescuelaCond(playerid, 4); return 1;}
		TemaAutoescuelaCond(playerid, 6);
	}
	if(dialogid == 13) //Autoescuela conducción tema 6
	{
		if(!response){TemaAutoescuelaCond(playerid, 5); return 1;}
		TemaAutoescuelaCond(playerid, 7);
	}
	if(dialogid == 14) //Autoescuela conducción tema 7
	{
		if(!response){TemaAutoescuelaCond(playerid, 6); return 1;}
		PreguntaAutoescuelaCond(playerid, 0);
	}
	if(dialogid == 15) //Autoescuela conducción pregunta 1
	{
		if(inputtext[0] == '4'){GameTextForPlayer(playerid, "~g~Correcto", 1000, 6); PreguntaAutoescuelaCond(playerid, 1); return 1;}
		GameTextForPlayer(playerid, "~r~Suspenso", 1000, 6);
		SendClientMessage(playerid, Rojo, "Fallaste el test.");
		SendClientMessage(playerid, Rojo, "Se te descuentan 100$ por la plaza.");
		GivePlayerMoneyAC(playerid, -100);
		TogglePlayerControllable(playerid, 1);
		EnAutoEscuela[playerid] = 0;
	}
	if(dialogid == 16) //Autoescuela conducción pregunta 2
	{
		if(inputtext[0] == '2'){GameTextForPlayer(playerid, "~g~Correcto", 1000, 6); PreguntaAutoescuelaCond(playerid, 2); return 1;}
		GameTextForPlayer(playerid, "~r~Suspenso", 1000, 6);
		SendClientMessage(playerid, Rojo, "Fallaste el test.");
		SendClientMessage(playerid, Rojo, "Se te descuentan 100$ por la plaza.");
		GivePlayerMoneyAC(playerid, -100);
		TogglePlayerControllable(playerid, 1);
		EnAutoEscuela[playerid] = 0;
	}
	if(dialogid == 17) //Autoescuela conducción pregunta 3
	{
		if(inputtext[0] == '2'){GameTextForPlayer(playerid, "~g~Correcto", 1000, 6); PreguntaAutoescuelaCond(playerid, 3); return 1;}
		GameTextForPlayer(playerid, "~r~Suspenso", 1000, 6);
		SendClientMessage(playerid, Rojo, "Fallaste el test.");
		SendClientMessage(playerid, Rojo, "Se te descuentan 100$ por la plaza.");
		GivePlayerMoneyAC(playerid, -100);
		TogglePlayerControllable(playerid, 1);
		EnAutoEscuela[playerid] = 0;
	}
	if(dialogid == 18) //Autoescuela conducción pregunta 4
	{
		if(inputtext[0] == '3'){GameTextForPlayer(playerid, "~g~Correcto", 1000, 6); PreguntaAutoescuelaCond(playerid, 4); return 1;}
		GameTextForPlayer(playerid, "~r~Suspenso", 1000, 6);
		SendClientMessage(playerid, Rojo, "Fallaste el test.");
		SendClientMessage(playerid, Rojo, "Se te descuentan 100$ por la plaza.");
		GivePlayerMoneyAC(playerid, -100);
		TogglePlayerControllable(playerid, 1);
		EnAutoEscuela[playerid] = 0;
	}
	if(dialogid == 19) //Autoescuela conducción pregunta 5
	{
		if(inputtext[0] == '3')
		{
		/*	GameTextForPlayer(playerid, "~g~Aprobado", 1000, 6);
			TogglePlayerControllable(playerid, 1);
			SendClientMessage(playerid, Verde, "Parte teórica aprobada.");
			SendClientMessage(playerid, Amarillo, "Tienes 20 segundos para subir a un vehículo de la autoescuela y empezar la parte práctica.");
			SetTimerEx("TimerAutoescuela", 20000, false, "i", playerid);*/
			SendClientMessage(playerid, Verde, "Parte práctica aprobada.");
			SendClientMessage(playerid, Amarillo, "Has conseguido superar el examen de conducción.");
			SendClientMessage(playerid, Amarillo, "Ahora tienes tu licencia de conducción por 700$.");
			KillTimer(MaxTiempoAutoEscuelaTimer[playerid]);
			PlayerInfo[playerid][pLicConduccion] = 1;
			GivePlayerMoneyAC(playerid, -700);
			CheckPointAutoEscuela[playerid] = 0;
			EnAutoEscuela[playerid] = 0;
			return 1;
		}
		GameTextForPlayer(playerid, "~r~Suspenso", 1000, 6);
		SendClientMessage(playerid, Rojo, "Fallaste el test.");
		SendClientMessage(playerid, Rojo, "Se te descuentan 100$ por la plaza.");
		GivePlayerMoneyAC(playerid, -100);
		TogglePlayerControllable(playerid, 1);
		EnAutoEscuela[playerid] = 0;
	}
	if(dialogid == 20) //Armarios
	{
		if(!response){return 1;}
		new i = listitem;
		if(i == 10){return 1;} //Selecciona la barra separadora
		if(i >= 0 && i <= 9) //Selecciona un slot
		{
			SacarArmario(playerid, GetPlayerDentroCasa(playerid), i);
		}
		if(i == 11) //Selecciona mano derecha
		{
			GuardarArmario(playerid, GetPlayerDentroCasa(playerid), 1);
		}
		if(i == 12) //Selecciona mano izquierda
		{
			GuardarArmario(playerid, GetPlayerDentroCasa(playerid), 2);
		}
	}
	if(dialogid == 21) //Almacén
	{
		if(!response){return 1;}
		new i = listitem;
		new nego = GetPlayerDentroNego(playerid);
		if(i == NegoInfo[nego][nMaxAlmacen]){return 1;} //Selecciona la barra separadora
		if(i >= 0 && i < NegoInfo[nego][nMaxAlmacen]) //Selecciona un slot
		{
			SacarAlmacen(playerid, nego, i);
		}
		if(i == NegoInfo[nego][nMaxAlmacen]+1) //Selecciona mano derecha
		{
			GuardarAlmacen(playerid, nego, 1);
		}
		if(i == NegoInfo[nego][nMaxAlmacen]+2) //Selecciona mano izquierda
		{
			GuardarAlmacen(playerid, nego, 2);
		}
	}
	if(dialogid == 22) //Agenda (mostrar contactos)
	{
		if(!response){return 1;}
		new i = listitem;
		new Numero = AgendaNumero[playerid][i], Contacto[41];
		format(Contacto, sizeof(Contacto), "%s", AgendaContacto[playerid][i]);
		if(!strlen(Contacto) || strcmp(Contacto,"NULL",true) == 0)
		{
			SendClientMessage(playerid, Rojo, "* Contacto vacío.");
		}
		else
		{
			LlamarTelefono(playerid, Numero);
		}
	}
	if(dialogid == 23) //Contacto de armas
	{
		if(!response){return 1;}
		new i = listitem, caja, coche = GetPlayerVehicleID(playerid);
		if(GetPlayerMoney(playerid) < PreciosContactoArmas[i]){ProxDetector(15.0, playerid,"Desconocido: Yo no fío a nadie. Si no tienes la pasta no es mi problema.",Chat1,Chat2,Chat3,Chat4,Chat5); return 1;}
		switch(i)
		{
			case 0: caja = 102; //Katana
			case 1: caja = 103; //M1911
			case 2: caja = 104; //Cargador M1911
			case 3: caja = 105; //Balas .45 ACP
			case 4: caja = 106; //D. Eagle
			case 5: caja = 107; //Cargador D. Eagle
			case 6: caja = 108; //Balas .50 AE
			case 7: caja = 109; //Tec-9
			case 8: caja = 110; //Cargador Tec-9
			case 9: caja = 111; //UZI
			case 10: caja = 112; //Cargador UZI
			case 11: caja = 113; //MP5
			case 12: caja = 114; //Cargador MP5
			case 13: caja = 115; //Balas SMG
			case 14: caja = 116; //Escopeta
			case 15: caja = 117; //Escopeta recortada
			case 16: caja = 118; //Cartuchos 12GA
			case 17: caja = 119; //Ak-47
			case 18: caja = 120; //Cargador Ak-47
			case 19: caja = 121; //Balas Ak-47
			case 20: caja = 122; //Rifle
			case 21: caja = 123; //Cargador rifle
			case 22: caja = 124; //Balas rifle
		}
		for(new x=0; x<CarInfo[GetPlayerVehicleID(playerid)][cMaxMaletero]; x++)
		{
			if(CarInfo[coche][cMaletero][x] == 0)
			{
				CarInfo[coche][cMaletero][x] = caja;
				CarInfo[coche][cMaleteroCant][x] = ObjetoInfo[caja][Capacidad];
				break;
			}
		}
		GivePlayerMoneyAC(playerid, -PreciosContactoArmas[i]);
		new string[256];
		format(string, sizeof(string), "Desconocido: Una %s... Te costará %d$, no te arrepentirás.", ObjetoInfo[caja][NombreObjeto], PreciosContactoArmas[i]);
		ProxDetector(15.0, playerid,string,Chat1,Chat2,Chat3,Chat4,Chat5);
		if(AvisoLSPDCompraArmas <= 0)
		{
			SendRadioMessage(1, TEAM_BLUE_COLOR, "[Radio] -{FFFFFF} Central: Se rumora de que intentan introducir un cargamento de armas en la ciudad.");
			AvisoLSPDCompraArmas = 15;
		}
		SetTimerEx("AsignarTiempoCompraMafias", 600000, false, "d, d", PlayerInfo[playerid][pFaccion], 1);
	}
	if(dialogid == 24) //Menú ATM
	{
		if(!response){return 1;}
		switch(listitem)
		{
			case 0: MostrarATM(playerid, 2);
			case 1: MostrarATM(playerid, 3);
			case 2: MostrarATM(playerid, 4);
			case 3: MostrarATM(playerid, 6);
		}
	}
	if(dialogid == 25) //Retirar dinero ATM
	{
		if(!response){MostrarATM(playerid, 1); return 1;}
		new string[256];
		new dinero = strval(inputtext[0]);
		if(dinero < 1){SendClientMessage(playerid, Rojo, "* La cantidad no puede menor que 1$."); MostrarATM(playerid, 1); return 1;}
		if(dinero > PlayerInfo[playerid][pDineroBanco]){SendClientMessage(playerid, Rojo, "* No tienes tanto dinero en tu cuenta bancaria."); MostrarATM(playerid, 1); return 1;}
		GivePlayerMoneyAC(playerid, dinero);
		PlayerInfo[playerid][pDineroBanco] -= dinero;
		format(string, sizeof(string), "Has retirado %d$ de tu cuenta bancaria.", dinero);
		SendClientMessage(playerid, Amarillo, string);
		format(string, sizeof(string), "* %s realiza una acción en el cajero.", GetPlayerNameRP(playerid));
		ProxDetector(5.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
		MostrarATM(playerid, 1);
	}
	if(dialogid == 26) //Ingresar dinero ATM
	{
		if(!response){MostrarATM(playerid, 1); return 1;}
		new string[256];
		new dinero = strval(inputtext[0]);
		if(dinero < 1){SendClientMessage(playerid, Rojo, "* La cantidad no puede menor que 1$."); MostrarATM(playerid, 1); return 1;}
		if(dinero > GetPlayerMoney(playerid)){SendClientMessage(playerid, Rojo, "* No tienes tanto dinero en mano."); MostrarATM(playerid, 1); return 1;}
		GivePlayerMoneyAC(playerid, -dinero);
		PlayerInfo[playerid][pDineroBanco] += dinero;
		format(string, sizeof(string), "Has depositado %d$ en tu cuenta bancaria.", dinero);
		SendClientMessage(playerid, Amarillo, string);
		format(string, sizeof(string), "* %s realiza una acción en el cajero.", GetPlayerNameRP(playerid));
		ProxDetector(5.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
		MostrarATM(playerid, 1);
	}
	if(dialogid == 27) //Transferir dinero ATM (ID)
	{
		if(!response){MostrarATM(playerid, 1); return 1;}
		if(PlayerInfo[playerid][pNivel] < 3){SendClientMessage(playerid, Rojo, "* Necesitas al menos ser nivel 3."); MostrarATM(playerid, 1); return 1;}
		TransferirPlayer[playerid] = ReturnUser(inputtext[0]);
		if(TransferirPlayer[playerid] == playerid){SendClientMessage(playerid, Rojo, "* No te puedes transferir dinero a tí mismo."); MostrarATM(playerid, 1); return 1;}
		if(!IsPlayerConnected(TransferirPlayer[playerid]) || TransferirPlayer[playerid] == INVALID_PLAYER_ID){SendClientMessage(playerid, Rojo, "* ID inválida."); MostrarATM(playerid, 1); return 1;}
		if(PlayerInfo[TransferirPlayer[playerid]][pNivel] < 3){SendClientMessage(playerid, Rojo, "* El receptor necesita al menos ser nivel 3."); MostrarATM(playerid, 1); return 1;}
		MostrarATM(playerid, 5);
	}
	if(dialogid == 28) //Transferir dinero ATM (Cantidad)
	{
		new string[256];
		if(!response){MostrarATM(playerid, 1); return 1;}
		new dinero = strval(inputtext[0]);
		if(dinero < 1){SendClientMessage(playerid, Rojo, "* La cantidad no puede ser menor que 1$."); MostrarATM(playerid, 1); return 1;}
		if(PlayerInfo[playerid][pDineroBanco] < dinero){SendClientMessage(playerid, Rojo, "* No tienes tanto dinero en tu cuenta bancaria."); MostrarATM(playerid, 1); return 1;}
		if(dinero > 100000){SendClientMessage(playerid, Rojo, "* Solo puedes transferir un máximo de 100.000$."); MostrarATM(playerid, 1); return 1;}
		PlayerInfo[playerid][pDineroBanco] -= dinero;
		PlayerInfo[TransferirPlayer[playerid]][pDineroBanco] += dinero;
		format(string, sizeof(string), "Has transferido %d$ a la cuenta de %s [ID: %d].", dinero, GetPlayerNameRP(TransferirPlayer[playerid]), TransferirPlayer[playerid]);
		SendClientMessage(playerid, Amarillo, string);
		format(string, sizeof(string), "Has recibido una transferencia de %d$ de %s [ID: %d].", dinero, GetPlayerNameRP(playerid), playerid);
		SendClientMessage(TransferirPlayer[playerid], Amarillo, string);
		format(string, sizeof(string), "%s ha transferido %d$ a %s", GetPlayerNameRP(playerid), dinero, GetPlayerNameRP(TransferirPlayer[playerid]));
		SendAdminMessage(Aguamarina, string);
		PlayerPlaySound(TransferirPlayer[playerid], 1052, 0.0, 0.0, 0.0);
		printf("%s", string);
		format(string, sizeof(string), "* %s realiza una acción en el cajero.", GetPlayerNameRP(playerid));
		ProxDetector(5.0, playerid, string,Morado,Morado,Morado,Morado,Morado);
		MostrarATM(playerid, 1);
	}
	if(dialogid == 29) //Balance ATM
	{
		MostrarATM(playerid, 1);
	}
	if(dialogid == 31) //Vestuario prisión federal
	{
		if(!response){return 1;}
		new string[256];
		switch(listitem)
		{
			case 0: //Carcelario
			{
				SetPlayerSkin(playerid, 282);
				format(string, sizeof(string), "* %s coge el uniforme de carcelario.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioPD] = 13;
				return 1;
			}
			case 1: //Ropa normal
			{
				if(PlayerInfo[playerid][pManoDer] > 0 || PlayerInfo[playerid][pManoIzq] > 0 || PlayerInfo[playerid][pEspalda] > 0){SendClientMessage(playerid, Rojo, "* Devuelve antes tus armas."); return 1;}
				if(!(GetPlayerSkin(playerid) == 288 || GetPlayerSkin(playerid) == 285 || GetPlayerSkin(playerid) == 284 || GetPlayerSkin(playerid) == 280 || GetPlayerSkin(playerid) == 71 || GetPlayerSkin(playerid) == 282 || PlayerInfo[playerid][pServicioPD] > 0)){SendClientMessage(playerid, Rojo, "* No estás de servicio."); return 1;}
				for(new x = 0; x < 8; x++)
				{
					PlayerInfo[playerid][pCint][x] = 0;
					PlayerInfo[playerid][pCintCant][x] = 0;
				}
				SetPlayerSkin(playerid, PlayerInfo[playerid][pSkin]);
				format(string, sizeof(string), "* %s coge su ropa y se viste.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pServicioPD] = 0;
				for(new i = 0; i < MAX_PLAYERS; i++)
				{
					if(IsPlayerConnected(i))
					{
						if(PlayerInfo[i][pFaccion] == 1 && SolicitaRefuerzos[i] == 1)
						{
							SetPlayerMarkerForPlayer(playerid, i, Blanco2);
						}
					}
				}
				return 1;
			}
		}
	}
	if(dialogid == 32) //Armeria prisión federal
	{
		if(!response){return 1;}
		new string[256];
		switch(listitem)
		{
			case 0: //Equipo vigilancia 1 (Escopeta)
			{
				if(PlayerInfo[playerid][pRango] < 2){SendClientMessage(playerid, Rojo, "* Rango insuficiente."); return 1;}
				if(PlayerInfo[playerid][pServicioPD] != 13){SendClientMessage(playerid, Rojo, "* No estás de servicio como carcelero."); return 1;}
				if(PlayerInfo[playerid][pManoDer] > 0 || PlayerInfo[playerid][pManoIzq] > 0){SendClientMessage(playerid, Rojo, "* Devuelve antes tus armas."); return 1;}
				PlayerInfo[playerid][pCint][0] = 50, PlayerInfo[playerid][pCintCant][0] = 20; //Cargador Escopeta
				PlayerInfo[playerid][pCint][1] = 50, PlayerInfo[playerid][pCintCant][1] = 20; //Cargador Escopeta
				PlayerInfo[playerid][pCint][2] = 3, PlayerInfo[playerid][pCintCant][2] = 1; //Porra
				PlayerInfo[playerid][pCint][3] = 34, PlayerInfo[playerid][pCintCant][3] = 200; //Spray
				PlayerInfo[playerid][pCint][4] = 38, PlayerInfo[playerid][pCintCant][4] = 1; //Pistola táser
				PlayerInfo[playerid][pEspalda] = 22, PlayerInfo[playerid][pEspaldaCant] = 4; //Escopeta
				PonerObjeto(playerid, 3, 22);
				format(string, sizeof(string), "* %s coge el equipo de vigilancia 1.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				return 1;
			}
			case 1: //Equipo vigilancia 2 (Rifle)
			{
				if(PlayerInfo[playerid][pRango] < 2){SendClientMessage(playerid, Rojo, "* Rango insuficiente."); return 1;}
				if(PlayerInfo[playerid][pServicioPD] != 13){SendClientMessage(playerid, Rojo, "* No estás de servicio como carcelero."); return 1;}
				if(PlayerInfo[playerid][pManoDer] > 0 || PlayerInfo[playerid][pManoIzq] > 0){SendClientMessage(playerid, Rojo, "* Devuelve antes tus armas."); return 1;}
				PlayerInfo[playerid][pCint][0] = 46, PlayerInfo[playerid][pCintCant][0] = 5; //Cargador rifle
				PlayerInfo[playerid][pCint][1] = 46, PlayerInfo[playerid][pCintCant][1] = 5; //Cargador rifle
				PlayerInfo[playerid][pCint][2] = 3, PlayerInfo[playerid][pCintCant][2] = 1; //Porra
				PlayerInfo[playerid][pCint][3] = 34, PlayerInfo[playerid][pCintCant][3] = 200; //Spray
				PlayerInfo[playerid][pCint][4] = 38, PlayerInfo[playerid][pCintCant][4] = 1; //Pistola táser
				PlayerInfo[playerid][pEspalda] = 30, PlayerInfo[playerid][pEspaldaCant] = 5; //Rifle
				PonerObjeto(playerid, 3, 30);
				format(string, sizeof(string), "* %s coge el equipo de vigilancia 2.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				return 1;
			}
			case 2: //Chaleco
			{
				if(PlayerInfo[playerid][pRango] < 2){SendClientMessage(playerid, Rojo, "* Rango insuficiente."); return 1;}
				if(PlayerInfo[playerid][pServicioPD] != 13){SendClientMessage(playerid, Rojo, "* No estás de servicio como carcelero."); return 1;}
				format(string, sizeof(string), "* %s coge un chaleco antibalas y se lo coloca.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				SetPlayerArmour(playerid, 100.0);
				return 1;
			}
			case 3: //Devolver armas
			{
				format(string, sizeof(string), "* %s devuelve sus armas.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				for(new x = 0; x < 8; x++)
				{
					PlayerInfo[playerid][pCint][x] = 0;
					PlayerInfo[playerid][pCintCant][x] = 0;
				}
				PlayerInfo[playerid][pManoDer] = 0;
				PlayerInfo[playerid][pManoDerCant] = 0;
				PlayerInfo[playerid][pManoIzq] = 0;
				PlayerInfo[playerid][pManoIzqCant] = 0;
				PlayerInfo[playerid][pEspalda] = 0;
				PlayerInfo[playerid][pEspaldaCant] = 0;
				RemovePlayerAttachedObject(playerid, 1);
				RemovePlayerAttachedObject(playerid, 2);
				RemovePlayerAttachedObject(playerid, 3);
				ResetPlayerWeapons(playerid);
				SetPlayerArmour(playerid, 0.0);
				return 1;
			}
		}
	}
    if(dialogid == 33) //Informes LSED
	{
	    if(!response) return 1;
        AtendiendoInforme[playerid] = InformeEmergencias[listitem][ieJugador];
		InformeEmergencias[listitem][ieEstado] = 1;
		SetPlayerCheckpoint(playerid, InformeEmergencias[listitem][ieX], InformeEmergencias[listitem][ieY], InformeEmergencias[listitem][ieZ], 5);
		SendClientMessage(playerid, Amarillo, "* Se ha marcado el lugar de la emergencia en el radar.");
		return 1;
	}
	if(dialogid == 34) //Armería 1 LSPD
	{
		if(!response){return 1;}
		new string[128], objeto;
		switch(listitem)
		{
			case 0: //Chaleco antibalas
			{
				format(string, sizeof(string), "* %s coge un chaleco antibalas.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				SetPlayerArmour(playerid, 100);
				return 1;
			}
			case 1: return 1;
			case 2: //Porra
			{
				objeto = 3;
			}
			case 3: //Spray
			{
				objeto = 34;
			}
			case 4: //Táser
			{
				objeto = 38;
			}
			case 5: return 1;
			case 6: //M1911
			{
				objeto = 19;
			}
			case 7: //Cargador M1911
			{
				objeto = 39;
			}
			case 8: return 1;
			case 9: //DEagle
			{
				objeto = 21;
			}
			case 10: //Cargador DEagle
			{
				objeto = 40;
			}
			case 11: return 1;
			case 12: //Escopeta
			{
				objeto = 22;
			}
			case 13: //Cartuchos escopeta
			{
				objeto = 50;
			}
			case 14: return 1;
			case 15: //MP5
			{
				objeto = 26;
			}
			case 16: //Cargador MP5
			{
				objeto = 42;
			}
			case 17: return 1;
			case 18: //Armería LSPD lista 2
			{
				new cadena[450];
				strcat(cadena, "M4A1\n"); //Lista 2
				strcat(cadena, "Cargador M4A1\n");
				strcat(cadena, "|--------------------------------------|\n");
				strcat(cadena, "Remington 700\n");
				strcat(cadena, "Remington 700 + mira\n");
				strcat(cadena, "Cargador Remington 700\n");
				strcat(cadena, "|--------------------------------------|\n");
				strcat(cadena, "Granada lacrimógena\n");
				strcat(cadena, "Granada cegadora\n");
				strcat(cadena, "|--------------------------------------|\n");
				strcat(cadena, "Devolver armas en mano\n");
				strcat(cadena, "Devolver chaleco antibalas\n");
				strcat(cadena, "Devolver todas las armas\n");
				strcat(cadena, "|--------------------------------------|\n");
				strcat(cadena, "<<ANTERIOR");
				ShowPlayerDialog(playerid, 35, 2, "Armería", cadena,"Seleccionar", "Cancelar");
				return 1;
			}
		}
		if(objeto == 3 || objeto == 38 || objeto == 19 || objeto == 21) //Si ya tiene un objeto así en el cint
		{
			for(new x=0; x<8; x++)
			{
				if(PlayerInfo[playerid][pCint][x] == objeto){SendClientMessage(playerid, Rojo, "* Solo puedes llevar un arma de ese tipo."); return 1;}
			}
		}

		if(objeto == 22 || objeto == 26 || objeto == 28 || objeto == 30 || objeto == 31) //Si ya tiene un arma grande así
		{
			if(PlayerInfo[playerid][pManoDer] == objeto || PlayerInfo[playerid][pManoIzq] == objeto || PlayerInfo[playerid][pEspalda])
			{
				SendClientMessage(playerid, Rojo, "* Ya portas un arma grande de este tipo.");
				return 1;
			}
		}

		if(objeto == 22 || objeto == 26 || objeto == 28 || objeto == 30 || objeto == 31) //Dar arma grande
		{
			if(PlayerInfo[playerid][pEspalda] == 0)
			{
				PlayerInfo[playerid][pEspalda] = objeto;
				PlayerInfo[playerid][pEspaldaCant] = ObjetoInfo[objeto][Capacidad];
				format(string, sizeof(string), "* %s coge un/a %s de la armería.", GetPlayerNameRP(playerid), ObjetoInfo[objeto][NombreObjeto]);
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PonerObjeto(playerid, 3, objeto);
				return 1;
			}
			else if(PlayerInfo[playerid][pManoDer] == 0)
			{
				PlayerInfo[playerid][pManoDer] = objeto;
				PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];
				format(string, sizeof(string), "* %s coge un/a %s de la armería.", GetPlayerNameRP(playerid), ObjetoInfo[objeto][NombreObjeto]);
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PonerObjeto(playerid, 1, objeto);
				return 1;
			}
			else if(PlayerInfo[playerid][pManoIzq] == 0)
			{
				PlayerInfo[playerid][pManoIzq] = objeto;
				PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];
				format(string, sizeof(string), "* %s coge un/a %s de la armería.", GetPlayerNameRP(playerid), ObjetoInfo[objeto][NombreObjeto]);
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PonerObjeto(playerid, 2, objeto);
				return 1;
			}
		}
		else //Dar otro objeto
		{
			for(new x=0; x<8; x++)
			{
				if(PlayerInfo[playerid][pCint][x] == 0)
				{
					PlayerInfo[playerid][pCint][x] = objeto;
					PlayerInfo[playerid][pCintCant][x] = ObjetoInfo[objeto][Capacidad];
					format(string, sizeof(string), "* %s coge un/a %s de la armería.", GetPlayerNameRP(playerid), ObjetoInfo[objeto][NombreObjeto]);
					ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
					return 1;
				}
			}
		}
	}
	if(dialogid == 35) //Armería 2 LSPD
	{
		if(!response){return 1;}
		new string[128], objeto;
		switch(listitem)
		{
			case 0: //M4
			{
				objeto = 28;
			}
			case 1: //Cargador M4
			{
				objeto = 45;
			}
			case 2: return 1;
			case 3: //Rifle
			{
				objeto = 30;
			}
			case 4: //Rifle + mira
			{
				objeto = 31;
			}
			case 5: //Cargador rifle
			{
				objeto = 46;
			}
			case 6: return 1;
			case 7: //Granada lacrimógena
			{
				objeto = 17;
			}
			case 8: //Granada cegadora
			{
				objeto = 54;
			}
			case 9: return 1;
			case 10: //Devolver armas en mano
			{
				format(string, sizeof(string), "* %s devuelve las armas de sus manos.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PlayerInfo[playerid][pManoDer] = 0;
				PlayerInfo[playerid][pManoDerCant] = 0;
				PlayerInfo[playerid][pManoIzq] = 0;
				PlayerInfo[playerid][pManoIzqCant] = 0;
				RemovePlayerAttachedObject(playerid, 1);
				RemovePlayerAttachedObject(playerid, 2);
				ResetPlayerWeapons(playerid);
				return 1;
			}
			case 11: //Devolver chaleco antibalas
			{
				new Float:chaleco;
				GetPlayerArmour(playerid, chaleco);
				if(chaleco <= 0){SendClientMessage(playerid, Rojo, "* No tienes chaleco antibalas."); return 1;}
				format(string, sizeof(string), "* %s devuelve su chaleco antibalas.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				SetPlayerArmour(playerid, 0.0);
				ResetPlayerWeapons(playerid);
				return 1;
			}
			case 12: //Devolver armas
			{
				format(string, sizeof(string), "* %s devuelve sus armas.", GetPlayerNameRP(playerid));
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				for(new x = 0; x < 8; x++)
				{
					PlayerInfo[playerid][pCint][x] = 0;
					PlayerInfo[playerid][pCintCant][x] = 0;
				}
				PlayerInfo[playerid][pManoDer] = 0;
				PlayerInfo[playerid][pManoDerCant] = 0;
				PlayerInfo[playerid][pManoIzq] = 0;
				PlayerInfo[playerid][pManoIzqCant] = 0;
				PlayerInfo[playerid][pEspalda] = 0;
				PlayerInfo[playerid][pEspaldaCant] = 0;
				RemovePlayerAttachedObject(playerid, 1);
				RemovePlayerAttachedObject(playerid, 2);
				RemovePlayerAttachedObject(playerid, 3);
				ResetPlayerWeapons(playerid);
				SetPlayerArmour(playerid, 0.0);
				return 1;
			}
			case 13: return 1;
			case 14: //Armería lista 1
			{
				new cadena[450];
				strcat(cadena, "Chaleco antibalas\n"); //Lista 1
				strcat(cadena, "|--------------------------------------|\n");
				strcat(cadena, "Porra\n");
				strcat(cadena, "Spray\n");
				strcat(cadena, "Táser\n");
				strcat(cadena, "|--------------------------------------|\n");
				strcat(cadena, "M1911\n");
				strcat(cadena, "Cargador M1911\n");
				strcat(cadena, "|--------------------------------------|\n");
				strcat(cadena, "D. Eagle\n");
				strcat(cadena, "Cargador D. Eagle\n");
				strcat(cadena, "|--------------------------------------|\n");
				strcat(cadena, "Winchester 1200\n");
				strcat(cadena, "Cartuchos 12GA\n");
				strcat(cadena, "|--------------------------------------|\n");
				strcat(cadena, "MP5A4\n");
				strcat(cadena, "Cargador MP5A4\n");
				strcat(cadena, "|--------------------------------------|\n");
				strcat(cadena, "SIGUIENTE >>");
				ShowPlayerDialog(playerid, 34, 2, "Armería", cadena,"Seleccionar", "Cancelar");
				return 1;
			}
		}
		if(objeto == 3 || objeto == 38 || objeto == 19 || objeto == 21) //Si ya tiene un objeto así en el cint
		{
			for(new x=0; x<8; x++)
			{
				if(PlayerInfo[playerid][pCint][x] == objeto){SendClientMessage(playerid, Rojo, "* Solo puedes llevar un arma de ese tipo."); return 1;}
			}
		}
		if(objeto == 22 || objeto == 26 || objeto == 28 || objeto == 30 || objeto == 31) //Si ya tiene un arma grande así
		{
			if(PlayerInfo[playerid][pManoDer] == objeto || PlayerInfo[playerid][pManoIzq] == objeto || PlayerInfo[playerid][pEspalda])
			{
				SendClientMessage(playerid, Rojo, "* Ya portas un arma grande de este tipo.");
				return 1;
			}
		}
		if(objeto == 22 || objeto == 26 || objeto == 28 || objeto == 30 || objeto == 31) //Dar arma grande
		{
			if(PlayerInfo[playerid][pEspalda] == 0)
			{
				PlayerInfo[playerid][pEspalda] = objeto;
				PlayerInfo[playerid][pEspaldaCant] = ObjetoInfo[objeto][Capacidad];
				format(string, sizeof(string), "* %s coge un/a %s de la armería.", GetPlayerNameRP(playerid), ObjetoInfo[objeto][NombreObjeto]);
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PonerObjeto(playerid, 3, objeto);
				return 1;
			}
			else if(PlayerInfo[playerid][pManoDer] == 0)
			{
				PlayerInfo[playerid][pManoDer] = objeto;
				PlayerInfo[playerid][pManoDerCant] = ObjetoInfo[objeto][Capacidad];
				format(string, sizeof(string), "* %s coge un/a %s de la armería.", GetPlayerNameRP(playerid), ObjetoInfo[objeto][NombreObjeto]);
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PonerObjeto(playerid, 1, objeto);
				return 1;
			}
			else if(PlayerInfo[playerid][pManoIzq] == 0)
			{
				PlayerInfo[playerid][pManoIzq] = objeto;
				PlayerInfo[playerid][pManoIzqCant] = ObjetoInfo[objeto][Capacidad];
				format(string, sizeof(string), "* %s coge un/a %s de la armería.", GetPlayerNameRP(playerid), ObjetoInfo[objeto][NombreObjeto]);
				ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
				PonerObjeto(playerid, 2, objeto);
				return 1;
			}
		}
		else //Dar otro objeto
		{
			for(new x=0; x<8; x++)
			{
				if(PlayerInfo[playerid][pCint][x] == 0)
				{
					PlayerInfo[playerid][pCint][x] = objeto;
					PlayerInfo[playerid][pCintCant][x] = ObjetoInfo[objeto][Capacidad];
					format(string, sizeof(string), "* %s coge un/a %s de la armería.", GetPlayerNameRP(playerid), ObjetoInfo[objeto][NombreObjeto]);
					ProxDetector(15.0, playerid, string, Morado,Morado,Morado,Morado,Morado);
					return 1;
				}
			}
		}
	}
	return 1;
}



public OnPlayerClickPlayer(playerid, clickedplayerid, source)
{
return 1;
}

public OnPlayerEditAttachedObject(playerid, response, index, modelid, boneid, Float:fOffsetX, Float:fOffsetY, Float:fOffsetZ, Float:fRotX, Float:fRotY, Float:fRotZ, Float:fScaleX, Float:fScaleY, Float:fScaleZ)
{
    if(response)
    {
		new string[258];
		format(string, sizeof(string), "OBJETO: %d, %f,%f,%f,%f,%f,%f", PlayerInfo[playerid][pManoIzq], fOffsetX, fOffsetY, fOffsetZ, fRotX, fRotY, fRotZ);
		SendClientMessage(playerid, Blanco, string);
		printf(string);
    }
    return 1;
}

public OnPlayerModelSelection(playerid, response, listid, modelid)
{
	if(listid == ropa)
	{
	    if(!response){return 1;}
	    if(!IsValidSkin(modelid)){return 1;}
	    PlayerInfo[playerid][pSkin] = modelid;
	    SetPlayerSkin(playerid, modelid);
	    GivePlayerMoneyAC(playerid, -100);
	    SendClientMessage(playerid,Verde,"Compraste tu nueva ropa por 100$");
	    return 1;
	}
	return 1;
}

public OnIncomingConnection(playerid, ip_address[], port)
{
	return 1;
}

public OnPlayerClickMap(playerid, Float:fX, Float:fY, Float:fZ)
{
	if(PlayerInfo[playerid][pAdmin] == 0)
	{
		new string[256];
		format(string, sizeof(string), "[ANTICHEAT] Es posible que '%s' (%d) haya usado hack de teleport por click en el mapa. Vigiladlo.", GetPlayerNameRP(playerid), playerid);
		SendAdminMessage(Aguamarina, string);
	}
	return 1;
}
//---------------------------------------------------------------------------------------------------------------
stock darCoche(tmpcar,Float:PosX,Float:PosY,Float:PosZ,playername[],color1=1,color2=2){
	new string[128];
    new Coche = CreateVehicle(datacar[tmpcar][dcIDModel], PosX, PosY, PosZ, 30.0, color1, color2, 3000000);
	CarInfo[Coche][cID] = Coche;
	CarInfo[Coche][cLlave] = CodigoLlave;
	CarInfo[Coche][cModelo] = datacar[tmpcar][dcIDModel];
	CarInfo[Coche][cPosX] = PosX;
	CarInfo[Coche][cPosY] = PosY;
	CarInfo[Coche][cPosZ] = PosZ;
	CarInfo[Coche][cZAngle] = 30.0;
	CarInfo[Coche][cColor1] = color1;
	CarInfo[Coche][cColor2] = color2;
	CarInfo[Coche][cComprado] = 1;
	format(CarInfo[Coche][cDueno], MAX_PLAYER_NAME, "%s", playername);
	format(CarInfo[Coche][cNombreModelo], MAX_PLAYER_NAME, "%s", datacar[tmpcar][dcNombre]);
	CarInfo[Coche][cValor] = datacar[tmpcar][dcPrecio];
	CarInfo[Coche][cGas] = 50;
	CarInfo[Coche][cMaxMaletero] = 7;

	new engine, lights, alarm, doors, bonnet, boot, objective;
	GetVehicleParamsEx(Coche, engine, lights, alarm, doors, bonnet, boot, objective);
	SetVehicleParamsEx(Coche, 0, 0, alarm, doors, bonnet, boot, objective);

	SetVehicleMatricula(Coche);

	format(string,sizeof(string),"INSERT INTO vehiculos (Llave, Modelo) VALUES ('%d','%d')",CarInfo[Coche][cLlave],CarInfo[Coche][cModelo]);
    mysql_query(1, string);

	new ccount;
	new sql[80], row[512];
    format(sql, sizeof(sql), "SELECT SQLID FROM vehiculos ORDER BY SQLID DESC");
	mysql_query(1, sql);
	mysql_store_result();
	mysql_fetch_row(row);
	ccount = strval(row);
	mysql_free_result();

	CarInfo[Coche][cSQLID] = ccount;

	SaveCar(Coche);

	CodigoLlave ++;
	TotalVeh ++;
	return 1;
}



stock getCocheServerID(VehicleID){
	new i;
	for(i=0;i<MAX_CAR_DATA;i++){
		if(datacar[i][dcIDModel]==VehicleID) return i;
	}
return -1;
}



//---------------------------------------------------------------------------------------------------------------
stock Kalex(playerid)
{
        PlayAudioStreamForPlayer(playerid,"http://vol10.music-bazaar.com/samples/vol10/520/520397/preview-76ec14e787.mp3.mp3");
		new titulo[200] = "#1: ¿Cuál sería un acto de PG?";
		ShowPlayerDialog(playerid, PREGUNTA1, DIALOG_STYLE_LIST, titulo, "A) Sacar un arma en vía pública\nB) Agredir a alguien en frente de la comisaría\nC) Caer desde una gran altura y no rolear ninguna lesión\nD) Todos se consideran PG", "Aceptar", "");
		Preguntas[playerid] = 1;
		Fallo[playerid] = 0;
    	return 1;
}

